/*! /*! eurostat-map v4.3.33 | 2026 Eurostat | EUPL License. See https://github.com/eurostat/eurostat-map/blob/master/LICENSE * / */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.eurostatmap=e():t.eurostatmap=e()}(self,()=>(()=>{var t={6:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* dim everything except the highlighted color group */\n.em-flow-container line.dimmed,\n.em-flow-lines line.dimmed,\n.em-flow-container path.em-flow-link.dimmed,\n.em-flow-lines path.em-flow-link.dimmed {\n  opacity: 0;\n  stroke-opacity: 0;\n}\n\n/* emphasize the matching ones */\n.em-flow-container line.highlighted,\n.em-flow-lines line.highlighted {\n  opacity: 1;\n   stroke-opacity: 1;\n}\n\n.em-flow-container path.em-flow-link.highlighted,\n.em-flow-lines path.em-flow-link.highlighted {\n  /* tapered polygons use FILL */\n  filter: brightness(1.05);\n  opacity: 1;\n  stroke-opacity: 1;\n}\n\n.em-legend-label.em-flow-legend-min-label,\n.em-legend-label.em-flow-legend-max-label {\n    font-size: 12px;\n    fill: #666;\n}\n\n /* DONUT TOOLTIP */\n.em-donut-tooltip-table {\n    border-collapse: collapse;\n    width: 100%;\n    max-width: 100%;\n    table-layout: fixed; /* required for ellipsis to work predictably */\n}\n\n.em-donut-tooltip-table td {\n    padding: 3px 0;\n    font-size: 12px;\n    vertical-align: middle;\n}\n\n.em-donut-tooltip-table td:last-child {\n    width: 32%;\n    text-align: right;\n    white-space: nowrap;\n}\n\n.em-donut-tooltip-table{\n  border-collapse:collapse;\n  width:100%;\n  max-width:100%;\n  table-layout:fixed;\n  border-spacing:0;\n  box-sizing:border-box;\n}\n\n.em-donut-tooltip-table td{\n  padding:2px 6px;\n  font-size:12px;\n  vertical-align:middle;\n  box-sizing:border-box;\n}\n\n.em-donut-tooltip-table td:last-child{\n  text-align:right;\n  white-space:nowrap;\n  padding-left:6px;\n}\n\n.em-donut-tooltip-table td:first-child{\n  padding-right:6px;\n  box-sizing:border-box;\n  min-width:0;\n}\n\n.em-donut-tooltip-label{\n  display:flex;\n  align-items:center;\n  gap:6px;\n  min-width:0;\n  overflow:hidden;\n  white-space:nowrap;\n}\n\n.em-donut-tooltip-colorchip{\n  width:10px;\n  height:10px;\n  border-radius:50%;\n  flex-shrink:0;\n  display:inline-block;\n  vertical-align:middle;\n}\n\n.em-tooltip-label-text{\n  overflow:hidden;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n  flex:1 1 auto;\n  min-width:0;\n  display:inline-block;\n  vertical-align:middle;\n}\n\n.em-donut-tooltip-section-header td{padding-top:6px;font-weight:600;color:#222}\n.em-donut-tooltip-row td{padding-top:2px}\n.em-donut-tooltip-total td{padding-top:6px;font-weight:700;border-top:1px solid #ddd}\n\n.em-tooltip-text{\n  max-width:320px;\n  box-sizing:border-box;\n  overflow:hidden;\n  padding:0;\n}\n\n /* END DONUT TOOLTIP */",""]);const s=o},56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},o=[],s=0;s<t.length;s++){var l=t[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,h="".concat(c," ").concat(u);a[c]=u+1;var f=n(h),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=i(d,r);r.byIndex=s,e.splice(s,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var a=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<a.length;o++){var s=n(a[o]);e[s].references--}for(var l=r(t,i),c=0;c<a.length;c++){var u=n(a[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}a=l}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},144:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* spinner overlay */\n#em-loading-overlay {\n    font-family: Arial, Helvetica, sans-serif;\n    position: absolute;\n    inset: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(255, 255, 255, 0.6);\n    z-index: 9999;\n    pointer-events: auto;\n}\n\n/* hidden state */\n#em-loading-overlay.is-hidden {\n    display: none;\n}\n\n/* center spinner */\n.em-loading-spinner {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    border: 4px solid rgba(0, 0, 0, 0.12);\n    border-top-color: rgba(0, 0, 0, 0.65);\n    animation: em-spinner-rotate 1s linear infinite;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n}\n\n/* label */\n#em-loading-overlay .em-loading-label {\n    margin-top: 8px;\n    font-size: 13px;\n    color: #222;\n    text-align: center;\n    font-weight: 500;\n}\n\n#em-loading-overlay .em-spinner-stack {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n@keyframes em-spinner-rotate {\n    to { transform: rotate(360deg); }\n}\n",""]);const s=o},172:t=>{t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},211:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var r=n(601),i=n.n(r),a=n(314),o=n.n(a),s=n(489),l=n(666),c=n(604),u=n(470),h=n(789),f=n(991),d=n(875),p=n(765),g=n(358),v=n(476),_=o()(i());_.i(s.A),_.i(l.A),_.i(c.A),_.i(u.A),_.i(h.A),_.i(f.A),_.i(d.A),_.i(p.A),_.i(g.A),_.i(v.A),_.push([t.id,"\n",""]);const m=_},262:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* Proportional symbol and pie styles */\n\n/*   muted country boundaries */\n.em--ps .em-cntbn {\n    stroke: grey;\n}\n\n/*   muted nuts boundaries */\n.em--ps .em-bn-1,\n.em--ps .em-bn-2,\n.em--ps .em-bn-3,\n.em--ps .em-nutsrg [lvl='3'],\n.em--ps .em-nutsrg [lvl='2'],\n.em--ps .em-nutsrg [lvl='1'],\n.em--ps .em-bn-co {\n    stroke-width: 0.07px;\n}\n\n/*  muted country fill */\n.em--ps .em-cntrg {\n    fill: #f2f2f2;\n}\n\n/*  regions without data input */\n.em--ps [ecl=\"ni\"] {\n    fill: #e9e9e9;\n}\n\n/* Hide non-nuts borders (country boundaries > that are 'other' and not coastal, not candidates, not eu and not efta) */\n/* .em--ps g#em-cntbn>.em-bn-oth:not(.em-bn-co):not(.em-bn-cc):not(.em-bn-eu):not(.em-bn-efta) {\n    stroke-width: 0px;\n} */\n\n/* Coastlines should not be drawn for choropleths, however for prop symbol maps with white regions they can be necessary */\n.em--ps .em-bn-co {\n    stroke: grey;\n    stroke-width: 0.2px;\n}",""]);const s=o},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,r,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},358:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,".em-minimap-outer-circle {\n      filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.3))\n          drop-shadow(0 0 12px rgba(0, 0, 0, 0.15));\n      opacity:0.5\n}\n\n.em-minimap-inner-circle {\n\n}\n",""]);const s=o},373:t=>{t.exports=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},429:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,'/*   muted country boundaries */\n.em--coxcomb .em-cntbn {\n    stroke: grey;\n    stroke-width: 0.25px;\n}\n\n/* Coastlines should not be drawn for choropleths, however for prop symbol maps with white regions they can be necessary */\n.em--ps .em-bn-co,\n.em--pie .em-bn-co {\n    stroke: grey;\n    stroke-width: 0.1px;\n}\n\n/*  regions without data input */\n.em--coxcomb [ecl="ni"] {\n    fill: #e9e9e9;\n}',""]);const s=o},470:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"#em-labels {\n    text-anchor: middle;\n    stroke-linejoin: round;\n    font-family: Arial, Helvetica, sans-serif;\n    dominant-baseline: central;\n    pointer-events: none;\n    paint-order: stroke;\n}\n\n.em-labels {\n    font-size: 12px;\n    fill: #000000;\n}\n\n.em-label {\n    font-size: 12px;\n    opacity: 0.8;\n}\n\n.em-label-shadow,\n.em-flow-label-shadow {\n    font-size: 12px;\n    stroke-width: 2px;\n    stroke: white;\n    opacity: 0.8;\n}\n\n.em-label-background {\n    fill: #ffffff;\n    opacity: 0.9;\n}\n\n.em-stat-label {\n    stroke: #111;\n    stroke-width: 1px;\n    stroke-opacity: 0.5\n}\n\n.em-stat-label-shadow {\n    stroke: white;\n    stroke-width: 3px;\n    stroke-opacity: 0.9\n        /* filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5)) */\n}\n\n.em-stat-label,\n.em-stat-label-shadow {\n    font-size: 13px;\n    opacity: 0.95;\n}\n\n.em-label-cc {\n    font-size: 12px;\n}\n\n.em-label-shadow-cc {\n    font-size: 12px;\n    stroke-width: 3px;\n}\n\n.em-label-countries {\n    font-size: 12px;\n}\n\n.em-label-shadow-countries {\n    font-size: 12px;\n    stroke-width: 3px;\n}\n\n.em-label-seas {\n    font-size: 9px;\n    fill: #003399;\n    stroke: #003399;\n    letter-spacing: 3px;\n}\n\n.em-label-shadow-seas {\n    font-size: 9px;\n    letter-spacing: 3px;\n    stroke-width: 3px;\n}\n\n.em-flow-labels {\n    text-anchor: middle;\n    stroke-linejoin: round;\n    font-family: Arial, Helvetica, sans-serif;\n    dominant-baseline: central;\n}\n\n.em-flow-label {\n    font-size: 13px;\n    fill: #333333;\n    font-weight: bold;\n    opacity: 0.9;\n}\n\n.em-flow-label-shadow {\n    font-size: 13px;\n    stroke-width: 3px;\n}",""]);const s=o},476:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,".em-placename {\n    text-anchor: start;\n}\n\n.em-placename-halo {\n    text-anchor: start;\n    fill:none;\n    stroke: white;\n    opacity:0.8;\n    stroke-linejoin: round;\n}",""]);const s=o},489:(t,e,n)=>{"use strict";n.d(e,{A:()=>p});var r=n(601),i=n.n(r),a=n(314),o=n.n(a),s=n(262),l=n(429),c=n(768),u=n(6),h=n(774),f=n(549),d=o()(i());d.i(s.A),d.i(l.A),d.i(c.A),d.i(u.A),d.i(h.A),d.i(f.A),d.push([t.id,"/* wrapper DOM */\n.em-map-wrapper {\n    position: relative;\n    display: inline-block;\n}\n\n.em-map-wrapper > svg {\n    display: block;\n}\n\n\n/* General text settings */\ntext {\n    pointer-events: none;\n}\n\na text {\n    pointer-events: all;\n}\n\n/* Main map */\n.em-map text,\n.em-legend text,\n.em-title,\n.em-subtitle,\n.em-footnote {\n    font-family: Arial, Helvetica, sans-serif;\n}\n\n.em-map.em-draggable g {\n    cursor: grab;\n}\n\n.em-map.em-dragging g {\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n}\n\n/* Coastal margin */\n#em-coast-margin {\n    filter: url(#em-coastal-blur);\n    stroke-linejoin: round;\n    stroke-linecap: round;\n    fill: none;\n    stroke-width: 5;\n    stroke: rgb(161, 198, 237);\n}\n\n/* Title and subtitle styling */\n.em-title,\n.em-inset-title {\n    fill: #4c4b4b;\n    stroke: none;\n}\n\n.em-title {\n    font-size: 21px;\n    font-weight: bold;\n}\n\n.em-inset-title {\n    font-size: 11px;\n}\n\n.em-subtitle,\n.em-inset-subtitle {\n    fill: #4c4b4b;\n    fill-opacity: 0.9;\n    stroke: none;\n    stroke-linejoin: round;\n    paint-order: stroke;\n}\n\n.em-subtitle {\n    font-size: 18px;\n    font-weight: 100;\n}\n\n.em-inset-subtitle {\n    font-size: 12px;\n}\n\n.em-source-pretext {\n    fill: #848280;\n    font-size: 11px;\n    transform: translate(-5px, -5px);\n}\n\n.em-source-dataset-link {\n    font-size: 11px;\n    fill: #0e47cb;\n    cursor: pointer !important;\n    text-decoration: underline;\n    transform: translate(-5px, -5px);\n}\n\n.em-source-dataset-link:hover {\n    fill: #082b7a;\n    cursor: pointer !important;\n    text-decoration: underline;\n}\n\n.em-frame {\n    stroke-width: 0;\n    stroke: grey;\n}\n\n.em-insets .em-frame {\n    /* this will give a frame to inset maps */\n    stroke: grey;\n    stroke-width: 0.3px !important;\n}\n\n.em-sea {\n    fill: white;\n    /* pointer-events: none; */\n}\n\n.em-scalebar-line {\n    stroke: #696969;\n    stroke-width: 0.8px;\n}\n\n.em-scalebar-label {\n    font-size: 9px;\n    text-anchor: middle;\n}\n\n/* Bottom text and symbol styling */\n.em-footnote {\n    fill: #848280;\n    pointer-events: all;\n    cursor: pointer !important;\n    font-size: 11px;\n    transform: translate(5px, -5px);\n}\n\n.em-footnote a {\n    fill: #0e47cb;\n    text-decoration: underline;\n}\n\n.em-footnote a:hover {\n    fill: #0a328e;\n}\n\n.em-centroid, .em-coxcomb g {\n    cursor: pointer !important;\n}\n\n/* Graticule styling */\n.em-graticule {\n    stroke: lightgray;\n    stroke-width: 1;\n}\n\n.em-flow-link {\n    cursor: pointer !important;\n}\n\n.em-flow-link-outline {\n    cursor: pointer !important;\n}\n\n.em-flow-labels {\n    font-size: 15px;\n    stroke-width: 1px;\n    fill: #696969;\n    pointer-events: none;\n}\n\n.em-flow-labels-halo {\n    font-size: 15px;\n    stroke-width: 2px;\n    fill: white;\n    pointer-events: none;\n}\n\n.em-grid-rect,\n.em-grid-hexagon {\n    stroke: white;\n}\n\n.em-flow-donuts {\n    cursor: pointer !important;\n}",""]);const p=d},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},546:t=>{function e(n,r,i,a){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}t.exports=e=function(t,n,r,i){function a(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):t[n]=r:(a("next",0),a("throw",1),a("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,i,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},549:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* Sparkline maps */\n\n/*   muted country boundaries */\n.em--spark .em-cntbn {\n    stroke: grey;\n    stroke-width: 0.2px;\n}\n\n/*   muted nuts boundaries */\n.em--spark .em-bn-1,\n.em--spark .em-bn-2,\n.em--spark .em-bn-3,\n.em--spark .em-nutsrg [lvl='3'],\n.em--spark .em-nutsrg [lvl='2'],\n.em--spark .em-nutsrg [lvl='1'],\n.em--spark .em-bn-co {\n    stroke-width: 0.07px;\n}\n\n/*  muted country fill */\n.em--spark .em-cntrg {\n    fill: #f2f2f2;\n}\n\n/*  nuts fill (regions with data) */\n.em--spark .em-nutsrg {\n    fill: #fffeef;\n    /*fill: #c9ffd524;  very light green */\n    /*fill: #fffee724;  very light yellow */\n}\n\n/*  regions without data input */\n.em--spark [ecl=\"ni\"] {\n    fill: #e9e9e9;\n}\n\n/* Hide non-nuts borders (country boundaries > that are 'other' and not coastal, not candidates, not eu and not efta) */\n.em--spark g#em-cntbn>.em-bn-oth:not(.em-bn-co):not(.em-bn-cc):not(.em-bn-eu):not(.em-bn-efta) {\n    stroke-width: 0px;\n}\n\n/* Coastlines should not be drawn for choropleths, however for prop symbol maps with white regions they can be necessary */\n.em--spark .em-bn-co {\n    stroke: grey;\n    stroke-width: 0.1px;\n}",""]);const s=o},579:(t,e,n)=>{var r=n(738).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},601:t=>{"use strict";t.exports=function(t){return t[1]}},604:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,".em-legend-background {\n    fill: white;\n    opacity: 0.7;\n    rx: 0;\n    ry: 0;\n    pointer-events: none;\n}\n\n /* titles */\n.em-legend-title {\n    font-weight: bold;\n    font-size: 15px;\n    fill: #696969;\n}\n\n.em-size-legend-title {\n    font-size: 15px;\n    fill: #666;\n}\n\n.em-color-legend-title {\n    font-size: 15px;\n    fill: #696969;\n}\n\n.em-width-legend-title {\n    font-size: 15px;\n    fill: #696969;\n}\n\n.em-bivariate-axis-title {\n    font-size: 15px;\n}\n\n.em-legend-subtitle {\n    font-size: 15px;\n    fill: #696969;\n    opacity: 0.8;\n}\n\n/* labels */\n.em-legend-label {\n    font-size: 14px;\n    stroke: none;\n    fill: #696969;\n    dominant-baseline: unset;\n}\n\n.em-bivariate-tick-label {\n    text-anchor: middle;\n    font-size: 12px;\n}\n\n.em-legend-label-max,\n.em-legend-label-min {\n    opacity: 0.8;\n}\n\n.em-legend-label-max:hover,\n.em-legend-label-min:hover,\n.em-legend-label-no-data:hover {\n    opacity: 1;\n    font-weight:bold;\n}\n\n.em-bivariate-nodata-label {\n    font-size: 14px;\n    dominant-baseline: middle;\n}\n\n.em-flow-width-horizontal-label {\n    text-anchor: middle;\n    font-size: 13px;\n    /* fill: #3a3a3a */\n}\n\n\n/* ticks */\n.em-legend-tick {\n    stroke: #696969;\n    stroke-width: 1;\n}\n\n.em-bivariate-tick {\n    stroke: #696969;\n    stroke-width: 1;\n}\n\n\n/* misc */\n.em-legend-separator {\n    stroke: white;\n    stroke-width: 1;\n}\n\n.em-legend-gradient {\n    cursor: pointer;\n}\n\n.em-bivariate-frame {\n    fill: none;\n    stroke: #696969;\n}\n\n.em-bivariate-nodata {\n    stroke: #696969;\n    stroke-width: 0.5;\n    cursor: pointer;\n}\n\n.em-bivariate-square,\n.em-legend-rect {\n    cursor: pointer;\n    /* stroke: white; */\n}\n\n.em-bivariate-square:hover,\n.em-legend-rect:hover {\n    stroke-width: 2;\n    stroke: red;\n}\n\n.em-pie-size-legend-line {\n    stroke-dasharray: 2;\n    stroke: grey;\n}\n\n.em-legend-diverging-line {\n    stroke: #696969;\n}\n\n.em-legend-histogram-bar {\n    cursor: pointer;\n}\n\n.em-month-label {\n    font-size: 13px;\n}\n\n.em-legend-month-segment {\n    stroke: #444;\n    stroke-width: 0.5;\n    opacity: 0.4;\n    fill: #ccc;\n    cursor: pointer;\n}\n\n.em-legend-background {\n    filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5));\n    opacity: 0.9;\n}\n",""]);const s=o},633:(t,e,n)=>{var r=n(172),i=n(993),a=n(869),o=n(887),s=n(791),l=n(373),c=n(579);function u(){"use strict";var e=i(),n=e.m(u),h=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function f(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))}var d={throw:1,return:2,break:3,continue:3};function p(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,d[t],e)},delegateYield:function(t,i,a){return e.resultName=i,n(r.d,c(t),a)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(t.exports=u=function(){return{wrap:function(t,n,r,i){return e.w(p(t),n,r,i&&i.reverse())},isGeneratorFunction:f,mark:e.m,awrap:function(t,e){return new r(t,e)},AsyncIterator:s,async:function(t,e,n,r,i){return(f(e)?o:a)(p(t),e,n,r,i)},keys:l,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},659:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},666:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,".em-tooltip {\n    font-family: Arial;\n    color: #383838;\n    max-width: 300px;\n    overflow: hidden;\n    background: white;\n    padding: 0px;\n    border: 0px;\n    border-radius: 0px;\n    box-shadow:\n        0px 4px 6px rgba(0, 0, 0, 0.1),\n        0px 1px 3px rgba(0, 0, 0, 0.08);\n    position: absolute;\n    font-family: Helvetica, Arial, sans-serif;\n    pointer-events: none;\n    z-index: 99999999;\n}\n.em-tooltip-text {\n    background: #ffffff;\n    padding: 4px;\n    font-size: 15px;\n}\n.em-tooltip-bar {\n    background: #515560;\n    color: #ffffff;\n    padding: 6px;\n    font-size: 16px;\n}\n\n.em-footnote-tooltip {\n    background: #ffffff;\n    padding: 4px;\n    font-size: 12px;\n}\n.em-tooltip-table {\n    margin: 0px;\n}\n.em-tooltip-piechart-container {\n    text-align: center;\n    fill: #383838;\n    display: flex;\n    justify-content: center;\n}\n.em-tooltip-breakdown {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n    font-size: 13px;\n    line-height: 1.2;\n    padding: 10px;\n    padding-top: 3px;\n}\n\n.em-breakdown-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.em-breakdown-color {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    display: inline-block;\n    margin-right: 6px;\n    flex-shrink: 0;\n}\n\n.em-breakdown-label {\n    flex: 1;\n    color: #333;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.em-breakdown-value {\n    margin-left: 8px;\n    font-weight: 500;\n    color: #222;\n    white-space: nowrap;\n}\n\n.em-breakdown-item.em-total {\n    border-top: 1px solid #ccc;\n    margin-top: 3px;\n    padding-top: 3px;\n    font-weight: bold;\n}\n\n.em-cx-breakdown-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.em-tooltip-cx {\n    line-height: 1;\n    padding: 0px;\n}\n\n.em-tooltip-cx .em-breakdown-value,\n.em-tooltip-cx .em-breakdown-label,\n.em-tooltip-cx .em-breakdown-color {\n    margin: 0;\n    font-size: 11px; /* Smaller text for compactness */\n    white-space: nowrap;\n}\n\n.em-tooltip-cx-table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n}\n\n.em-tooltip-cx-table th,\n.em-tooltip-cx-table td {\n    padding: 2px 4px; /* Minimal padding */\n    border: 1px solid #eee;\n}\n\n.em-tooltip-cx-table th {\n    background: #f7f7f7;\n    font-weight: bold;\n    font-size: 11px;\n}\n\n.em-tooltip-cx-table td {\n    font-size: 11px;\n    white-space: nowrap;\n}\n\n/* Make the Total value bold and right-aligned */\n.em-tooltip-cx-table .em-total td[colspan] {\n    text-align: right;\n    font-weight: bold !important;\n}\n\n/* Also make the inner number span bold */\n.em-tooltip-cx-table .em-total td[colspan] .em-breakdown-value {\n    font-weight: bold !important;\n}\n.em-total {\n    font-weight: bold !important;\n}\n",""]);const s=o},738:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},756:(t,e,n)=>{var r=n(633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},765:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=n(601),i=n.n(r),a=n(314),o=n.n(a),s=n(144),l=o()(i());l.i(s.A),l.push([t.id,".em-button {\n    width: 35px;\n    height: 35px;\n    user-select: none;\n    cursor: pointer;\n}\n\n.em-button rect {\n    fill: white;\n    stroke: #ccc;\n}\n\n.em-button rect:hover {\n    fill: lightgrey;\n}\n\n.em-button text {\n    text-anchor: middle;\n    font-size: 20px;\n    fill: #333333;\n}\n\n/* zoom  */\n.em-zoom-buttons {\n    transform: translate(94%, 10%);\n}\n\n/* insets */\n.em-insets-button {\n    transform: translate(94%, 2%);\n}\n\n.em-logo-group {\n    pointer-events: none;\n}",""]);const c=l},768:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/*   muted country fill */\n.em--alpha .em-cntrg,\n.em--alpha .em-cntrg {\n    fill: #f2f2f2;\n}\n\n/*   muted nuts fill */\n.em--alpha .em-nutsrg,\n.em--alpha .em-nutsrg {\n    fill: #fdfdfd;\n}\n\n/* Coastlines should not be drawn for choropleths, however for alpha maps with white regions they can be necessary */\n.em--alpha .em-bn-co {\n    stroke: grey;\n    stroke-width: 0.1px;\n}\n",""]);const s=o},774:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* Proportional pie chart maps */\n\n/*   muted country boundaries */\n.em--pie .em-cntbn {\n    stroke: grey;\n}\n\n/*   muted nuts boundaries */\n.em--pie .em-bn-1,\n.em--pie .em-bn-2,\n.em--pie .em-bn-3,\n.em--pie .em-nutsrg [lvl='3'],\n.em--pie .em-nutsrg [lvl='2'],\n.em--pie .em-nutsrg [lvl='1'],\n.em--pie .em-bn-co {\n    stroke-width: 0.07px;\n}\n\n/*  muted country fill */\n.em--pie .em-cntrg {\n    fill: #f2f2f2;\n}\n\n/*  nuts fill (regions with data) */\n.em--pie .em-nutsrg {\n    fill: #fffeef;\n}\n\n/*  regions without data input */\n.em--pie [ecl=\"ni\"] {\n    fill: #f2f2f2;\n}\n\n/* Hide non-nuts borders (country boundaries > that are 'other' and not coastal, not candidates, not eu and not efta) */\n.em--pie g#em-cntbn>.em-bn-oth:not(.em-bn-co):not(.em-bn-cc):not(.em-bn-eu):not(.em-bn-efta) {\n    stroke-width: 0px;\n}\n\n/* Coastlines should not be drawn for choropleths, however for prop symbol maps with white regions they can be necessary */\n.em--pie .em-bn-co {\n    stroke: grey;\n    stroke-width: 0.2px;\n}",""]);const s=o},789:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,".em-annotations {\n    /* pointer-events: none; */\n}\n",""]);const s=o},791:(t,e,n)=>{var r=n(172),i=n(546);t.exports=function t(e,n){function a(t,i,o,s){try{var l=e[t](i),c=l.value;return c instanceof r?n.resolve(c.v).then(function(t){a("next",t,o,s)},function(t){a("throw",t,o,s)}):n.resolve(c).then(function(t){l.value=t,o(l)},function(t){return a("throw",t,o,s)})}catch(t){s(t)}}var o;this.next||(i(t.prototype),i(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(t,e,r){function i(){return new n(function(e,n){a(t,r,e,n)})}return o=o?o.then(i,i):i()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},869:(t,e,n)=>{var r=n(887);t.exports=function(t,e,n,i,a){var o=r(t,e,n,i,a);return o.next().then(function(t){return t.done?t.value:o.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},875:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"#g_worldbn,\n.em-worldrg,\n.em-worldbn {\n    stroke-linecap: round;\n    stroke-linejoin: round;\n}\n\n.em-worldbn {\n    stroke: #000;\n    stroke-width: 0.2px;\n}\n\n.em-worldbn {\n    fill: none;\n}\n\n.em-worldrg {\n    fill: #efefef;\n    cursor: pointer;\n}\n\n.em-bn-d {\n    /* disputed */\n    stroke: #000;\n    stroke-width: 0.1;\n    opacity:0.9;\n    fill: none;\n}\n",""]);const s=o},887:(t,e,n)=>{var r=n(993),i=n(791);t.exports=function(t,e,n,a,o){return new i(r().w(t,e,n,a),o||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},991:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([t.id,"/* STYLING OF NUTS REGIONS AND BOUNDARIES */\n/* Default region fill */\n.em-cntrg,\n.em-nutsrg,\n.em-grid-cell {\n    fill: #e1e1e1;\n}\n\n.em-nutsrg,\n.em-cntrg,\n.em-grid-cell,\n#em-user-regions {\n    cursor: pointer !important;\n}\n\n/*  boundaries stroke-width */\n.em-bn-0 {\n    stroke: none;\n}\n.em-bn-1,\n.em-bn-2,\n.em-bn-3,\n/* when using MIXED NUTS levels, we add stroke to the regions, then show/hide those that have/dont have data */\n.em-nutsrg [lvl='3'],\n.em-nutsrg [lvl='2'],\n.em-nutsrg [lvl='1'],\n.em-bn-co {\n    stroke-width: 0.3;\n    stroke-opacity: 0.5;\n}\n\n/* all boudnaries and regions linecap/linejoin */\n#em-nutsbn,\n.em-cntbn,\n.em-bn-0,\n.em-bn-1,\n.em-bn-2,\n.em-bn-3,\n.em-kosovo-bn,\n.em-bn-co,\n.em-nutsrg [lvl='3'],\n.em-nutsrg [lvl='2'],\n.em-nutsrg [lvl='1'],\n.em-cntrg,\n.em-nutsrg,\n.em-grid-cell {\n    stroke-linecap: round;\n    stroke-linejoin: round;\n}\n\n/* national boundaries */\n.em-cntbn {\n    stroke: #1b1b1b;\n    stroke-width: 1px;\n    stroke-opacity: 0.9;\n}\n\n/* NUTS boundaries stroke color */\n.em-bn-1,\n.em-bn-2,\n.em-bn-3,\n.em-nutsrg [lvl='3'],\n.em-nutsrg [lvl='2'],\n.em-nutsrg [lvl='1'] {\n    stroke: #474747;\n}\n\n/* coastal boundaries */\n.em-bn-co {\n    stroke: white;\n}\n\n/* kosovo */\n.em-kosovo-bn {\n    stroke: #000;\n    stroke-width: 0.15;\n}\n\n/* dont fill certain elements */\n.em-frame,\n.em-graticule,\n.em-cntbn,\n.em-bn-0,\n.em-bn-1,\n.em-bn-2,\n.em-bn-3,\n.em-kosovo-bn,\n.em-bn-co {\n    fill: none;\n}\n\n/* Hide non-nuts borders (country boundaries > that are 'other' and not coastal, not candidates, not eu and not efta) */\n/* g#em-cntbn > .em-bn-oth:not(.em-bn-co):not(.em-bn-cc):not(.em-bn-eu):not(.em-bn-efta) {\n    stroke-width: 0px;\n} */\n",""]);const s=o},993:(t,e,n)=>{var r=n(546);function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,n,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function l(t,i,a,o){var s=i&&i.prototype instanceof u?i:u,l=Object.create(s.prototype);return r(l,"_invoke",function(t,r,i){var a,o,s,l=0,u=i||[],h=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,o=0,s=e,f.n=n,c}};function d(t,r){for(o=t,s=r,n=0;!h&&l&&!i&&n<u.length;n++){var i,a=u[n],d=f.p,p=a[2];t>3?(i=p===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=d&&((i=t<2&&d<a[1])?(o=0,f.v=r,f.n=a[1]):d<p&&(i=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,f.n=p,o=0))}if(i||t>1)return c;throw h=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&d(u,p),o=u,s=p;(n=o<2?e:s)||!h;){a||(o?o<3?(o>1&&(f.n=-1),d(o,s)):f.n=s:f.v=s);try{if(l=2,a){if(o||(i="next"),n=a[i]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,o<2&&(o=0)}else 1===o&&(n=a.return)&&n.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((n=(h=f.n<0)?s:t.call(r,f))!==c)break}catch(t){a=e,o=1,s=t}finally{l=1}}return{value:n,done:h}}}(t,a,o),!0),l}var c={};function u(){}function h(){}function f(){}n=Object.getPrototypeOf;var d=[][o]?n(n([][o]())):(r(n={},o,function(){return this}),n),p=f.prototype=u.prototype=Object.create(d);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,r(t,s,"GeneratorFunction")),t.prototype=Object.create(p),t}return h.prototype=f,r(p,"constructor",f),r(f,"constructor",h),h.displayName="GeneratorFunction",r(f,s,"GeneratorFunction"),r(p),r(p,s,"Generator"),r(p,o,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t.exports=i=function(){return{w:l,m:g}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>t+".eurostatmap.min.js",n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/build/",n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return(()=>{"use strict";n.r(r),n.d(r,{getDefaultLabels:()=>IR,getFillPatternDefinitionFun:()=>zR,getFillPatternDefinitionFunction:()=>DR,map:()=>OR,version:()=>GR});var t={};n.r(t),n.d(t,{av:()=>Au,r:()=>Pu,fu:()=>Du,S$:()=>Ou,qy:()=>Uu,Sl:()=>Iu,Pq:()=>Ru,JW:()=>Wu,Qq:()=>Nu,KZ:()=>zu,_n:()=>Bu});var e={};n.r(e),n.d(e,{Adder:()=>Jr,Delaunay:()=>ac,FormatSpecifier:()=>Dn,InternMap:()=>Qr,InternSet:()=>ti,Node:()=>Pv,Path:()=>Ws,Voronoi:()=>Ql,ZoomTransform:()=>vE,active:()=>$o,arc:()=>tS,area:()=>lS,areaRadial:()=>_S,ascending:()=>jt,autoType:()=>Rc,axisBottom:()=>ya,axisLeft:()=>ba,axisRight:()=>ma,axisTop:()=>_a,bin:()=>Mi,bisect:()=>ae,bisectCenter:()=>ie,bisectLeft:()=>re,bisectRight:()=>ne,bisector:()=>Qt,blob:()=>Au,blur:()=>Or,blur2:()=>Dr,blurImage:()=>zr,brush:()=>Ms,brushSelection:()=>bs,brushX:()=>xs,brushY:()=>ws,buffer:()=>Pu,chord:()=>Os,chordDirected:()=>zs,chordTranspose:()=>Ds,cluster:()=>Mv,color:()=>Oe,contourDensity:()=>Pl,contours:()=>wl,count:()=>Br,create:()=>AM,creator:()=>xt,cross:()=>Hr,csv:()=>Du,csvFormat:()=>Ec,csvFormatBody:()=>kc,csvFormatRow:()=>Tc,csvFormatRows:()=>Ac,csvFormatValue:()=>Pc,csvParse:()=>Sc,csvParseRows:()=>Cc,cubehelix:()=>fl,cumsum:()=>Yr,curveBasis:()=>sC,curveBasisClosed:()=>cC,curveBasisOpen:()=>hC,curveBumpX:()=>xS,curveBumpY:()=>wS,curveBundle:()=>dC,curveCardinal:()=>vC,curveCardinalClosed:()=>mC,curveCardinalOpen:()=>bC,curveCatmullRom:()=>MC,curveCatmullRomClosed:()=>CC,curveCatmullRomOpen:()=>kC,curveLinear:()=>iS,curveLinearClosed:()=>TC,curveMonotoneX:()=>IC,curveMonotoneY:()=>GC,curveNatural:()=>BC,curveStep:()=>WC,curveStepAfter:()=>HC,curveStepBefore:()=>qC,descending:()=>Kt,deviation:()=>$r,difference:()=>Zi,disjoint:()=>Ki,dispatch:()=>Ea,drag:()=>fc,dragDisable:()=>Fa,dragEnable:()=>Na,dsv:()=>Ou,dsvFormat:()=>wc,easeBack:()=>wu,easeBackIn:()=>bu,easeBackInOut:()=>wu,easeBackOut:()=>xu,easeBounce:()=>_u,easeBounceIn:()=>vu,easeBounceInOut:()=>mu,easeBounceOut:()=>_u,easeCircle:()=>au,easeCircleIn:()=>ru,easeCircleInOut:()=>au,easeCircleOut:()=>iu,easeCubic:()=>qo,easeCubicIn:()=>Uo,easeCubicInOut:()=>qo,easeCubicOut:()=>Wo,easeElastic:()=>Cu,easeElasticIn:()=>Su,easeElasticInOut:()=>Eu,easeElasticOut:()=>Cu,easeExp:()=>nu,easeExpIn:()=>tu,easeExpInOut:()=>nu,easeExpOut:()=>eu,easeLinear:()=>Bc,easePoly:()=>Vc,easePolyIn:()=>Hc,easePolyInOut:()=>Vc,easePolyOut:()=>Yc,easeQuad:()=>qc,easeQuadIn:()=>Uc,easeQuadInOut:()=>qc,easeQuadOut:()=>Wc,easeSin:()=>Kc,easeSinIn:()=>Jc,easeSinInOut:()=>Kc,easeSinOut:()=>Zc,every:()=>Hi,extent:()=>Xr,fcumsum:()=>Kr,filter:()=>Vi,flatGroup:()=>ci,flatRollup:()=>ui,forceCenter:()=>qu,forceCollide:()=>rh,forceLink:()=>oh,forceManyBody:()=>gh,forceRadial:()=>vh,forceSimulation:()=>ph,forceX:()=>_h,forceY:()=>mh,format:()=>Wn,formatDefaultLocale:()=>$n,formatLocale:()=>Vn,formatPrefix:()=>qn,formatSpecifier:()=>On,fsum:()=>Zr,geoAlbers:()=>Gg,geoAlbersUsa:()=>Rg,geoArea:()=>bf,geoAzimuthalEqualArea:()=>Wg,geoAzimuthalEqualAreaRaw:()=>Ug,geoAzimuthalEquidistant:()=>Hg,geoAzimuthalEquidistantRaw:()=>qg,geoBounds:()=>ed,geoCentroid:()=>dd,geoCircle:()=>Sd,geoClipAntimeridian:()=>Dd,geoClipCircle:()=>zd,geoClipExtent:()=>qd,geoClipRectangle:()=>Wd,geoConicConformal:()=>Zg,geoConicConformalRaw:()=>Jg,geoConicEqualArea:()=>Ig,geoConicEqualAreaRaw:()=>zg,geoConicEquidistant:()=>ev,geoConicEquidistantRaw:()=>tv,geoContains:()=>sp,geoDistance:()=>Kd,geoEqualEarth:()=>lv,geoEqualEarthRaw:()=>sv,geoEquirectangular:()=>Qg,geoEquirectangularRaw:()=>Kg,geoGnomonic:()=>uv,geoGnomonicRaw:()=>cv,geoGraticule:()=>up,geoGraticule10:()=>hp,geoIdentity:()=>hv,geoInterpolate:()=>fp,geoLength:()=>Xd,geoMercator:()=>Vg,geoMercatorRaw:()=>Yg,geoNaturalEarth1:()=>dv,geoNaturalEarth1Raw:()=>fv,geoOrthographic:()=>gv,geoOrthographicRaw:()=>pv,geoPath:()=>yg,geoProjection:()=>Lg,geoProjectionMutator:()=>Og,geoRotation:()=>xd,geoStereographic:()=>_v,geoStereographicRaw:()=>vv,geoStream:()=>Xh,geoTransform:()=>bg,geoTransverseMercator:()=>yv,geoTransverseMercatorRaw:()=>mv,gray:()=>_r,greatest:()=>$t,greatestIndex:()=>Ii,group:()=>oi,groupSort:()=>_i,groups:()=>si,hcl:()=>Er,hierarchy:()=>Cv,histogram:()=>Mi,hsl:()=>Ve,html:()=>Uu,image:()=>Iu,index:()=>di,indexes:()=>pi,interpolate:()=>xn,interpolateArray:()=>dn,interpolateBasis:()=>Qe,interpolateBasisClosed:()=>tn,interpolateBlues:()=>eM,interpolateBrBG:()=>gw,interpolateBuGn:()=>Lw,interpolateBuPu:()=>Dw,interpolateCividis:()=>fM,interpolateCool:()=>gM,interpolateCubehelix:()=>U_,interpolateCubehelixDefault:()=>dM,interpolateCubehelixLong:()=>W_,interpolateDate:()=>gn,interpolateDiscrete:()=>F_,interpolateGnBu:()=>Iw,interpolateGreens:()=>rM,interpolateGreys:()=>aM,interpolateHcl:()=>R_,interpolateHclLong:()=>j_,interpolateHsl:()=>z_,interpolateHslLong:()=>I_,interpolateHue:()=>N_,interpolateInferno:()=>EM,interpolateLab:()=>Tr,interpolateMagma:()=>CM,interpolateNumber:()=>vn,interpolateNumberArray:()=>hn,interpolateObject:()=>_n,interpolateOrRd:()=>Rw,interpolateOranges:()=>hM,interpolatePRGn:()=>_w,interpolatePiYG:()=>yw,interpolatePlasma:()=>kM,interpolatePuBu:()=>Ww,interpolatePuBuGn:()=>Bw,interpolatePuOr:()=>xw,interpolatePuRd:()=>Hw,interpolatePurples:()=>sM,interpolateRainbow:()=>_M,interpolateRdBu:()=>Mw,interpolateRdGy:()=>Cw,interpolateRdPu:()=>Vw,interpolateRdYlBu:()=>kw,interpolateRdYlGn:()=>Tw,interpolateReds:()=>cM,interpolateRgb:()=>sn,interpolateRgbBasis:()=>cn,interpolateRgbBasisClosed:()=>un,interpolateRound:()=>wn,interpolateSinebow:()=>xM,interpolateSpectral:()=>Fw,interpolateString:()=>bn,interpolateTransformCss:()=>_o,interpolateTransformSvg:()=>mo,interpolateTurbo:()=>wM,interpolateViridis:()=>SM,interpolateWarm:()=>pM,interpolateYlGn:()=>Xw,interpolateYlGnBu:()=>ar,interpolateYlOrBr:()=>Zw,interpolateYlOrRd:()=>Qw,interpolateZoom:()=>O_,interrupt:()=>uo,intersection:()=>Qi,interval:()=>dE,isoFormat:()=>uE,isoParse:()=>fE,json:()=>Ru,lab:()=>mr,lch:()=>Cr,least:()=>Di,leastIndex:()=>zi,line:()=>sS,lineRadial:()=>vS,link:()=>ES,linkHorizontal:()=>kS,linkRadial:()=>TS,linkVertical:()=>AS,local:()=>PM,map:()=>$i,matcher:()=>k,max:()=>It,maxIndex:()=>Gt,mean:()=>Ei,median:()=>ki,medianIndex:()=>Ai,merge:()=>Ti,min:()=>zt,minIndex:()=>Rt,mode:()=>Pi,namespace:()=>U,namespaces:()=>B,nice:()=>xi,now:()=>Ha,pack:()=>e_,packEnclose:()=>Rv,packSiblings:()=>Qv,pairs:()=>Fi,partition:()=>s_,path:()=>qs,pathRound:()=>Hs,permute:()=>Bt,pie:()=>hS,piecewise:()=>or,pointRadial:()=>mS,pointer:()=>Oa,pointers:()=>NM,polygonArea:()=>H_,polygonCentroid:()=>Y_,polygonContains:()=>Z_,polygonHull:()=>J_,polygonLength:()=>K_,precisionFixed:()=>Jn,precisionPrefix:()=>Gn,precisionRound:()=>Xn,quadtree:()=>Xu,quantile:()=>Xt,quantileIndex:()=>Zt,quantileSorted:()=>Jt,quantize:()=>q_,quickselect:()=>Ht,radialArea:()=>_S,radialLine:()=>vS,randomBates:()=>am,randomBernoulli:()=>lm,randomBeta:()=>hm,randomBinomial:()=>fm,randomCauchy:()=>pm,randomExponential:()=>om,randomGamma:()=>um,randomGeometric:()=>cm,randomInt:()=>em,randomIrwinHall:()=>im,randomLcg:()=>bm,randomLogNormal:()=>rm,randomLogistic:()=>gm,randomNormal:()=>nm,randomPareto:()=>sm,randomPoisson:()=>vm,randomUniform:()=>tm,randomWeibull:()=>dm,range:()=>Li,rank:()=>Oi,reduce:()=>Xi,reverse:()=>Ji,rgb:()=>Ge,ribbon:()=>nl,ribbonArrow:()=>rl,rollup:()=>hi,rollups:()=>fi,scaleBand:()=>Mm,scaleDiverging:()=>Kx,scaleDivergingLog:()=>Qx,scaleDivergingPow:()=>ew,scaleDivergingSqrt:()=>nw,scaleDivergingSymlog:()=>tw,scaleIdentity:()=>Em,scaleImplicit:()=>xm,scaleLinear:()=>Qn,scaleLog:()=>Dm,scaleOrdinal:()=>wm,scalePoint:()=>Cm,scalePow:()=>qm,scaleQuantile:()=>le,scaleQuantize:()=>tr,scaleRadial:()=>Vm,scaleSequential:()=>Hx,scaleSequentialLog:()=>Yx,scaleSequentialPow:()=>$x,scaleSequentialQuantile:()=>Jx,scaleSequentialSqrt:()=>Xx,scaleSequentialSymlog:()=>Vx,scaleSqrt:()=>Hm,scaleSymlog:()=>Rm,scaleThreshold:()=>er,scaleTime:()=>Bx,scaleUtc:()=>Ux,scan:()=>Gi,schemeAccent:()=>iw,schemeBlues:()=>tM,schemeBrBG:()=>pw,schemeBuGn:()=>Nw,schemeBuPu:()=>Ow,schemeCategory10:()=>rw,schemeDark2:()=>aw,schemeGnBu:()=>zw,schemeGreens:()=>nM,schemeGreys:()=>iM,schemeObservable10:()=>ow,schemeOrRd:()=>Gw,schemeOranges:()=>uM,schemePRGn:()=>vw,schemePaired:()=>sw,schemePastel1:()=>lw,schemePastel2:()=>cw,schemePiYG:()=>mw,schemePuBu:()=>Uw,schemePuBuGn:()=>jw,schemePuOr:()=>bw,schemePuRd:()=>qw,schemePurples:()=>oM,schemeRdBu:()=>ww,schemeRdGy:()=>Sw,schemeRdPu:()=>Yw,schemeRdYlBu:()=>Ew,schemeRdYlGn:()=>Aw,schemeReds:()=>lM,schemeSet1:()=>uw,schemeSet2:()=>hw,schemeSet3:()=>fw,schemeSpectral:()=>Pw,schemeTableau10:()=>dw,schemeYlGn:()=>$w,schemeYlGnBu:()=>ir,schemeYlOrBr:()=>Jw,schemeYlOrRd:()=>Kw,select:()=>Dt,selectAll:()=>LM,selection:()=>Ot,selector:()=>M,selectorAll:()=>E,shuffle:()=>Ri,shuffler:()=>ji,some:()=>Yi,sort:()=>Ut,stack:()=>JC,stackOffsetDiverging:()=>KC,stackOffsetExpand:()=>ZC,stackOffsetNone:()=>YC,stackOffsetSilhouette:()=>QC,stackOffsetWiggle:()=>tE,stackOrderAppearance:()=>eE,stackOrderAscending:()=>rE,stackOrderDescending:()=>aE,stackOrderInsideOut:()=>oE,stackOrderNone:()=>VC,stackOrderReverse:()=>sE,stratify:()=>d_,style:()=>Q,subset:()=>ra,sum:()=>Bi,superset:()=>ea,svg:()=>Wu,symbol:()=>rC,symbolAsterisk:()=>FS,symbolCircle:()=>NS,symbolCross:()=>LS,symbolDiamond:()=>zS,symbolDiamond2:()=>IS,symbolPlus:()=>GS,symbolSquare:()=>RS,symbolSquare2:()=>jS,symbolStar:()=>qS,symbolTimes:()=>tC,symbolTriangle:()=>YS,symbolTriangle2:()=>$S,symbolWye:()=>QS,symbolX:()=>tC,symbols:()=>eC,symbolsFill:()=>eC,symbolsStroke:()=>nC,text:()=>Nu,thresholdFreedmanDiaconis:()=>Si,thresholdScott:()=>Ci,thresholdSturges:()=>wi,tickFormat:()=>Zn,tickIncrement:()=>pe,tickStep:()=>ge,ticks:()=>de,timeDay:()=>vy,timeDays:()=>_y,timeFormat:()=>vb,timeFormatDefaultLocale:()=>Ix,timeFormatLocale:()=>pb,timeFriday:()=>Ay,timeFridays:()=>Dy,timeHour:()=>fy,timeHours:()=>dy,timeInterval:()=>ry,timeMillisecond:()=>iy,timeMilliseconds:()=>ay,timeMinute:()=>ly,timeMinutes:()=>cy,timeMonday:()=>Sy,timeMondays:()=>Fy,timeMonth:()=>Ky,timeMonths:()=>Qy,timeParse:()=>_b,timeSaturday:()=>Ty,timeSaturdays:()=>zy,timeSecond:()=>oy,timeSeconds:()=>sy,timeSunday:()=>My,timeSundays:()=>Py,timeThursday:()=>ky,timeThursdays:()=>Oy,timeTickInterval:()=>ub,timeTicks:()=>cb,timeTuesday:()=>Cy,timeTuesdays:()=>Ny,timeWednesday:()=>Ey,timeWednesdays:()=>Ly,timeWeek:()=>My,timeWeeks:()=>Py,timeYear:()=>nb,timeYears:()=>rb,timeout:()=>Qa,timer:()=>$a,timerFlush:()=>Xa,transition:()=>Ro,transpose:()=>Ui,tree:()=>w_,treemap:()=>k_,treemapBinary:()=>A_,treemapDice:()=>o_,treemapResquarify:()=>P_,treemapSlice:()=>M_,treemapSliceDice:()=>T_,treemapSquarify:()=>E_,tsv:()=>zu,tsvFormat:()=>Oc,tsvFormatBody:()=>Dc,tsvFormatRow:()=>Ic,tsvFormatRows:()=>zc,tsvFormatValue:()=>Gc,tsvParse:()=>Nc,tsvParseRows:()=>Lc,union:()=>ia,unixDay:()=>by,unixDays:()=>xy,utcDay:()=>my,utcDays:()=>yy,utcFormat:()=>mb,utcFriday:()=>Wy,utcFridays:()=>Jy,utcHour:()=>py,utcHours:()=>gy,utcMillisecond:()=>iy,utcMilliseconds:()=>ay,utcMinute:()=>uy,utcMinutes:()=>hy,utcMonday:()=>Ry,utcMondays:()=>Yy,utcMonth:()=>tb,utcMonths:()=>eb,utcParse:()=>yb,utcSaturday:()=>qy,utcSaturdays:()=>Zy,utcSecond:()=>oy,utcSeconds:()=>sy,utcSunday:()=>Gy,utcSundays:()=>Hy,utcThursday:()=>Uy,utcThursdays:()=>Xy,utcTickInterval:()=>lb,utcTicks:()=>sb,utcTuesday:()=>jy,utcTuesdays:()=>Vy,utcWednesday:()=>By,utcWednesdays:()=>$y,utcWeek:()=>Gy,utcWeeks:()=>Hy,utcYear:()=>ib,utcYears:()=>ab,variance:()=>Vr,window:()=>X,xml:()=>Bu,zip:()=>qi,zoom:()=>kE,zoomIdentity:()=>_E,zoomTransform:()=>mE});var i=n(72),a=n.n(i),o=n(825),s=n.n(o),l=n(659),c=n.n(l),u=n(56),h=n.n(u),f=n(540),d=n.n(f),p=n(113),g=n.n(p),v=n(211),_={};_.styleTagTransform=g(),_.setAttributes=h(),_.insert=c().bind(null,"head"),_.domAPI=s(),_.insertStyleElement=d();a()(v.A,_);v.A&&v.A.locals&&v.A.locals;function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){}function M(t){return null==t?w:function(){return this.querySelector(t)}}function S(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function C(){return[]}function E(t){return null==t?C:function(){return this.querySelectorAll(t)}}function k(t){return function(){return this.matches(t)}}function A(t){return function(e){return e.matches(t)}}var T=Array.prototype.find;function P(){return this.firstElementChild}var F=Array.prototype.filter;function N(){return Array.from(this.children)}function L(t){return new Array(t.length)}function O(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function D(t,e,n,r,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new O(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function z(t,e,n,r,i,a,o){var s,l,c,u=new Map,h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(d[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new O(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function I(t){return t.__data__}function G(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function R(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}O.prototype={constructor:O,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var j="http://www.w3.org/1999/xhtml";const B={svg:"http://www.w3.org/2000/svg",xhtml:j,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),B.hasOwnProperty(e)?{space:B[e],local:t}:t}function W(t){return function(){this.removeAttribute(t)}}function q(t){return function(){this.removeAttributeNS(t.space,t.local)}}function H(t,e){return function(){this.setAttribute(t,e)}}function Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function V(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function X(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function J(t){return function(){this.style.removeProperty(t)}}function Z(t,e,n){return function(){this.style.setProperty(t,e,n)}}function K(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Q(t,e){return t.style.getPropertyValue(e)||X(t).getComputedStyle(t,null).getPropertyValue(e)}function tt(t){return function(){delete this[t]}}function et(t,e){return function(){this[t]=e}}function nt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function rt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new at(t)}function at(t){this._node=t,this._names=rt(t.getAttribute("class")||"")}function ot(t,e){for(var n=it(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function st(t,e){for(var n=it(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function lt(t){return function(){ot(this,t)}}function ct(t){return function(){st(this,t)}}function ut(t,e){return function(){(e.apply(this,arguments)?ot:st)(this,t)}}function ht(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function dt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function vt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function _t(){this.nextSibling&&this.parentNode.appendChild(this)}function mt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===j&&e.documentElement.namespaceURI===j?e.createElement(t):e.createElementNS(n,t)}}function bt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xt(t){var e=U(t);return(e.local?bt:yt)(e)}function wt(){return null}function Mt(){var t=this.parentNode;t&&t.removeChild(this)}function St(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ct(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Et(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function kt(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function At(t,e,n){var r=X(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Tt(t,e){return function(){return At(this,t,e)}}function Pt(t,e){return function(){return At(this,t,e.apply(this,arguments))}}at.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ft=[null];function Nt(t,e){this._groups=t,this._parents=e}function Lt(){return new Nt([[document.documentElement]],Ft)}Nt.prototype=Lt.prototype={constructor:Nt,select:function(t){"function"!=typeof t&&(t=M(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Nt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return S(t.apply(this,arguments))}}(t):E(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new Nt(r,i)},selectChild:function(t){return this.select(null==t?P:function(t){return function(){return T.call(this.children,t)}}("function"==typeof t?t:A(t)))},selectChildren:function(t){return this.selectAll(null==t?N:function(t){return function(){return F.call(this.children,t)}}("function"==typeof t?t:A(t)))},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Nt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,I);var n=e?z:D,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d=G(t.call(u,u&&u.__data__,c,r)),p=d.length,g=s[c]=new Array(p),v=o[c]=new Array(p);n(u,h,g,v,l[c]=new Array(f),d,e);for(var _,m,y=0,b=0;y<p;++y)if(_=g[y]){for(y>=b&&(b=y+1);!(m=v[b])&&++b<p;);_._next=m||null}}return(o=new Nt(o,r))._enter=s,o._exit=l,o},enter:function(){return new Nt(this._enter||this._groups.map(L),this._parents)},exit:function(){return new Nt(this._exit||this._groups.map(L),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],h=r[l],f=u.length,d=s[l]=new Array(f),p=0;p<f;++p)(c=u[p]||h[p])&&(d[p]=c);for(;l<i;++l)s[l]=n[l];return new Nt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=R);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new Nt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=U(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?q:W:"function"==typeof e?n.local?$:V:n.local?Y:H)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?J:"function"==typeof e?K:Z)(t,e,null==n?"":n)):Q(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?tt:"function"==typeof e?nt:et)(t,e)):this.node()[t]},classed:function(t,e){var n=rt(t+"");if(arguments.length<2){for(var r=it(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ut:e?lt:ct)(n,e))},text:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?dt:ft)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?vt:gt)(t)):this.node().innerHTML},raise:function(){return this.each(_t)},lower:function(){return this.each(mt)},append:function(t){var e="function"==typeof t?t:xt(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:xt(t),r=null==e?wt:"function"==typeof e?e:M(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Mt)},clone:function(t){return this.select(t?Ct:St)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?kt:Et,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Pt:Tt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const Ot=Lt;function Dt(t){return"string"==typeof t?new Nt([[document.querySelector(t)]],[document.documentElement]):new Nt([[t]],Ft)}function zt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function It(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Gt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let a of t)null!=(a=e(a,++i,t))&&(n<a||void 0===n&&a>=a)&&(n=a,r=i);return r}function Rt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let a of t)null!=(a=e(a,++i,t))&&(n>a||void 0===n&&a>=a)&&(n=a,r=i);return r}function jt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bt(t,e){return Array.from(e,e=>t[e])}function Ut(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,(t,e)=>e);return e.length>1?(e=e.map(e=>t.map(e)),r.sort((t,n)=>{for(const r of e){const e=qt(r[t],r[n]);if(e)return e}})):(n=t.map(n),r.sort((t,e)=>qt(n[t],n[e]))),Bt(t,r)}return t.sort(Wt(n))}function Wt(t=jt){if(t===jt)return qt;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function qt(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function Ht(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?qt:Wt(i);r>n;){if(r-n>600){const a=r-n+1,o=e-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);Ht(t,e,Math.max(n,Math.floor(e-o*l/a+c)),Math.min(r,Math.floor(e+(a-o)*l/a+c)),i)}const a=t[e];let o=n,s=r;for(Yt(t,n,e),i(t[r],a)>0&&Yt(t,n,r);o<s;){for(Yt(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}0===i(t[n],a)?Yt(t,n,s):(++s,Yt(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Yt(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Vt(t){return null===t?NaN:+t}function $t(t,e=jt){let n,r=!1;if(1===e.length){let i;for(const a of t){const t=e(a);(r?jt(t,i)>0:0===jt(t,t))&&(n=a,i=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function Xt(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return zt(t);if(e>=1)return It(t);var r,i=(r-1)*e,a=Math.floor(i),o=It(Ht(t,a).subarray(0,a+1));return o+(zt(t.subarray(a+1))-o)*(i-a)}}function Jt(t,e,n=Vt){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function Zt(t,e,n=Vt){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(e,r)=>Vt(n(t[r],r,t))),e<=0)return Rt(r);if(e>=1)return Gt(r);var r,i=Uint32Array.from(t,(t,e)=>e),a=r.length-1,o=Math.floor(a*e);return Ht(i,o,0,a,(t,e)=>qt(r[t],r[e])),(o=$t(i.subarray(0,o+1),t=>r[t]))>=0?o:-1}}function Kt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qt(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=jt,n=(e,n)=>jt(t(e),n),r=(e,n)=>t(e)-n):(e=t===jt||t===Kt?t:te,n=t,r=t),{left:i,center:function(t,e,n=0,a=t.length){const o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function te(){return 0}const ee=Qt(jt),ne=ee.right,re=ee.left,ie=Qt(Vt).center,ae=ne;function oe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function se(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}function le(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=Jt(e,t/i);return a}function a(e){return null==e||isNaN(e=+e)?t:n[ae(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(jt),i()},a.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return le().domain(e).range(n).unknown(t)},oe.apply(a,arguments)}const ce=Math.sqrt(50),ue=Math.sqrt(10),he=Math.sqrt(2);function fe(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ce?10:a>=ue?5:a>=he?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?fe(t,e,2*n):[s,l,c]}function de(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,a,o]=r?fe(e,t,n):fe(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let t=0;t<s;++t)l[t]=(a-t)/-o;else for(let t=0;t<s;++t)l[t]=(a-t)*o;else if(o<0)for(let t=0;t<s;++t)l[t]=(i+t)/-o;else for(let t=0;t<s;++t)l[t]=(i+t)*o;return l}function pe(t,e,n){return fe(t=+t,e=+e,n=+n)[2]}function ge(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?pe(e,t,n):pe(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ve(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function me(){}var ye=.7,be=1/ye,xe="\\s*([+-]?\\d+)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Se=/^#([0-9a-f]{3,8})$/,Ce=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Ee=new RegExp(`^rgb\\(${Me},${Me},${Me}\\)$`),ke=new RegExp(`^rgba\\(${xe},${xe},${xe},${we}\\)$`),Ae=new RegExp(`^rgba\\(${Me},${Me},${Me},${we}\\)$`),Te=new RegExp(`^hsl\\(${we},${Me},${Me}\\)$`),Pe=new RegExp(`^hsla\\(${we},${Me},${Me},${we}\\)$`),Fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ne(){return this.rgb().formatHex()}function Le(){return this.rgb().formatRgb()}function Oe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Se.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?De(e):3===n?new Re(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ze(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ce.exec(t))?new Re(e[1],e[2],e[3],1):(e=Ee.exec(t))?new Re(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ke.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=Ae.exec(t))?ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Te.exec(t))?He(e[1],e[2]/100,e[3]/100,1):(e=Pe.exec(t))?He(e[1],e[2]/100,e[3]/100,e[4]):Fe.hasOwnProperty(t)?De(Fe[t]):"transparent"===t?new Re(NaN,NaN,NaN,0):null}function De(t){return new Re(t>>16&255,t>>8&255,255&t,1)}function ze(t,e,n,r){return r<=0&&(t=e=n=NaN),new Re(t,e,n,r)}function Ie(t){return t instanceof me||(t=Oe(t)),t?new Re((t=t.rgb()).r,t.g,t.b,t.opacity):new Re}function Ge(t,e,n,r){return 1===arguments.length?Ie(t):new Re(t,e,n,null==r?1:r)}function Re(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function je(){return`#${qe(this.r)}${qe(this.g)}${qe(this.b)}`}function Be(){const t=Ue(this.opacity);return`${1===t?"rgb(":"rgba("}${We(this.r)}, ${We(this.g)}, ${We(this.b)}${1===t?")":`, ${t})`}`}function Ue(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function We(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qe(t){return((t=We(t))<16?"0":"")+t.toString(16)}function He(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $e(t,e,n,r)}function Ye(t){if(t instanceof $e)return new $e(t.h,t.s,t.l,t.opacity);if(t instanceof me||(t=Oe(t)),!t)return new $e;if(t instanceof $e)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new $e(o,s,l,t.opacity)}function Ve(t,e,n,r){return 1===arguments.length?Ye(t):new $e(t,e,n,null==r?1:r)}function $e(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Xe(t){return(t=(t||0)%360)<0?t+360:t}function Je(t){return Math.max(0,Math.min(1,t||0))}function Ze(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ke(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Qe(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return Ke((n-r/e)*e,o,i,a,s)}}function tn(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return Ke((n-r/e)*e,i,a,o,s)}}ve(me,Oe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ne,formatHex:Ne,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ye(this).formatHsl()},formatRgb:Le,toString:Le}),ve(Re,Ge,_e(me,{brighter(t){return t=null==t?be:Math.pow(be,t),new Re(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ye:Math.pow(ye,t),new Re(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Re(We(this.r),We(this.g),We(this.b),Ue(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:je,formatHex:je,formatHex8:function(){return`#${qe(this.r)}${qe(this.g)}${qe(this.b)}${qe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Be,toString:Be})),ve($e,Ve,_e(me,{brighter(t){return t=null==t?be:Math.pow(be,t),new $e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ye:Math.pow(ye,t),new $e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Re(Ze(t>=240?t-240:t+120,i,r),Ze(t,i,r),Ze(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $e(Xe(this.h),Je(this.s),Je(this.l),Ue(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ue(this.opacity);return`${1===t?"hsl(":"hsla("}${Xe(this.h)}, ${100*Je(this.s)}%, ${100*Je(this.l)}%${1===t?")":`, ${t})`}`}}));const en=t=>()=>t;function nn(t,e){return function(n){return t+n*e}}function rn(t,e){var n=e-t;return n?nn(t,n>180||n<-180?n-360*Math.round(n/360):n):en(isNaN(t)?e:t)}function an(t){return 1===(t=+t)?on:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):en(isNaN(e)?n:e)}}function on(t,e){var n=e-t;return n?nn(t,n):en(isNaN(t)?e:t)}const sn=function t(e){var n=an(e);function r(t,e){var r=n((t=Ge(t)).r,(e=Ge(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=on(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function ln(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ge(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var cn=ln(Qe),un=ln(tn);function hn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function fn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dn(t,e){return(fn(e)?hn:pn)(t,e)}function pn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=xn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function gn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _n(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=xn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yn=new RegExp(mn.source,"g");function bn(t,e){var n,r,i,a=mn.lastIndex=yn.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=mn.exec(t))&&(r=yn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:vn(n,r)})),a=yn.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function xn(t,e){var n,r=typeof e;return null==e||"boolean"===r?en(e):("number"===r?vn:"string"===r?(n=Oe(e))?(e=n,sn):bn:e instanceof Oe?sn:e instanceof Date?gn:fn(e)?hn:Array.isArray(e)?pn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?_n:vn)(t,e)}function wn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Mn(t){return+t}var Sn=[0,1];function Cn(t){return t}function En(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function kn(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=En(i,r),a=n(o,a)):(r=En(r,i),a=n(a,o)),function(t){return a(r(t))}}function An(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=En(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=ae(t,e,1,r)-1;return a[n](i[n](e))}}function Tn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Pn(){var t,e,n,r,i,a,o=Sn,s=Sn,l=xn,c=Cn;function u(){var t=Math.min(o.length,s.length);return c!==Cn&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?An:kn,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=r(s,o.map(t),vn)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Mn),u()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=wn,u()},h.clamp=function(t){return arguments.length?(c=!!t||Cn,u()):c!==Cn},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Fn(){return Pn()(Cn,Cn)}var Nn,Ln=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function On(t){if(!(e=Ln.exec(t)))throw new Error("invalid format: "+t);var e;return new Dn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Dn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function zn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function In(t){return(t=zn(Math.abs(t)))?t[1]:NaN}function Gn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(In(e)/3)))-In(Math.abs(t)))}function Rn(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}On.prototype=Dn.prototype,Dn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const jn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Rn(100*t,e),r:Rn,s:function(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Nn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+zn(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Bn(t){return t}var Un,Wn,qn,Hn=Array.prototype.map,Yn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Vn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Bn:(e=Hn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Bn:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Hn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=On(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,_=t.trim,m=t.type;"n"===m?(g=!0,m="g"):jn[m]||(void 0===v&&(v=12),_=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?a:/[%p]/.test(m)?l:"",x=jn[m],w=/[defgprs%]/.test(m);function M(t){var i,a,l,f=y,M=b;if("c"===m)M=x(t)+M,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),v),_&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0===+t&&"+"!==h&&(S=!1),f=(S?"("===h?h:c:"-"===h||"("===h?"":h)+f,M=("s"===m?Yn[8+Nn/3]:"")+M+(S&&"("===h?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){M=(46===l?o+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var C=f.length+t.length+M.length,E=C<p?new Array(p-C+1).join(e):"";switch(g&&d&&(t=r(E+t,E.length?p-M.length:1/0),E=""),n){case"<":t=f+t+M+E;break;case"=":t=f+E+t+M;break;case"^":t=E.slice(0,C=E.length>>1)+f+t+M+E.slice(C);break;default:t=E+f+t+M}return s(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var n=h(((t=On(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(In(e)/3))),i=Math.pow(10,-r),a=Yn[8+r/3];return function(t){return n(i*t)+a}}}}function $n(t){return Un=Vn(t),Wn=Un.format,qn=Un.formatPrefix,Un}function Xn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,In(e)-In(t))+1}function Jn(t){return Math.max(0,-In(Math.abs(t)))}function Zn(t,e,n,r){var i,a=ge(t,e,n);switch((r=On(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Gn(a,o))||(r.precision=i),qn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Xn(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Jn(a))||(r.precision=i-2*("%"===r.type))}return Wn(r)}function Kn(t){var e=t.domain;return t.ticks=function(t){var n=e();return de(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Zn(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=pe(l,c,n))===r)return a[o]=l,a[s]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Qn(){var t=Fn();return t.copy=function(){return Tn(t,Qn())},oe.apply(t,arguments),Kn(t)}function tr(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return null!=e&&e<=e?a[ae(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Array.from(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return tr().domain([e,n]).range(a).unknown(t)},oe.apply(Kn(o),arguments)}function er(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[ae(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return er().domain(e).range(n).unknown(t)},oe.apply(i,arguments)}function nr(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}$n({thousands:",",grouping:[3],currency:["$",""]});const rr=t=>cn(t[t.length-1]);var ir=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(nr);const ar=rr(ir);function or(t,e){void 0===e&&(e=t,t=xn);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}const sr=Math.PI/180,lr=180/Math.PI,cr=.96422,ur=1,hr=.82521,fr=4/29,dr=6/29,pr=3*dr*dr,gr=dr*dr*dr;function vr(t){if(t instanceof yr)return new yr(t.l,t.a,t.b,t.opacity);if(t instanceof kr)return Ar(t);t instanceof Re||(t=Ie(t));var e,n,r=Mr(t.r),i=Mr(t.g),a=Mr(t.b),o=br((.2225045*r+.7168786*i+.0606169*a)/ur);return r===i&&i===a?e=n=o:(e=br((.4360747*r+.3850649*i+.1430804*a)/cr),n=br((.0139322*r+.0971045*i+.7141733*a)/hr)),new yr(116*o-16,500*(e-o),200*(o-n),t.opacity)}function _r(t,e){return new yr(t,0,0,null==e?1:e)}function mr(t,e,n,r){return 1===arguments.length?vr(t):new yr(t,e,n,null==r?1:r)}function yr(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function br(t){return t>gr?Math.pow(t,1/3):t/pr+fr}function xr(t){return t>dr?t*t*t:pr*(t-fr)}function wr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Mr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Sr(t){if(t instanceof kr)return new kr(t.h,t.c,t.l,t.opacity);if(t instanceof yr||(t=vr(t)),0===t.a&&0===t.b)return new kr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*lr;return new kr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Cr(t,e,n,r){return 1===arguments.length?Sr(t):new kr(n,e,t,null==r?1:r)}function Er(t,e,n,r){return 1===arguments.length?Sr(t):new kr(t,e,n,null==r?1:r)}function kr(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ar(t){if(isNaN(t.h))return new yr(t.l,0,0,t.opacity);var e=t.h*sr;return new yr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Tr(t,e){var n=on((t=mr(t)).l,(e=mr(e)).l),r=on(t.a,e.a),i=on(t.b,e.b),a=on(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function Pr(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Fr(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Pr(a,r,i,o,s,"next",t)}function s(t){Pr(a,r,i,o,s,"throw",t)}o(void 0)})}}ve(yr,mr,_e(me,{brighter(t){return new yr(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new yr(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Re(wr(3.1338561*(e=cr*xr(e))-1.6168667*(t=ur*xr(t))-.4906146*(n=hr*xr(n))),wr(-.9787684*e+1.9161415*t+.033454*n),wr(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ve(kr,Er,_e(me,{brighter(t){return new kr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new kr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Ar(this).rgb()}}));var Nr=n(756),Lr=n.n(Nr);function Or(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=jr(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const Dr=Ir(jr),zr=Ir(function(t){const e=jr(t);return(t,n,r,i,a)=>{e(t,n,(r<<=2)+0,(i<<=2)+0,a<<=2),e(t,n,r+1,i+1,a),e(t,n,r+2,i+2,a),e(t,n,r+3,i+3,a)}});function Ir(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(void 0!==o?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),c=i.slice();return s&&l?(Gr(s,c,i,a,o),Gr(s,i,c,a,o),Gr(s,c,i,a,o),Rr(l,i,c,a,o),Rr(l,c,i,a,o),Rr(l,i,c,a,o)):s?(Gr(s,i,c,a,o),Gr(s,c,i,a,o),Gr(s,i,c,a,o)):l&&(Rr(l,i,c,a,o),Rr(l,c,i,a,o),Rr(l,i,c,a,o)),e}}function Gr(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function Rr(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function jr(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let t=i,e=i+l;t<e;t+=o)s+=r[Math.min(a,t)];for(let t=i,c=a;t<=c;t+=o)s+=r[Math.min(a,t+l)],n[t]=s/e,s-=r[Math.max(i,t-l)]}}(t);const n=t-e,r=2*t+1;return(t,i,a,o,s)=>{if(!((o-=s)>=a))return;let l=e*i[a];const c=s*e,u=c+s;for(let t=a,e=a+c;t<e;t+=s)l+=i[Math.min(o,t)];for(let e=a,h=o;e<=h;e+=s)l+=i[Math.min(o,e+c)],t[e]=(l+n*(i[Math.max(a,e-u)]+i[Math.min(o,e+u)]))/r,l-=i[Math.max(a,e-c)]}}function Br(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function Ur(t){return 0|t.length}function Wr(t){return!(t>0)}function qr(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function Hr(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(qr)).map(Ur),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(Wr))return a;for(;;){a.push(i.map((e,n)=>t[n][e]));let o=r;for(;++i[o]===n[o];){if(0===o)return e?a.map(e):a;i[o--]=0}}}function Yr(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function Vr(t,e){let n,r=0,i=0,a=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,a+=n*(e-i));else{let o=-1;for(let s of t)null!=(s=e(s,++o,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}function $r(t,e){const n=Vr(t,e);return n?Math.sqrt(n):n}function Xr(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Jr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,a=0;if(i>0){for(a=t[--i];i>0&&(e=a,n=t[--i],a=e+n,r=n-(a-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=a+n,n==e-a&&(a=e))}return a}}function Zr(t,e){const n=new Jr;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function Kr(t,e){const n=new Jr;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class Qr extends Map{constructor(t,e=ii){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ei(this,t))}has(t){return super.has(ei(this,t))}set(t,e){return super.set(ni(this,t),e)}delete(t){return super.delete(ri(this,t))}}class ti extends Set{constructor(t,e=ii){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(ei(this,t))}add(t){return super.add(ni(this,t))}delete(t){return super.delete(ri(this,t))}}function ei({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ni({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ri({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ii(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ai(t){return t}function oi(t,...e){return vi(t,ai,ai,e)}function si(t,...e){return vi(t,Array.from,ai,e)}function li(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(t=>t.pop().map(([e,n])=>[...t,e,n]));return t}function ci(t,...e){return li(si(t,...e),e)}function ui(t,e,...n){return li(fi(t,e,...n),n)}function hi(t,e,...n){return vi(t,ai,e,n)}function fi(t,e,...n){return vi(t,Array.from,e,n)}function di(t,...e){return vi(t,ai,gi,e)}function pi(t,...e){return vi(t,Array.from,gi,e)}function gi(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function vi(t,e,n,r){return function t(i,a){if(a>=r.length)return n(i);const o=new Qr,s=r[a++];let l=-1;for(const t of i){const e=s(t,++l,i),n=o.get(e);n?n.push(t):o.set(e,[t])}for(const[e,n]of o)o.set(e,t(n,a));return e(o)}(t,0)}function _i(t,e,n){return(2!==e.length?Ut(hi(t,e,n),([t,e],[n,r])=>jt(e,r)||jt(t,n)):Ut(oi(t,n),([t,n],[r,i])=>e(n,i)||jt(t,r))).map(([t])=>t)}var mi=Array.prototype,yi=mi.slice;mi.map;function bi(t){return()=>t}function xi(t,e,n){let r;for(;;){const i=pe(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function wi(t){return Math.max(1,Math.ceil(Math.log(Br(t))/Math.LN2)+1)}function Mi(){var t=ai,e=Xr,n=wi;function r(r){Array.isArray(r)||(r=Array.from(r));var i,a,o,s=r.length,l=new Array(s);for(i=0;i<s;++i)l[i]=t(r[i],i,r);var c=e(l),u=c[0],h=c[1],f=n(l,u,h);if(!Array.isArray(f)){const t=h,n=+f;if(e===Xr&&([u,h]=xi(u,h,n)),(f=de(u,h,n))[0]<=u&&(o=pe(u,h,n)),f[f.length-1]>=h)if(t>=h&&e===Xr){const t=pe(u,h,n);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else f.pop()}for(var d=f.length,p=0,g=d;f[p]<=u;)++p;for(;f[g-1]>h;)--g;(p||g<d)&&(f=f.slice(p,g),d=g-p);var v,_=new Array(d+1);for(i=0;i<=d;++i)(v=_[i]=[]).x0=i>0?f[i-1]:u,v.x1=i<d?f[i]:h;if(isFinite(o)){if(o>0)for(i=0;i<s;++i)null!=(a=l[i])&&u<=a&&a<=h&&_[Math.min(d,Math.floor((a-u)/o))].push(r[i]);else if(o<0)for(i=0;i<s;++i)if(null!=(a=l[i])&&u<=a&&a<=h){const t=Math.floor((u-a)*o);_[Math.min(d,t+(f[t]<=a))].push(r[i])}}else for(i=0;i<s;++i)null!=(a=l[i])&&u<=a&&a<=h&&_[ae(f,a,0,d)].push(r[i]);return _}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:bi(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:bi([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:bi(Array.isArray(t)?yi.call(t):t),r):n},r}function Si(t,e,n){const r=Br(t),i=Xt(t,.75)-Xt(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Ci(t,e,n){const r=Br(t),i=$r(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Ei(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function ki(t,e){return Xt(t,.5,e)}function Ai(t,e){return Zt(t,.5,e)}function Ti(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Pi(t,e){const n=new Qr;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function Fi(t,e=Ni){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function Ni(t,e){return[t,e]}function Li(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Oi(t,e=jt){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=jt);const i=(t,r)=>e(n[t],n[r]);let a,o;return t=Uint32Array.from(n,(t,e)=>e),t.sort(e===jt?(t,e)=>qt(n[t],n[e]):Wt(i)),t.forEach((t,e)=>{const n=i(t,void 0===a?t:a);n>=0?((void 0===a||n>0)&&(a=t,o=e),r[t]=o):r[t]=NaN}),r}function Di(t,e=jt){let n,r=!1;if(1===e.length){let i;for(const a of t){const t=e(a);(r?jt(t,i)<0:0===jt(t,t))&&(n=a,i=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n}function zi(t,e=jt){if(1===e.length)return Rt(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?0===e(a,a):e(a,n)<0)&&(n=a,r=i);return r}function Ii(t,e=jt){if(1===e.length)return Gt(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?0===e(a,a):e(a,n)>0)&&(n=a,r=i);return r}function Gi(t,e){const n=zi(t,e);return n<0?void 0:n}const Ri=ji(Math.random);function ji(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,a=e[i+n];e[i+n]=e[r+n],e[r+n]=a}return e}}function Bi(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Ui(t){if(!(i=t.length))return[];for(var e=-1,n=zt(t,Wi),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function Wi(t){return t.length}function qi(){return Ui(arguments)}function Hi(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Yi(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Vi(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function $i(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function Xi(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++o}for(;({done:i,value:a}=r.next()),!i;)n=e(n,a,++o,t);return n}function Ji(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Zi(t,...e){t=new ti(t);for(const n of e)for(const e of n)t.delete(e);return t}function Ki(t,e){const n=e[Symbol.iterator](),r=new ti;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Qi(t,...e){t=new ti(t),e=e.map(ta);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function ta(t){return t instanceof ti?t:new ti(t)}function ea(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=na(t);if(r.has(e))continue;let i,a;for(;({value:i,done:a}=n.next());){if(a)return!1;const t=na(i);if(r.add(t),Object.is(e,t))break}}return!0}function na(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ra(t,e){return ea(e,t)}function ia(...t){const e=new ti;for(const n of t)for(const t of n)e.add(t);return e}function aa(t){return t}var oa=1,sa=2,la=3,ca=4,ua=1e-6;function ha(t){return"translate("+t+",0)"}function fa(t){return"translate(0,"+t+")"}function da(t){return e=>+t(e)}function pa(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ga(){return!this.__axis}function va(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===oa||t===ca?-1:1,u=t===ca||t===sa?"x":"y",h=t===oa||t===la?ha:fa;function f(f){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):aa:i,g=Math.max(a,0)+s,v=e.range(),_=+v[0]+l,m=+v[v.length-1]+l,y=(e.bandwidth?pa:da)(e.copy(),l),b=f.selection?f.selection():f,x=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(d,e).order(),M=w.exit(),S=w.enter().append("g").attr("class","tick"),C=w.select("line"),E=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(S),C=C.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),E=E.merge(S.append("text").attr("fill","currentColor").attr(u,c*g).attr("dy",t===oa?"0em":t===la?"0.71em":"0.32em")),f!==b&&(x=x.transition(f),w=w.transition(f),C=C.transition(f),E=E.transition(f),M=M.transition(f).attr("opacity",ua).attr("transform",function(t){return isFinite(t=y(t))?h(t+l):this.getAttribute("transform")}),S.attr("opacity",ua).attr("transform",function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:y(t))+l)})),M.remove(),x.attr("d",t===ca||t===sa?o?"M"+c*o+","+_+"H"+l+"V"+m+"H"+c*o:"M"+l+","+_+"V"+m:o?"M"+_+","+c*o+"V"+l+"H"+m+"V"+c*o:"M"+_+","+l+"H"+m),w.attr("opacity",1).attr("transform",function(t){return h(y(t)+l)}),C.attr(u+"2",c*a),E.attr(u,c*g).text(p),b.filter(ga).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===sa?"start":t===ca?"end":"middle"),b.each(function(){this.__axis=y})}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(l=+t,f):l},f}function _a(t){return va(oa,t)}function ma(t){return va(sa,t)}function ya(t){return va(la,t)}function ba(t){return va(ca,t)}var xa={value:()=>{}};function wa(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ma(r)}function Ma(t){this._=t}function Sa(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ca(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=xa,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ma.prototype=wa.prototype={constructor:Ma,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=Ca(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Ca(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=Sa(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ma(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};const Ea=wa,ka={passive:!1},Aa={capture:!0,passive:!1};function Ta(t){t.stopImmediatePropagation()}function Pa(t){t.preventDefault(),t.stopImmediatePropagation()}function Fa(t){var e=t.document.documentElement,n=Dt(t).on("dragstart.drag",Pa,Aa);"onselectstart"in e?n.on("selectstart.drag",Pa,Aa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Na(t,e){var n=t.document.documentElement,r=Dt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Pa,Aa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function La(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Oa(t,e){if(t=La(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var Da,za,Ia=0,Ga=0,Ra=0,ja=0,Ba=0,Ua=0,Wa="object"==typeof performance&&performance.now?performance:Date,qa="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ha(){return Ba||(qa(Ya),Ba=Wa.now()+Ua)}function Ya(){Ba=0}function Va(){this._call=this._time=this._next=null}function $a(t,e,n){var r=new Va;return r.restart(t,e,n),r}function Xa(){Ha(),++Ia;for(var t,e=Da;e;)(t=Ba-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ia}function Ja(){Ba=(ja=Wa.now())+Ua,Ia=Ga=0;try{Xa()}finally{Ia=0,function(){var t,e,n=Da,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Da=e);za=t,Ka(r)}(),Ba=0}}function Za(){var t=Wa.now(),e=t-ja;e>1e3&&(Ua-=e,ja=t)}function Ka(t){Ia||(Ga&&(Ga=clearTimeout(Ga)),t-Ba>24?(t<1/0&&(Ga=setTimeout(Ja,t-Wa.now()-Ua)),Ra&&(Ra=clearInterval(Ra))):(Ra||(ja=Wa.now(),Ra=setInterval(Za,1e3)),Ia=1,qa(Ja)))}function Qa(t,e,n){var r=new Va;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}Va.prototype=$a.prototype={constructor:Va,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ha():+n)+(null==e?0:+e),this._next||za===this||(za?za._next=this:Da=this,za=this),this._call=t,this._time=n,Ka()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ka())}};var to=Ea("start","end","cancel","interrupt"),eo=[],no=1,ro=2,io=5,ao=6;function oo(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=no,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var c,u,h,f;if(n.state!==no)return l();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return Qa(o);4===f.state?(f.state=ao,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=ao,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Qa(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=ro,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ro){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=io,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===io&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=ao,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=$a(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:to,tween:eo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function so(t,e){var n=co(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function lo(t,e){var n=co(t,e);if(n.state>3)throw new Error("too late; already running");return n}function co(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function uo(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>ro&&n.state<io,n.state=ao,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}var ho,fo=180/Math.PI,po={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function go(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*fo,skewX:Math.atan(l)*fo,scaleX:o,scaleY:s}}function vo(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:vn(t,i)},{i:l-2,x:vn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,l),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:vn(t,n)},{i:s-2,x:vn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var _o=vo(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?po:go(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),mo=vo(function(t){return null==t?po:(ho||(ho=document.createElementNS("http://www.w3.org/2000/svg","g")),ho.setAttribute("transform",t),(t=ho.transform.baseVal.consolidate())?go((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):po)},", ",")",")");function yo(t,e){var n,r;return function(){var i=lo(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function bo(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=lo(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function xo(t,e,n){var r=t._id;return t.each(function(){var t=lo(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return co(t,r).value[e]}}function wo(t,e){var n;return("number"==typeof e?vn:e instanceof Oe?sn:(n=Oe(e))?(e=n,sn):bn)(t,e)}function Mo(t){return function(){this.removeAttribute(t)}}function So(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Co(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Eo(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function ko(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttribute(t)}}function Ao(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function To(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Po(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Fo(t,e){return function(){so(this,t).delay=+e.apply(this,arguments)}}function No(t,e){return e=+e,function(){so(this,t).delay=e}}function Lo(t,e){return function(){lo(this,t).duration=+e.apply(this,arguments)}}function Oo(t,e){return e=+e,function(){lo(this,t).duration=e}}var Do=Ot.prototype.constructor;function zo(t){return function(){this.style.removeProperty(t)}}var Io=0;function Go(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ro(t){return Ot().transition(t)}function jo(){return++Io}var Bo=Ot.prototype;function Uo(t){return t*t*t}function Wo(t){return--t*t*t+1}function qo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Go.prototype=Ro.prototype={constructor:Go,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=M(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,h=a[o]=new Array(u),f=0;f<u;++f)(s=c[f])&&(l=t.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,oo(h[f],e,n,f,h,co(s,n)));return new Go(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=E(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var f,d=t.call(l,l.__data__,h,c),p=co(l,n),g=0,v=d.length;g<v;++g)(f=d[g])&&oo(f,e,n,g,d,p);a.push(d),o.push(l)}return new Go(a,o,e,n)},selectChild:Bo.selectChild,selectChildren:Bo.selectChildren,filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Go(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=e[s],u=n[s],h=c.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;s<r;++s)o[s]=e[s];return new Go(o,this._parents,this._name,this._id)},selection:function(){return new Do(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=jo(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=co(o,e);oo(o,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Go(r,this._parents,t,n)},call:Bo.call,nodes:Bo.nodes,node:Bo.node,size:Bo.size,empty:Bo.empty,each:Bo.each,on:function(t,e){var n=this._id;return arguments.length<2?co(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?so:lo;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=U(t),r="transform"===n?mo:wo;return this.attrTween(t,"function"==typeof e?(n.local?Ao:ko)(n,r,xo(this,"attr."+t,e)):null==e?(n.local?So:Mo)(n):(n.local?Eo:Co)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=U(t);return this.tween(n,(r.local?To:Po)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?_o:wo;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Q(this,t),o=(this.style.removeProperty(t),Q(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,zo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Q(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Q(this,t)),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}(t,r,xo(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=lo(this,t),c=l.on,u=null==l.value[o]?a||(a=zo(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Q(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(xo(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=co(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?yo:bo)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fo:No)(e,t)):co(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Lo:Oo)(e,t)):co(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){lo(this,t).ease=e}}(e,t)):co(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;lo(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){0===--i&&a()}};n.each(function(){var n=lo(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}),0===i&&a()})},[Symbol.iterator]:Bo[Symbol.iterator]};var Ho={time:null,delay:0,duration:250,ease:qo};function Yo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Ot.prototype.interrupt=function(t){return this.each(function(){uo(this,t)})},Ot.prototype.transition=function(t){var e,n;t instanceof Go?(e=t._id,t=t._name):(e=jo(),(n=Ho).time=Ha(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&oo(o,t,e,c,s,n||Yo(o,e));return new Go(r,this._parents,t,e)};var Vo=[null];function $o(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>no&&n.name===e)return new Go([[t]],Vo,e,+r);return null}const Xo=t=>()=>t;function Jo(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Zo(t){t.preventDefault(),t.stopImmediatePropagation()}var Ko={name:"drag"},Qo={name:"space"},ts={name:"handle"},es={name:"center"};const{abs:ns,max:rs,min:is}=Math;function as(t){return[+t[0],+t[1]]}function os(t){return[as(t[0]),as(t[1])]}var ss={name:"x",handles:["w","e"].map(gs),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ls={name:"y",handles:["n","s"].map(gs),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},cs={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gs),input:function(t){return null==t?null:os(t)},output:function(t){return t}},us={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hs={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},fs={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ds={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ps={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gs(t){return{type:t}}function vs(t){return!t.ctrlKey&&!t.button}function _s(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ms(){return navigator.maxTouchPoints||"ontouchstart"in this}function ys(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function bs(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function xs(){return Ss(ss)}function ws(){return Ss(ls)}function Ms(){return Ss(cs)}function Ss(t){var e,n=_s,r=vs,i=ms,a=!0,o=Ea("start","brush","end"),s=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([gs("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",us.overlay).merge(n).each(function(){var t=ys(this).extent;Dt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([gs("selection")]).enter().append("rect").attr("class","selection").attr("cursor",us.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return us[t.type]}),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Dt(this),e=ys(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new h(t,e,n):r}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,o,s,l,h,f,d,p,g,v,_,m=this,y=n.target.__data__.type,b="selection"===(a&&n.metaKey?y="overlay":y)?Ko:a&&n.altKey?es:ts,x=t===ls?null:ds[y],w=t===ss?null:ps[y],M=ys(m),S=M.extent,C=M.selection,E=S[0][0],k=S[0][1],A=S[1][0],T=S[1][1],P=0,F=0,N=x&&w&&a&&n.shiftKey,L=Array.from(n.touches||[n],t=>{const e=t.identifier;return(t=Oa(t,m)).point0=t.slice(),t.identifier=e,t});uo(m);var O=u(m,arguments,!0).beforestart();if("overlay"===y){C&&(g=!0);const e=[L[0],L[1]||L[0]];M.selection=C=[[i=t===ls?E:is(e[0][0],e[1][0]),s=t===ss?k:is(e[0][1],e[1][1])],[h=t===ls?A:rs(e[0][0],e[1][0]),d=t===ss?T:rs(e[0][1],e[1][1])]],L.length>1&&R(n)}else i=C[0][0],s=C[0][1],h=C[1][0],d=C[1][1];o=i,l=s,f=h,p=d;var D=Dt(m).attr("pointer-events","none"),z=D.selectAll(".overlay").attr("cursor",us[y]);if(n.touches)O.moved=G,O.ended=j;else{var I=Dt(n.view).on("mousemove.brush",G,!0).on("mouseup.brush",j,!0);a&&I.on("keydown.brush",function(t){switch(t.keyCode){case 16:N=x&&w;break;case 18:b===ts&&(x&&(h=f-P*x,i=o+P*x),w&&(d=p-F*w,s=l+F*w),b=es,R(t));break;case 32:b!==ts&&b!==es||(x<0?h=f-P:x>0&&(i=o-P),w<0?d=p-F:w>0&&(s=l-F),b=Qo,z.attr("cursor",us.selection),R(t));break;default:return}Zo(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:N&&(v=_=N=!1,R(t));break;case 18:b===es&&(x<0?h=f:x>0&&(i=o),w<0?d=p:w>0&&(s=l),b=ts,R(t));break;case 32:b===Qo&&(t.altKey?(x&&(h=f-P*x,i=o+P*x),w&&(d=p-F*w,s=l+F*w),b=es):(x<0?h=f:x>0&&(i=o),w<0?d=p:w>0&&(s=l),b=ts),z.attr("cursor",us[y]),R(t));break;default:return}Zo(t)},!0),Fa(n.view)}c.call(m),O.start(n,b.name)}function G(t){for(const e of t.changedTouches||[t])for(const t of L)t.identifier===e.identifier&&(t.cur=Oa(e,m));if(N&&!v&&!_&&1===L.length){const t=L[0];ns(t.cur[0]-t[0])>ns(t.cur[1]-t[1])?_=!0:v=!0}for(const t of L)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,Zo(t),R(t)}function R(t){const e=L[0],n=e.point0;var r;switch(P=e[0]-n[0],F=e[1]-n[1],b){case Qo:case Ko:x&&(P=rs(E-i,is(A-h,P)),o=i+P,f=h+P),w&&(F=rs(k-s,is(T-d,F)),l=s+F,p=d+F);break;case ts:L[1]?(x&&(o=rs(E,is(A,L[0][0])),f=rs(E,is(A,L[1][0])),x=1),w&&(l=rs(k,is(T,L[0][1])),p=rs(k,is(T,L[1][1])),w=1)):(x<0?(P=rs(E-i,is(A-i,P)),o=i+P,f=h):x>0&&(P=rs(E-h,is(A-h,P)),o=i,f=h+P),w<0?(F=rs(k-s,is(T-s,F)),l=s+F,p=d):w>0&&(F=rs(k-d,is(T-d,F)),l=s,p=d+F));break;case es:x&&(o=rs(E,is(A,i-P*x)),f=rs(E,is(A,h+P*x))),w&&(l=rs(k,is(T,s-F*w)),p=rs(k,is(T,d+F*w)))}f<o&&(x*=-1,r=i,i=h,h=r,r=o,o=f,f=r,y in hs&&z.attr("cursor",us[y=hs[y]])),p<l&&(w*=-1,r=s,s=d,d=r,r=l,l=p,p=r,y in fs&&z.attr("cursor",us[y=fs[y]])),M.selection&&(C=M.selection),v&&(o=C[0][0],f=C[1][0]),_&&(l=C[0][1],p=C[1][1]),C[0][0]===o&&C[0][1]===l&&C[1][0]===f&&C[1][1]===p||(M.selection=[[o,l],[f,p]],c.call(m),O.brush(t,b.name))}function j(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else Na(t.view,g),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),z.attr("cursor",us.overlay),M.selection&&(C=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(C)&&(M.selection=null,c.call(m)),O.end(t,b.name)}}function d(t){u(this,arguments).moved(t)}function p(t){u(this,arguments).ended(t)}function g(){var e=this.__brush||{selection:null};return e.extent=os(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,r){e.tween?e.on("start.brush",function(t){u(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){u(this,arguments).end(t)}).tween("brush",function(){var e=this,r=e.__brush,i=u(e,arguments),a=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=xn(a,o);function l(t){r.selection=1===t&&null===o?null:s(t),c.call(e),i.brush()}return null!==a&&null!==o?l:l(1)}):e.each(function(){var e=this,i=arguments,a=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,a.extent),s=u(e,i).beforestart();uo(e),a.selection=null===o?null:o,c.call(e),s.start(r).brush(r).end(r)})},l.clear=function(t,e){l.move(t,null,e)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Dt(this.that).datum();o.call(e,this.that,new Jo(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:Xo(os(t)),l):n},l.filter=function(t){return arguments.length?(r="function"==typeof t?t:Xo(!!t),l):r},l.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Xo(!!t),l):i},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(a=!!t,l):a},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}var Cs=Math.abs,Es=Math.cos,ks=Math.sin,As=Math.PI,Ts=As/2,Ps=2*As,Fs=Math.max,Ns=1e-12;function Ls(t,e){return Array.from({length:e-t},(e,n)=>t+n)}function Os(){return Is(!1,!1)}function Ds(){return Is(!1,!0)}function zs(){return Is(!0,!1)}function Is(t,e){var n=0,r=null,i=null,a=null;function o(o){var s,l=o.length,c=new Array(l),u=Ls(0,l),h=new Array(l*l),f=new Array(l),d=0;o=Float64Array.from({length:l*l},e?(t,e)=>o[e%l][e/l|0]:(t,e)=>o[e/l|0][e%l]);for(let e=0;e<l;++e){let n=0;for(let r=0;r<l;++r)n+=o[e*l+r]+t*o[r*l+e];d+=c[e]=n}s=(d=Fs(0,Ps-n*l)/d)?n:Ps/l;{let e=0;r&&u.sort((t,e)=>r(c[t],c[e]));for(const n of u){const r=e;if(t){const t=Ls(1+~l,l).filter(t=>t<0?o[~t*l+n]:o[n*l+t]);i&&t.sort((t,e)=>i(t<0?-o[~t*l+n]:o[n*l+t],e<0?-o[~e*l+n]:o[n*l+e]));for(const r of t)if(r<0){(h[~r*l+n]||(h[~r*l+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=o[~r*l+n]*d,value:o[~r*l+n]}}else{(h[n*l+r]||(h[n*l+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]}}f[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}else{const t=Ls(0,l).filter(t=>o[n*l+t]||o[t*l+n]);i&&t.sort((t,e)=>i(o[n*l+t],o[n*l+e]));for(const r of t){let t;if(n<r?(t=h[n*l+r]||(h[n*l+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]}):(t=h[r*l+n]||(h[r*l+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}f[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}e+=s}}return(h=Object.values(h)).groups=f,a?h.sort(a):h}return o.padAngle=function(t){return arguments.length?(n=Fs(0,t),o):n},o.sortGroups=function(t){return arguments.length?(r=t,o):r},o.sortSubgroups=function(t){return arguments.length?(i=t,o):i},o.sortChords=function(t){return arguments.length?(null==t?a=null:(a=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(t))._=t,o):a&&a._},o}const Gs=Math.PI,Rs=2*Gs,js=1e-6,Bs=Rs-js;function Us(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Ws{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Us:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Us;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>js)if(Math.abs(u*s-l*c)>js&&i){let f=n-a,d=r-o,p=s*s+l*l,g=f*f+d*d,v=Math.sqrt(p),_=Math.sqrt(h),m=i*Math.tan((Gs-Math.acos((p+h-g)/(2*v*_)))/2),y=m/_,b=m/v;Math.abs(y-1)>js&&this._append`L${t+y*c},${e+y*u}`,this._append`A${i},${i},0,0,${+(u*f>c*d)},${this._x1=t+b*s},${this._y1=e+b*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,h=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>js||Math.abs(this._y1-c)>js)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%Rs+Rs),h>Bs?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>js&&this._append`A${n},${n},0,${+(h>=Gs)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function qs(){return new Ws}function Hs(t=3){return new Ws(+t)}qs.prototype=Ws.prototype;var Ys=Array.prototype.slice;function Vs(t){return function(){return t}}function $s(t){return t.source}function Xs(t){return t.target}function Js(t){return t.radius}function Zs(t){return t.startAngle}function Ks(t){return t.endAngle}function Qs(){return 0}function tl(){return 10}function el(t){var e=$s,n=Xs,r=Js,i=Js,a=Zs,o=Ks,s=Qs,l=null;function c(){var c,u=e.apply(this,arguments),h=n.apply(this,arguments),f=s.apply(this,arguments)/2,d=Ys.call(arguments),p=+r.apply(this,(d[0]=u,d)),g=a.apply(this,d)-Ts,v=o.apply(this,d)-Ts,_=+i.apply(this,(d[0]=h,d)),m=a.apply(this,d)-Ts,y=o.apply(this,d)-Ts;if(l||(l=c=qs()),f>Ns&&(Cs(v-g)>2*f+Ns?v>g?(g+=f,v-=f):(g-=f,v+=f):g=v=(g+v)/2,Cs(y-m)>2*f+Ns?y>m?(m+=f,y-=f):(m-=f,y+=f):m=y=(m+y)/2),l.moveTo(p*Es(g),p*ks(g)),l.arc(0,0,p,g,v),g!==m||v!==y)if(t){var b=_-+t.apply(this,arguments),x=(m+y)/2;l.quadraticCurveTo(0,0,b*Es(m),b*ks(m)),l.lineTo(_*Es(x),_*ks(x)),l.lineTo(b*Es(y),b*ks(y))}else l.quadraticCurveTo(0,0,_*Es(m),_*ks(m)),l.arc(0,0,_,m,y);if(l.quadraticCurveTo(0,0,p*Es(g),p*ks(g)),l.closePath(),c)return l=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:Vs(+e),c):t}),c.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:Vs(+t),c):r},c.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:Vs(+t),c):r},c.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:Vs(+t),c):i},c.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Vs(+t),c):a},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Vs(+t),c):o},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Vs(+t),c):s},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}function nl(){return el()}function rl(){return el(tl)}var il=-.14861,al=1.78277,ol=-.29227,sl=-.90649,ll=1.97294,cl=ll*sl,ul=ll*al,hl=al*ol-sl*il;function fl(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof dl)return new dl(t.h,t.s,t.l,t.opacity);t instanceof Re||(t=Ie(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(hl*r+cl*e-ul*n)/(hl+cl-ul),a=r-i,o=(ll*(n-i)-ol*a)/sl,s=Math.sqrt(o*o+a*a)/(ll*i*(1-i)),l=s?Math.atan2(o,a)*lr-120:NaN;return new dl(l<0?l+360:l,s,i,t.opacity)}(t):new dl(t,e,n,null==r?1:r)}function dl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ve(dl,fl,_e(me,{brighter(t){return t=null==t?be:Math.pow(be,t),new dl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ye:Math.pow(ye,t),new dl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*sr,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Re(255*(e+n*(il*r+al*i)),255*(e+n*(ol*r+sl*i)),255*(e+n*(ll*r)),this.opacity)}}));var pl=Array.prototype.slice;function gl(t,e){return t-e}const vl=t=>()=>t;function _l(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ml(t,e[r]))return n;return 0}function ml(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],c=l[0],u=l[1],h=t[s],f=h[0],d=h[1];if(yl(l,h,e))return 0;u>r!=d>r&&n<(f-c)*(r-u)/(d-u)+c&&(i=-i)}return i}function yl(t,e,n){var r;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[r=+(t[0]===e[0])],n[r],e[r])}function bl(){}var xl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function wl(){var t=1,e=1,n=wi,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(gl);else{const n=Xr(t,Ml);for(e=de(...xi(n[0],n[1],e),e);e[e.length-1]>=n[1];)e.pop();for(;e[1]<n[0];)e.shift()}return e.map(e=>a(t,e))}function a(n,i){const a=null==i?NaN:+i;if(isNaN(a))throw new Error(`invalid value: ${i}`);var s=[],l=[];return function(n,r,i){var a,s,l,c,u,h,f=new Array,d=new Array;a=s=-1,c=Sl(n[0],r),xl[c<<1].forEach(p);for(;++a<t-1;)l=c,c=Sl(n[a+1],r),xl[l|c<<1].forEach(p);xl[c|0].forEach(p);for(;++s<e-1;){for(a=-1,c=Sl(n[s*t+t],r),u=Sl(n[s*t],r),xl[c<<1|u<<2].forEach(p);++a<t-1;)l=c,c=Sl(n[s*t+t+a+1],r),h=u,u=Sl(n[s*t+a+1],r),xl[l|c<<1|u<<2|h<<3].forEach(p);xl[c|u<<3].forEach(p)}a=-1,u=n[s*t]>=r,xl[u<<2].forEach(p);for(;++a<t-1;)h=u,u=Sl(n[s*t+a+1],r),xl[u<<2|h<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],l=[t[1][0]+a,t[1][1]+s],c=o(r),u=o(l);(e=d[c])?(n=f[u])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(l),i(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=u]=e):(e=f[u])?(n=d[c])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(l),i(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=c]=e):f[c]=d[u]={start:c,end:u,ring:[r,l]}}xl[u<<3].forEach(p)}(n,a,function(t){r(t,n,a),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):l.push(t)}),l.forEach(function(t){for(var e,n=0,r=s.length;n<r;++n)if(-1!==_l((e=s[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:s}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(function(n){var a=n[0],o=n[1],s=0|a,l=0|o,c=Cl(r[l*t+s]);a>0&&a<t&&s===a&&(n[0]=El(a,Cl(r[l*t+s-1]),c,i)),o>0&&o<e&&l===o&&(n[1]=El(o,Cl(r[(l-1)*t+s]),c,i))})}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),a=Math.floor(n[1]);if(!(r>=0&&a>=0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?vl(pl.call(t)):vl(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:bl,i):r===s},i}function Ml(t){return isFinite(t)?t:NaN}function Sl(t,e){return null!=t&&+t>=e}function Cl(t){return null==t||isNaN(t=+t)?-1/0:t}function El(t,e,n,r){const i=r-e,a=n-e,o=isFinite(i)||isFinite(a)?i/a:Math.sign(i)/Math.sign(a);return isNaN(o)?t:t+o-.5}function kl(t){return t[0]}function Al(t){return t[1]}function Tl(){return 1}function Pl(){var t=kl,e=Al,n=Tl,r=960,i=500,a=20,o=2,s=3*a,l=r+2*s>>o,c=i+2*s>>o,u=vl(20);function h(r){var i=new Float32Array(l*c),u=Math.pow(2,-o),h=-1;for(const a of r){var f=(t(a,++h,r)+s)*u,d=(e(a,h,r)+s)*u,p=+n(a,h,r);if(p&&f>=0&&f<l&&d>=0&&d<c){var g=Math.floor(f),v=Math.floor(d),_=f-g-.5,m=d-v-.5;i[g+v*l]+=(1-_)*(1-m)*p,i[g+1+v*l]+=_*(1-m)*p,i[g+1+(v+1)*l]+=_*m*p,i[g+(v+1)*l]+=(1-_)*m*p}}return Dr({data:i,width:l,height:c},a*u),i}function f(t){var e=h(t),n=u(e),r=Math.pow(2,2*o);return Array.isArray(n)||(n=de(Number.MIN_VALUE,It(e)/r,n)),wl().size([l,c]).thresholds(n.map(t=>t*r))(e).map((t,e)=>(t.value=+n[e],d(t)))}function d(t){return t.coordinates.forEach(p),t}function p(t){t.forEach(g)}function g(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function _(){return l=r+2*(s=3*a)>>o,c=i+2*s>>o,f}return f.contours=function(t){var e=h(t),n=wl().size([l,c]),r=Math.pow(2,2*o),i=t=>{t=+t;var i=d(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>It(e)/r}),i},f.x=function(e){return arguments.length?(t="function"==typeof e?e:vl(+e),f):t},f.y=function(t){return arguments.length?(e="function"==typeof t?t:vl(+t),f):e},f.weight=function(t){return arguments.length?(n="function"==typeof t?t:vl(+t),f):n},f.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,_()},f.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),_()},f.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?vl(pl.call(t)):vl(t),f):u},f.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*t*t+1)-1)/2,_()},f}const Fl=134217729;function Nl(t,e,n,r,i){let a,o,s,l,c=e[0],u=r[0],h=0,f=0;u>c==u>-c?(a=c,c=e[++h]):(a=u,u=r[++f]);let d=0;if(h<t&&f<n)for(u>c==u>-c?(o=c+a,s=a-(o-c),c=e[++h]):(o=u+a,s=a-(o-u),u=r[++f]),a=o,0!==s&&(i[d++]=s);h<t&&f<n;)u>c==u>-c?(o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++h]):(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++f]),a=o,0!==s&&(i[d++]=s);for(;h<t;)o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++h],a=o,0!==s&&(i[d++]=s);for(;f<n;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++f],a=o,0!==s&&(i[d++]=s);return 0===a&&0!==d||(i[d++]=a),d}function Ll(t){return new Float64Array(t)}const Ol=Ll(4),Dl=Ll(8),zl=Ll(12),Il=Ll(16),Gl=Ll(4);function Rl(t,e,n,r,i,a){const o=(e-a)*(n-i),s=(t-i)*(r-a),l=o-s,c=Math.abs(o+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(t,e,n,r,i,a,o){let s,l,c,u,h,f,d,p,g,v,_,m,y,b,x,w,M,S;const C=t-i,E=n-i,k=e-a,A=r-a;b=C*A,f=Fl*C,d=f-(f-C),p=C-d,f=Fl*A,g=f-(f-A),v=A-g,x=p*v-(b-d*g-p*g-d*v),w=k*E,f=Fl*k,d=f-(f-k),p=k-d,f=Fl*E,g=f-(f-E),v=E-g,M=p*v-(w-d*g-p*g-d*v),_=x-M,h=x-_,Ol[0]=x-(_+h)+(h-M),m=b+_,h=m-b,y=b-(m-h)+(_-h),_=y-w,h=y-_,Ol[1]=y-(_+h)+(h-w),S=m+_,h=S-m,Ol[2]=m-(S-h)+(_-h),Ol[3]=S;let T=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,Ol),P=22204460492503146e-32*o;if(T>=P||-T>=P)return T;if(h=t-C,s=t-(C+h)+(h-i),h=n-E,c=n-(E+h)+(h-i),h=e-k,l=e-(k+h)+(h-a),h=r-A,u=r-(A+h)+(h-a),0===s&&0===l&&0===c&&0===u)return T;if(P=11093356479670487e-47*o+33306690738754706e-32*Math.abs(T),T+=C*u+A*s-(k*c+E*l),T>=P||-T>=P)return T;b=s*A,f=Fl*s,d=f-(f-s),p=s-d,f=Fl*A,g=f-(f-A),v=A-g,x=p*v-(b-d*g-p*g-d*v),w=l*E,f=Fl*l,d=f-(f-l),p=l-d,f=Fl*E,g=f-(f-E),v=E-g,M=p*v-(w-d*g-p*g-d*v),_=x-M,h=x-_,Gl[0]=x-(_+h)+(h-M),m=b+_,h=m-b,y=b-(m-h)+(_-h),_=y-w,h=y-_,Gl[1]=y-(_+h)+(h-w),S=m+_,h=S-m,Gl[2]=m-(S-h)+(_-h),Gl[3]=S;const F=Nl(4,Ol,4,Gl,Dl);b=C*u,f=Fl*C,d=f-(f-C),p=C-d,f=Fl*u,g=f-(f-u),v=u-g,x=p*v-(b-d*g-p*g-d*v),w=k*c,f=Fl*k,d=f-(f-k),p=k-d,f=Fl*c,g=f-(f-c),v=c-g,M=p*v-(w-d*g-p*g-d*v),_=x-M,h=x-_,Gl[0]=x-(_+h)+(h-M),m=b+_,h=m-b,y=b-(m-h)+(_-h),_=y-w,h=y-_,Gl[1]=y-(_+h)+(h-w),S=m+_,h=S-m,Gl[2]=m-(S-h)+(_-h),Gl[3]=S;const N=Nl(F,Dl,4,Gl,zl);b=s*u,f=Fl*s,d=f-(f-s),p=s-d,f=Fl*u,g=f-(f-u),v=u-g,x=p*v-(b-d*g-p*g-d*v),w=l*c,f=Fl*l,d=f-(f-l),p=l-d,f=Fl*c,g=f-(f-c),v=c-g,M=p*v-(w-d*g-p*g-d*v),_=x-M,h=x-_,Gl[0]=x-(_+h)+(h-M),m=b+_,h=m-b,y=b-(m-h)+(_-h),_=y-w,h=y-_,Gl[1]=y-(_+h)+(h-w),S=m+_,h=S-m,Gl[2]=m-(S-h)+(_-h),Gl[3]=S;const L=Nl(N,zl,4,Gl,Il);return Il[L-1]}(t,e,n,r,i,a,c)}Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(8),Ll(8),Ll(8),Ll(4),Ll(8),Ll(8),Ll(8),Ll(12);Ll(192),Ll(192);Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(8),Ll(8),Ll(8),Ll(8),Ll(8),Ll(8),Ll(8),Ll(8),Ll(8),Ll(4),Ll(4),Ll(4),Ll(8),Ll(16),Ll(16),Ll(16),Ll(32),Ll(32),Ll(48),Ll(64);Ll(1152),Ll(1152);Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(4),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(24),Ll(1152),Ll(1152),Ll(1152),Ll(1152),Ll(1152),Ll(2304),Ll(2304),Ll(3456),Ll(5760),Ll(8),Ll(8),Ll(8),Ll(16),Ll(24),Ll(48),Ll(48),Ll(96),Ll(192),Ll(384),Ll(384),Ll(384),Ll(768);Ll(96),Ll(96),Ll(96),Ll(1152);const jl=Math.pow(2,-52),Bl=new Uint32Array(512);class Ul{static from(t,e=$l,n=Xl){const r=t.length,i=new Float64Array(2*r);for(let a=0;a<r;a++){const r=t[a];i[2*a]=e(r),i[2*a+1]=n(r)}return new Ul(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,a=t.length>>1;let o=1/0,s=1/0,l=-1/0,c=-1/0;for(let e=0;e<a;e++){const n=t[2*e],r=t[2*e+1];n<o&&(o=n),r<s&&(s=r),n>l&&(l=n),r>c&&(c=r),this._ids[e]=e}const u=(o+l)/2,h=(s+c)/2;let f,d,p;for(let e=0,n=1/0;e<a;e++){const r=Wl(u,h,t[2*e],t[2*e+1]);r<n&&(f=e,n=r)}const g=t[2*f],v=t[2*f+1];for(let e=0,n=1/0;e<a;e++){if(e===f)continue;const r=Wl(g,v,t[2*e],t[2*e+1]);r<n&&r>0&&(d=e,n=r)}let _=t[2*d],m=t[2*d+1],y=1/0;for(let e=0;e<a;e++){if(e===f||e===d)continue;const n=Hl(g,v,_,m,t[2*e],t[2*e+1]);n<y&&(p=e,y=n)}let b=t[2*p],x=t[2*p+1];if(y===1/0){for(let e=0;e<a;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Yl(this._ids,this._dists,0,a-1);const e=new Uint32Array(a);let n=0;for(let t=0,r=-1/0;t<a;t++){const i=this._ids[t],a=this._dists[i];a>r&&(e[n++]=i,r=a)}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Rl(g,v,_,m,b,x)<0){const t=d,e=_,n=m;d=p,_=b,m=x,p=t,b=e,x=n}const w=function(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,c=a-e,u=o*o+s*s,h=l*l+c*c,f=.5/(o*c-s*l),d=t+(c*u-s*h)*f,p=e+(o*h-l*u)*f;return{x:d,y:p}}(g,v,_,m,b,x);this._cx=w.x,this._cy=w.y;for(let e=0;e<a;e++)this._dists[e]=Wl(t[2*e],t[2*e+1],w.x,w.y);Yl(this._ids,this._dists,0,a-1),this._hullStart=f;let M=3;n[f]=e[p]=d,n[d]=e[f]=p,n[p]=e[d]=f,r[f]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,v)]=f,i[this._hashKey(_,m)]=d,i[this._hashKey(b,x)]=p,this.trianglesLen=0,this._addTriangle(f,d,p,-1,-1,-1);for(let a,o,s=0;s<this._ids.length;s++){const l=this._ids[s],c=t[2*l],u=t[2*l+1];if(s>0&&Math.abs(c-a)<=jl&&Math.abs(u-o)<=jl)continue;if(a=c,o=u,l===f||l===d||l===p)continue;let h=0;for(let t=0,e=this._hashKey(c,u);t<this._hashSize&&(h=i[(e+t)%this._hashSize],-1===h||h===n[h]);t++);h=e[h];let g,v=h;for(;g=n[v],Rl(c,u,t[2*v],t[2*v+1],t[2*g],t[2*g+1])>=0;)if(v=g,v===h){v=-1;break}if(-1===v)continue;let _=this._addTriangle(v,l,n[v],-1,-1,r[v]);r[l]=this._legalize(_+2),r[v]=_,M++;let m=n[v];for(;g=n[m],Rl(c,u,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)_=this._addTriangle(m,l,g,r[l],-1,r[m]),r[l]=this._legalize(_+2),n[m]=m,M--,m=g;if(v===h)for(;g=e[v],Rl(c,u,t[2*g],t[2*g+1],t[2*v],t[2*v+1])<0;)_=this._addTriangle(g,l,v,-1,r[v],r[g]),this._legalize(_+2),r[g]=_,n[v]=v,M--,v=g;this._hullStart=e[l]=v,n[v]=e[m]=l,n[l]=m,i[this._hashKey(c,u)]=l,i[this._hashKey(t[2*v],t[2*v+1])]=v}this.hull=new Uint32Array(M);for(let t=0,e=this._hullStart;t<M;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,a=0;for(;;){const o=n[t],s=t-t%3;if(a=s+(t+2)%3,-1===o){if(0===i)break;t=Bl[--i];continue}const l=o-o%3,c=s+(t+1)%3,u=l+(o+2)%3,h=e[a],f=e[t],d=e[c],p=e[u];if(ql(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[o]=h;const r=n[u];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(o,n[a]),this._link(a,u);const s=l+(o+1)%3;i<Bl.length&&(Bl[i++]=s)}else{if(0===i)break;t=Bl[--i]}}return a}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}function Wl(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function ql(t,e,n,r,i,a,o,s){const l=t-o,c=e-s,u=n-o,h=r-s,f=i-o,d=a-s,p=u*u+h*h,g=f*f+d*d;return l*(h*g-p*d)-c*(u*g-p*f)+(l*l+c*c)*(u*d-h*f)<0}function Hl(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,c=a-e,u=o*o+s*s,h=l*l+c*c,f=.5/(o*c-s*l),d=(c*u-s*h)*f,p=(o*h-l*u)*f;return d*d+p*p}function Yl(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],a=e[r];let o=i-1;for(;o>=n&&e[t[o]]>a;)t[o+1]=t[o--];t[o+1]=r}else{let i=n+1,a=r;Vl(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Vl(t,n,r),e[t[i]]>e[t[r]]&&Vl(t,i,r),e[t[n]]>e[t[i]]&&Vl(t,n,i);const o=t[i],s=e[o];for(;;){do{i++}while(e[t[i]]<s);do{a--}while(e[t[a]]>s);if(a<i)break;Vl(t,i,a)}t[n+1]=t[a],t[a]=o,r-i+1>=a-n?(Yl(t,e,i,r),Yl(t,e,n,a-1)):(Yl(t,e,n,a-1),Yl(t,e,i,r))}}function Vl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $l(t){return t[0]}function Xl(t){return t[1]}const Jl=1e-6;class Zl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Jl||Math.abs(this._y1-i)>Jl)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Kl{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Ql{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,l=0,c=0,u=n.length;l<u;l+=3,c+=2){const u=2*n[l],h=2*n[l+1],f=2*n[l+2],d=t[u],p=t[u+1],g=t[h],v=t[h+1],_=t[f],m=t[f+1],y=g-d,b=v-p,x=_-d,w=m-p,M=2*(y*w-b*x);if(Math.abs(M)<1e-9){if(void 0===i){i=a=0;for(const n of e)i+=t[2*n],a+=t[2*n+1];i/=e.length,a/=e.length}const n=1e9*Math.sign((i-d)*w-(a-p)*x);r=(d+_)/2-n*w,s=(p+m)/2+n*x}else{const t=1/M,e=y*y+b*b,n=x*x+w*w;r=d+(w*e-b*n)*t,s=p+(y*n-x*e)*t}o[c]=r,o[c+1]=s}let s,l,c,u=e[e.length-1],h=4*u,f=t[2*u],d=t[2*u+1];r.fill(0);for(let n=0;n<e.length;++n)u=e[n],s=h,l=f,c=d,h=4*u,f=t[2*u],d=t[2*u+1],r[s+2]=r[h]=c-d,r[s+3]=r[h+1]=f-l}render(t){const e=null==t?t=new Zl:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:a,vectors:o}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),o=2*Math.floor(r/3),s=a[i],l=a[i+1],c=a[o],u=a[o+1];this._renderSegment(s,l,c,u,t)}let s,l=i[i.length-1];for(let e=0;e<i.length;++e){s=l,l=i[e];const n=2*Math.floor(r[l]/3),c=a[n],u=a[n+1],h=4*s,f=this._project(c,u,o[h+2],o[h+3]);f&&this._renderSegment(c,u,f[0],f[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Zl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Zl:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Kl;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let a;const o=this._regioncode(t,e),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(a=this._clipSegment(t,e,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let a=0,o=t.length;a<o;a+=2)if(e[r]===t[a]&&e[r+1]===t[a+1]&&e[(r+2)%i]===t[(a+o-2)%o]&&e[(r+3)%i]===t[(a+o-1)%o]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{const n=Math.floor(s/3);if(o.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,a,o,s=null,l=e[n-2],c=e[n-1],u=this._regioncode(l,c),h=0;for(let f=0;f<n;f+=2)if(r=l,i=c,l=e[f],c=e[f+1],a=u,u=this._regioncode(l,c),0===a&&0===u)o=h,h=0,s?s.push(l,c):s=[l,c];else{let e,n,f,d,p;if(0===a){if(null===(e=this._clipSegment(r,i,l,c,a,u)))continue;[n,f,d,p]=e}else{if(null===(e=this._clipSegment(l,c,r,i,u,a)))continue;[d,p,n,f]=e,o=h,h=this._edgecode(n,f),o&&h&&this._edge(t,o,h,s,s.length),s?s.push(n,f):s=[n,f]}o=h,h=this._edgecode(d,p),o&&h&&this._edge(t,o,h,s,s.length),s?s.push(d,p):s=[d,p]}if(s)o=h,h=this._edgecode(s[0],s[1]),o&&h&&this._edge(t,o,h,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,a){const o=i<a;for(o&&([t,e,n,r,i,a]=[n,r,t,e,a,i]);;){if(0===i&&0===a)return o?[n,r,t,e]:[t,e,n,r];if(i&a)return null;let s,l,c=i||a;8&c?(s=t+(n-t)*(this.ymax-e)/(r-e),l=this.ymax):4&c?(s=t+(n-t)*(this.ymin-e)/(r-e),l=this.ymin):2&c?(l=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(l=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=l,i=this._regioncode(t,e)):(n=s,r=l,a=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,a){let o,s=Array.from(e);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,a;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,a=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,a=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,a=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,a=this.ymin}r[i]===n&&r[i+1]===a||!this.contains(t,n,a)||(r.splice(i,0,n,a),i+=2)}return i}_project(t,e,n,r){let i,a,o,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(o=this.ymin,a=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(o=this.ymax,a=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=i)*r)}return[a,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const tc=2*Math.PI,ec=Math.pow;function nc(t){return t[0]}function rc(t){return t[1]}function ic(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class ac{static from(t,e=nc,n=rc,r){return new ac("length"in t?function(t,e,n,r){const i=t.length,a=new Float64Array(2*i);for(let o=0;o<i;++o){const i=t[o];a[2*o]=e.call(r,i,o,t),a[2*o+1]=n.call(r,i,o,t)}return a}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new Ul(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],a=2*e[t+2];if((n[a]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=ic(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new Ul(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==a[e]||(a[e]=t)}for(let t=0,e=r.length;t<e;++t)o[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,2===r.length&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Ql(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:a,collinear:o}=this;if(o){const e=o.indexOf(t);return e>0&&(yield o[e-1]),void(e<o.length-1&&(yield o[e+1]))}const s=e[t];if(-1===s)return;let l=s,c=-1;do{if(yield c=a[l],l=l%3==2?l-2:l+1,a[l]!==t)return;if(l=i[l],-1===l){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(l!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:a,halfedges:o,triangles:s,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let c=t,u=ec(e-l[2*t],2)+ec(n-l[2*t+1],2);const h=r[t];let f=h;do{let r=s[f];const h=ec(e-l[2*r],2)+ec(n-l[2*r+1],2);if(h<u&&(u=h,c=r),f=f%3==2?f-2:f+1,s[f]!==t)break;if(f=o[f],-1===f){if(f=i[(a[t]+1)%i.length],f!==r&&ec(e-l[2*f],2)+ec(n-l[2*f+1],2)<u)return f;break}}while(f!==h);return c}render(t){const e=null==t?t=new Zl:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,a=r.length;e<a;++e){const a=r[e];if(a<e)continue;const o=2*i[e],s=2*i[a];t.moveTo(n[o],n[o+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Zl:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],a=r[n+1];t.moveTo(i+e,a),t.arc(i,a,e,0,tc)}return n&&n.value()}renderHull(t){const e=null==t?t=new Zl:void 0,{hull:n,points:r}=this,i=2*n[0],a=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<a;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Kl;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Zl:void 0,{points:r,triangles:i}=this,a=2*i[t*=3],o=2*i[t+1],s=2*i[t+2];return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Kl;return this.renderTriangle(t,e),e.value()}}const oc=t=>()=>t;function sc(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function lc(t){return!t.ctrlKey&&!t.button}function cc(){return this.parentNode}function uc(t,e){return null==e?{x:t.x,y:t.y}:e}function hc(){return navigator.maxTouchPoints||"ontouchstart"in this}function fc(){var t,e,n,r,i=lc,a=cc,o=uc,s=hc,l={},c=Ea("start","drag","end"),u=0,h=0;function f(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",v).on("touchmove.drag",_,ka).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(o,s){if(!r&&i.call(this,o,s)){var l=y(this,a.call(this,o,s),o,s,"mouse");l&&(Dt(o.view).on("mousemove.drag",p,Aa).on("mouseup.drag",g,Aa),Fa(o.view),Ta(o),n=!1,t=o.clientX,e=o.clientY,l("start",o))}}function p(r){if(Pa(r),!n){var i=r.clientX-t,a=r.clientY-e;n=i*i+a*a>h}l.mouse("drag",r)}function g(t){Dt(t.view).on("mousemove.drag mouseup.drag",null),Na(t.view,n),Pa(t),l.mouse("end",t)}function v(t,e){if(i.call(this,t,e)){var n,r,o=t.changedTouches,s=a.call(this,t,e),l=o.length;for(n=0;n<l;++n)(r=y(this,s,t,e,o[n].identifier,o[n]))&&(Ta(t),r("start",t,o[n]))}}function _(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=l[r[e].identifier])&&(Pa(t),n("drag",t,r[e]))}function m(t){var e,n,i=t.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<a;++e)(n=l[i[e].identifier])&&(Ta(t),n("end",t,i[e]))}function y(t,e,n,r,i,a){var s,h,d,p=c.copy(),g=Oa(a||n,e);if(null!=(d=o.call(t,new sc("beforestart",{sourceEvent:n,target:f,identifier:i,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return s=d.x-g[0]||0,h=d.y-g[1]||0,function n(a,o,c){var v,_=g;switch(a){case"start":l[i]=n,v=u++;break;case"end":delete l[i],--u;case"drag":g=Oa(c||o,e),v=u}p.call(a,t,new sc(a,{sourceEvent:o,subject:d,target:f,identifier:i,active:v,x:g[0]+s,y:g[1]+h,dx:g[0]-_[0],dy:g[1]-_[1],dispatch:p}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:oc(!!t),f):i},f.container=function(t){return arguments.length?(a="function"==typeof t?t:oc(t),f):a},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:oc(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:oc(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f}sc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var dc={},pc={},gc=34,vc=10,_c=13;function mc(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function yc(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function bc(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function xc(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+bc(-e,6):e>9999?"+"+bc(e,6):bc(e,4))+"-"+bc(t.getUTCMonth()+1,2)+"-"+bc(t.getUTCDate(),2)+(a?"T"+bc(n,2)+":"+bc(r,2)+":"+bc(i,2)+"."+bc(a,3)+"Z":i?"T"+bc(n,2)+":"+bc(r,2)+":"+bc(i,2)+"Z":r||n?"T"+bc(n,2)+":"+bc(r,2)+"Z":"")}function wc(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,l=a<=0,c=!1;function u(){if(l)return pc;if(c)return c=!1,dc;var e,r,i=o;if(t.charCodeAt(i)===gc){for(;o++<a&&t.charCodeAt(o)!==gc||t.charCodeAt(++o)===gc;);return(e=o)>=a?l=!0:(r=t.charCodeAt(o++))===vc?c=!0:r===_c&&(c=!0,t.charCodeAt(o)===vc&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(e=o++))===vc)c=!0;else if(r===_c)c=!0,t.charCodeAt(o)===vc&&++o;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===vc&&--a,t.charCodeAt(a-1)===_c&&--a;(r=u())!==pc;){for(var h=[];r!==dc&&r!==pc;)h.push(r),r=u();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?xc(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=mc(t);return function(r,i){return e(n(r),i,t)}}(t,e):mc(t)});return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=yc(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=yc(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var Mc=wc(","),Sc=Mc.parse,Cc=Mc.parseRows,Ec=Mc.format,kc=Mc.formatBody,Ac=Mc.formatRows,Tc=Mc.formatRow,Pc=Mc.formatValue,Fc=wc("\t"),Nc=Fc.parse,Lc=Fc.parseRows,Oc=Fc.format,Dc=Fc.formatBody,zc=Fc.formatRows,Ic=Fc.formatRow,Gc=Fc.formatValue;function Rc(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;jc&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const jc=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Bc=t=>+t;function Uc(t){return t*t}function Wc(t){return t*(2-t)}function qc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Hc=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Yc=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Vc=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),$c=Math.PI,Xc=$c/2;function Jc(t){return 1===+t?1:1-Math.cos(t*Xc)}function Zc(t){return Math.sin(t*Xc)}function Kc(t){return(1-Math.cos($c*t))/2}function Qc(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function tu(t){return Qc(1-+t)}function eu(t){return 1-Qc(t)}function nu(t){return((t*=2)<=1?Qc(1-t):2-Qc(t-1))/2}function ru(t){return 1-Math.sqrt(1-t*t)}function iu(t){return Math.sqrt(1- --t*t)}function au(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ou=4/11,su=6/11,lu=8/11,cu=3/4,uu=9/11,hu=10/11,fu=15/16,du=21/22,pu=63/64,gu=1/ou/ou;function vu(t){return 1-_u(1-t)}function _u(t){return(t=+t)<ou?gu*t*t:t<lu?gu*(t-=su)*t+cu:t<hu?gu*(t-=uu)*t+fu:gu*(t-=du)*t+pu}function mu(t){return((t*=2)<=1?1-_u(1-t):_u(t-1)+1)/2}var yu=1.70158,bu=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(yu),xu=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(yu),wu=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(yu),Mu=2*Math.PI,Su=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Mu);function i(t){return e*Qc(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Mu)},i.period=function(n){return t(e,n)},i}(1,.3),Cu=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Mu);function i(t){return 1-e*Qc(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Mu)},i.period=function(n){return t(e,n)},i}(1,.3),Eu=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Mu);function i(t){return((t=2*t-1)<0?e*Qc(-t)*Math.sin((r-t)/n):2-e*Qc(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Mu)},i.period=function(n){return t(e,n)},i}(1,.3);function ku(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Au(t,e){return fetch(t,e).then(ku)}function Tu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Pu(t,e){return fetch(t,e).then(Tu)}function Fu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Nu(t,e){return fetch(t,e).then(Fu)}function Lu(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Nu(e,n).then(function(e){return t(e,r)})}}function Ou(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=wc(t);return Nu(e,n).then(function(t){return i.parse(t,r)})}var Du=Lu(Sc),zu=Lu(Nc);function Iu(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function Gu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Ru(t,e){return fetch(t,e).then(Gu)}function ju(t){return(e,n)=>Nu(e,n).then(e=>(new DOMParser).parseFromString(e,t))}const Bu=ju("application/xml");var Uu=ju("text/html"),Wu=ju("image/svg+xml");function qu(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,l=0;for(i=0;i<o;++i)s+=(a=n[i]).x,l+=a.y;for(s=(s/o-t)*r,l=(l/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Hu(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,c,u,h,f,d=t._root,p={data:r},g=t._x0,v=t._y0,_=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(a=(g+_)/2))?g=a:_=a,(u=n>=(o=(v+m)/2))?v=o:m=o,i=d,!(d=d[h=u<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(a=(g+_)/2))?g=a:_=a,(u=n>=(o=(v+m)/2))?v=o:m=o}while((h=u<<1|c)==(f=(l>=o)<<1|s>=a));return i[f]=d,i[h]=p,t}function Yu(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Vu(t){return t[0]}function $u(t){return t[1]}function Xu(t,e,n){var r=new Ju(null==e?Vu:e,null==n?$u:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ju(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Zu(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ku=Xu.prototype=Ju.prototype;function Qu(t){return function(){return t}}function th(t){return 1e-6*(t()-.5)}function eh(t){return t.x+t.vx}function nh(t){return t.y+t.vy}function rh(t){var e,n,r,i=1,a=1;function o(){for(var t,o,l,c,u,h,f,d=e.length,p=0;p<a;++p)for(o=Xu(e,eh,nh).visitAfter(s),t=0;t<d;++t)l=e[t],h=n[l.index],f=h*h,c=l.x+l.vx,u=l.y+l.vy,o.visit(g);function g(t,e,n,a,o){var s=t.data,d=t.r,p=h+d;if(!s)return e>c+p||a<c-p||n>u+p||o<u-p;if(s.index>l.index){var g=c-s.x-s.vx,v=u-s.y-s.vy,_=g*g+v*v;_<p*p&&(0===g&&(_+=(g=th(r))*g),0===v&&(_+=(v=th(r))*v),_=(p-(_=Math.sqrt(_)))/_*i,l.vx+=(g*=_)*(p=(d*=d)/(f+d)),l.vy+=(v*=_)*p,s.vx-=g*(p=1-p),s.vy-=v*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Qu(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,l()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:Qu(+e),l(),o):t},o}function ih(t){return t.index}function ah(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function oh(t){var e,n,r,i,a,o,s=ih,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=Qu(30),u=1;function h(r){for(var i=0,s=t.length;i<u;++i)for(var l,c,h,f,d,p,g,v=0;v<s;++v)c=(l=t[v]).source,f=(h=l.target).x+h.vx-c.x-c.vx||th(o),d=h.y+h.vy-c.y-c.vy||th(o),f*=p=((p=Math.sqrt(f*f+d*d))-n[v])/p*r*e[v],d*=p,h.vx-=f*(g=a[v]),h.vy-=d*g,c.vx+=f*(g=1-g),c.vy+=d*g}function f(){if(r){var o,l,c=r.length,u=t.length,h=new Map(r.map((t,e)=>[s(t,e,r),t]));for(o=0,i=new Array(c);o<u;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=ah(h,l.source)),"object"!=typeof l.target&&(l.target=ah(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(o=0,a=new Array(u);o<u;++o)l=t[o],a[o]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(u),d(),n=new Array(u),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,o=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(u=+t,h):u},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:Qu(+t),d(),h):l},h.distance=function(t){return arguments.length?(c="function"==typeof t?t:Qu(+t),p(),h):c},h}Ku.copy=function(){var t,e,n=new Ju(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Zu(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Zu(e));return n},Ku.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Hu(this.cover(e,n),e,n,t)},Ku.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<a;++n)Hu(this,o[n],s[n],t[n]);return this},Ku.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=c,c=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Ku.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Ku.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ku.find=function(t,e,n){var r,i,a,o,s,l,c,u=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Yu(g,u,h,f,d)),null==n?n=1/0:(u=t-n,h=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>f||(a=l.y0)>d||(o=l.x1)<u||(s=l.y1)<h))if(g.length){var v=(i+o)/2,_=(a+s)/2;p.push(new Yu(g[3],v,_,o,s),new Yu(g[2],i,_,v,s),new Yu(g[1],v,a,o,_),new Yu(g[0],i,a,v,_)),(c=(e>=_)<<1|t>=v)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var m=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),b=m*m+y*y;if(b<n){var x=Math.sqrt(n=b);u=t-x,h=e-x,f=t+x,d=e+x,r=g.data}}return r},Ku.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,c,u,h,f,d=this._root,p=this._x0,g=this._y0,v=this._x1,_=this._y1;if(!d)return this;if(d.length)for(;;){if((c=a>=(s=(p+v)/2))?p=s:v=s,(u=o>=(l=(g+_)/2))?g=l:_=l,e=d,!(d=d[h=u<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},Ku.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ku.root=function(){return this._root},Ku.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Ku.visit=function(t){var e,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new Yu(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&l.length){var c=(r+a)/2,u=(i+o)/2;(n=l[3])&&s.push(new Yu(n,c,u,a,o)),(n=l[2])&&s.push(new Yu(n,r,u,c,o)),(n=l[1])&&s.push(new Yu(n,c,i,a,u)),(n=l[0])&&s.push(new Yu(n,r,i,c,u))}return this},Ku.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Yu(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(o+l)/2,h=(s+c)/2;(a=i[0])&&n.push(new Yu(a,o,s,u,h)),(a=i[1])&&n.push(new Yu(a,u,s,l,h)),(a=i[2])&&n.push(new Yu(a,o,h,u,c)),(a=i[3])&&n.push(new Yu(a,u,h,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ku.x=function(t){return arguments.length?(this._x=t,this):this._x},Ku.y=function(t){return arguments.length?(this._y=t,this):this._y};const sh=1664525,lh=1013904223,ch=4294967296;function uh(t){return t.x}function hh(t){return t.y}var fh=10,dh=Math.PI*(3-Math.sqrt(5));function ph(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=$a(h),c=Ea("tick","end"),u=function(){let t=1;return()=>(t=(sh*t+lh)%ch)/ch}();function h(){f(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function f(r){var l,c,u=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(a-n)*i,s.forEach(function(t){t(n)}),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=fh*Math.sqrt(.5+n),a=n*dh;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(u=t,s.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(o=(i=e-(s=t[c]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function gh(){var t,e,n,r,i,a=Qu(-30),o=1,s=1/0,l=.81;function c(n){var i,a=t.length,o=Xu(t,uh,hh).visitAfter(h);for(r=n,i=0;i<a;++i)e=t[i],o.visit(f)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function h(t){var e,n,r,a,o,s=0,l=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,a+=n*e.y);t.x=r/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function f(t,a,c,u){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,d=u-a,p=h*h+f*f;if(d*d/l<p)return p<s&&(0===h&&(p+=(h=th(n))*h),0===f&&(p+=(f=th(n))*f),p<o&&(p=Math.sqrt(o*p)),e.vx+=h*t.value*r/p,e.vy+=f*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===h&&(p+=(h=th(n))*h),0===f&&(p+=(f=th(n))*f),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=h*d,e.vy+=f*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(a="function"==typeof t?t:Qu(+t),u(),c):a},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}function vh(t,e,n){var r,i,a,o=Qu(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var l=r[o],c=l.x-e||1e-6,u=l.y-n||1e-6,h=Math.sqrt(c*c+u*u),f=(a[o]-h)*i[o]*t/h;l.vx+=c*f,l.vy+=u*f}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=Qu(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:Qu(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Qu(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function _h(t){var e,n,r,i=Qu(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=Qu(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:Qu(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:Qu(+e),o(),a):t},a}function mh(t){var e,n,r,i=Qu(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=Qu(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:Qu(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Qu(+e),o(),a):t},a}var yh=1e-6,bh=1e-12,xh=Math.PI,wh=xh/2,Mh=xh/4,Sh=2*xh,Ch=180/xh,Eh=xh/180,kh=Math.abs,Ah=Math.atan,Th=Math.atan2,Ph=Math.cos,Fh=Math.ceil,Nh=Math.exp,Lh=(Math.floor,Math.hypot),Oh=Math.log,Dh=Math.pow,zh=Math.sin,Ih=Math.sign||function(t){return t>0?1:t<0?-1:0},Gh=Math.sqrt,Rh=Math.tan;function jh(t){return t>1?0:t<-1?xh:Math.acos(t)}function Bh(t){return t>1?wh:t<-1?-wh:Math.asin(t)}function Uh(t){return(t=zh(t/2))*t}function Wh(){}function qh(t,e){t&&Yh.hasOwnProperty(t.type)&&Yh[t.type](t,e)}var Hh={Feature:function(t,e){qh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)qh(n[r].geometry,e)}},Yh={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Vh(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vh(n[r],e,0)},Polygon:function(t,e){$h(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$h(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)qh(n[r],e)}};function Vh(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function $h(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Vh(t[n],e,1);e.polygonEnd()}function Xh(t,e){t&&Hh.hasOwnProperty(t.type)?Hh[t.type](t,e):qh(t,e)}var Jh,Zh,Kh,Qh,tf,ef,nf,rf,af,of,sf,lf,cf,uf,hf,ff,df=new Jr,pf=new Jr,gf={point:Wh,lineStart:Wh,lineEnd:Wh,polygonStart:function(){df=new Jr,gf.lineStart=vf,gf.lineEnd=_f},polygonEnd:function(){var t=+df;pf.add(t<0?Sh+t:t),this.lineStart=this.lineEnd=this.point=Wh},sphere:function(){pf.add(Sh)}};function vf(){gf.point=mf}function _f(){yf(Jh,Zh)}function mf(t,e){gf.point=yf,Jh=t,Zh=e,Kh=t*=Eh,Qh=Ph(e=(e*=Eh)/2+Mh),tf=zh(e)}function yf(t,e){var n=(t*=Eh)-Kh,r=n>=0?1:-1,i=r*n,a=Ph(e=(e*=Eh)/2+Mh),o=zh(e),s=tf*o,l=Qh*a+s*Ph(i),c=s*r*zh(i);df.add(Th(c,l)),Kh=t,Qh=a,tf=o}function bf(t){return pf=new Jr,Xh(t,gf),2*pf}function xf(t){return[Th(t[1],t[0]),Bh(t[2])]}function wf(t){var e=t[0],n=t[1],r=Ph(n);return[r*Ph(e),r*zh(e),zh(n)]}function Mf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Sf(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Cf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ef(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function kf(t){var e=Gh(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Af,Tf,Pf,Ff,Nf,Lf,Of,Df,zf,If,Gf,Rf,jf,Bf,Uf,Wf,qf={point:Hf,lineStart:Vf,lineEnd:$f,polygonStart:function(){qf.point=Xf,qf.lineStart=Jf,qf.lineEnd=Zf,uf=new Jr,gf.polygonStart()},polygonEnd:function(){gf.polygonEnd(),qf.point=Hf,qf.lineStart=Vf,qf.lineEnd=$f,df<0?(ef=-(rf=180),nf=-(af=90)):uf>yh?af=90:uf<-yh&&(nf=-90),ff[0]=ef,ff[1]=rf},sphere:function(){ef=-(rf=180),nf=-(af=90)}};function Hf(t,e){hf.push(ff=[ef=t,rf=t]),e<nf&&(nf=e),e>af&&(af=e)}function Yf(t,e){var n=wf([t*Eh,e*Eh]);if(cf){var r=Sf(cf,n),i=Sf([r[1],-r[0],0],r);kf(i),i=xf(i);var a,o=t-of,s=o>0?1:-1,l=i[0]*Ch*s,c=kh(o)>180;c^(s*of<l&&l<s*t)?(a=i[1]*Ch)>af&&(af=a):c^(s*of<(l=(l+360)%360-180)&&l<s*t)?(a=-i[1]*Ch)<nf&&(nf=a):(e<nf&&(nf=e),e>af&&(af=e)),c?t<of?Kf(ef,t)>Kf(ef,rf)&&(rf=t):Kf(t,rf)>Kf(ef,rf)&&(ef=t):rf>=ef?(t<ef&&(ef=t),t>rf&&(rf=t)):t>of?Kf(ef,t)>Kf(ef,rf)&&(rf=t):Kf(t,rf)>Kf(ef,rf)&&(ef=t)}else hf.push(ff=[ef=t,rf=t]);e<nf&&(nf=e),e>af&&(af=e),cf=n,of=t}function Vf(){qf.point=Yf}function $f(){ff[0]=ef,ff[1]=rf,qf.point=Hf,cf=null}function Xf(t,e){if(cf){var n=t-of;uf.add(kh(n)>180?n+(n>0?360:-360):n)}else sf=t,lf=e;gf.point(t,e),Yf(t,e)}function Jf(){gf.lineStart()}function Zf(){Xf(sf,lf),gf.lineEnd(),kh(uf)>yh&&(ef=-(rf=180)),ff[0]=ef,ff[1]=rf,cf=null}function Kf(t,e){return(e-=t)<0?e+360:e}function Qf(t,e){return t[0]-e[0]}function td(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function ed(t){var e,n,r,i,a,o,s;if(af=rf=-(ef=nf=1/0),hf=[],Xh(t,qf),n=hf.length){for(hf.sort(Qf),e=1,a=[r=hf[0]];e<n;++e)td(r,(i=hf[e])[0])||td(r,i[1])?(Kf(r[0],i[1])>Kf(r[0],r[1])&&(r[1]=i[1]),Kf(i[0],r[1])>Kf(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=Kf(r[1],i[0]))>o&&(o=s,ef=i[0],rf=r[1])}return hf=ff=null,ef===1/0||nf===1/0?[[NaN,NaN],[NaN,NaN]]:[[ef,nf],[rf,af]]}var nd={sphere:Wh,point:rd,lineStart:ad,lineEnd:ld,polygonStart:function(){nd.lineStart=cd,nd.lineEnd=ud},polygonEnd:function(){nd.lineStart=ad,nd.lineEnd=ld}};function rd(t,e){t*=Eh;var n=Ph(e*=Eh);id(n*Ph(t),n*zh(t),zh(e))}function id(t,e,n){++Af,Pf+=(t-Pf)/Af,Ff+=(e-Ff)/Af,Nf+=(n-Nf)/Af}function ad(){nd.point=od}function od(t,e){t*=Eh;var n=Ph(e*=Eh);Bf=n*Ph(t),Uf=n*zh(t),Wf=zh(e),nd.point=sd,id(Bf,Uf,Wf)}function sd(t,e){t*=Eh;var n=Ph(e*=Eh),r=n*Ph(t),i=n*zh(t),a=zh(e),o=Th(Gh((o=Uf*a-Wf*i)*o+(o=Wf*r-Bf*a)*o+(o=Bf*i-Uf*r)*o),Bf*r+Uf*i+Wf*a);Tf+=o,Lf+=o*(Bf+(Bf=r)),Of+=o*(Uf+(Uf=i)),Df+=o*(Wf+(Wf=a)),id(Bf,Uf,Wf)}function ld(){nd.point=rd}function cd(){nd.point=hd}function ud(){fd(Rf,jf),nd.point=rd}function hd(t,e){Rf=t,jf=e,t*=Eh,e*=Eh,nd.point=fd;var n=Ph(e);Bf=n*Ph(t),Uf=n*zh(t),Wf=zh(e),id(Bf,Uf,Wf)}function fd(t,e){t*=Eh;var n=Ph(e*=Eh),r=n*Ph(t),i=n*zh(t),a=zh(e),o=Uf*a-Wf*i,s=Wf*r-Bf*a,l=Bf*i-Uf*r,c=Lh(o,s,l),u=Bh(c),h=c&&-u/c;zf.add(h*o),If.add(h*s),Gf.add(h*l),Tf+=u,Lf+=u*(Bf+(Bf=r)),Of+=u*(Uf+(Uf=i)),Df+=u*(Wf+(Wf=a)),id(Bf,Uf,Wf)}function dd(t){Af=Tf=Pf=Ff=Nf=Lf=Of=Df=0,zf=new Jr,If=new Jr,Gf=new Jr,Xh(t,nd);var e=+zf,n=+If,r=+Gf,i=Lh(e,n,r);return i<bh&&(e=Lf,n=Of,r=Df,Tf<yh&&(e=Pf,n=Ff,r=Nf),(i=Lh(e,n,r))<bh)?[NaN,NaN]:[Th(n,e)*Ch,Bh(r/i)*Ch]}function pd(t){return function(){return t}}function gd(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function vd(t,e){return kh(t)>xh&&(t-=Math.round(t/Sh)*Sh),[t,e]}function _d(t,e,n){return(t%=Sh)?e||n?gd(yd(t),bd(e,n)):yd(t):e||n?bd(e,n):vd}function md(t){return function(e,n){return kh(e+=t)>xh&&(e-=Math.round(e/Sh)*Sh),[e,n]}}function yd(t){var e=md(t);return e.invert=md(-t),e}function bd(t,e){var n=Ph(t),r=zh(t),i=Ph(e),a=zh(e);function o(t,e){var o=Ph(e),s=Ph(t)*o,l=zh(t)*o,c=zh(e),u=c*n+s*r;return[Th(l*i-u*a,s*n-c*r),Bh(u*i+l*a)]}return o.invert=function(t,e){var o=Ph(e),s=Ph(t)*o,l=zh(t)*o,c=zh(e),u=c*i-l*a;return[Th(l*i+c*a,s*n+u*r),Bh(u*n-s*r)]},o}function xd(t){function e(e){return(e=t(e[0]*Eh,e[1]*Eh))[0]*=Ch,e[1]*=Ch,e}return t=_d(t[0]*Eh,t[1]*Eh,t.length>2?t[2]*Eh:0),e.invert=function(e){return(e=t.invert(e[0]*Eh,e[1]*Eh))[0]*=Ch,e[1]*=Ch,e},e}function wd(t,e,n,r,i,a){if(n){var o=Ph(e),s=zh(e),l=r*n;null==i?(i=e+r*Sh,a=e-l/2):(i=Md(o,i),a=Md(o,a),(r>0?i<a:i>a)&&(i+=r*Sh));for(var c,u=i;r>0?u>a:u<a;u-=l)c=xf([o,-s*Ph(u),-s*zh(u)]),t.point(c[0],c[1])}}function Md(t,e){(e=wf(e))[0]-=t,kf(e);var n=jh(-e[1]);return((-e[2]<0?-n:n)+Sh-yh)%Sh}function Sd(){var t,e,n=pd([0,0]),r=pd(90),i=pd(2),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=Ch,n[1]*=Ch}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*Eh,l=i.apply(this,arguments)*Eh;return t=[],e=_d(-o[0]*Eh,-o[1]*Eh,0).invert,wd(a,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:pd([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(r="function"==typeof t?t:pd(+t),o):r},o.precision=function(t){return arguments.length?(i="function"==typeof t?t:pd(+t),o):i},o}function Cd(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Wh,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ed(t,e){return kh(t[0]-e[0])<yh&&kh(t[1]-e[1])<yh}function kd(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ad(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Ed(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*yh}s.push(n=new kd(r,t,null,!0)),l.push(n.o=new kd(r,null,n,!1)),s.push(n=new kd(o,t,null,!1)),l.push(n.o=new kd(o,null,n,!0))}}),s.length){for(l.sort(e),Td(s),Td(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var c,u,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,o=c.length;a<o;++a)i.point((u=c[a])[0],u[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((u=c[a])[0],u[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function Td(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Pd(t){return kh(t[0])<=xh?t[0]:Ih(t[0])*((kh(t[0])+xh)%Sh-xh)}function Fd(t,e){var n=Pd(e),r=e[1],i=zh(r),a=[zh(n),-Ph(n),0],o=0,s=0,l=new Jr;1===i?r=wh+yh:-1===i&&(r=-wh-yh);for(var c=0,u=t.length;c<u;++c)if(f=(h=t[c]).length)for(var h,f,d=h[f-1],p=Pd(d),g=d[1]/2+Mh,v=zh(g),_=Ph(g),m=0;m<f;++m,p=b,v=w,_=M,d=y){var y=h[m],b=Pd(y),x=y[1]/2+Mh,w=zh(x),M=Ph(x),S=b-p,C=S>=0?1:-1,E=C*S,k=E>xh,A=v*w;if(l.add(Th(A*C*zh(E),_*M+A*Ph(E))),o+=k?S+C*Sh:S,k^p>=n^b>=n){var T=Sf(wf(d),wf(y));kf(T);var P=Sf(a,T);kf(P);var F=(k^S>=0?-1:1)*Bh(P[2]);(r>F||r===F&&(T[0]||T[1]))&&(s+=k^S>=0?1:-1)}}return(o<-yh||o<yh&&l<-bh)^1&s}function Nd(t,e,n,r){return function(i){var a,o,s,l=e(i),c=Cd(),u=e(c),h=!1,f={point:d,lineStart:g,lineEnd:v,polygonStart:function(){f.point=_,f.lineStart=m,f.lineEnd=y,o=[],a=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=v,o=Ti(o);var t=Fd(a,r);o.length?(h||(i.polygonStart(),h=!0),Ad(o,Od,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function g(){f.point=p,l.lineStart()}function v(){f.point=d,l.lineEnd()}function _(t,e){s.push([t,e]),u.point(t,e)}function m(){u.lineStart(),s=[]}function y(){_(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),f=c.result(),d=f.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(Ld))}return f}}function Ld(t){return t.length>1}function Od(t,e){return((t=t.x)[0]<0?t[1]-wh-yh:wh-t[1])-((e=e.x)[0]<0?e[1]-wh-yh:wh-e[1])}vd.invert=vd;const Dd=Nd(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?xh:-xh,l=kh(a-n);kh(l-xh)<yh?(t.point(n,r=(r+o)/2>0?wh:-wh),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=xh&&(kh(n-i)<yh&&(n-=i*yh),kh(a-s)<yh&&(a-=s*yh),r=function(t,e,n,r){var i,a,o=zh(t-n);return kh(o)>yh?Ah((zh(e)*(a=Ph(r))*zh(n)-zh(r)*(i=Ph(e))*zh(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*wh,r.point(-xh,i),r.point(0,i),r.point(xh,i),r.point(xh,0),r.point(xh,-i),r.point(0,-i),r.point(-xh,-i),r.point(-xh,0),r.point(-xh,i);else if(kh(t[0]-e[0])>yh){var a=t[0]<e[0]?xh:-xh;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-xh,-wh]);function zd(t){var e=Ph(t),n=2*Eh,r=e>0,i=kh(e)>yh;function a(t,n){return Ph(t)*Ph(n)>e}function o(t,n,r){var i=[1,0,0],a=Sf(wf(t),wf(n)),o=Mf(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var c=e*o/l,u=-e*s/l,h=Sf(i,a),f=Ef(i,c);Cf(f,Ef(a,u));var d=h,p=Mf(f,d),g=Mf(d,d),v=p*p-g*(Mf(f,f)-1);if(!(v<0)){var _=Gh(v),m=Ef(d,(-p-_)/g);if(Cf(m,f),m=xf(m),!r)return m;var y,b=t[0],x=n[0],w=t[1],M=n[1];x<b&&(y=b,b=x,x=y);var S=x-b,C=kh(S-xh)<yh;if(!C&&M<w&&(y=w,w=M,M=y),C||S<yh?C?w+M>0^m[1]<(kh(m[0]-b)<yh?w:M):w<=m[1]&&m[1]<=M:S>xh^(b<=m[0]&&m[0]<=x)){var E=Ef(d,(-p+_)/g);return Cf(E,f),[m,xf(E)]}}}function s(e,n){var i=r?t:xh-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Nd(a,function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,f){var d,p=[h,f],g=a(h,f),v=r?g?0:s(h,f):g?s(h+(h<0?xh:-xh),f):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(d=o(e,p))||Ed(e,d)||Ed(p,d))&&(p[2]=1),g!==l)u=0,g?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var _;v&n||!(_=o(p,e,!0))||(u=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1],3)))}!g||e&&Ed(e,p)||t.point(p[0],p[1]),e=p,l=g,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},function(e,r,i,a){wd(a,t,n,i,e,r)},r?[0,-t]:[-xh,t-xh])}var Id,Gd,Rd,jd,Bd=1e9,Ud=-Bd;function Wd(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var u=0,h=0;if(null==i||(u=o(i,s))!==(h=o(a,s))||l(i,a)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==h);else c.point(a[0],a[1])}function o(r,i){return kh(r[0]-t)<yh?i>0?0:3:kh(r[0]-n)<yh?i>0?2:1:kh(r[1]-e)<yh?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,h,f,d,p,g,v,_,m,y=o,b=Cd(),x={point:w,lineStart:function(){x.point=M,c&&c.push(u=[]);_=!0,v=!1,p=g=NaN},lineEnd:function(){l&&(M(h,f),d&&v&&b.rejoin(),l.push(b.result()));x.point=w,v&&y.lineEnd()},polygonStart:function(){y=b,l=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],l=1,u=s.length,h=s[0],f=h[0],d=h[1];l<u;++l)a=f,o=d,f=(h=s[l])[0],d=h[1],o<=r?d>r&&(f-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(f-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=m&&e,i=(l=Ti(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&Ad(l,s,e,a,o),o.polygonEnd());y=o,l=c=u=null}};function w(t,e){i(t,e)&&y.point(t,e)}function M(a,o){var s=i(a,o);if(c&&u.push([a,o]),_)h=a,f=o,d=s,_=!1,s&&(y.lineStart(),y.point(a,o));else if(s&&v)y.point(a,o);else{var l=[p=Math.max(Ud,Math.min(Bd,p)),g=Math.max(Ud,Math.min(Bd,g))],b=[a=Math.max(Ud,Math.min(Bd,a)),o=Math.max(Ud,Math.min(Bd,o))];!function(t,e,n,r,i,a){var o,s=t[0],l=t[1],c=0,u=1,h=e[0]-s,f=e[1]-l;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=s+c*h,t[1]=l+c*f),u<1&&(e[0]=s+u*h,e[1]=l+u*f),!0}}}}}(l,b,t,e,n,r)?s&&(y.lineStart(),y.point(a,o),m=!1):(v||(y.lineStart(),y.point(l[0],l[1])),y.point(b[0],b[1]),s||y.lineEnd(),m=!1)}p=a,g=o,v=s}return x}}function qd(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=Wd(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}}var Hd={sphere:Wh,point:Wh,lineStart:function(){Hd.point=Vd,Hd.lineEnd=Yd},lineEnd:Wh,polygonStart:Wh,polygonEnd:Wh};function Yd(){Hd.point=Hd.lineEnd=Wh}function Vd(t,e){Gd=t*=Eh,Rd=zh(e*=Eh),jd=Ph(e),Hd.point=$d}function $d(t,e){t*=Eh;var n=zh(e*=Eh),r=Ph(e),i=kh(t-Gd),a=Ph(i),o=r*zh(i),s=jd*n-Rd*r*a,l=Rd*n+jd*r*a;Id.add(Th(Gh(o*o+s*s),l)),Gd=t,Rd=n,jd=r}function Xd(t){return Id=new Jr,Xh(t,Hd),+Id}var Jd=[null,null],Zd={type:"LineString",coordinates:Jd};function Kd(t,e){return Jd[0]=t,Jd[1]=e,Xd(Zd)}var Qd={Feature:function(t,e){return ep(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(ep(n[r].geometry,e))return!0;return!1}},tp={Sphere:function(){return!0},Point:function(t,e){return np(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(np(n[r],e))return!0;return!1},LineString:function(t,e){return rp(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(rp(n[r],e))return!0;return!1},Polygon:function(t,e){return ip(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ip(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(ep(n[r],e))return!0;return!1}};function ep(t,e){return!(!t||!tp.hasOwnProperty(t.type))&&tp[t.type](t,e)}function np(t,e){return 0===Kd(t,e)}function rp(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=Kd(t[a],e)))return!0;if(a>0&&(i=Kd(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<bh*i)return!0;n=r}return!1}function ip(t,e){return!!Fd(t.map(ap),op(e))}function ap(t){return(t=t.map(op)).pop(),t}function op(t){return[t[0]*Eh,t[1]*Eh]}function sp(t,e){return(t&&Qd.hasOwnProperty(t.type)?Qd[t.type]:ep)(t,e)}function lp(t,e,n){var r=Li(t,e-yh,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function cp(t,e,n){var r=Li(t,e-yh,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function up(){var t,e,n,r,i,a,o,s,l,c,u,h,f=10,d=f,p=90,g=360,v=2.5;function _(){return{type:"MultiLineString",coordinates:m()}}function m(){return Li(Fh(r/p)*p,n,p).map(u).concat(Li(Fh(s/g)*g,o,g).map(h)).concat(Li(Fh(e/f)*f,t,f).filter(function(t){return kh(t%p)>yh}).map(l)).concat(Li(Fh(a/d)*d,i,d).filter(function(t){return kh(t%g)>yh}).map(c))}return _.lines=function(){return m().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(h(o).slice(1),u(n).reverse().slice(1),h(s).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),_.precision(v)):[[r,s],[n,o]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),_.precision(v)):[[e,a],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],_):[p,g]},_.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],_):[f,d]},_.precision=function(f){return arguments.length?(v=+f,l=lp(a,i,90),c=cp(e,t,v),u=lp(s,o,90),h=cp(r,n,v),_):v},_.extentMajor([[-180,-90+yh],[180,90-yh]]).extentMinor([[-180,-80-yh],[180,80+yh]])}function hp(){return up()()}function fp(t,e){var n=t[0]*Eh,r=t[1]*Eh,i=e[0]*Eh,a=e[1]*Eh,o=Ph(r),s=zh(r),l=Ph(a),c=zh(a),u=o*Ph(n),h=o*zh(n),f=l*Ph(i),d=l*zh(i),p=2*Bh(Gh(Uh(a-r)+o*l*Uh(i-n))),g=zh(p),v=p?function(t){var e=zh(t*=p)/g,n=zh(p-t)/g,r=n*u+e*f,i=n*h+e*d,a=n*s+e*c;return[Th(i,r)*Ch,Th(a,Gh(r*r+i*i))*Ch]}:function(){return[n*Ch,r*Ch]};return v.distance=p,v}const dp=t=>t;var pp,gp,vp,_p,mp=new Jr,yp=new Jr,bp={point:Wh,lineStart:Wh,lineEnd:Wh,polygonStart:function(){bp.lineStart=xp,bp.lineEnd=Sp},polygonEnd:function(){bp.lineStart=bp.lineEnd=bp.point=Wh,mp.add(kh(yp)),yp=new Jr},result:function(){var t=mp/2;return mp=new Jr,t}};function xp(){bp.point=wp}function wp(t,e){bp.point=Mp,pp=vp=t,gp=_p=e}function Mp(t,e){yp.add(_p*t-vp*e),vp=t,_p=e}function Sp(){Mp(pp,gp)}const Cp=bp;var Ep=1/0,kp=Ep,Ap=-Ep,Tp=Ap,Pp={point:function(t,e){t<Ep&&(Ep=t);t>Ap&&(Ap=t);e<kp&&(kp=e);e>Tp&&(Tp=e)},lineStart:Wh,lineEnd:Wh,polygonStart:Wh,polygonEnd:Wh,result:function(){var t=[[Ep,kp],[Ap,Tp]];return Ap=Tp=-(kp=Ep=1/0),t}};const Fp=Pp;var Np,Lp,Op,Dp,zp=0,Ip=0,Gp=0,Rp=0,jp=0,Bp=0,Up=0,Wp=0,qp=0,Hp={point:Yp,lineStart:Vp,lineEnd:Jp,polygonStart:function(){Hp.lineStart=Zp,Hp.lineEnd=Kp},polygonEnd:function(){Hp.point=Yp,Hp.lineStart=Vp,Hp.lineEnd=Jp},result:function(){var t=qp?[Up/qp,Wp/qp]:Bp?[Rp/Bp,jp/Bp]:Gp?[zp/Gp,Ip/Gp]:[NaN,NaN];return zp=Ip=Gp=Rp=jp=Bp=Up=Wp=qp=0,t}};function Yp(t,e){zp+=t,Ip+=e,++Gp}function Vp(){Hp.point=$p}function $p(t,e){Hp.point=Xp,Yp(Op=t,Dp=e)}function Xp(t,e){var n=t-Op,r=e-Dp,i=Gh(n*n+r*r);Rp+=i*(Op+t)/2,jp+=i*(Dp+e)/2,Bp+=i,Yp(Op=t,Dp=e)}function Jp(){Hp.point=Yp}function Zp(){Hp.point=Qp}function Kp(){tg(Np,Lp)}function Qp(t,e){Hp.point=tg,Yp(Np=Op=t,Lp=Dp=e)}function tg(t,e){var n=t-Op,r=e-Dp,i=Gh(n*n+r*r);Rp+=i*(Op+t)/2,jp+=i*(Dp+e)/2,Bp+=i,Up+=(i=Dp*t-Op*e)*(Op+t),Wp+=i*(Dp+e),qp+=3*i,Yp(Op=t,Dp=e)}const eg=Hp;function ng(t){this._context=t}ng.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Sh)}},result:Wh};var rg,ig,ag,og,sg,lg=new Jr,cg={point:Wh,lineStart:function(){cg.point=ug},lineEnd:function(){rg&&hg(ig,ag),cg.point=Wh},polygonStart:function(){rg=!0},polygonEnd:function(){rg=null},result:function(){var t=+lg;return lg=new Jr,t}};function ug(t,e){cg.point=hg,ig=og=t,ag=sg=e}function hg(t,e){og-=t,sg-=e,lg.add(Gh(og*og+sg*sg)),og=t,sg=e}const fg=cg;let dg,pg,gg,vg;class _g{constructor(t){this._append=null==t?mg:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return mg;if(e!==dg){const t=10**e;dg=e,pg=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return pg}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==gg||this._append!==pg){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,gg=t,pg=this._append,vg=this._,this._=e}this._+=vg}}result(){const t=this._;return this._="",t.length?t:null}}function mg(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yg(t,e){let n,r,i=3,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Xh(t,n(r))),r.result()}return o.area=function(t){return Xh(t,n(Cp)),Cp.result()},o.measure=function(t){return Xh(t,n(fg)),fg.result()},o.bounds=function(t){return Xh(t,n(Fp)),Fp.result()},o.centroid=function(t){return Xh(t,n(eg)),eg.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,dp):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new _g(i)):new ng(e=t),"function"!=typeof a&&r.pointRadius(a),o):e},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new _g(i)),o},o.projection(t).digits(i).context(e)}function bg(t){return{stream:xg(t)}}function xg(t){return function(e){var n=new wg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function wg(){}function Mg(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Xh(n,t.stream(Fp)),e(Fp.result()),null!=r&&t.clipExtent(r),t}function Sg(t,e,n){return Mg(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])},n)}function Cg(t,e,n){return Sg(t,[[0,0],e],n)}function Eg(t,e,n){return Mg(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])},n)}function kg(t,e,n){return Mg(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])},n)}wg.prototype={constructor:wg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ag=16,Tg=Ph(30*Eh);function Pg(t,e){return+e?function(t,e){function n(r,i,a,o,s,l,c,u,h,f,d,p,g,v){var _=c-r,m=u-i,y=_*_+m*m;if(y>4*e&&g--){var b=o+f,x=s+d,w=l+p,M=Gh(b*b+x*x+w*w),S=Bh(w/=M),C=kh(kh(w)-1)<yh||kh(a-h)<yh?(a+h)/2:Th(x,b),E=t(C,S),k=E[0],A=E[1],T=k-r,P=A-i,F=m*T-_*P;(F*F/y>e||kh((_*T+m*P)/y-.5)>.3||o*f+s*d+l*p<Tg)&&(n(r,i,a,o,s,l,k,A,C,b/=M,x/=M,w,g,v),v.point(k,A),n(k,A,C,b,x,w,c,u,h,f,d,p,g,v))}}return function(e){var r,i,a,o,s,l,c,u,h,f,d,p,g={point:v,lineStart:_,lineEnd:y,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){u=NaN,g.point=m,e.lineStart()}function m(r,i){var a=wf([r,i]),o=t(r,i);n(u,h,c,f,d,p,u=o[0],h=o[1],c=r,f=a[0],d=a[1],p=a[2],Ag,e),e.point(u,h)}function y(){g.point=v,e.lineEnd()}function b(){_(),g.point=x,g.lineEnd=w}function x(t,e){m(r=t,e),i=u,a=h,o=f,s=d,l=p,g.point=m}function w(){n(u,h,c,f,d,p,i,a,r,o,s,l,Ag,e),g.lineEnd=y,y()}return g}}(t,e):function(t){return xg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Fg=xg({point:function(t,e){this.stream.point(t*Eh,e*Eh)}});function Ng(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=Ph(a),s=zh(a),l=o*t,c=s*t,u=o/t,h=s/t,f=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(t,a){return[l*(t*=r)-c*(a*=i)+e,n-c*t-l*a]}return p.invert=function(t,e){return[r*(u*t-h*e+f),i*(d-h*t-u*e)]},p}function Lg(t){return Og(function(){return t})()}function Og(t){var e,n,r,i,a,o,s,l,c,u,h=150,f=480,d=250,p=0,g=0,v=0,_=0,m=0,y=0,b=1,x=1,w=null,M=Dd,S=null,C=dp,E=.5;function k(t){return l(t[0]*Eh,t[1]*Eh)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Ch,t[1]*Ch]}function T(){var t=Ng(h,0,0,b,x,y).apply(null,e(p,g)),r=Ng(h,f-t[0],d-t[1],b,x,y);return n=_d(v,_,m),s=gd(e,r),l=gd(n,s),o=Pg(s,E),P()}function P(){return c=u=null,k}return k.stream=function(t){return c&&u===t?c:c=Fg(function(t){return xg({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(o(C(u=t)))))},k.preclip=function(t){return arguments.length?(M=t,w=void 0,P()):M},k.postclip=function(t){return arguments.length?(C=t,S=r=i=a=null,P()):C},k.clipAngle=function(t){return arguments.length?(M=+t?zd(w=t*Eh):(w=null,Dd),P()):w*Ch},k.clipExtent=function(t){return arguments.length?(C=null==t?(S=r=i=a=null,dp):Wd(S=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),P()):null==S?null:[[S,r],[i,a]]},k.scale=function(t){return arguments.length?(h=+t,T()):h},k.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],T()):[f,d]},k.center=function(t){return arguments.length?(p=t[0]%360*Eh,g=t[1]%360*Eh,T()):[p*Ch,g*Ch]},k.rotate=function(t){return arguments.length?(v=t[0]%360*Eh,_=t[1]%360*Eh,m=t.length>2?t[2]%360*Eh:0,T()):[v*Ch,_*Ch,m*Ch]},k.angle=function(t){return arguments.length?(y=t%360*Eh,T()):y*Ch},k.reflectX=function(t){return arguments.length?(b=t?-1:1,T()):b<0},k.reflectY=function(t){return arguments.length?(x=t?-1:1,T()):x<0},k.precision=function(t){return arguments.length?(o=Pg(s,E=t*t),P()):Gh(E)},k.fitExtent=function(t,e){return Sg(k,t,e)},k.fitSize=function(t,e){return Cg(k,t,e)},k.fitWidth=function(t,e){return Eg(k,t,e)},k.fitHeight=function(t,e){return kg(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&A,T()}}function Dg(t){var e=0,n=xh/3,r=Og(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Eh,n=t[1]*Eh):[e*Ch,n*Ch]},i}function zg(t,e){var n=zh(t),r=(n+zh(e))/2;if(kh(r)<yh)return function(t){var e=Ph(t);function n(t,n){return[t*e,zh(n)/e]}return n.invert=function(t,n){return[t/e,Bh(n*e)]},n}(t);var i=1+n*(2*r-n),a=Gh(i)/r;function o(t,e){var n=Gh(i-2*r*zh(e))/r;return[n*zh(t*=r),a-n*Ph(t)]}return o.invert=function(t,e){var n=a-e,o=Th(t,kh(n))*Ih(n);return n*r<0&&(o-=xh*Ih(t)*Ih(n)),[o/r,Bh((i-(t*t+n*n)*r*r)/(2*r))]},o}function Ig(){return Dg(zg).scale(155.424).center([0,33.6442])}function Gg(){return Ig().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Rg(){var t,e,n,r,i,a,o=Gg(),s=Ig().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Ig().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){a=[t,e]}};function u(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function h(){return t=e=null,u}return u.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:o).invert(t)},u.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([o.stream(e=n),s.stream(n),l.stream(n)])},u.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),h()):o.precision()},u.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),u.translate(o.translate())):o.scale()},u.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],u=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,u-.238*e],[a+.455*e,u+.238*e]]).stream(c),r=s.translate([a-.307*e,u+.201*e]).clipExtent([[a-.425*e+yh,u+.12*e+yh],[a-.214*e-yh,u+.234*e-yh]]).stream(c),i=l.translate([a-.205*e,u+.212*e]).clipExtent([[a-.214*e+yh,u+.166*e+yh],[a-.115*e-yh,u+.234*e-yh]]).stream(c),h()},u.fitExtent=function(t,e){return Sg(u,t,e)},u.fitSize=function(t,e){return Cg(u,t,e)},u.fitWidth=function(t,e){return Eg(u,t,e)},u.fitHeight=function(t,e){return kg(u,t,e)},u.scale(1070)}function jg(t){return function(e,n){var r=Ph(e),i=Ph(n),a=t(r*i);return a===1/0?[2,0]:[a*i*zh(e),a*zh(n)]}}function Bg(t){return function(e,n){var r=Gh(e*e+n*n),i=t(r),a=zh(i),o=Ph(i);return[Th(e*a,r*o),Bh(r&&n*a/r)]}}var Ug=jg(function(t){return Gh(2/(1+t))});function Wg(){return Lg(Ug).scale(124.75).clipAngle(179.999)}Ug.invert=Bg(function(t){return 2*Bh(t/2)});var qg=jg(function(t){return(t=jh(t))&&t/zh(t)});function Hg(){return Lg(qg).scale(79.4188).clipAngle(179.999)}function Yg(t,e){return[t,Oh(Rh((wh+e)/2))]}function Vg(){return $g(Yg).scale(961/Sh)}function $g(t){var e,n,r,i=Lg(t),a=i.center,o=i.scale,s=i.translate,l=i.clipExtent,c=null;function u(){var a=xh*o(),s=i(xd(i.rotate()).invert([0,0]));return l(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Yg?[[Math.max(s[0]-a,c),e],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),u()):o()},i.translate=function(t){return arguments.length?(s(t),u()):s()},i.center=function(t){return arguments.length?(a(t),u()):a()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[n,r]]},u()}function Xg(t){return Rh((wh+t)/2)}function Jg(t,e){var n=Ph(t),r=t===e?zh(t):Oh(n/Ph(e))/Oh(Xg(e)/Xg(t)),i=n*Dh(Xg(t),r)/r;if(!r)return Yg;function a(t,e){i>0?e<-wh+yh&&(e=-wh+yh):e>wh-yh&&(e=wh-yh);var n=i/Dh(Xg(e),r);return[n*zh(r*t),i-n*Ph(r*t)]}return a.invert=function(t,e){var n=i-e,a=Ih(r)*Gh(t*t+n*n),o=Th(t,kh(n))*Ih(n);return n*r<0&&(o-=xh*Ih(t)*Ih(n)),[o/r,2*Ah(Dh(i/a,1/r))-wh]},a}function Zg(){return Dg(Jg).scale(109.5).parallels([30,30])}function Kg(t,e){return[t,e]}function Qg(){return Lg(Kg).scale(152.63)}function tv(t,e){var n=Ph(t),r=t===e?zh(t):(n-Ph(e))/(e-t),i=n/r+t;if(kh(r)<yh)return Kg;function a(t,e){var n=i-e,a=r*t;return[n*zh(a),i-n*Ph(a)]}return a.invert=function(t,e){var n=i-e,a=Th(t,kh(n))*Ih(n);return n*r<0&&(a-=xh*Ih(t)*Ih(n)),[a/r,i-Ih(r)*Gh(t*t+n*n)]},a}function ev(){return Dg(tv).scale(131.154).center([0,13.9389])}qg.invert=Bg(function(t){return t}),Yg.invert=function(t,e){return[t,2*Ah(Nh(e))-wh]},Kg.invert=Kg;var nv=1.340264,rv=-.081106,iv=893e-6,av=.003796,ov=Gh(3)/2;function sv(t,e){var n=Bh(ov*zh(e)),r=n*n,i=r*r*r;return[t*Ph(n)/(ov*(nv+3*rv*r+i*(7*iv+9*av*r))),n*(nv+rv*r+i*(iv+av*r))]}function lv(){return Lg(sv).scale(177.158)}function cv(t,e){var n=Ph(e),r=Ph(t)*n;return[n*zh(t)/r,zh(e)/r]}function uv(){return Lg(cv).scale(144.049).clipAngle(60)}function hv(){var t,e,n,r,i,a,o,s=1,l=0,c=0,u=1,h=1,f=0,d=null,p=1,g=1,v=xg({point:function(t,e){var n=y([t,e]);this.stream.point(n[0],n[1])}}),_=dp;function m(){return p=s*u,g=s*h,a=o=null,y}function y(n){var r=n[0]*p,i=n[1]*g;if(f){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+l,i+c]}return y.invert=function(n){var r=n[0]-l,i=n[1]-c;if(f){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/g]},y.stream=function(t){return a&&o===t?a:a=v(_(o=t))},y.postclip=function(t){return arguments.length?(_=t,d=n=r=i=null,m()):_},y.clipExtent=function(t){return arguments.length?(_=null==t?(d=n=r=i=null,dp):Wd(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),m()):null==d?null:[[d,n],[r,i]]},y.scale=function(t){return arguments.length?(s=+t,m()):s},y.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],m()):[l,c]},y.angle=function(n){return arguments.length?(e=zh(f=n%360*Eh),t=Ph(f),m()):f*Ch},y.reflectX=function(t){return arguments.length?(u=t?-1:1,m()):u<0},y.reflectY=function(t){return arguments.length?(h=t?-1:1,m()):h<0},y.fitExtent=function(t,e){return Sg(y,t,e)},y.fitSize=function(t,e){return Cg(y,t,e)},y.fitWidth=function(t,e){return Eg(y,t,e)},y.fitHeight=function(t,e){return kg(y,t,e)},y}function fv(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function dv(){return Lg(fv).scale(175.295)}function pv(t,e){return[Ph(e)*zh(t),zh(e)]}function gv(){return Lg(pv).scale(249.5).clipAngle(90+yh)}function vv(t,e){var n=Ph(e),r=1+Ph(t)*n;return[n*zh(t)/r,zh(e)/r]}function _v(){return Lg(vv).scale(250).clipAngle(142)}function mv(t,e){return[Oh(Rh((wh+e)/2)),-t]}function yv(){var t=$g(mv),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function bv(t,e){return t.parent===e.parent?1:2}function xv(t,e){return t+e.x}function wv(t,e){return Math.max(t,e.y)}function Mv(){var t=bv,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(xv,0)/t.length}(n),e.y=function(t){return 1+t.reduce(wv,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,l)/2,u=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Sv(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Cv(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=kv)):void 0===e&&(e=Ev);for(var n,r,i,a,o,s=new Pv(t),l=[s];n=l.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new Pv(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Tv)}function Ev(t){return t.children}function kv(t){return Array.isArray(t)?t[1]:null}function Av(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Tv(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Pv(t){this.data=t,this.depth=this.height=0,this.parent=null}function Fv(t){return null==t?null:Nv(t)}function Nv(t){if("function"!=typeof t)throw new Error;return t}function Lv(){return 0}function Ov(t){return function(){return t}}sv.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(nv+rv*i+a*(iv+av*i))-e)/(nv+3*rv*i+a*(7*iv+9*av*i)))*r)*i*i,!(kh(n)<bh));++o);return[ov*t*(nv+3*rv*i+a*(7*iv+9*av*i))/Ph(r),Bh(zh(r)/ov)]},cv.invert=Bg(Ah),fv.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(kh(n)>yh&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},pv.invert=Bg(Bh),vv.invert=Bg(function(t){return 2*Ah(t)}),mv.invert=function(t,e){return[-e,2*Ah(Nh(t))-wh]},Pv.prototype=Cv.prototype={constructor:Pv,count:function(){return this.eachAfter(Sv)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)t.call(e,a,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Cv(this).eachBefore(Av)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,a=[i];do{for(t=a.reverse(),a=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n])}while(a.length)}};const Dv=1664525,zv=1013904223,Iv=4294967296;function Gv(){let t=1;return()=>(t=(Dv*t+zv)%Iv)/Iv}function Rv(t){return jv(t,Gv())}function jv(t,e){for(var n,r,i=0,a=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,o=[];i<a;)n=t[i],r&&Wv(r,n)?++i:(r=Hv(o=Bv(o,n)),i=0);return r}function Bv(t,e){var n,r;if(qv(e,t))return[e];for(n=0;n<t.length;++n)if(Uv(e,t[n])&&qv(Yv(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Uv(Yv(t[n],t[r]),e)&&Uv(Yv(t[n],e),t[r])&&Uv(Yv(t[r],e),t[n])&&qv(Vv(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Uv(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Wv(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function qv(t,e){for(var n=0;n<e.length;++n)if(!Wv(t,e[n]))return!1;return!0}function Hv(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Yv(t[0],t[1]);case 3:return Vv(t[0],t[1],t[2])}}function Yv(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,c=o-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+s)/2}}function Vv(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,c=n.x,u=n.y,h=n.r,f=r-o,d=r-c,p=i-s,g=i-u,v=l-a,_=h-a,m=r*r+i*i-a*a,y=m-o*o-s*s+l*l,b=m-c*c-u*u+h*h,x=d*p-f*g,w=(p*b-g*y)/(2*x)-r,M=(g*v-p*_)/x,S=(d*y-f*b)/(2*x)-i,C=(f*_-d*v)/x,E=M*M+C*C-1,k=2*(a+w*M+S*C),A=w*w+S*S-a*a,T=-(Math.abs(E)>1e-6?(k+Math.sqrt(k*k-4*E*A))/(2*E):A/k);return{x:r+w+M*T,y:i+S+C*T,r:T}}function $v(t,e,n){var r,i,a,o,s=t.x-e.x,l=t.y-e.y,c=s*s+l*l;c?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*s-a*l,n.y=t.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-a*l,n.y=e.y+r*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Xv(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Jv(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Zv(t){this._=t,this.next=null,this.previous=null}function Kv(t,e){if(!(a=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,a,o,s,l,c,u,h,f;if((n=t[0]).x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;$v(r,n,i=t[2]),n=new Zv(n),r=new Zv(r),i=new Zv(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<a;++l){$v(n._,r._,i=t[l]),i=new Zv(i),c=r.next,u=n.previous,h=r._.r,f=n._.r;do{if(h<=f){if(Xv(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue t}h+=c._.r,c=c.next}else{if(Xv(u._,i._)){(n=u).next=r,r.previous=n,--l;continue t}f+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Jv(n);(i=i.next)!==r;)(s=Jv(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=jv(n,e),l=0;l<a;++l)(n=t[l]).x-=i.x,n.y-=i.y;return i.r}function Qv(t){return Kv(t,Gv()),t}function t_(t){return Math.sqrt(t.value)}function e_(){var t=null,e=1,n=1,r=Lv;function i(i){const a=Gv();return i.x=e/2,i.y=n/2,t?i.eachBefore(n_(t)).eachAfter(r_(r,.5,a)).eachBefore(i_(1)):i.eachBefore(n_(t_)).eachAfter(r_(Lv,1,a)).eachAfter(r_(r,i.r/Math.min(e,n),a)).eachBefore(i_(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Fv(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Ov(+t),i):r},i}function n_(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function r_(t,e,n){return function(r){if(i=r.children){var i,a,o,s=i.length,l=t(r)*e||0;if(l)for(a=0;a<s;++a)i[a].r+=l;if(o=Kv(i,n),l)for(a=0;a<s;++a)i[a].r-=l;r.r=o+l}}}function i_(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function a_(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function o_(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,c=t.value&&(r-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function s_(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&o_(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(a_),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var l_={depth:-1},c_={},u_={};function h_(t){return t.id}function f_(t){return t.parentId}function d_(){var t,e=h_,n=f_;function r(r){var i,a,o,s,l,c,u,h,f=Array.from(r),d=e,p=n,g=new Map;if(null!=t){const e=f.map((e,n)=>function(t){t=`${t}`;let e=t.length;g_(t,e-1)&&!g_(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(e,n,r))),n=e.map(p_),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(p_(t)),f.push(u_));d=(t,n)=>e[n],p=(t,e)=>n[e]}for(o=0,i=f.length;o<i;++o)a=f[o],c=f[o]=new Pv(a),null!=(u=d(a,o,r))&&(u+="")&&(h=c.id=u,g.set(h,g.has(h)?c_:c)),null!=(u=p(a,o,r))&&(u+="")&&(c.parent=u);for(o=0;o<i;++o)if(u=(c=f[o]).parent){if(!(l=g.get(u)))throw new Error("missing: "+u);if(l===c_)throw new Error("ambiguous: "+u);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===u_&&1===s.children.length;)s=s.children[0],--i;for(let t=f.length-1;t>=0&&(c=f[t]).data===u_;--t)c.data=null}if(s.parent=l_,s.eachBefore(function(t){t.depth=t.parent.depth+1,--i}).eachBefore(Tv),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=Fv(t),r):e},r.parentId=function(t){return arguments.length?(n=Fv(t),r):n},r.path=function(e){return arguments.length?(t=Fv(e),r):t},r}function p_(t){let e=t.length;if(e<2)return"";for(;--e>1&&!g_(t,e););return t.slice(0,e)}function g_(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function v_(t,e){return t.parent===e.parent?1:2}function __(t){var e=t.children;return e?e[0]:t.t}function m_(t){var e=t.children;return e?e[e.length-1]:t.t}function y_(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function b_(t,e,n){return t.a.parent===e.parent?t.a:n}function x_(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function w_(){var t=v_,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,a,o=new x_(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new x_(r[i],i)),n.parent=e;return(o.parent=new x_(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)});var f=c===u?1:t(c,u)/2,d=f-c.x,p=e/(u.x+f+d),g=n/(h.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*g})}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,f=l.m;s=m_(s),a=__(a),s&&a;)l=__(l),(o=m_(o)).a=e,(i=s.z+h-a.z-c+t(s._,a._))>0&&(y_(b_(s,e,r),e,i),c+=i,u+=i),h+=s.m,c+=a.m,f+=l.m,u+=o.m;s&&!m_(o)&&(o.t=s,o.m+=h-u),a&&!__(l)&&(l.t=a,l.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function M_(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,c=t.value&&(i-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}x_.prototype=Object.create(Pv.prototype);var S_=(1+Math.sqrt(5))/2;function C_(t,e,n,r,i,a){for(var o,s,l,c,u,h,f,d,p,g,v,_=[],m=e.children,y=0,b=0,x=m.length,w=e.value;y<x;){l=i-n,c=a-r;do{u=m[b++].value}while(!u&&b<x);for(h=f=u,v=u*u*(g=Math.max(c/l,l/c)/(w*t)),p=Math.max(f/v,v/h);b<x;++b){if(u+=s=m[b].value,s<h&&(h=s),s>f&&(f=s),v=u*u*g,(d=Math.max(f/v,v/h))>p){u-=s;break}p=d}_.push(o={value:u,dice:l<c,children:m.slice(y,b)}),o.dice?o_(o,n,r,i,w?r+=c*u/w:a):M_(o,n,r,w?n+=l*u/w:i,a),w-=u,y=b}return _}const E_=function t(e){function n(t,n,r,i,a){C_(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(S_);function k_(){var t=E_,e=!1,n=1,r=1,i=[0],a=Lv,o=Lv,s=Lv,l=Lv,c=Lv;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(a_),t}function h(e){var n=i[e.depth],r=e.x0+n,u=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<u&&(u=f=(u+f)/2),e.x0=r,e.y0=u,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=a(e)/2,r+=c(e)-n,u+=o(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(f-=l(e)-n)<u&&(u=f=(u+f)/2),t(e,r,u,h,f))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.tile=function(e){return arguments.length?(t=Nv(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Ov(+t),u):a},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Ov(+t),u):o},u.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Ov(+t),u):s},u.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ov(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Ov(+t),u):c},u}function A_(t,e,n,r,i){var a,o,s=t.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,l){if(e>=n-1){var u=s[e];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var h=c[e],f=r/2+h,d=e+1,p=n-1;for(;d<p;){var g=d+p>>>1;c[g]<f?d=g+1:p=g}f-c[d-1]<c[d]-f&&e+1<d&&--d;var v=c[d]-h,_=r-v;if(o-i>l-a){var m=r?(i*_+o*v)/r:o;t(e,d,v,i,a,m,l),t(d,n,_,m,a,o,l)}else{var y=r?(a*_+l*v)/r:l;t(e,d,v,i,a,o,y),t(d,n,_,i,y,o,l)}}(0,l,t.value,e,n,r,i)}function T_(t,e,n,r,i){(1&t.depth?M_:o_)(t,e,n,r,i)}const P_=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,c,u,h=-1,f=o.length,d=t.value;++h<f;){for(l=(s=o[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?o_(s,n,r,i,d?r+=(a-r)*s.value/d:a):M_(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else t._squarify=o=C_(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(S_);function F_(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function N_(t,e){var n=rn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function L_(t){return((t=Math.exp(t))+1/t)/2}const O_=function t(e,n,r){function i(t,i){var a,o,s=t[0],l=t[1],c=t[2],u=i[0],h=i[1],f=i[2],d=u-s,p=h-l,g=d*d+p*p;if(g<1e-12)o=Math.log(f/c)/e,a=function(t){return[s+t*d,l+t*p,c*Math.exp(e*t*o)]};else{var v=Math.sqrt(g),_=(f*f-c*c+r*g)/(2*c*n*v),m=(f*f-c*c-r*g)/(2*f*n*v),y=Math.log(Math.sqrt(_*_+1)-_),b=Math.log(Math.sqrt(m*m+1)-m);o=(b-y)/e,a=function(t){var r=t*o,i=L_(y),a=c/(n*v)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[s+a*d,l+a*p,c*i/L_(e*r+y)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function D_(t){return function(e,n){var r=t((e=Ve(e)).h,(n=Ve(n)).h),i=on(e.s,n.s),a=on(e.l,n.l),o=on(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}const z_=D_(rn);var I_=D_(on);function G_(t){return function(e,n){var r=t((e=Er(e)).h,(n=Er(n)).h),i=on(e.c,n.c),a=on(e.l,n.l),o=on(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}const R_=G_(rn);var j_=G_(on);function B_(t){return function e(n){function r(e,r){var i=t((e=fl(e)).h,(r=fl(r)).h),a=on(e.s,r.s),o=on(e.l,r.l),s=on(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}const U_=B_(rn);var W_=B_(on);function q_(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function H_(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2}function Y_(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],l=0;++r<i;)e=s,s=t[r],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]}function V_(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function $_(t,e){return t[0]-e[0]||t[1]-e[1]}function X_(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&V_(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function J_(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort($_),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=X_(r),o=X_(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],c=[];for(e=a.length-1;e>=0;--e)c.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)c.push(t[r[o[e]][2]]);return c}function Z_(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],l=a[0],c=a[1],u=!1,h=0;h<i;++h)n=(a=t[h])[0],(r=a[1])>s!=c>s&&o<(l-n)*(s-r)/(c-r)+n&&(u=!u),l=n,c=r;return u}function K_(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],l=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],l+=Math.hypot(e,n);return l}const Q_=Math.random,tm=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Q_),em=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(Q_),nm=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Q_),rm=function t(e){var n=nm.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Q_),im=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(Q_),am=function t(e){var n=im.source(e);function r(t){if(0===(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(Q_),om=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Q_),sm=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Q_),lm=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Q_),cm=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Q_),um=function t(e){var n=nm.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(i)),o=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+a*t}while(s<=0);s*=s*s;var l=1-e()}while(l>=1-.0331*t*t*t*t&&Math.log(l)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*o()*r}}return r.source=t,r}(Q_),hm=function t(e){var n=um.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Q_),fm=function t(e){var n=cm.source(e),r=hm.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,a=t,o=e;a*o>16&&a*(1-o)>16;){var s=Math.floor((a+1)*o),l=r(s,a-s+1)();l<=o?(i+=s,a-=s,o=(o-l)/(1-l)):(a=s-1,o/=l)}for(var c=o<.5,u=n(c?o:1-o),h=u(),f=0;h<=a;++f)h+=u();return i+(c?f:a-f)}}return i.source=t,i}(Q_),dm=function t(e){function n(t,n,r){var i;return 0===(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(Q_),pm=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(Q_),gm=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(Q_),vm=function t(e){var n=um.source(e),r=fm.source(e);function i(t){return function(){for(var i=0,a=t;a>16;){var o=Math.floor(.875*a),s=n(o)();if(s>a)return i+r(o-1,a/s)();i+=o,a-=s}for(var l=-Math.log1p(-e()),c=0;l<=a;++c)l-=Math.log1p(-e());return i+c}}return i.source=t,i}(Q_),_m=1664525,mm=1013904223,ym=1/4294967296;function bm(t=Math.random()){let e=0|(0<=t&&t<1?t/ym:Math.abs(t));return()=>(e=_m*e+mm|0,ym*(e>>>0))}const xm=Symbol("implicit");function wm(){var t=new Qr,e=[],n=[],r=xm;function i(i){let a=t.get(i);if(void 0===a){if(r!==xm)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Qr;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return wm(e,n).unknown(r)},oe.apply(i,arguments),i}function Mm(){var t,e,n=wm().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=o<a,f=h?o:a,d=h?a:o;t=(d-f)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),f+=(d-f-t*(n-l))*u,e=t*(1-l),s&&(f=Math.round(f),e=Math.round(e));var p=Li(n).map(function(e){return f+t*e});return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Mm(r(),[a,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},oe.apply(h(),arguments)}function Sm(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Sm(e())},t}function Cm(){return Sm(Mm.apply(null,arguments).paddingInner(1))}function Em(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Mn),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Em(t).unknown(e)},t=arguments.length?Array.from(t,Mn):[0,1],Kn(n)}function km(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Am(t){return Math.log(t)}function Tm(t){return Math.exp(t)}function Pm(t){return-Math.log(-t)}function Fm(t){return-Math.exp(-t)}function Nm(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lm(t){return(e,n)=>-t(-e,n)}function Om(t){const e=t(Am,Tm),n=e.domain;let r,i,a=10;function o(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(a),i=function(t){return 10===t?Nm:t===Math.E?Math.exp:e=>Math.pow(t,e)}(a),n()[0]<0?(r=Lm(r),i=Lm(i),t(Pm,Fm)):t(Am,Tm),e}return e.base=function(t){return arguments.length?(a=+t,o()):a},e.domain=function(t){return arguments.length?(n(t),o()):n()},e.ticks=t=>{const e=n();let o=e[0],s=e[e.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,h=r(o),f=r(s);const d=null==t?10:+t;let p=[];if(!(a%1)&&f-h<d){if(h=Math.floor(h),f=Math.ceil(f),o>0){for(;h<=f;++h)for(c=1;c<a;++c)if(u=h<0?c/i(-h):c*i(h),!(u<o)){if(u>s)break;p.push(u)}}else for(;h<=f;++h)for(c=a-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<o)){if(u>s)break;p.push(u)}2*p.length<d&&(p=de(o,s,d))}else p=de(h,f,Math.min(f-h,d)).map(i);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===a?"s":","),"function"!=typeof n&&(a%1||null!=(n=On(n)).precision||(n.trim=!0),n=Wn(n)),t===1/0)return n;const o=Math.max(1,a*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*a<a-.5&&(e*=a),e<=o?n(t):""}},e.nice=()=>n(km(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Dm(){const t=Om(Pn()).domain([1,10]);return t.copy=()=>Tn(t,Dm()).base(t.base()),oe.apply(t,arguments),t}function zm(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Im(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Gm(t){var e=1,n=t(zm(e),Im(e));return n.constant=function(n){return arguments.length?t(zm(e=+n),Im(e)):e},Kn(n)}function Rm(){var t=Gm(Pn());return t.copy=function(){return Tn(t,Rm()).constant(t.constant())},oe.apply(t,arguments)}function jm(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Bm(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Um(t){return t<0?-t*t:t*t}function Wm(t){var e=t(Cn,Cn),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(Cn,Cn):.5===n?t(Bm,Um):t(jm(n),jm(1/n)):n},Kn(e)}function qm(){var t=Wm(Pn());return t.copy=function(){return Tn(t,qm()).exponent(t.exponent())},oe.apply(t,arguments),t}function Hm(){return qm.apply(null,arguments).exponent(.5)}function Ym(t){return Math.sign(t)*t*t}function Vm(){var t,e=Fn(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(Ym(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,Mn)).map(Ym)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Vm(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},oe.apply(i,arguments),Kn(i)}const $m=1e3,Xm=6e4,Jm=36e5,Zm=864e5,Km=6048e5,Qm=2592e6,ty=31536e6,ey=new Date,ny=new Date;function ry(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let s;do{o.push(s=new Date(+n)),e(n,a),t(n)}while(s<n&&n<r);return o},i.filter=n=>ry(e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},(t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}),n&&(i.count=(e,r)=>(ey.setTime(+e),ny.setTime(+r),t(ey),t(ny),Math.floor(n(ey,ny))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const iy=ry(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);iy.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?ry(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):iy:null);const ay=iy.range,oy=ry(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*$m)},(t,e)=>(e-t)/$m,t=>t.getUTCSeconds()),sy=oy.range,ly=ry(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$m)},(t,e)=>{t.setTime(+t+e*Xm)},(t,e)=>(e-t)/Xm,t=>t.getMinutes()),cy=ly.range,uy=ry(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xm)},(t,e)=>(e-t)/Xm,t=>t.getUTCMinutes()),hy=uy.range,fy=ry(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$m-t.getMinutes()*Xm)},(t,e)=>{t.setTime(+t+e*Jm)},(t,e)=>(e-t)/Jm,t=>t.getHours()),dy=fy.range,py=ry(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jm)},(t,e)=>(e-t)/Jm,t=>t.getUTCHours()),gy=py.range,vy=ry(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xm)/Zm,t=>t.getDate()-1),_y=vy.range,my=ry(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zm,t=>t.getUTCDate()-1),yy=my.range,by=ry(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zm,t=>Math.floor(t/Zm)),xy=by.range;function wy(t){return ry(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xm)/Km)}const My=wy(0),Sy=wy(1),Cy=wy(2),Ey=wy(3),ky=wy(4),Ay=wy(5),Ty=wy(6),Py=My.range,Fy=Sy.range,Ny=Cy.range,Ly=Ey.range,Oy=ky.range,Dy=Ay.range,zy=Ty.range;function Iy(t){return ry(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/Km)}const Gy=Iy(0),Ry=Iy(1),jy=Iy(2),By=Iy(3),Uy=Iy(4),Wy=Iy(5),qy=Iy(6),Hy=Gy.range,Yy=Ry.range,Vy=jy.range,$y=By.range,Xy=Uy.range,Jy=Wy.range,Zy=qy.range,Ky=ry(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),t=>t.getMonth()),Qy=Ky.range,tb=ry(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth()),eb=tb.range,nb=ry(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nb.every=t=>isFinite(t=Math.floor(t))&&t>0?ry(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}):null;const rb=nb.range,ib=ry(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ib.every=t=>isFinite(t=Math.floor(t))&&t>0?ry(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null;const ab=ib.range;function ob(t,e,n,r,i,a){const o=[[oy,1,$m],[oy,5,5e3],[oy,15,15e3],[oy,30,3e4],[a,1,Xm],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,Jm],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Zm],[r,2,1728e5],[n,1,Km],[e,1,Qm],[e,3,7776e6],[t,1,ty]];function s(e,n,r){const i=Math.abs(n-e)/r,a=Qt(([,,t])=>t).right(o,i);if(a===o.length)return t.every(ge(e/ty,n/ty,r));if(0===a)return iy.every(Math.max(ge(e,n,r),1));const[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),a=i?i.range(t,+e+1):[];return r?a.reverse():a},s]}const[sb,lb]=ob(ib,tb,Gy,by,py,uy),[cb,ub]=ob(nb,Ky,My,vy,fy,ly);function hb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function db(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function pb(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Eb(i),u=kb(i),h=Eb(a),f=kb(a),d=Eb(o),p=kb(o),g=Eb(s),v=kb(s),_=Eb(l),m=kb(l),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:$b,e:$b,f:Qb,g:ux,G:fx,H:Xb,I:Jb,j:Zb,L:Kb,m:tx,M:ex,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Dx,s:zx,S:nx,u:rx,U:ix,V:ox,w:sx,W:lx,x:null,X:null,y:cx,Y:hx,Z:dx,"%":Ox},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:px,e:px,f:yx,g:Px,G:Nx,H:gx,I:vx,j:_x,L:mx,m:bx,M:xx,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Dx,s:zx,S:wx,u:Mx,U:Sx,V:Ex,w:kx,W:Ax,x:null,X:null,y:Tx,Y:Fx,Z:Lx,"%":Ox},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Gb,e:Gb,f:qb,g:Ob,G:Lb,H:jb,I:jb,j:Rb,L:Wb,m:Ib,M:Bb,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:zb,Q:Yb,s:Vb,S:Ub,u:Tb,U:Pb,V:Fb,w:Ab,W:Nb,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:Ob,Y:Lb,Z:Db,"%":Hb};function w(t,e){return function(n){var r,i,a,o=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=bb[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function M(t,e){return function(n){var r,i,a=db(1900,void 0,1);if(S(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=fb(db(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ry.ceil(r):Ry(r),r=my.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=hb(db(a.y,0,1))).getDay(),r=i>4||0===i?Sy.ceil(r):Sy(r),r=vy.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?fb(db(a.y,0,1)).getUTCDay():hb(db(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,fb(a)):hb(a)}}function S(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in bb?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var gb,vb,_b,mb,yb,bb={"-":"",_:" ",0:"0"},xb=/^\s*\d+/,wb=/^%/,Mb=/[\\^$*+?|[\]().{}]/g;function Sb(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Cb(t){return t.replace(Mb,"\\$&")}function Eb(t){return new RegExp("^(?:"+t.map(Cb).join("|")+")","i")}function kb(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function Ab(t,e,n){var r=xb.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Tb(t,e,n){var r=xb.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Pb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Fb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Nb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Lb(t,e,n){var r=xb.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ob(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Db(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zb(t,e,n){var r=xb.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Ib(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Gb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Rb(t,e,n){var r=xb.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function jb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Bb(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ub(t,e,n){var r=xb.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Wb(t,e,n){var r=xb.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function qb(t,e,n){var r=xb.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hb(t,e,n){var r=wb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yb(t,e,n){var r=xb.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Vb(t,e,n){var r=xb.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function $b(t,e){return Sb(t.getDate(),e,2)}function Xb(t,e){return Sb(t.getHours(),e,2)}function Jb(t,e){return Sb(t.getHours()%12||12,e,2)}function Zb(t,e){return Sb(1+vy.count(nb(t),t),e,3)}function Kb(t,e){return Sb(t.getMilliseconds(),e,3)}function Qb(t,e){return Kb(t,e)+"000"}function tx(t,e){return Sb(t.getMonth()+1,e,2)}function ex(t,e){return Sb(t.getMinutes(),e,2)}function nx(t,e){return Sb(t.getSeconds(),e,2)}function rx(t){var e=t.getDay();return 0===e?7:e}function ix(t,e){return Sb(My.count(nb(t)-1,t),e,2)}function ax(t){var e=t.getDay();return e>=4||0===e?ky(t):ky.ceil(t)}function ox(t,e){return t=ax(t),Sb(ky.count(nb(t),t)+(4===nb(t).getDay()),e,2)}function sx(t){return t.getDay()}function lx(t,e){return Sb(Sy.count(nb(t)-1,t),e,2)}function cx(t,e){return Sb(t.getFullYear()%100,e,2)}function ux(t,e){return Sb((t=ax(t)).getFullYear()%100,e,2)}function hx(t,e){return Sb(t.getFullYear()%1e4,e,4)}function fx(t,e){var n=t.getDay();return Sb((t=n>=4||0===n?ky(t):ky.ceil(t)).getFullYear()%1e4,e,4)}function dx(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Sb(e/60|0,"0",2)+Sb(e%60,"0",2)}function px(t,e){return Sb(t.getUTCDate(),e,2)}function gx(t,e){return Sb(t.getUTCHours(),e,2)}function vx(t,e){return Sb(t.getUTCHours()%12||12,e,2)}function _x(t,e){return Sb(1+my.count(ib(t),t),e,3)}function mx(t,e){return Sb(t.getUTCMilliseconds(),e,3)}function yx(t,e){return mx(t,e)+"000"}function bx(t,e){return Sb(t.getUTCMonth()+1,e,2)}function xx(t,e){return Sb(t.getUTCMinutes(),e,2)}function wx(t,e){return Sb(t.getUTCSeconds(),e,2)}function Mx(t){var e=t.getUTCDay();return 0===e?7:e}function Sx(t,e){return Sb(Gy.count(ib(t)-1,t),e,2)}function Cx(t){var e=t.getUTCDay();return e>=4||0===e?Uy(t):Uy.ceil(t)}function Ex(t,e){return t=Cx(t),Sb(Uy.count(ib(t),t)+(4===ib(t).getUTCDay()),e,2)}function kx(t){return t.getUTCDay()}function Ax(t,e){return Sb(Ry.count(ib(t)-1,t),e,2)}function Tx(t,e){return Sb(t.getUTCFullYear()%100,e,2)}function Px(t,e){return Sb((t=Cx(t)).getUTCFullYear()%100,e,2)}function Fx(t,e){return Sb(t.getUTCFullYear()%1e4,e,4)}function Nx(t,e){var n=t.getUTCDay();return Sb((t=n>=4||0===n?Uy(t):Uy.ceil(t)).getUTCFullYear()%1e4,e,4)}function Lx(){return"+0000"}function Ox(){return"%"}function Dx(t){return+t}function zx(t){return Math.floor(+t/1e3)}function Ix(t){return gb=pb(t),vb=gb.format,_b=gb.parse,mb=gb.utcFormat,yb=gb.utcParse,gb}function Gx(t){return new Date(t)}function Rx(t){return t instanceof Date?+t:+new Date(+t)}function jx(t,e,n,r,i,a,o,s,l,c){var u=Fn(),h=u.invert,f=u.domain,d=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),_=c("%a %d"),m=c("%b %d"),y=c("%B"),b=c("%Y");function x(t){return(l(t)<t?d:s(t)<t?p:o(t)<t?g:a(t)<t?v:r(t)<t?i(t)<t?_:m:n(t)<t?y:b)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?f(Array.from(t,Rx)):f().map(Gx)},u.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?x:c(e)},u.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(km(n,t)):u},u.copy=function(){return Tn(u,jx(t,e,n,r,i,a,o,s,l,c))},u}function Bx(){return oe.apply(jx(cb,ub,nb,Ky,My,vy,fy,ly,oy,vb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ux(){return oe.apply(jx(sb,lb,ib,tb,Gy,my,py,uy,oy,mb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wx(){var t,e,n,r,i,a=0,o=1,s=Cn,l=!1;function c(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),c):[a,o]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=u(xn),c.rangeRound=u(wn),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),c}}function qx(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Hx(){var t=Kn(Wx()(Cn));return t.copy=function(){return qx(t,Hx())},se.apply(t,arguments)}function Yx(){var t=Om(Wx()).domain([1,10]);return t.copy=function(){return qx(t,Yx()).base(t.base())},se.apply(t,arguments)}function Vx(){var t=Gm(Wx());return t.copy=function(){return qx(t,Vx()).constant(t.constant())},se.apply(t,arguments)}function $x(){var t=Wm(Wx());return t.copy=function(){return qx(t,$x()).exponent(t.exponent())},se.apply(t,arguments)}function Xx(){return $x.apply(null,arguments).exponent(.5)}function Jx(){var t=[],e=Cn;function n(n){if(null!=n&&!isNaN(n=+n))return e((ae(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(jt),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map((n,r)=>e(r/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(n,r)=>Xt(t,r/e))},n.copy=function(){return Jx(e).domain(t)},se.apply(n,arguments)}function Zx(){var t,e,n,r,i,a,o,s=0,l=.5,c=1,u=1,h=Cn,f=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(u*t<u*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=or(t,[n,r,i]),d):[h(0),h(.5),h(1)]}}return d.domain=function(o){return arguments.length?([s,l,c]=o,t=a(s=+s),e=a(l=+l),n=a(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,d):[s,l,c]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=p(xn),d.rangeRound=p(wn),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(s),e=o(l),n=o(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,d}}function Kx(){var t=Kn(Zx()(Cn));return t.copy=function(){return qx(t,Kx())},se.apply(t,arguments)}function Qx(){var t=Om(Zx()).domain([.1,1,10]);return t.copy=function(){return qx(t,Qx()).base(t.base())},se.apply(t,arguments)}function tw(){var t=Gm(Zx());return t.copy=function(){return qx(t,tw()).constant(t.constant())},se.apply(t,arguments)}function ew(){var t=Wm(Zx());return t.copy=function(){return qx(t,ew()).exponent(t.exponent())},se.apply(t,arguments)}function nw(){return ew.apply(null,arguments).exponent(.5)}Ix({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const rw=nr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),iw=nr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),aw=nr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ow=nr("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),sw=nr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),lw=nr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),cw=nr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),uw=nr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),hw=nr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),fw=nr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),dw=nr("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var pw=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(nr);const gw=rr(pw);var vw=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(nr);const _w=rr(vw);var mw=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(nr);const yw=rr(mw);var bw=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(nr);const xw=rr(bw);var ww=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(nr);const Mw=rr(ww);var Sw=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(nr);const Cw=rr(Sw);var Ew=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(nr);const kw=rr(Ew);var Aw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(nr);const Tw=rr(Aw);var Pw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(nr);const Fw=rr(Pw);var Nw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(nr);const Lw=rr(Nw);var Ow=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(nr);const Dw=rr(Ow);var zw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(nr);const Iw=rr(zw);var Gw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(nr);const Rw=rr(Gw);var jw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(nr);const Bw=rr(jw);var Uw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(nr);const Ww=rr(Uw);var qw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(nr);const Hw=rr(qw);var Yw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(nr);const Vw=rr(Yw);var $w=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(nr);const Xw=rr($w);var Jw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(nr);const Zw=rr(Jw);var Kw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(nr);const Qw=rr(Kw);var tM=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(nr);const eM=rr(tM);var nM=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(nr);const rM=rr(nM);var iM=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(nr);const aM=rr(iM);var oM=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(nr);const sM=rr(oM);var lM=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(nr);const cM=rr(lM);var uM=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(nr);const hM=rr(uM);function fM(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const dM=W_(fl(300,.5,0),fl(-240,.5,1));var pM=W_(fl(-100,.75,.35),fl(80,1.5,.8)),gM=W_(fl(260,.75,.35),fl(80,1.5,.8)),vM=fl();function _M(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return vM.h=360*t-100,vM.s=1.5-1.5*e,vM.l=.8-.9*e,vM+""}var mM=Ge(),yM=Math.PI/3,bM=2*Math.PI/3;function xM(t){var e;return t=(.5-t)*Math.PI,mM.r=255*(e=Math.sin(t))*e,mM.g=255*(e=Math.sin(t+yM))*e,mM.b=255*(e=Math.sin(t+bM))*e,mM+""}function wM(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function MM(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const SM=MM(nr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var CM=MM(nr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),EM=MM(nr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),kM=MM(nr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function AM(t){return Dt(xt(t).call(document.documentElement))}var TM=0;function PM(){return new FM}function FM(){this._="@"+(++TM).toString(36)}function NM(t,e){return t.target&&(t=La(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>Oa(t,e))}function LM(t){return"string"==typeof t?new Nt([document.querySelectorAll(t)],[document.documentElement]):new Nt([S(t)],Ft)}function OM(t){return function(){return t}}FM.prototype=PM.prototype={constructor:FM,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const DM=Math.abs,zM=Math.atan2,IM=Math.cos,GM=Math.max,RM=Math.min,jM=Math.sin,BM=Math.sqrt,UM=1e-12,WM=Math.PI,qM=WM/2,HM=2*WM;function YM(t){return t>=1?qM:t<=-1?-qM:Math.asin(t)}function VM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Ws(e)}function $M(t){return t.innerRadius}function XM(t){return t.outerRadius}function JM(t){return t.startAngle}function ZM(t){return t.endAngle}function KM(t){return t&&t.padAngle}function QM(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/BM(s*s+l*l),u=c*l,h=-c*s,f=t+u,d=e+h,p=n+u,g=r+h,v=(f+p)/2,_=(d+g)/2,m=p-f,y=g-d,b=m*m+y*y,x=i-a,w=f*g-p*d,M=(y<0?-1:1)*BM(GM(0,x*x*b-w*w)),S=(w*y-m*M)/b,C=(-w*m-y*M)/b,E=(w*y+m*M)/b,k=(-w*m+y*M)/b,A=S-v,T=C-_,P=E-v,F=k-_;return A*A+T*T>P*P+F*F&&(S=E,C=k),{cx:S,cy:C,x01:-u,y01:-h,x11:S*(i/x-1),y11:C*(i/x-1)}}function tS(){var t=$M,e=XM,n=OM(0),r=null,i=JM,a=ZM,o=KM,s=null,l=VM(c);function c(){var c,u,h=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-qM,p=a.apply(this,arguments)-qM,g=DM(p-d),v=p>d;if(s||(s=c=l()),f<h&&(u=f,f=h,h=u),f>UM)if(g>HM-UM)s.moveTo(f*IM(d),f*jM(d)),s.arc(0,0,f,d,p,!v),h>UM&&(s.moveTo(h*IM(p),h*jM(p)),s.arc(0,0,h,p,d,v));else{var _,m,y=d,b=p,x=d,w=p,M=g,S=g,C=o.apply(this,arguments)/2,E=C>UM&&(r?+r.apply(this,arguments):BM(h*h+f*f)),k=RM(DM(f-h)/2,+n.apply(this,arguments)),A=k,T=k;if(E>UM){var P=YM(E/h*jM(C)),F=YM(E/f*jM(C));(M-=2*P)>UM?(x+=P*=v?1:-1,w-=P):(M=0,x=w=(d+p)/2),(S-=2*F)>UM?(y+=F*=v?1:-1,b-=F):(S=0,y=b=(d+p)/2)}var N=f*IM(y),L=f*jM(y),O=h*IM(w),D=h*jM(w);if(k>UM){var z,I=f*IM(b),G=f*jM(b),R=h*IM(x),j=h*jM(x);if(g<WM)if(z=function(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,u=o-i,h=s-a,f=h*l-u*c;if(!(f*f<UM))return[t+(f=(u*(e-a)-h*(t-i))/f)*l,e+f*c]}(N,L,R,j,I,G,O,D)){var B=N-z[0],U=L-z[1],W=I-z[0],q=G-z[1],H=1/jM(function(t){return t>1?0:t<-1?WM:Math.acos(t)}((B*W+U*q)/(BM(B*B+U*U)*BM(W*W+q*q)))/2),Y=BM(z[0]*z[0]+z[1]*z[1]);A=RM(k,(h-Y)/(H-1)),T=RM(k,(f-Y)/(H+1))}else A=T=0}S>UM?T>UM?(_=QM(R,j,N,L,f,T,v),m=QM(I,G,O,D,f,T,v),s.moveTo(_.cx+_.x01,_.cy+_.y01),T<k?s.arc(_.cx,_.cy,T,zM(_.y01,_.x01),zM(m.y01,m.x01),!v):(s.arc(_.cx,_.cy,T,zM(_.y01,_.x01),zM(_.y11,_.x11),!v),s.arc(0,0,f,zM(_.cy+_.y11,_.cx+_.x11),zM(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,T,zM(m.y11,m.x11),zM(m.y01,m.x01),!v))):(s.moveTo(N,L),s.arc(0,0,f,y,b,!v)):s.moveTo(N,L),h>UM&&M>UM?A>UM?(_=QM(O,D,I,G,h,-A,v),m=QM(N,L,R,j,h,-A,v),s.lineTo(_.cx+_.x01,_.cy+_.y01),A<k?s.arc(_.cx,_.cy,A,zM(_.y01,_.x01),zM(m.y01,m.x01),!v):(s.arc(_.cx,_.cy,A,zM(_.y01,_.x01),zM(_.y11,_.x11),!v),s.arc(0,0,h,zM(_.cy+_.y11,_.cx+_.x11),zM(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,A,zM(m.y11,m.x11),zM(m.y01,m.x01),!v))):s.arc(0,0,h,w,x,v):s.lineTo(O,D)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-WM/2;return[IM(r)*n,jM(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:OM(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:OM(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:OM(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:OM(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:OM(+t),c):i},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:OM(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:OM(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}var eS=Array.prototype.slice;function nS(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function rS(t){this._context=t}function iS(t){return new rS(t)}function aS(t){return t[0]}function oS(t){return t[1]}function sS(t,e){var n=OM(!0),r=null,i=iS,a=null,o=VM(s);function s(s){var l,c,u,h=(s=nS(s)).length,f=!1;for(null==r&&(a=i(u=o())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,l,s),+e(c,l,s));if(u)return a=null,u+""||null}return t="function"==typeof t?t:void 0===t?aS:OM(t),e="function"==typeof e?e:void 0===e?oS:OM(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:OM(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:OM(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:OM(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function lS(t,e,n){var r=null,i=OM(!0),a=null,o=iS,s=null,l=VM(c);function c(c){var u,h,f,d,p,g=(c=nS(c)).length,v=!1,_=new Array(g),m=new Array(g);for(null==a&&(s=o(p=l())),u=0;u<=g;++u){if(!(u<g&&i(d=c[u],u,c))===v)if(v=!v)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=h;--f)s.point(_[f],m[f]);s.lineEnd(),s.areaEnd()}v&&(_[u]=+t(d,u,c),m[u]=+e(d,u,c),s.point(r?+r(d,u,c):_[u],n?+n(d,u,c):m[u]))}if(p)return s=null,p+""||null}function u(){return sS().defined(i).curve(o).context(a)}return t="function"==typeof t?t:void 0===t?aS:OM(+t),e="function"==typeof e?e:OM(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?oS:OM(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:OM(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:OM(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:OM(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:OM(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:OM(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:OM(+t),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:OM(!!t),c):i},c.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),c):a},c}function cS(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function uS(t){return t}function hS(){var t=uS,e=cS,n=null,r=OM(0),i=OM(HM),a=OM(0);function o(o){var s,l,c,u,h,f=(o=nS(o)).length,d=0,p=new Array(f),g=new Array(f),v=+r.apply(this,arguments),_=Math.min(HM,Math.max(-HM,i.apply(this,arguments)-v)),m=Math.min(Math.abs(_)/f,a.apply(this,arguments)),y=m*(_<0?-1:1);for(s=0;s<f;++s)(h=g[p[s]=s]=+t(o[s],s,o))>0&&(d+=h);for(null!=e?p.sort(function(t,n){return e(g[t],g[n])}):null!=n&&p.sort(function(t,e){return n(o[t],o[e])}),s=0,c=d?(_-f*y)/d:0;s<f;++s,v=u)l=p[s],u=v+((h=g[l])>0?h*c:0)+y,g[l]={data:o[l],index:s,value:h,startAngle:v,endAngle:u,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:OM(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:OM(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:OM(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:OM(+t),o):a},o}rS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var fS=pS(iS);function dS(t){this._curve=t}function pS(t){function e(e){return new dS(t(e))}return e._curve=t,e}function gS(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(pS(t)):e()._curve},t}function vS(){return gS(sS().curve(fS))}function _S(){var t=lS().curve(fS),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return gS(n())},delete t.lineX0,t.lineEndAngle=function(){return gS(r())},delete t.lineX1,t.lineInnerRadius=function(){return gS(i())},delete t.lineY0,t.lineOuterRadius=function(){return gS(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(pS(t)):e()._curve},t}function mS(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}dS.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class yS{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class bS{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0===this._point)this._point=1;else{const n=mS(this._x0,this._y0),r=mS(this._x0,this._y0=(this._y0+e)/2),i=mS(t,this._y0),a=mS(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...a)}this._x0=t,this._y0=e}}function xS(t){return new yS(t,!0)}function wS(t){return new yS(t,!1)}function MS(t){return new bS(t)}function SS(t){return t.source}function CS(t){return t.target}function ES(t){let e=SS,n=CS,r=aS,i=oS,a=null,o=null,s=VM(l);function l(){let l;const c=eS.call(arguments),u=e.apply(this,c),h=n.apply(this,c);if(null==a&&(o=t(l=s())),o.lineStart(),c[0]=u,o.point(+r.apply(this,c),+i.apply(this,c)),c[0]=h,o.point(+r.apply(this,c),+i.apply(this,c)),o.lineEnd(),l)return o=null,l+""||null}return l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.x=function(t){return arguments.length?(r="function"==typeof t?t:OM(+t),l):r},l.y=function(t){return arguments.length?(i="function"==typeof t?t:OM(+t),l):i},l.context=function(e){return arguments.length?(null==e?a=o=null:o=t(a=e),l):a},l}function kS(){return ES(xS)}function AS(){return ES(wS)}function TS(){const t=ES(MS);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const PS=BM(3),FS={draw(t,e){const n=.59436*BM(e+RM(e/28,.75)),r=n/2,i=r*PS;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},NS={draw(t,e){const n=BM(e/WM);t.moveTo(n,0),t.arc(0,0,n,0,HM)}},LS={draw(t,e){const n=BM(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},OS=BM(1/3),DS=2*OS,zS={draw(t,e){const n=BM(e/DS),r=n*OS;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},IS={draw(t,e){const n=.62625*BM(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},GS={draw(t,e){const n=.87559*BM(e-RM(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},RS={draw(t,e){const n=BM(e),r=-n/2;t.rect(r,r,n,n)}},jS={draw(t,e){const n=.4431*BM(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},BS=jM(WM/10)/jM(7*WM/10),US=jM(HM/10)*BS,WS=-IM(HM/10)*BS,qS={draw(t,e){const n=BM(.8908130915292852*e),r=US*n,i=WS*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const a=HM*e/5,o=IM(a),s=jM(a);t.lineTo(s*n,-o*n),t.lineTo(o*r-s*i,s*r+o*i)}t.closePath()}},HS=BM(3),YS={draw(t,e){const n=-BM(e/(3*HS));t.moveTo(0,2*n),t.lineTo(-HS*n,-n),t.lineTo(HS*n,-n),t.closePath()}},VS=BM(3),$S={draw(t,e){const n=.6824*BM(e),r=n/2,i=n*VS/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},XS=-.5,JS=BM(3)/2,ZS=1/BM(12),KS=3*(ZS/2+1),QS={draw(t,e){const n=BM(e/KS),r=n/2,i=n*ZS,a=r,o=n*ZS+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(XS*r-JS*i,JS*r+XS*i),t.lineTo(XS*a-JS*o,JS*a+XS*o),t.lineTo(XS*s-JS*l,JS*s+XS*l),t.lineTo(XS*r+JS*i,XS*i-JS*r),t.lineTo(XS*a+JS*o,XS*o-JS*a),t.lineTo(XS*s+JS*l,XS*l-JS*s),t.closePath()}},tC={draw(t,e){const n=.6189*BM(e-RM(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},eC=[NS,LS,zS,RS,qS,YS,QS],nC=[NS,GS,tC,$S,FS,jS,IS];function rC(t,e){let n=null,r=VM(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:OM(t||NS),e="function"==typeof e?e:OM(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:OM(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:OM(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function iC(){}function aC(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function oC(t){this._context=t}function sC(t){return new oC(t)}function lC(t){this._context=t}function cC(t){return new lC(t)}function uC(t){this._context=t}function hC(t){return new uC(t)}function fC(t,e){this._basis=new oC(t),this._beta=e}oC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aC(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},lC.prototype={areaStart:iC,areaEnd:iC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:aC(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},uC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:aC(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},fC.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const dC=function t(e){function n(t){return 1===e?new oC(t):new fC(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function pC(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function gC(t,e){this._context=t,this._k=(1-e)/6}gC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pC(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:pC(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vC=function t(e){function n(t){return new gC(t,e)}return n.tension=function(e){return t(+e)},n}(0);function _C(t,e){this._context=t,this._k=(1-e)/6}_C.prototype={areaStart:iC,areaEnd:iC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pC(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mC=function t(e){function n(t){return new _C(t,e)}return n.tension=function(e){return t(+e)},n}(0);function yC(t,e){this._context=t,this._k=(1-e)/6}yC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pC(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const bC=function t(e){function n(t){return new yC(t,e)}return n.tension=function(e){return t(+e)},n}(0);function xC(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>UM){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>UM){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function wC(t,e){this._context=t,this._alpha=e}wC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:xC(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const MC=function t(e){function n(t){return e?new wC(t,e):new gC(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function SC(t,e){this._context=t,this._alpha=e}SC.prototype={areaStart:iC,areaEnd:iC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xC(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const CC=function t(e){function n(t){return e?new SC(t,e):new _C(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function EC(t,e){this._context=t,this._alpha=e}EC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xC(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const kC=function t(e){function n(t){return e?new EC(t,e):new yC(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function AC(t){this._context=t}function TC(t){return new AC(t)}function PC(t){return t<0?-1:1}function FC(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(PC(a)+PC(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function NC(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function LC(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function OC(t){this._context=t}function DC(t){this._context=new zC(t)}function zC(t){this._context=t}function IC(t){return new OC(t)}function GC(t){return new DC(t)}function RC(t){this._context=t}function jC(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function BC(t){return new RC(t)}function UC(t,e){this._context=t,this._t=e}function WC(t){return new UC(t,.5)}function qC(t){return new UC(t,0)}function HC(t){return new UC(t,1)}function YC(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function VC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function $C(t,e){return t[e]}function XC(t){const e=[];return e.key=t,e}function JC(){var t=OM([]),e=VC,n=YC,r=$C;function i(i){var a,o,s=Array.from(t.apply(this,arguments),XC),l=s.length,c=-1;for(const t of i)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(t,s[a].key,c,i)]).data=t;for(a=0,o=nS(e(s));a<l;++a)s[o[a]].index=a;return n(s,o),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:OM(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:OM(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?VC:"function"==typeof t?t:OM(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?YC:t,i):n},i}function ZC(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}YC(t,e)}}function KC(t,e){if((s=t.length)>0)for(var n,r,i,a,o,s,l=0,c=t[e[0]].length;l<c;++l)for(a=o=0,n=0;n<s;++n)(i=(r=t[e[n]][l])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function QC(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}YC(t,e)}}function tE(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,c=0;s<i;++s){for(var u=t[e[s]],h=u[o][1]||0,f=(h-(u[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}l+=h,c+=f*h}n[o-1][1]+=n[o-1][0]=a,l&&(a-=c/l)}n[o-1][1]+=n[o-1][0]=a,YC(t,e)}}function eE(t){var e=t.map(nE);return VC(t).sort(function(t,n){return e[t]-e[n]})}function nE(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}function rE(t){var e=t.map(iE);return VC(t).sort(function(t,n){return e[t]-e[n]})}function iE(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function aE(t){return rE(t).reverse()}function oE(t){var e,n,r=t.length,i=t.map(iE),a=eE(t),o=0,s=0,l=[],c=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],l.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(l)}function sE(t){return VC(t).reverse()}AC.prototype={areaStart:iC,areaEnd:iC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},OC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LC(this,this._t0,NC(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,LC(this,NC(this,n=FC(this,t,e)),n);break;default:LC(this,this._t0,n=FC(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(DC.prototype=Object.create(OC.prototype)).point=function(t,e){OC.prototype.point.call(this,e,t)},zC.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},RC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=jC(t),i=jC(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},UC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var lE="%Y-%m-%dT%H:%M:%S.%LZ";var cE=Date.prototype.toISOString?function(t){return t.toISOString()}:mb(lE);const uE=cE;var hE=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:yb(lE);const fE=hE;function dE(t,e,n){var r=new Va,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Ha():+n,r._restart(function a(o){o+=i,r._restart(a,i+=e,n),t(o)},e,n)},r.restart(t,e,n),r)}const pE=t=>()=>t;function gE(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function vE(t,e,n){this.k=t,this.x=e,this.y=n}vE.prototype={constructor:vE,scale:function(t){return 1===t?this:new vE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new vE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _E=new vE(1,0,0);function mE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return _E;return t.__zoom}function yE(t){t.stopImmediatePropagation()}function bE(t){t.preventDefault(),t.stopImmediatePropagation()}function xE(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function wE(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ME(){return this.__zoom||_E}function SE(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function CE(){return navigator.maxTouchPoints||"ontouchstart"in this}function EE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function kE(){var t,e,n,r=xE,i=wE,a=EE,o=SE,s=CE,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=O_,f=Ea("start","zoom","end"),d=0,p=10;function g(t){t.property("__zoom",ME).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",C).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new vE(e,t.x,t.y)}function _(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new vE(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n,r){t.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var t=this,a=arguments,o=b(t,a).event(r),s=i.apply(t,a),l=null==n?m(s):"function"==typeof n?n.apply(t,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,f="function"==typeof e?e.apply(t,a):e,d=h(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=c/e[2];t=new vE(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}})}function b(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function w(t,...e){if(r.apply(this,arguments)){var n=b(this,e).event(t),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,o.apply(this,arguments)))),u=Oa(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[u,i.invert(u)],uo(this),n.start()}bE(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(_(v(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function M(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,o=b(this,e,!0).event(t),s=Dt(t.view).on("mousemove.zoom",function(t){if(bE(t),!o.moved){var e=t.clientX-u,n=t.clientY-h;o.moved=e*e+n*n>d}o.event(t).zoom("mouse",a(_(o.that.__zoom,o.mouse[0]=Oa(t,i),o.mouse[1]),o.extent,c))},!0).on("mouseup.zoom",function(t){s.on("mousemove.zoom mouseup.zoom",null),Na(t.view,o.moved),bE(t),o.event(t).end()},!0),l=Oa(t,i),u=t.clientX,h=t.clientY;Fa(t.view),yE(t),o.mouse=[l,this.__zoom.invert(l)],uo(this),o.start()}}function S(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,o=Oa(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(o),l=n.k*(t.shiftKey?.5:2),h=a(_(v(n,l),o,s),i.apply(this,e),c);bE(t),u>0?Dt(this).transition().duration(u).call(y,h,o,t):Dt(this).call(g.transform,h,o,t)}}function C(n,...i){if(r.apply(this,arguments)){var a,o,s,l,c=n.touches,u=c.length,h=b(this,i,n.changedTouches.length===u).event(n);for(yE(n),o=0;o<u;++o)l=[l=Oa(s=c[o],this),this.__zoom.invert(l),s.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,a=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(h.taps<2&&(e=l[0],t=setTimeout(function(){t=null},500)),uo(this),h.start())}}function E(t,...e){if(this.__zooming){var n,r,i,o,s=b(this,e).event(t),l=t.changedTouches,u=l.length;for(bE(t),n=0;n<u;++n)i=Oa(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var h=s.touch0[0],f=s.touch0[1],d=s.touch1[0],p=s.touch1[1],g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g,m=(m=p[0]-f[0])*m+(m=p[1]-f[1])*m;r=v(r,Math.sqrt(g/m)),i=[(h[0]+d[0])/2,(h[1]+d[1])/2],o=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(_(r,i,o),s.extent,c))}}function k(t,...r){if(this.__zooming){var i,a,o=b(this,r).event(t),s=t.changedTouches,l=s.length;for(yE(t),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=Oa(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<p)){var c=Dt(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",ME),t!==i?y(t,e,n,r):i.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},g.scaleBy=function(t,e,n,r){g.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},g.scaleTo=function(t,e,n,r){g.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return a(_(v(r,l),o,s),t,c)},n,r)},g.translateBy=function(t,e,n,r){g.transform(t,function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)},null,r)},g.translateTo=function(t,e,n,r,o){g.transform(t,function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==r?m(t):"function"==typeof r?r.apply(this,arguments):r;return a(_E.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)},r,o)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Dt(this.that).datum();f.call(t,this.that,new gE(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:f}),e)}},g.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:pE(+t),g):o},g.filter=function(t){return arguments.length?(r="function"==typeof t?t:pE(!!t),g):r},g.touchable=function(t){return arguments.length?(s="function"==typeof t?t:pE(!!t),g):s},g.extent=function(t){return arguments.length?(i="function"==typeof t?t:pE([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):i},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(a=t,g):a},g.duration=function(t){return arguments.length?(u=+t,g):u},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t},g.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,g):Math.sqrt(d)},g.tapDistance=function(t){return arguments.length?(p=+t,g):p},g}function AE(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return TE(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function TE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function PE(t,e){var n=t.select("g.".concat(e));return n.empty()?n=t.append("g").attr("class",e):n.selectAll("*").remove(),n}function FE(t,e,n){if(!t.startsWith(".")&&!t.startsWith("#"))throw new Error('Invalid selector: Must start with "." for classes or "#" for IDs.');for(var r=0,i=Array.from(document.styleSheets);r<i.length;r++){var a=i[r];try{var o,s=AE(a.cssRules||a.rules);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.selectorText===t)return void(l.style[e]=n)}}catch(t){s.e(t)}finally{s.f()}}catch(t){console.log("Could not access rules in stylesheet:",t)}}var c=document.getElementById("custom-styles");c||((c=document.createElement("style")).id="custom-styles",document.head.appendChild(c));try{c.sheet.insertRule("".concat(t," { ").concat(e,": ").concat(n,"; }"),c.sheet.cssRules.length)}catch(r){console.error("Failed to insert rule: ".concat(t," { ").concat(e,": ").concat(n,"; }"),r)}}mE.prototype=vE.prototype;var NE=function(t){var e=document.createElement("div");e.className=t,e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto",e.style.width="auto",e.style.lineHeight="normal",e.style.fontSize="initial",document.body.appendChild(e);var n=parseFloat(window.getComputedStyle(e).fontSize);return document.body.removeChild(e),n||0},LE=function(t,e){var n=document.createElement("div");n.className=t,n.style.position="absolute",n.style.visibility="hidden",n.style.height="auto",n.style.lineHeight="normal",document.body.appendChild(n);var r=window.getComputedStyle(n).getPropertyValue(e);return document.body.removeChild(n),r||null};function OE(t){if(t&&t instanceof SVGElement){var e=new Set(["fill","fill-opacity","fill-rule","stroke","stroke-width","stroke-opacity","stroke-linecap","stroke-linejoin","stroke-dasharray","stroke-dashoffset"]),n=[].concat(x(Array.from(e)),["vector-effect","shape-rendering","text-anchor","dominant-baseline","font-family","font-size","font-style","font-weight","letter-spacing","word-spacing","line-height","opacity","visibility","display","mix-blend-mode","filter","marker-start","marker-mid","marker-end","transform"]);r(t),t.querySelectorAll("*").forEach(function(t){return r(t)})}function r(t){var r=window.getComputedStyle(t);if(n.forEach(function(n){try{var i=r.getPropertyValue(n);if(!i||""===i||"initial"===i)return;if("none"===i&&!e.has(n))return;if("0px"===i&&"stroke-width"!==n)return;t.style.getPropertyValue(n)||t.style.setProperty(n,i)}catch(t){}}),t.tagName&&"text"===t.tagName.toLowerCase()){var i=r.getPropertyValue("font-size");i&&!t.style.getPropertyValue("font-size")&&t.style.setProperty("font-size",i)}}}function DE(t){var e=t.getBoundingClientRect(),n=Math.round(e.width)||parseInt(t.getAttribute("width"))||800,r=Math.round(e.height)||parseInt(t.getAttribute("height"))||600;t.hasAttribute("viewBox")||t.setAttribute("viewBox","0 0 ".concat(n," ").concat(r)),t.setAttribute("width",n),t.setAttribute("height",r)}var zE=function(t){return t.toLocaleString("en").replace(/,/gi," ")};function IE(t){return"".concat(t,"-").concat(Math.random().toString(36).substr(2,9))}var GE=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;for(var a in t){var o=t[a];Array.isArray(o)?o.forEach(function(t){Array.isArray(t)?t.forEach(function(t){t.svgId_!==e&&n(t,r,i)}):t.svgId_!==e&&n(t,r,i)}):o.svgId_!==e&&n(o,r,i)}};function RE(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")):null}var jE=function(t){var e,n,r;if(!t.startsWith("rgb")&&!t.startsWith("#")){var i=document.createElement("div");i.style.color=t,document.body.appendChild(i);var a=window.getComputedStyle(i).color;document.body.removeChild(i),t=a}if(t.startsWith("#")){var o=t.replace("#","");3===o.length&&(o=o.split("").map(function(t){return t+t}).join("")),e=parseInt(o.substring(0,2),16),n=parseInt(o.substring(2,4),16),r=parseInt(o.substring(4,6),16)}else{var s=t.match(/\d+/g);e=parseInt(s[0]),n=parseInt(s[1]),r=parseInt(s[2])}return e/255*.2126+n/255*.7152+r/255*.0722>.5?"black":"white"},BE=function(t){return t.Geometries.userGeometries?"#em-user-regions path":t.gridCartogram_?"#em-grid-container .em-grid-cell":"WORLD"===t.geo_?"#em-worldrg path":"#em-nutsrg path:not(#em-cntrg-RS):not(#em-cntrg-EL), #em-cntrg path:not(#em-cntrg-RS):not(#em-cntrg-EL)"},UE=function(t){return t.Geometries.userGeometries?"#em-user-regions":t.gridCartogram_?"#em-grid-container":"WORLD"===t.geo_?"#em-worldrg":"#em-nutsrg, #em-cntrg"},WE=function(t){var e=.5*t.position_.z*t.width_,n=.5*t.position_.z*t.height_;return[t.position_.x-e,t.position_.y-n,t.position_.x+e,t.position_.y+n]};function qE(t){return qE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qE(t)}function HE(t){var e=function(t,e){if("object"!=qE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qE(e)?e:e+""}function YE(t,e,n){return(e=HE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VE(){}function $E(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:VE,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}var XE=1e-6,JE=Math.PI,ZE=JE/2,KE=JE/4,QE=2*JE,tk=180/JE,ek=JE/180,nk=Math.abs,rk=Math.atan,ik=Math.atan2,ak=Math.cos,ok=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),sk=Math.sign||function(t){return t>0?1:t<0?-1:0},lk=Math.sqrt;Math.tan;function ck(t){return t>1?ZE:t<-1?-ZE:Math.asin(t)}function uk(t,e){return nk(t[0]-e[0])<XE&&nk(t[1]-e[1])<XE}function hk(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fk(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(uk(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2e-6}s.push(n=new hk(r,t,null,!0)),l.push(n.o=new hk(r,null,n,!1)),s.push(n=new hk(o,t,null,!1)),l.push(n.o=new hk(o,null,n,!0))}}),s.length){for(l.sort(e),dk(s),dk(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var c,u,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,o=c.length;a<o;++a)i.point((u=c[a])[0],u[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((u=c[a])[0],u[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function dk(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}class pk{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,a=0;if(i>0){for(a=t[--i];i>0&&(e=a,n=t[--i],a=e+n,r=n-(a-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=a+n,n==e-a&&(a=e))}return a}}function gk(t){return[ik(t[1],t[0]),ck(t[2])]}function vk(t){var e=t[0],n=t[1],r=ak(n);return[r*ak(e),r*ok(e),ok(n)]}function _k(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function mk(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yk(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function bk(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xk(t){var e=lk(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function wk(t){return nk(t[0])<=JE?t[0]:sk(t[0])*((nk(t[0])+JE)%QE-JE)}function Mk(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Sk(t,e,n,r){return function(i){var a,o,s,l=e(i),c=$E(),u=e(c),h=!1,f={point:d,lineStart:g,lineEnd:v,polygonStart:function(){f.point=_,f.lineStart=m,f.lineEnd=y,o=[],a=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=v,o=Mk(o);var t=function(t,e){var n=wk(e),r=e[1],i=ok(r),a=[ok(n),-ak(n),0],o=0,s=0,l=new pk;1===i?r=ZE+XE:-1===i&&(r=-ZE-XE);for(var c=0,u=t.length;c<u;++c)if(f=(h=t[c]).length)for(var h,f,d=h[f-1],p=wk(d),g=d[1]/2+KE,v=ok(g),_=ak(g),m=0;m<f;++m,p=b,v=w,_=M,d=y){var y=h[m],b=wk(y),x=y[1]/2+KE,w=ok(x),M=ak(x),S=b-p,C=S>=0?1:-1,E=C*S,k=E>JE,A=v*w;if(l.add(ik(A*C*ok(E),_*M+A*ak(E))),o+=k?S+C*QE:S,k^p>=n^b>=n){var T=mk(vk(d),vk(y));xk(T);var P=mk(a,T);xk(P);var F=(k^S>=0?-1:1)*ck(P[2]);(r>F||r===F&&(T[0]||T[1]))&&(s+=k^S>=0?1:-1)}}return(o<-1e-6||o<XE&&l<-1e-12)^1&s}(a,r);o.length?(h||(i.polygonStart(),h=!0),fk(o,Ek,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function g(){f.point=p,l.lineStart()}function v(){f.point=d,l.lineEnd()}function _(t,e){s.push([t,e]),u.point(t,e)}function m(){u.lineStart(),s=[]}function y(){_(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),f=c.result(),d=f.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(Ck))}return f}}function Ck(t){return t.length>1}function Ek(t,e){return((t=t.x)[0]<0?t[1]-ZE-XE:ZE-t[1])-((e=e.x)[0]<0?e[1]-ZE-XE:ZE-e[1])}const kk=Sk(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?JE:-JE,l=nk(a-n);nk(l-JE)<XE?(t.point(n,r=(r+o)/2>0?ZE:-ZE),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=JE&&(nk(n-i)<XE&&(n-=i*XE),nk(a-s)<XE&&(a-=s*XE),r=function(t,e,n,r){var i,a,o=ok(t-n);return nk(o)>XE?rk((ok(e)*(a=ak(r))*ok(n)-ok(r)*(i=ak(e))*ok(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*ZE,r.point(-JE,i),r.point(0,i),r.point(JE,i),r.point(JE,0),r.point(JE,-i),r.point(0,-i),r.point(-JE,-i),r.point(-JE,0),r.point(-JE,i);else if(nk(t[0]-e[0])>XE){var a=t[0]<e[0]?JE:-JE;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-JE,-ZE]);function Ak(t,e,n,r,i,a){if(n){var o=ak(e),s=ok(e),l=r*n;null==i?(i=e+r*QE,a=e-l/2):(i=Tk(o,i),a=Tk(o,a),(r>0?i<a:i>a)&&(i+=r*QE));for(var c,u=i;r>0?u>a:u<a;u-=l)c=gk([o,-s*ak(u),-s*ok(u)]),t.point(c[0],c[1])}}function Tk(t,e){(e=vk(e))[0]-=t,xk(e);var n=function(t){return t>1?0:t<-1?JE:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+QE-XE)%QE}var Pk=1e9,Fk=-1e9;function Nk(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var u=0,h=0;if(null==i||(u=o(i,s))!==(h=o(a,s))||l(i,a)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==h);else c.point(a[0],a[1])}function o(r,i){return nk(r[0]-t)<XE?i>0?0:3:nk(r[0]-n)<XE?i>0?2:1:nk(r[1]-e)<XE?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,h,f,d,p,g,v,_,m,y=o,b=$E(),x={point:w,lineStart:function(){x.point=M,c&&c.push(u=[]);_=!0,v=!1,p=g=NaN},lineEnd:function(){l&&(M(h,f),d&&v&&b.rejoin(),l.push(b.result()));x.point=w,v&&y.lineEnd()},polygonStart:function(){y=b,l=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],l=1,u=s.length,h=s[0],f=h[0],d=h[1];l<u;++l)a=f,o=d,f=(h=s[l])[0],d=h[1],o<=r?d>r&&(f-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(f-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=m&&e,i=(l=Mk(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&fk(l,s,e,a,o),o.polygonEnd());y=o,l=c=u=null}};function w(t,e){i(t,e)&&y.point(t,e)}function M(a,o){var s=i(a,o);if(c&&u.push([a,o]),_)h=a,f=o,d=s,_=!1,s&&(y.lineStart(),y.point(a,o));else if(s&&v)y.point(a,o);else{var l=[p=Math.max(Fk,Math.min(Pk,p)),g=Math.max(Fk,Math.min(Pk,g))],b=[a=Math.max(Fk,Math.min(Pk,a)),o=Math.max(Fk,Math.min(Pk,o))];!function(t,e,n,r,i,a){var o,s=t[0],l=t[1],c=0,u=1,h=e[0]-s,f=e[1]-l;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=s+c*h,t[1]=l+c*f),u<1&&(e[0]=s+u*h,e[1]=l+u*f),!0}}}}}(l,b,t,e,n,r)?s&&(y.lineStart(),y.point(a,o),m=!1):(v||(y.lineStart(),y.point(l[0],l[1])),y.point(b[0],b[1]),s||y.lineEnd(),m=!1)}p=a,g=o,v=s}return x}}function Lk(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}const Ok=t=>t;function Dk(t,e){return[nk(t)>JE?t+Math.round(-t/QE)*QE:t,e]}function zk(t,e,n){return(t%=QE)?e||n?Lk(Gk(t),Rk(e,n)):Gk(t):e||n?Rk(e,n):Dk}function Ik(t){return function(e,n){return[(e+=t)>JE?e-QE:e<-JE?e+QE:e,n]}}function Gk(t){var e=Ik(t);return e.invert=Ik(-t),e}function Rk(t,e){var n=ak(t),r=ok(t),i=ak(e),a=ok(e);function o(t,e){var o=ak(e),s=ak(t)*o,l=ok(t)*o,c=ok(e),u=c*n+s*r;return[ik(l*i-u*a,s*n-c*r),ck(u*i+l*a)]}return o.invert=function(t,e){var o=ak(e),s=ak(t)*o,l=ok(t)*o,c=ok(e),u=c*i-l*a;return[ik(l*i+c*a,s*n+u*r),ck(u*n-s*r)]},o}function jk(t){return function(e){var n=new Bk;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Bk(){}function Uk(t,e){t&&qk.hasOwnProperty(t.type)&&qk[t.type](t,e)}Dk.invert=Dk,Bk.prototype={constructor:Bk,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wk={Feature:function(t,e){Uk(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Uk(n[r].geometry,e)}},qk={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Hk(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Hk(n[r],e,0)},Polygon:function(t,e){Yk(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Yk(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Uk(n[r],e)}};function Hk(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Yk(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Hk(t[n],e,1);e.polygonEnd()}var Vk=1/0,$k=Vk,Xk=-Vk,Jk=Xk,Zk={point:function(t,e){t<Vk&&(Vk=t);t>Xk&&(Xk=t);e<$k&&($k=e);e>Jk&&(Jk=e)},lineStart:VE,lineEnd:VE,polygonStart:VE,polygonEnd:VE,result:function(){var t=[[Vk,$k],[Xk,Jk]];return Xk=Jk=-($k=Vk=1/0),t}};const Kk=Zk;function Qk(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&Wk.hasOwnProperty(t.type)?Wk[t.type](t,e):Uk(t,e)}(n,t.stream(Kk)),e(Kk.result()),null!=r&&t.clipExtent(r),t}function tA(t,e,n){return Qk(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var eA=ak(30*ek);function nA(t,e){return+e?function(t,e){function n(r,i,a,o,s,l,c,u,h,f,d,p,g,v){var _=c-r,m=u-i,y=_*_+m*m;if(y>4*e&&g--){var b=o+f,x=s+d,w=l+p,M=lk(b*b+x*x+w*w),S=ck(w/=M),C=nk(nk(w)-1)<XE||nk(a-h)<XE?(a+h)/2:ik(x,b),E=t(C,S),k=E[0],A=E[1],T=k-r,P=A-i,F=m*T-_*P;(F*F/y>e||nk((_*T+m*P)/y-.5)>.3||o*f+s*d+l*p<eA)&&(n(r,i,a,o,s,l,k,A,C,b/=M,x/=M,w,g,v),v.point(k,A),n(k,A,C,b,x,w,c,u,h,f,d,p,g,v))}}return function(e){var r,i,a,o,s,l,c,u,h,f,d,p,g={point:v,lineStart:_,lineEnd:y,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){u=NaN,g.point=m,e.lineStart()}function m(r,i){var a=vk([r,i]),o=t(r,i);n(u,h,c,f,d,p,u=o[0],h=o[1],c=r,f=a[0],d=a[1],p=a[2],16,e),e.point(u,h)}function y(){g.point=v,e.lineEnd()}function b(){_(),g.point=x,g.lineEnd=w}function x(t,e){m(r=t,e),i=u,a=h,o=f,s=d,l=p,g.point=m}function w(){n(u,h,c,f,d,p,i,a,r,o,s,l,16,e),g.lineEnd=y,y()}return g}}(t,e):function(t){return jk({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var rA=jk({point:function(t,e){this.stream.point(t*ek,e*ek)}});function iA(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=ak(a),s=ok(a),l=o*t,c=s*t,u=o/t,h=s/t,f=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(t,a){return[l*(t*=r)-c*(a*=i)+e,n-c*t-l*a]}return p.invert=function(t,e){return[r*(u*t-h*e+f),i*(d-h*t-u*e)]},p}function aA(t){return function(t){var e,n,r,i,a,o,s,l,c,u,h=150,f=480,d=250,p=0,g=0,v=0,_=0,m=0,y=0,b=1,x=1,w=null,M=kk,S=null,C=Ok,E=.5;function k(t){return l(t[0]*ek,t[1]*ek)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*tk,t[1]*tk]}function T(){var t=iA(h,0,0,b,x,y).apply(null,e(p,g)),r=iA(h,f-t[0],d-t[1],b,x,y);return n=zk(v,_,m),s=Lk(e,r),l=Lk(n,s),o=nA(s,E),P()}function P(){return c=u=null,k}return k.stream=function(t){return c&&u===t?c:c=rA(function(t){return jk({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(o(C(u=t)))))},k.preclip=function(t){return arguments.length?(M=t,w=void 0,P()):M},k.postclip=function(t){return arguments.length?(C=t,S=r=i=a=null,P()):C},k.clipAngle=function(t){return arguments.length?(M=+t?function(t){var e=ak(t),n=6*ek,r=e>0,i=nk(e)>XE;function a(t,n){return ak(t)*ak(n)>e}function o(t,n,r){var i=[1,0,0],a=mk(vk(t),vk(n)),o=_k(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var c=e*o/l,u=-e*s/l,h=mk(i,a),f=bk(i,c);yk(f,bk(a,u));var d=h,p=_k(f,d),g=_k(d,d),v=p*p-g*(_k(f,f)-1);if(!(v<0)){var _=lk(v),m=bk(d,(-p-_)/g);if(yk(m,f),m=gk(m),!r)return m;var y,b=t[0],x=n[0],w=t[1],M=n[1];x<b&&(y=b,b=x,x=y);var S=x-b,C=nk(S-JE)<XE;if(!C&&M<w&&(y=w,w=M,M=y),C||S<XE?C?w+M>0^m[1]<(nk(m[0]-b)<XE?w:M):w<=m[1]&&m[1]<=M:S>JE^(b<=m[0]&&m[0]<=x)){var E=bk(d,(-p+_)/g);return yk(E,f),[m,gk(E)]}}}function s(e,n){var i=r?t:JE-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Sk(a,function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,f){var d,p=[h,f],g=a(h,f),v=r?g?0:s(h,f):g?s(h+(h<0?JE:-JE),f):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(d=o(e,p))||uk(e,d)||uk(p,d))&&(p[2]=1),g!==l)u=0,g?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var _;v&n||!(_=o(p,e,!0))||(u=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1],3)))}!g||e&&uk(e,p)||t.point(p[0],p[1]),e=p,l=g,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},function(e,r,i,a){Ak(a,t,n,i,e,r)},r?[0,-t]:[-JE,t-JE])}(w=t*ek):(w=null,kk),P()):w*tk},k.clipExtent=function(t){return arguments.length?(C=null==t?(S=r=i=a=null,Ok):Nk(S=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),P()):null==S?null:[[S,r],[i,a]]},k.scale=function(t){return arguments.length?(h=+t,T()):h},k.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],T()):[f,d]},k.center=function(t){return arguments.length?(p=t[0]%360*ek,g=t[1]%360*ek,T()):[p*tk,g*tk]},k.rotate=function(t){return arguments.length?(v=t[0]%360*ek,_=t[1]%360*ek,m=t.length>2?t[2]%360*ek:0,T()):[v*tk,_*tk,m*tk]},k.angle=function(t){return arguments.length?(y=t%360*ek,T()):y*tk},k.reflectX=function(t){return arguments.length?(b=t?-1:1,T()):b<0},k.reflectY=function(t){return arguments.length?(x=t?-1:1,T()):x<0},k.precision=function(t){return arguments.length?(o=nA(s,E=t*t),P()):lk(E)},k.fitExtent=function(t,e){return tA(k,t,e)},k.fitSize=function(t,e){return function(t,e,n){return tA(t,[[0,0],e],n)}(k,t,e)},k.fitWidth=function(t,e){return function(t,e,n){return Qk(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])},n)}(k,t,e)},k.fitHeight=function(t,e){return function(t,e,n){return Qk(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])},n)}(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&A,T()}}(function(){return t})()}var oA=Math.abs,sA=(Math.atan,Math.atan2,Math.ceil,Math.cos,Math.exp,Math.floor),lA=(Math.log,Math.max),cA=Math.min,uA=(Math.pow,Math.round,Math.sign,Math.sin,Math.tan,Math.PI),hA=uA/2,fA=(Math.SQRT1_2,pA(2),pA(uA),180/uA),dA=uA/180;function pA(t){return t>0?Math.sqrt(t):0}var gA=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function vA(t,e){var n,r=cA(18,36*oA(e)/uA),i=sA(r),a=r-i,o=(n=gA[i])[0],s=n[1],l=(n=gA[++i])[0],c=n[1],u=(n=gA[cA(19,++i)])[0],h=n[1];return[t*(l+a*(u-o)/2+a*a*(u-2*l+o)/2),(e>0?hA:-hA)*(c+a*(h-s)/2+a*a*(h-2*c+s)/2)]}gA.forEach(function(t){t[1]*=1.0144}),vA.invert=function(t,e){var n=e/hA,r=90*n,i=cA(18,oA(r/5)),a=lA(0,sA(i));do{var o=gA[a][1],s=gA[a+1][1],l=gA[cA(19,a+2)][1],c=l-o,u=l-2*s+o,h=2*(oA(n)-s)/c,f=u/c,d=h*(1-f*h*(1-2*f*h));if(d>=0||1===a){r=(e>=0?5:-5)*(d+i);var p,g=50;do{d=(i=cA(18,oA(r)/5))-(a=sA(i)),o=gA[a][1],s=gA[a+1][1],l=gA[cA(19,a+2)][1],r-=(p=(e>=0?hA:-hA)*(s+d*(l-o)/2+d*d*(l-2*s+o)/2)-e)*fA}while(oA(p)>1e-12&&--g>0);break}}while(--a>=0);var v=gA[a][0],_=gA[a+1][0],m=gA[cA(19,a+2)][0];return[t/(_+d*(m-v)/2+d*d*(m-2*_+v)/2),r*dA]};var _A="http://www.w3.org/1999/xhtml";const mA={svg:"http://www.w3.org/2000/svg",xhtml:_A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yA(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),mA.hasOwnProperty(e)?{space:mA[e],local:t}:t}function bA(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_A&&e.documentElement.namespaceURI===_A?e.createElement(t):e.createElementNS(n,t)}}function xA(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function wA(t){var e=yA(t);return(e.local?xA:bA)(e)}function MA(){}function SA(t){return null==t?MA:function(){return this.querySelector(t)}}function CA(){return[]}function EA(t){return new Array(t.length)}function kA(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}kA.prototype={constructor:kA,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function AA(t,e,n,r,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new kA(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function TA(t,e,n,r,i,a,o){var s,l,c,u={},h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(d[s]=c="$"+o.call(l,l.__data__,s,e),c in u?i[s]=l:u[c]=l);for(s=0;s<f;++s)(l=u[c="$"+o.call(t,a[s],s,a)])?(r[s]=l,l.__data__=a[s],u[c]=null):n[s]=new kA(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u[d[s]]===l&&(i[s]=l)}function PA(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function FA(t){return function(){this.removeAttribute(t)}}function NA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function LA(t,e){return function(){this.setAttribute(t,e)}}function OA(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function DA(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function zA(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function IA(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function GA(t){return function(){this.style.removeProperty(t)}}function RA(t,e,n){return function(){this.style.setProperty(t,e,n)}}function jA(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function BA(t){return function(){delete this[t]}}function UA(t,e){return function(){this[t]=e}}function WA(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function qA(t){return t.trim().split(/^|\s+/)}function HA(t){return t.classList||new YA(t)}function YA(t){this._node=t,this._names=qA(t.getAttribute("class")||"")}function VA(t,e){for(var n=HA(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $A(t,e){for(var n=HA(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function XA(t){return function(){VA(this,t)}}function JA(t){return function(){$A(this,t)}}function ZA(t,e){return function(){(e.apply(this,arguments)?VA:$A)(this,t)}}function KA(){this.textContent=""}function QA(t){return function(){this.textContent=t}}function tT(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function eT(){this.innerHTML=""}function nT(t){return function(){this.innerHTML=t}}function rT(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function iT(){this.nextSibling&&this.parentNode.appendChild(this)}function aT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oT(){return null}function sT(){var t=this.parentNode;t&&t.removeChild(this)}function lT(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function cT(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}YA.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var uT={},hT=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(uT={mouseenter:"mouseover",mouseleave:"mouseout"}));function fT(t,e,n){return t=dT(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function dT(t,e,n){return function(r){var i=hT;hT=r;try{t.call(this,this.__data__,e,n)}finally{hT=i}}}function pT(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function gT(t,e,n){var r=uT.hasOwnProperty(t.type)?fT:dT;return function(i,a,o){var s,l=this.__on,c=r(e,a,o);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function vT(t,e,n,r){var i=hT;t.sourceEvent=hT,hT=t;try{return e.apply(n,r)}finally{hT=i}}function _T(t,e,n){var r=IA(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function mT(t,e){return function(){return _T(this,t,e)}}function yT(t,e){return function(){return _T(this,t,e.apply(this,arguments))}}var bT=[null];function xT(t,e){this._groups=t,this._parents=e}function wT(){return new xT([[document.documentElement]],bT)}xT.prototype=wT.prototype={constructor:xT,select:function(t){"function"!=typeof t&&(t=SA(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new xT(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?CA:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new xT(r,i)},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new xT(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?TA:AA,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d=t.call(u,u&&u.__data__,c,r),p=d.length,g=s[c]=new Array(p),v=o[c]=new Array(p);n(u,h,g,v,l[c]=new Array(f),d,e);for(var _,m,y=0,b=0;y<p;++y)if(_=g[y]){for(y>=b&&(b=y+1);!(m=v[b])&&++b<p;);_._next=m||null}}return(o=new xT(o,r))._enter=s,o._exit=l,o},enter:function(){return new xT(this._enter||this._groups.map(EA),this._parents)},exit:function(){return new xT(this._exit||this._groups.map(EA),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=e[s],u=n[s],h=c.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;s<r;++s)o[s]=e[s];return new xT(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=PA);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new xT(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=yA(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?NA:FA:"function"==typeof e?n.local?zA:DA:n.local?OA:LA)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?GA:"function"==typeof e?jA:RA)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||IA(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?BA:"function"==typeof e?WA:UA)(t,e)):this.node()[t]},classed:function(t,e){var n=qA(t+"");if(arguments.length<2){for(var r=HA(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ZA:e?XA:JA)(n,e))},text:function(t){return arguments.length?this.each(null==t?KA:("function"==typeof t?tT:QA)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?eT:("function"==typeof t?rT:nT)(t)):this.node().innerHTML},raise:function(){return this.each(iT)},lower:function(){return this.each(aT)},append:function(t){var e="function"==typeof t?t:wA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:wA(t),r=null==e?oT:"function"==typeof e?e:SA(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(sT)},clone:function(t){return this.select(t?cT:lT)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?gT:pT,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?yT:mT)(t,e))}};function MT(t){return"string"==typeof t?new xT([[document.querySelector(t)]],[document.documentElement]):new xT([[t]],bT)}var ST=0;function CT(){this._="@"+(++ST).toString(36)}function ET(){for(var t,e=hT;t=e.sourceEvent;)e=t;return e}function kT(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function AT(t){var e=ET();return e.changedTouches&&(e=e.changedTouches[0]),kT(t,e)}function TT(t,e,n){arguments.length<3&&(n=e,e=ET().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return kT(t,r);return null}CT.prototype=function(){return new CT}.prototype={constructor:CT,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var PT={value:function(){}};function FT(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new NT(r)}function NT(t){this._=t}function LT(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function OT(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=PT,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}NT.prototype=FT.prototype={constructor:NT,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=OT(i[n],t.name,e);else if(null==e)for(n in i)i[n]=OT(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=LT(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new NT(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};const DT=FT;function zT(){hT.stopImmediatePropagation()}function IT(){hT.preventDefault(),hT.stopImmediatePropagation()}function GT(t){return function(){return t}}function RT(t,e,n,r,i,a,o,s,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=c}function jT(){return!hT.button}function BT(){return this.parentNode}function UT(t){return null==t?{x:hT.x,y:hT.y}:t}function WT(){return"ontouchstart"in this}function qT(){var t,e,n,r,i=jT,a=BT,o=UT,s=WT,l={},c=DT("start","drag","end"),u=0,h=0;function f(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",v).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var o=y("mouse",a.apply(this,arguments),AT,this,arguments);o&&(MT(hT.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),function(t){var e=t.document.documentElement,n=MT(t).on("dragstart.drag",IT,!0);"onselectstart"in e?n.on("selectstart.drag",IT,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(hT.view),zT(),n=!1,t=hT.clientX,e=hT.clientY,o("start"))}}function p(){if(IT(),!n){var r=hT.clientX-t,i=hT.clientY-e;n=r*r+i*i>h}l.mouse("drag")}function g(){MT(hT.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=MT(t).on("dragstart.drag",null);e&&(r.on("click.drag",IT,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(hT.view,n),IT(),l.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=hT.changedTouches,r=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=y(n[t].identifier,r,TT,this,arguments))&&(zT(),e("start"))}}function _(){var t,e,n=hT.changedTouches,r=n.length;for(t=0;t<r;++t)(e=l[n[t].identifier])&&(IT(),e("drag"))}function m(){var t,e,n=hT.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(e=l[n[t].identifier])&&(zT(),e("end"))}function y(t,e,n,r,i){var a,s,h,d=n(e,t),p=c.copy();if(vT(new RT(f,"beforestart",a,t,u,d[0],d[1],0,0,p),function(){return null!=(hT.subject=a=o.apply(r,i))&&(s=a.x-d[0]||0,h=a.y-d[1]||0,!0)}))return function o(c){var g,v=d;switch(c){case"start":l[t]=o,g=u++;break;case"end":delete l[t],--u;case"drag":d=n(e,t),g=u}vT(new RT(f,c,a,t,g,d[0]+s,d[1]+h,d[0]-v[0],d[1]-v[1],p),p.apply,p,[c,r,i])}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:GT(!!t),f):i},f.container=function(t){return arguments.length?(a="function"==typeof t?t:GT(t),f):a},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:GT(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:GT(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f}RT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var HT=Math.PI,YT=2*HT,VT=1e-6,$T=YT-VT;function XT(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function JT(){return new XT}XT.prototype=JT.prototype={constructor:XT,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>VT)if(Math.abs(u*s-l*c)>VT&&i){var f=n-a,d=r-o,p=s*s+l*l,g=f*f+d*d,v=Math.sqrt(p),_=Math.sqrt(h),m=i*Math.tan((HT-Math.acos((p+h-g)/(2*v*_)))/2),y=m/_,b=m/v;Math.abs(y-1)>VT&&(this._+="L"+(t+y*c)+","+(e+y*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>VT||Math.abs(this._y1-c)>VT)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%YT+YT),h>$T?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>VT&&(this._+="A"+n+","+n+",0,"+ +(h>=HT)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const ZT=JT;function KT(t){return function(){return t}}var QT=1e-12,tP=Math.PI,eP=tP/2,nP=2*tP;function rP(t){return t.innerRadius}function iP(t){return t.outerRadius}function aP(t){return t.startAngle}function oP(t){return t.endAngle}function sP(t){return t&&t.padAngle}function lP(t){return t>=1?eP:t<=-1?-eP:Math.asin(t)}function cP(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/Math.sqrt(s*s+l*l),u=c*l,h=-c*s,f=t+u,d=e+h,p=n+u,g=r+h,v=(f+p)/2,_=(d+g)/2,m=p-f,y=g-d,b=m*m+y*y,x=i-a,w=f*g-p*d,M=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),S=(w*y-m*M)/b,C=(-w*m-y*M)/b,E=(w*y+m*M)/b,k=(-w*m+y*M)/b,A=S-v,T=C-_,P=E-v,F=k-_;return A*A+T*T>P*P+F*F&&(S=E,C=k),{cx:S,cy:C,x01:-u,y01:-h,x11:S*(i/x-1),y11:C*(i/x-1)}}function uP(t){this._context=t}function hP(t){return new uP(t)}function fP(t){return t[0]}function dP(t){return t[1]}uP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};!function(t){function e(e){return new pP(t(e))}e._curve=t}(hP);function pP(t){this._curve=t}pP.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};Math.sqrt(1/3);var gP=Math.sin(tP/10)/Math.sin(7*tP/10);Math.sin(nP/10),Math.cos(nP/10);Math.sqrt(3);Math.sqrt(3),Math.sqrt(12);function vP(){}function _P(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function mP(t){this._context=t}function yP(t){this._context=t}function bP(t){this._context=t}function xP(t,e){this._basis=new mP(t),this._beta=e}mP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_P(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_P(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},yP.prototype={areaStart:vP,areaEnd:vP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_P(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_P(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},xP.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new mP(t):new xP(t,e)}return n.beta=function(e){return t(+e)},n})(.85);function wP(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function MP(t,e){this._context=t,this._k=(1-e)/6}MP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wP(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:wP(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new MP(t,e)}return n.tension=function(e){return t(+e)},n})(0);function SP(t,e){this._context=t,this._k=(1-e)/6}SP.prototype={areaStart:vP,areaEnd:vP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wP(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new SP(t,e)}return n.tension=function(e){return t(+e)},n})(0);function CP(t,e){this._context=t,this._k=(1-e)/6}CP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wP(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new CP(t,e)}return n.tension=function(e){return t(+e)},n})(0);function EP(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>QT){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>QT){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function kP(t,e){this._context=t,this._alpha=e}kP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:EP(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const AP=function t(e){function n(t){return e?new kP(t,e):new MP(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function TP(t,e){this._context=t,this._alpha=e}TP.prototype={areaStart:vP,areaEnd:vP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:EP(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new TP(t,e):new SP(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function PP(t,e){this._context=t,this._alpha=e}PP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:EP(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new PP(t,e):new CP(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function FP(t){this._context=t}function NP(t){return t<0?-1:1}function LP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(NP(a)+NP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function OP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function DP(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function zP(t){this._context=t}function IP(t){this._context=new GP(t)}function GP(t){this._context=t}function RP(t){this._context=t}function jP(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function BP(t,e){this._context=t,this._t=e}FP.prototype={areaStart:vP,areaEnd:vP,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},zP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:DP(this,this._t0,OP(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,DP(this,OP(this,n=LP(this,t,e)),n);break;default:DP(this,this._t0,n=LP(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(IP.prototype=Object.create(zP.prototype)).point=function(t,e){zP.prototype.point.call(this,e,t)},GP.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},RP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=jP(t),i=jP(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},BP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};Array.prototype.slice;var UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WP=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},qP=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),HP=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YP=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},VP=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},$P=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},XP=function(){function t(e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.nx,s=e.ny,l=e.dy,c=void 0===l?0:l,u=e.dx,h=void 0===u?0:u,f=e.color,d=void 0===f?"grey":f,p=e.data,g=e.type,v=e.subject,_=e.connector,m=e.note,y=e.disable,b=e.id,x=e.className;WP(this,t),this._dx=void 0!==o?o-r:h,this._dy=void 0!==s?s-a:c,this._x=r,this._y=a,this._color=d,this.id=b,this._className=x||"",this._type=g||"",this.data=p,this.note=m||{},this.connector=_||{},this.subject=v||{},this.disable=y||[]}return qP(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(t){this._className=t,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t,this.updateOffset()}},{key:"nx",set:function(t){this._dx=t-this._x,this.updateOffset()}},{key:"ny",set:function(t){this._dy=t-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(t){var e=t.x,n=t.y;this._dx=e,this._dy=n,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(t){var e=t.x,n=t.y;this._x=e,this._y=n,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var t={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(t.data=this.data),this.type&&(t.type=this.type),this._className&&(t.className=this._className),Object.keys(this.connector).length>0&&(t.connector=this.connector),Object.keys(this.subject).length>0&&(t.subject=this.subject),Object.keys(this.note).length>0&&(t.note=this.note),t}}]),t}(),JP=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;WP(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return qP(t,[{key:"clearTypes",value:function(t){this.annotations.forEach(function(e){e.type=void 0,e.subject=t&&t.subject||e.subject,e.connector=t&&t.connector||e.connector,e.note=t&&t.note||e.note})}},{key:"setPositionWithAccessors",value:function(){var t=this;this.annotations.forEach(function(e){e.type.setPositionWithAccessors(t.accessors)})}},{key:"editMode",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.editMode=t,e.type.updateEditMode())})}},{key:"updateDisable",value:function(t){this.annotations.forEach(function(e){e.disable=t,e.type&&t.forEach(function(t){e.type[t]&&(e.type[t].remove&&e.type[t].remove(),e.type[t]=void 0)})})}},{key:"updateTextWrap",value:function(t){this.annotations.forEach(function(e){e.type&&e.type.updateTextWrap&&e.type.updateTextWrap(t)})}},{key:"updateText",value:function(){this.annotations.forEach(function(t){t.type&&t.type.drawText&&t.type.drawText()})}},{key:"updateNotePadding",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.notePadding=t)})}},{key:"json",get:function(){var t=this;return this.annotations.map(function(e){var n=e.json;return t.accessorsInverse&&e.data&&(n.data={},Object.keys(t.accessorsInverse).forEach(function(r){n.data[r]=t.accessorsInverse[r]({x:e.x,y:e.y})})),n})}},{key:"noteNodes",get:function(){return this.annotations.map(function(t){return HP({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]),t}(),ZP=function(t,e){return"dynamic"!==t&&"left"!==t&&"right"!==t||(t=e<0?"top":"bottom"),t},KP=function(t,e){return"dynamic"!==t&&"top"!==t&&"bottom"!==t||(t=e<0?"right":"left"),t},QP=["topBottom","top","bottom"],tF=["leftRight","left","right"],eF=function(t){var e=t.data,n=t.curve,r=void 0===n?hP:n,i=t.canvasContext,a=t.className,o=t.classID,s=function(){var t=fP,e=dP,n=KT(!0),r=null,i=hP,a=null;function o(o){var s,l,c,u=o.length,h=!1;for(null==r&&(a=i(c=ZT())),s=0;s<=u;++s)!(s<u&&n(l=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,s,o),+e(l,s,o));if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:KT(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:KT(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:KT(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o}().curve(r),l={type:"path",className:a,classID:o,data:e};return i?(s.context(i),l.pathMethods=s):l.attrs={d:s(e)},l},nF=function(t){var e=t.data,n=t.canvasContext,r={type:"path",className:t.className,classID:t.classID,data:e},i=function(){var t=rP,e=iP,n=KT(0),r=null,i=aP,a=oP,o=sP,s=null;function l(){var l,c,u=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-eP,d=a.apply(this,arguments)-eP,p=Math.abs(d-f),g=d>f;if(s||(s=l=ZT()),h<u&&(c=h,h=u,u=c),h>QT)if(p>nP-QT)s.moveTo(h*Math.cos(f),h*Math.sin(f)),s.arc(0,0,h,f,d,!g),u>QT&&(s.moveTo(u*Math.cos(d),u*Math.sin(d)),s.arc(0,0,u,d,f,g));else{var v,_,m=f,y=d,b=f,x=d,w=p,M=p,S=o.apply(this,arguments)/2,C=S>QT&&(r?+r.apply(this,arguments):Math.sqrt(u*u+h*h)),E=Math.min(Math.abs(h-u)/2,+n.apply(this,arguments)),k=E,A=E;if(C>QT){var T=lP(C/u*Math.sin(S)),P=lP(C/h*Math.sin(S));(w-=2*T)>QT?(b+=T*=g?1:-1,x-=T):(w=0,b=x=(f+d)/2),(M-=2*P)>QT?(m+=P*=g?1:-1,y-=P):(M=0,m=y=(f+d)/2)}var F=h*Math.cos(m),N=h*Math.sin(m),L=u*Math.cos(x),O=u*Math.sin(x);if(E>QT){var D=h*Math.cos(y),z=h*Math.sin(y),I=u*Math.cos(b),G=u*Math.sin(b);if(p<tP){var R=w>QT?function(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,u=o-i,h=s-a,f=(u*(e-a)-h*(t-i))/(h*l-u*c);return[t+f*l,e+f*c]}(F,N,I,G,D,z,L,O):[L,O],j=F-R[0],B=N-R[1],U=D-R[0],W=z-R[1],q=1/Math.sin(Math.acos((j*U+B*W)/(Math.sqrt(j*j+B*B)*Math.sqrt(U*U+W*W)))/2),H=Math.sqrt(R[0]*R[0]+R[1]*R[1]);k=Math.min(E,(u-H)/(q-1)),A=Math.min(E,(h-H)/(q+1))}}M>QT?A>QT?(v=cP(I,G,F,N,h,A,g),_=cP(D,z,L,O,h,A,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),A<E?s.arc(v.cx,v.cy,A,Math.atan2(v.y01,v.x01),Math.atan2(_.y01,_.x01),!g):(s.arc(v.cx,v.cy,A,Math.atan2(v.y01,v.x01),Math.atan2(v.y11,v.x11),!g),s.arc(0,0,h,Math.atan2(v.cy+v.y11,v.cx+v.x11),Math.atan2(_.cy+_.y11,_.cx+_.x11),!g),s.arc(_.cx,_.cy,A,Math.atan2(_.y11,_.x11),Math.atan2(_.y01,_.x01),!g))):(s.moveTo(F,N),s.arc(0,0,h,m,y,!g)):s.moveTo(F,N),u>QT&&w>QT?k>QT?(v=cP(L,O,D,z,u,-k,g),_=cP(F,N,I,G,u,-k,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),k<E?s.arc(v.cx,v.cy,k,Math.atan2(v.y01,v.x01),Math.atan2(_.y01,_.x01),!g):(s.arc(v.cx,v.cy,k,Math.atan2(v.y01,v.x01),Math.atan2(v.y11,v.x11),!g),s.arc(0,0,u,Math.atan2(v.cy+v.y11,v.cx+v.x11),Math.atan2(_.cy+_.y11,_.cx+_.x11),g),s.arc(_.cx,_.cy,k,Math.atan2(_.y11,_.x11),Math.atan2(_.y01,_.x01),!g))):s.arc(0,0,u,x,b,g):s.lineTo(L,O)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-tP/2;return[Math.cos(r)*n,Math.sin(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:KT(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:KT(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:KT(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:KT(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:KT(+t),l):i},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:KT(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:KT(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}().innerRadius(e.innerRadius||0).outerRadius(e.outerRadius||e.radius||2).startAngle(e.startAngle||0).endAngle(e.endAngle||2*Math.PI);return n?(i.context(n),r.pathMethods=lineGen):r.attrs={d:i()},r},rF=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,l=s+r.dy,c=r.subject;if("circle"===n&&(c.outerRadius||c.radius)){var u=Math.sqrt((a-o)*(a-o)+(s-l)*(s-l)),h=Math.asin(-l/u),f=c.outerRadius||c.radius+(c.radiusPadding||0);a=Math.abs(Math.cos(h)*f)*(o<0?-1:1),s=Math.abs(Math.sin(h)*f)*(l<0?-1:1)}if("rect"===n){var d=c.width,p=c.height;(d>0&&r.dx>0||d<0&&r.dx<0)&&(a=Math.abs(d)>Math.abs(r.dx)?d/2:d),(p>0&&r.dy>0||p<0&&r.dy<0)&&(s=Math.abs(p)>Math.abs(r.dy)?p/2:p),a===d/2&&s===p/2&&(a=o,s=l)}return[[a,s],[o,l]]},iF=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),n.points&&"number"!=typeof n.points||(n.points=aF(e.annotation.offset,n.points)),n.curve||(n.curve=AP);var i=[];if(e.editMode){var a=n.points.map(function(t,e){return HP({},function(t){var e=t.cx,n=void 0===e?0:e,r=t.cy;return{move:{x:n,y:void 0===r?0:r}}}({cx:t[0],cy:t[1]}),{index:e})}),o=function(t){n.points[t][0]+=hT.dx,n.points[t][1]+=hT.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(t){return HP({},t.move,{drag:o.bind(e,t.index)})}))}var s=rF({type:e,subjectType:r});return s=[s[0]].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n.points),[s[1]]),{components:[eF({data:s,curve:n.curve,className:"connector"})],handles:i}},aF=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.x/(e+1),r=t.y/(e+1),i=[],a=1;a<=e;a++)i.push([n*a+a%2*20,r*a-a%2*20]);return i},oF=function(t){var e=t.subjectData,n=t.type;e.radius||e.outerRadius||(e.radius=20);var r=[],i=nF({data:e,className:"subject"});if(n.editMode){var a=function(t){var e=t.cx,n=void 0===e?0:e,r=t.cy,i=void 0===r?0:r,a=t.r1,o=t.r2,s=t.padding,l={move:{x:n,y:i}};return void 0!==a&&(l.r1={x:n+a/Math.sqrt(2),y:i+a/Math.sqrt(2)}),void 0!==o&&(l.r2={x:n+o/Math.sqrt(2),y:i+o/Math.sqrt(2)}),void 0!==s&&(l.padding={x:n+a+s,y:i}),l}({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(t){var r=e[t]+hT.dx*Math.sqrt(2);e[t]=r,n.redrawSubject(),n.redrawConnector()},s=[HP({},a.r1,{drag:o.bind(n,void 0!==e.outerRadius?"outerRadius":"radius")})];e.innerRadius&&s.push(HP({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},sF=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(WP(this,t),this.a=n,this.note=-1===r.disable.indexOf("note")&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=-1===r.disable.indexOf("connector")&&n.select("g.annotation-connector"),this.subject=-1===r.disable.indexOf("subject")&&n.select("g.annotation-subject"),this.dispatcher=a,a){var l=_F.bind(null,a,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=void 0!==o?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return qP(t,[{key:"init",value:function(t){this.annotation.x||this.mapX(t),this.annotation.y||this.mapY(t)}},{key:"mapY",value:function(t){t.y&&(this.annotation.y=t.y(this.annotation.data))}},{key:"mapX",value:function(t){t.x&&(this.annotation.x=t.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(t,e){var n=this;Array.isArray(e)||(e=[e]),e.filter(function(t){return t}).forEach(function(e){var r=e.type,i=e.className,a=e.attrs,o=e.handles,s=e.classID;if("handle"===r)!function(t){var e=t.group,n=t.handles,r=t.r,i=void 0===r?10:r,a=e.selectAll("circle.handle").data(n);a.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(qT().container(MT("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)})),e.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||i}).attr("class",function(t){return"handle "+(t.className||"")}),a.exit().remove()}({group:t,r:a&&a.r,handles:o});else{vF(t,[n.annotation],r,i,s);for(var l=t.select(r+"."+(s||i)),c=Object.keys(a),u=[],h=l.node().attributes,f=h.length-1;f>=0;f--){var d=h[f].name;-1===c.indexOf(d)&&"class"!==d&&u.push(d)}c.forEach(function(t){"text"===t?l.text(a[t]):l.attr(t,a[t])}),u.forEach(function(t){return l.attr(t,null)})}})}},{key:"getNoteBBox",value:function(){return yF(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var t=yF(this.note,".annotation-note-content"),e=this.noteContent.attr("transform").split(/\(|\,|\)/g);return t.offsetCornerX=parseFloat(e[1])+this.annotation.dx,t.offsetCornerY=parseFloat(e[2])+this.annotation.dy,t.offsetX=this.annotation.dx,t.offsetY=this.annotation.dy,t}},{key:"drawSubject",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.subject,r=e.type,i={type:this,subjectData:n},a={};"circle"===r?a=oF(i):"rect"===r?a=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=eF({data:[[0,0],[i,0],[i,a],[0,a],[0,0]],className:"subject"});if(n.editMode){var s=[{x:i,y:a/2,drag:function(){e.width=hT.x,n.redrawSubject(),n.redrawConnector()}.bind(n)},{x:i/2,y:a,drag:function(){e.height=hT.y,n.redrawSubject(),n.redrawConnector()}.bind(n)}];r=n.mapHandles(s)}return o.attrs["fill-opacity"]=.1,{components:[o],handles:r}}(i):"threshold"===r?a=function(t){var e=t.subjectData,n=t.type.annotation.position,r=(void 0!==e.x1?e.x1:n.x)-n.x,i=(void 0!==e.x2?e.x2:n.x)-n.x,a=(void 0!==e.y1?e.y1:n.y)-n.y,o=(void 0!==e.y2?e.y2:n.y)-n.y;return{components:[eF({data:[[r,a],[i,o]],className:"subject"})]}}(i):"badge"===r&&(a=function(t){var e=t.subjectData,n=void 0===e?{}:e,r=t.type,i=void 0===r?{}:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],l=[],c=n.radius,u=.7*c,h=0,f=0,d=Math.sqrt(2)*c,p={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-d,xright:d,ytop:-d,ybottom:d};n.x&&!n.y?h=p["x"+n.x]:n.y&&!n.x?f=p["y"+n.y]:n.x&&n.y&&(h=p["x"+n.x+"corner"],f=p["y"+n.y+"corner"]);var g="translate("+h+", "+f+")",v=nF({className:"subject",data:{radius:c}});v.attrs.transform=g,v.attrs.fill=a.color,v.attrs["stroke-linecap"]="round",v.attrs["stroke-width"]="3px";var _=nF({className:"subject-ring",data:{outerRadius:c,innerRadius:u}});_.attrs.transform=g,_.attrs["stroke-width"]="3px",_.attrs.fill="white";var m=void 0;if(h&&f||!h&&!f)m=eF({className:"subject-pointer",data:[[0,0],[h||0,0],[0,f||0],[0,0]]});else if(h||f){var y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t&&t/Math.sqrt(2)/Math.sqrt(2)||e*c/Math.sqrt(2)};m=eF({className:"subject-pointer",data:[[0,0],[y(h),y(f)],[y(h,-1),y(f,-1)],[0,0]]})}if(m&&(m.attrs.fill=a.color,m.attrs["stroke-linecap"]="round",m.attrs["stroke-width"]="3px",l.push(m)),i.editMode){var b={x:2*h,y:2*f,drag:function(){n.x=hT.x<2*-c?"left":hT.x>2*c?"right":void 0,n.y=hT.y<2*-c?"top":hT.y>2*c?"bottom":void 0,i.redrawSubject()}.bind(i)};b.x||b.y||(b.y=-c),s=i.mapHandles([b])}var x=void 0;return n.text&&(x={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:h,y:f}}),l.push(v),l.push(_),l.push(x),{components:l,handles:s}}(i,this.annotation));var o=a,s=o.components,l=void 0===s?[]:s,c=o.handles,u=void 0===c?[]:c;return l.forEach(function(e){e&&e.attrs&&!e.attrs.stroke&&(e.attrs.stroke=t.annotation.color)}),this.editMode&&(u=u.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),l.push({type:"handle",handles:u})),l}},{key:"drawConnector",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.connector,r=n.type||e.type,i={type:this,connectorData:n};i.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var a={};a="curve"===r?iF(i):"elbow"===r?function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,l=s+r.dy,c=r.subject;if("rect"===n){var u=c.width,h=c.height;(u>0&&r.dx>0||u<0&&r.dx<0)&&(a=Math.abs(u)>Math.abs(r.dx)?u/2:u),(h>0&&r.dy>0||h<0&&r.dy<0)&&(s=Math.abs(h)>Math.abs(r.dy)?h/2:h),a===u/2&&s===h/2&&(a=o,s=l)}var f=[[a,s],[o,l]],d=l-s,p=o-a,g=o,v=l,_=l<s&&o>a||o<a&&l>s?-1:1;if(Math.abs(p)<Math.abs(d)?(g=o,v=s+p*_):(v=l,g=a+d*_),"circle"===n&&(c.outerRadius||c.radius)){var m=(c.outerRadius||c.radius)+(c.radiusPadding||0),y=m/Math.sqrt(2);if(Math.abs(p)>y&&Math.abs(d)>y)f=[[a=y*(o<0?-1:1),s=y*(l<0?-1:1)],[g,v],[o,l]];else if(Math.abs(p)>Math.abs(d)){var b=Math.asin(-l/m);f=[[a=Math.abs(Math.cos(b)*m)*(o<0?-1:1),l],[o,l]]}else{var x=Math.acos(o/m);f=[[o,s=Math.abs(Math.sin(x)*m)*(l<0?-1:1)],[o,l]]}}else f=[[a,s],[g,v],[o,l]];return{components:[eF({data:f,className:"connector"})]}}(i):function(t){var e=rF(t);return{components:[eF({data:e,className:"connector"})]}}(i);var o=a,s=o.components,l=void 0===s?[]:s,c=o.handles,u=void 0===c?[]:c,h=l[0];h&&(h.attrs.stroke=this.annotation.color,h.attrs.fill="none");var f=n.end||e.end,d={};if("arrow"===f){var p=h.data[1],g=h.data[0];Math.sqrt(Math.pow(p[0]-g[0],2)+Math.pow(p[1]-g[1],2))<5&&h.data[2]&&(p=h.data[2]),d=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=void 0===i?1:i,o=e.position;n=n?[-r[0]+n[0],-r[1]+n[1]]:[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var s=r[0],l=r[1],c=n[0],u=n[1],h=10*a,f=16/180*Math.PI,d=Math.atan(u/c);c<0&&(d+=Math.PI);var p=[[s,l],[Math.cos(d+f)*h+s,Math.sin(d+f)*h+l],[Math.cos(d-f)*h+s,Math.sin(d-f)*h+l],[s,l]];return{components:[eF({data:p,className:"connector-end connector-arrow",classID:"connector-end"})]}}({annotation:this.annotation,start:p,end:g,scale:n.endScale})}else"dot"===f?d=function(t){var e=t.line,n=t.scale,r=void 0===n?1:n,i=nF({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}}({line:h,scale:n.endScale}):f&&"none"!==f||this.connector&&this.connector.select(".connector-end").remove();return d.components&&(d.components.forEach(function(e){e.attrs.fill=t.annotation.color,e.attrs.stroke=t.annotation.color}),l=l.concat(d.components)),this.editMode&&0!==u.length&&l.push({type:"handle",handles:u}),l}},{key:"drawNote",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.note,r=n.align||e.align||"dynamic",i={bbox:e.bbox,align:r,offset:this.annotation.offset},a=n.lineType||e.lineType,o={};"vertical"===a?o=function(t){var e=t.align,n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.bbox,s=t.offset;"top"===(e=ZP(e,s.y))?a-=o.height:"middle"===e&&(a-=o.height/2);var l=[[r,a],[r,a+o.height]];return{components:[eF({data:l,className:"note-line"})]}}(i):"horizontal"===a&&(o=function(t){var e=t.align,n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.offset,s=t.bbox;"right"===(e=KP(e,o.x))?r-=s.width:"middle"===e&&(r-=s.width/2);var l=[[r,a],[r+s.width,a]];return{components:[eF({data:l,className:"note-line"})]}}(i));var s=o,l=s.components,c=void 0===l?[]:l,u=s.handles,h=void 0===u?[]:u;if(c.forEach(function(e){e.attrs.stroke=t.annotation.color}),this.editMode){h=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),c.push({type:"handle",handles:h});var f=this.dragNote.bind(this),d=this.dragstarted.bind(this),p=this.dragended.bind(this);this.note.call(qT().container(MT("g.annotations").node()).on("start",function(t){return d(t)}).on("drag",function(t){return f(t)}).on("end",function(t){return p(t)}))}else this.note.on("mousedown.drag",null);return c}},{key:"drawNoteContent",value:function(t){var e=this.annotation.note,n=void 0!==e.padding?e.padding:this.notePadding,r=e.orientation||t.orientation||"topBottom",i=e.lineType||t.lineType,a=e.align||t.align||"dynamic";"vertical"===i?r="leftRight":"horizontal"===i&&(r="topBottom");var o=function(t){var e=t.padding,n=void 0===e?0:e,r=t.bbox,i=void 0===r?{x:0,y:0,width:0,height:0}:r,a=t.align,o=t.orientation,s=t.offset,l=void 0===s?{x:0,y:0}:s,c=-i.x,u=0;return-1!==QP.indexOf(o)?(a=KP(a,l.x),l.y<0&&"topBottom"===o||"top"===o?u-=i.height+n:u+=n,"middle"===a?c-=i.width/2:"right"===a&&(c-=i.width)):-1!==tF.indexOf(o)&&(a=ZP(a,l.y),l.x<0&&"leftRight"===o||"left"===o?c-=i.width+n:c+=n,"middle"===a?u-=i.height/2:"top"===a&&(u-=i.height)),{x:c,y:u}}({padding:n,bbox:t.bbox,offset:this.annotation.offset,orientation:r,align:a}),s=o.x,l=o.y;return this.offsetCornerX=s+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+s+", "+l+")"),[]}},{key:"drawOnScreen",value:function(t,e){return this.drawOnSVG(t,e)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:t})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:t}))}},{key:"setPosition",value:function(){var t=this.annotation.position;this.a.attr("transform","translate("+t.x+", "+t.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var t=this.annotation.offset;this.note.attr("transform","translate("+t.x+", "+t.y+")")}}},{key:"setPositionWithAccessors",value:function(t){t&&this.annotation.data&&(this.mapX(t),this.mapY(t)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){hT.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var t=this.annotation.position;t.x+=hT.dx,t.y+=hT.dy,this.annotation.position=t}},{key:"dragNote",value:function(){var t=this.annotation.offset;t.x+=hT.dx,t.y+=hT.dy,this.annotation.offset=t}},{key:"mapHandles",value:function(t){var e=this;return t.map(function(t){return HP({},t,{start:e.dragstarted.bind(e),end:e.dragended.bind(e)})})}}]),t}(),lF=function(t,e,n){return function(t){function r(t){WP(this,r);var n=$P(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return n.typeSettings=e,e.disable&&e.disable.forEach(function(t){n[t]&&n[t].remove(),n[t]=void 0,"note"===t&&(n.noteContent=void 0)}),n}return VP(r,t),qP(r,[{key:"className",value:function(){return""+(e.className||YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this)&&YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(t){return this.typeSettings.subject=HP({},e.subject,this.typeSettings.subject),YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawSubject",this).call(this,HP({},t,this.typeSettings.subject))}},{key:"drawConnector",value:function(t){return this.typeSettings.connector=HP({},e.connector,this.typeSettings.connector),YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawConnector",this).call(this,HP({},t,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(t){return this.typeSettings.note=HP({},e.note,this.typeSettings.note),YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNote",this).call(this,HP({},t,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(t){return YP(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNoteContent",this).call(this,HP({},t,e.note,this.typeSettings.note))}}],[{key:"init",value:function(t,e){return YP(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,t,e),n&&(t=n(t,e)),t}}]),r}(t)},cF=function(t){function e(t){WP(this,e);var n=$P(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.textWrap=t.textWrap||120,n.drawText(),n}return VP(e,t),qP(e,[{key:"updateTextWrap",value:function(t){this.textWrap=t,this.drawText()}},{key:"drawText",value:function(){if(this.note){vF(this.note,[this.annotation],"g","annotation-note-content");var t=this.note.select("g.annotation-note-content");vF(t,[this.annotation],"rect","annotation-note-bg"),vF(t,[this.annotation],"text","annotation-note-label"),vF(t,[this.annotation],"text","annotation-note-title");var e={height:0},n=this.a.select("text.annotation-note-label"),r=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,i=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,a=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,o={top:0,bottom:0,left:0,right:0};if("number"==typeof a?o={top:a,bottom:a,left:a,right:a}:a&&"object"===(void 0===a?"undefined":UP(a))&&(o=HP(o,a)),this.annotation.note.title){var s=this.a.select("text.annotation-note-title");s.text(this.annotation.note.title),s.attr("fill",this.annotation.color),s.attr("font-weight","bold"),s.call(mF,r,i),e=s.node().getBBox()}n.text(this.annotation.note.label).attr("dx","0"),n.call(mF,r,i),n.attr("y",1.1*e.height||0),n.attr("fill",this.annotation.color);var l=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",l.width+o.left+o.right).attr("height",l.height+o.top+o.bottom).attr("x",l.x-o.left).attr("y",-o.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(sF),uF=lF(cF,{className:"label",note:{align:"middle"}}),hF=lF(cF,{className:"callout",note:{lineType:"horizontal"}}),fF=(lF(hF,{className:"callout elbow",connector:{type:"elbow"}}),lF(hF,{className:"callout curve",connector:{type:"curve"}}),lF(sF,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),lF(cF,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}})),dF=lF(cF,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),pF=function(t){function e(){return WP(this,e),$P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return VP(e,t),qP(e,[{key:"mapY",value:function(t){YP(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,t);var n=this.annotation;(n.subject.x1||n.subject.x2)&&n.data&&t.y&&(n.y=t.y(n.data)),!n.subject.x1&&!n.subject.x2||n.x||(n.x=n.subject.x1||n.subject.x2)}},{key:"mapX",value:function(t){YP(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,t);var n=this.annotation;(n.subject.y1||n.subject.y2)&&n.data&&t.x&&(n.x=t.x(n.data)),!n.subject.y1&&!n.subject.y2||n.y||(n.y=n.subject.y1||n.subject.y2)}}]),e}(hF),gF=lF(pF,{className:"callout xythreshold",subject:{type:"threshold"}}),vF=function(t,e,n,r,i){var a=t.selectAll(n+"."+(i||r)).data(e);return a.enter().append(n).merge(a).attr("class",r),a.exit().remove(),t},_F=function(t,e,n){var r=n.component,i=n.name;r&&r.on("mouseover.annotations",function(){t.call(i+"over",r,e)}).on("mouseout.annotations",function(){return t.call(i+"out",r,e)}).on("click.annotations",function(){return t.call(i+"click",r,e)})},mF=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;t.each(function(){for(var t=MT(this),i=t.text().split(n||/[ \t\r\n]+/).reverse().filter(function(t){return""!==t}),a=void 0,o=[],s=t.text(null).append("tspan").attr("x",0).attr("dy","0.8em");a=i.pop();)o.push(a),s.text(o.join(" ")),s.node().getComputedTextLength()>e&&o.length>1&&(o.pop(),s.text(o.join(" ")),o=[a],s=t.append("tspan").attr("x",0).attr("dy",r+"em").text(a))})},yF=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return t?t.selectAll(e).nodes().reduce(function(t,e){var n=e.getBBox();t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),t.width=Math.max(t.width,n.width);var r=e&&e.attributes&&e.attributes.y;return t.height=Math.max(t.height,(r&&parseFloat(r.value)||0)+n.height),t},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function bF(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,s=void 0,l=hF,c=void 0,u=void 0,h=DT("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),f=void 0,d=function(n){f=n,o||n.selectAll("circle.handle").remove();var d=t.map(function(t){return t.type||(t.type=l),t.disable||(t.disable=r),new XP(t)});e=e||new JP({annotations:d,accessors:i,accessorsInverse:a,ids:s}),n.selectAll("g").data([e]).enter().append("g").attr("class","annotations");var p=n.select("g.annotations");vF(p,e.annotations,"g","annotation");var g=p.selectAll("g.annotation");g.each(function(t){var e=MT(this);e.attr("class","annotation"),vF(e,[t],"g","annotation-connector"),vF(e,[t],"g","annotation-subject"),vF(e,[t],"g","annotation-note"),vF(e.select("g.annotation-note"),[t],"g","annotation-note-content"),t.type="[object Object]"===t.type.toString()?t.type:new t.type({a:e,annotation:t,textWrap:c,notePadding:u,editMode:o,dispatcher:h,accessors:i}),t.type.draw(),t.type.drawText&&t.type.drawText()})};return d.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",e.json),window.copy(JSON.stringify(e.json.map(function(t){return delete t.type,t}))),d},d.update=function(){return t&&e&&(t=e.annotations.map(function(t){return t.type.draw(),t})),d},d.updateText=function(){return e&&(e.updateText(c),t=e.annotations),d},d.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,d},d.disable=function(n){return arguments.length?(r=n,e&&(e.updateDisable(r),t=e.annotations),d):r},d.textWrap=function(n){return arguments.length?(c=n,e&&(e.updateTextWrap(c),t=e.annotations),d):c},d.notePadding=function(n){return arguments.length?(u=n,e&&(e.updateNotePadding(u),t=e.annotations),d):u},d.type=function(n,r){return arguments.length?(l=n,e&&(e.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove(),t.type.noteContent&&t.type.noteContent.selectAll("*").remove(),t.type.subject&&t.type.subject.selectAll("*").remove(),t.type.connector&&t.type.connector.selectAll("*").remove(),t.type.typeSettings={},t.type=l,t.subject=r&&r.subject||t.subject,t.connector=r&&r.connector||t.connector,t.note=r&&r.note||t.note}),t=e.annotations),d):l},d.annotations=function(n){if(!arguments.length)return e&&e.annotations||t;(t=n,e&&e.annotations)&&(t.some(function(t){return!t.type||"[object Object]"!==t.type.toString()})?(e=null,d(f)):e.annotations=t);return d},d.context=function(t){return arguments.length?(n=t,d):n},d.accessors=function(t){return arguments.length?(i=t,d):i},d.accessorsInverse=function(t){return arguments.length?(a=t,d):a},d.ids=function(t){return arguments.length?(s=t,d):s},d.editMode=function(n){return arguments.length?(o=n,f&&f.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),d):o},d.collection=function(t){return arguments.length?(e=t,d):e},d.on=function(){var t=h.on.apply(h,arguments);return t===h?d:t},d}function xF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function wF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xF(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function MF(t){if(t.svg_){var e=t.svg_.select("#em-zoom-group-"+t.svgId_);e.selectAll(".em-annotations").remove();var n=t.annotations_;if(n){var r={annotationLabel:uF,annotationCallout:hF,annotationCalloutRect:dF,annotationCalloutCircle:fF,annotationXYThreshold:gF},i=n.annotations.map(function(t){var e=r[t.type]||uF;return wF(wF({},t),{},{type:e})}),a=bF().type(uF).annotations(i).editMode(n.editMode);e.append("g").attr("id","em-annotations").attr("class","em-annotations").call(a)}}}var SF=function(t,e){var n,r;t.labels_.config||(t.labels_.config=TF),t.labels_.statLabelsPositions||(t.labels_.statLabelsPositions=PF),t._statLabelFormatter=t.labels_.valuesFormatter?t.labels_.valuesFormatter:zE;var i=e.select("#em-labels"),a=i.empty()?e.append("g").attr("id","em-labels").attr("class","em-labels"):i;null!==(n=t.labels_)&&void 0!==n&&n.values&&"ps"!==t._mapType&&AF(t,a);var o=(null===(r=t.labels_)||void 0===r?void 0:r.labels)||TF["".concat(t.geo,"_").concat(t.proj_,".cc")];if(o){var s,l=PE(a,"em-label-shadows"),c=PE(a,"em-labels");if(null!==(s=t.labels_)&&void 0!==s&&s.shadows)l.selectAll("text").data(o).enter().append("text").attr("id",function(t){return"em-label-shadow-"+t.text.replace(/\s+/g,"-")}).attr("class",function(t){return"em-label-shadow em-label-shadow-"+t.class}).attr("x",function(e){return e.rotate?0:t._projection([e.x,e.y])[0]}).attr("y",function(e){return e.rotate?0:t._projection([e.x,e.y])[1]}).attr("dy",-7).attr("transform",function(e){if(e.rotate){var n=t._projection([e.x,e.y]),r=n[0],i=n[1];return"translate(".concat(r,",").concat(i,") rotate(").concat(e.rotate,")")}return"rotate(0)"}).text(function(t){return t.text});c.selectAll("text").data(o).enter().append("text").attr("id",function(t){return"em-label-"+t.text.replace(/\s+/g,"-")}).attr("class",function(t){return"em-label em-label-"+t.class}).attr("x",function(e){return e.rotate?0:t._projection([e.x,e.y])[0]}).attr("y",function(e){return e.rotate?0:t._projection([e.x,e.y])[1]}).attr("dy",-7).attr("transform",function(e){if(e.rotate){var n=t._projection([e.x,e.y]),r=n[0],i=n[1];return"translate(".concat(r,",").concat(i,") rotate(").concat(e.rotate,")")}return"rotate(0)"}).text(function(t){return t.text})}};var CF=function(t){var e,n,r;if(t){t.svg_.selectAll("g.em-stat-label > *").remove(),t.svg_.selectAll("g.em-stat-label-shadow > *").remove();var i=t.svg_.selectAll("g.em-stat-label"),a=null!==(e=t.labels_)&&void 0!==e&&e.statLabelsFilterFunction?null===(n=t.labels_)||void 0===n?void 0:n.statLabelsFilterFunction:kF,o=t.statData();return i.filter(function(e){return a(e,t)}).each(function(e){var n=Dt(this),r=EF(e,o,t);t.labels_.backgrounds&&function(t,e){var n=5,r=2,i=e.append("text").attr("visibility","hidden").text(t).node().getBBox(),a=i.width,o=i.height;e.select('text[visibility="hidden"]').remove();var s=-a/2-n,l=-o/2-r;e.append("rect").attr("x",s).attr("y",l).attr("width",a+2*n).attr("height",o+2*r).attr("class","em-label-background")}(r,n),n.append("text").text(r).attr("class","em-stat-label-text")}),null!==(r=t.labels_)&&void 0!==r&&r.shadows&&t.svg_.selectAll("g.em-stat-label-shadow").filter(function(e){return a(e,t)}).append("text").text(function(e){return EF(e,o,t)}),t}console.warn("No map specified")},EF=function(t,e,n){if(e&&null!=e&&e.get){var r=e.get(t.properties.id);if(!r||!r.value&&0!==r&&0!==r.value)return"";if(":"!==r.value)return n._statLabelFormatter?n._statLabelFormatter(r.value):zE(r.value)}},kF=function(t,e){var n=e.statData().get(t.properties.id);return!(!n||!n.value&&0!==n&&0!==n.value)},AF=function(t,e){var n,r=PE(e,"em-stat-labels-shadows"),i=PE(e,"em-stat-labels"),a=t.Geometries.getAllRegionFeatures(),o=a.filter(function(t,e,n){return e===n.findIndex(function(e){return e.properties.id===t.properties.id})});i.selectAll("g").data(o).enter().append("g").attr("transform",function(e){if(t.labels_.statLabelsPositions[e.properties.id]){var n=t.labels_.statLabelsPositions[e.properties.id],r=t._projection([n.x,n.y]),i=r[0].toFixed(3),a=r[1].toFixed(3);return"translate(".concat(i,",").concat(a,")")}var o=t._pathFunction.centroid(e);return t.labels_.processValueLabelCentroids&&(o=t.labels_.processValueLabelCentroids(e,o)),"translate("+o+")"}).attr("class","em-stat-label"),null!==(n=t.labels_)&&void 0!==n&&n.shadows&&r.selectAll("g").data(a).enter().append("g").attr("transform",function(e){if(t.labels_.statLabelsPositions[e.properties.id]){var n=t._projection([t.labels_.statLabelsPositions[e.properties.id].x,t.labels_.statLabelsPositions[e.properties.id].y]),r=n[0].toFixed(3),i=n[1].toFixed(3);return"translate(".concat(r,",").concat(i,")")}var a=t._pathFunction.centroid(e);return t.labels_.processValueLabelCentroids&&(a=t.labels_.processValueLabelCentroids(e,a)),"translate("+a+")"}).attr("class","em-stat-label-shadow")},TF={EUR_3035:{cc:[{text:"AL",x:515e4,y:206e4,class:"cc",size:7},{text:"AT",x:467e4,y:269e4,class:"cc",size:18},{text:"BE",x:393e4,y:301e4,class:"cc",size:17},{text:"BG",x:5567e3,y:225e4,class:"cc",size:22},{text:"HR",x:484e4,y:248e4,class:"cc",size:10},{text:"CY",x:6426e3,y:148e4,class:"cc",size:10},{text:"CZ",x:4707e3,y:292e4,class:"cc",size:18},{text:"DK",x:4316e3,y:3621e3,class:"cc",size:20},{text:"EE",x:522e4,y:399e4,class:"cc",size:12},{text:"FI",x:515e4,y:4424e3,class:"cc",size:20},{text:"FR",x:3767740,y:2662817,class:"cc",size:22},{text:"DE",x:4347284,y:3093276,class:"cc",size:22},{text:"EL",x:537e4,y:175e4,class:"cc",size:22},{text:"HU",x:502e4,y:263e4,class:"cc",size:17},{text:"IS",x:304e4,y:4833e3,class:"cc",size:10},{text:"IE",x:3136e3,y:3394e3,class:"cc",size:17},{text:"IT",x:4469967,y:2181963,class:"cc",size:22},{text:"LV",x:529e4,y:38e5,class:"cc",size:12},{text:"LT",x:519e4,y:363e4,class:"cc",size:12},{text:"LU",x:412e4,y:294e4,class:"cc",size:12},{text:"MT",x:4731e3,y:13e5,class:"cc",size:10},{text:"ME",x:5073e3,y:2185e3,class:"cc",size:7},{text:"GE",x:6942680,y:266e4,class:"cc"},{text:"UA",x:589e4,y:305e4,class:"cc"},{text:"BA",x:4949262,y:2338688,class:"cc"},{text:"MD",x:574e4,y:279e4,class:"cc"},{text:"MK",x:53e5,y:208e4,class:"cc",size:10},{text:"NL",x:402e4,y:3208e3,class:"cc",size:17},{text:"NO",x:43e5,y:4147e3,class:"cc",size:20},{text:"PL",x:4964e3,y:32e5,class:"cc",size:22},{text:"PT",x:277e4,y:199e4,class:"cc",size:18},{text:"RO",x:5451e3,y:26e5,class:"cc",size:22},{text:"RS",x:52e5,y:235e4,class:"cc",size:10},{text:"SK",x:504e4,y:286e4,class:"cc",size:12},{text:"SI",x:4675e3,y:25e5,class:"cc",size:10},{text:"ES",x:3160096,y:19e5,class:"cc",size:22},{text:"SE",x:463e4,y:4e6,class:"cc",size:20},{text:"CH",x:417e4,y:26e5,class:"cc",size:16},{text:"TR",x:651e4,y:21e5,class:"cc",size:22},{text:"UK",x:3558e3,y:325e4,class:"cc",size:17}],en:[{text:"MEDITERRANEAN SEA",x:398e4,y:16e5,class:"seas",size:12,letterSpacing:7},{text:"ATLANTIC OCEAN",x:282e4,y:254e4,class:"seas",size:12,letterSpacing:2},{text:"NORTH SEA",x:3915e3,y:37e5,class:"seas",size:12},{text:"BALTIC SEA",x:49e5,y:373e4,class:"seas",size:10,rotate:-50},{text:"NORWEGIAN SEA",x:385e4,y:48e5,class:"seas",size:12,letterSpacing:1},{text:"BLACK SEA",x:63e5,y:25e5,class:"seas",size:12,letterSpacing:4},{text:"ALBANIA",cc:"AL",x:51e5,y:206e4,class:"countries",size:7,rotate:80},{text:"AUSTRIA",cc:"AT",x:467e4,y:2629e3,class:"countries",size:10},{text:"BELGIUM",cc:"BE",x:39e5,y:303e4,class:"countries",size:7,rotate:30},{text:"BULGARIA",cc:"BG",x:5567e3,y:2256e3,class:"countries",size:12},{text:"CROATIA",cc:"HR",x:4876e3,y:2455e3,class:"countries",size:7},{text:"CYPRUS",cc:"CY",x:6426e3,y:148e4,class:"countries",size:10},{text:"CZECHIA",cc:"CZ",x:4707e3,y:2885e3,class:"countries",size:12},{text:"DENMARK",cc:"DK",x:4316e3,y:3621e3,class:"countries",size:10},{text:"ESTONIA",cc:"EE",x:522e4,y:399e4,class:"countries",size:7},{text:"FINLAND",cc:"FI",x:515e4,y:4424e3,class:"countries",size:12},{text:"FRANCE",cc:"FR",x:3767740,y:2662817,class:"countries",size:12},{text:"GERMANY",cc:"DE",x:4347284,y:3093276,class:"countries",size:12},{text:"GREECE",cc:"EL",x:547e4,y:186e4,class:"countries",size:12},{text:"HUNGARY",cc:"HU",x:502e4,y:263e4,class:"countries",size:10},{text:"ICELAND",cc:"IS",x:304e4,y:4833e3,class:"countries",size:10},{text:"IRELAND",cc:"IE",x:3136e3,y:3394e3,class:"countries",size:10},{text:"ITALY",cc:"IT",x:4469967,y:2181963,class:"countries",size:12},{text:"LATVIA",cc:"LV",x:529e4,y:38e5,class:"countries",size:7},{text:"LITHUANIA",cc:"LT",x:519e4,y:363e4,class:"countries",size:7},{text:"LUX.",cc:"LU",x:412e4,y:294e4,class:"countries",size:7},{text:"MALTA",cc:"MT",x:4731e3,y:133e4,class:"countries",size:7},{text:"MONT.",cc:"ME",x:5073e3,y:2185e3,class:"countries",size:7},{text:"N. MACEDONIA",cc:"MK",x:53e5,y:2082e3,class:"countries",size:7},{text:"NETHERLANDS",cc:"NL",x:3977e3,y:3208e3,class:"countries",size:7},{text:"NORWAY",cc:"NO",x:433e4,y:4147e3,class:"countries",size:12,rotate:-75},{text:"POLAND",cc:"PL",x:4964e3,y:3269e3,class:"countries",size:12},{text:"PORTUGAL",cc:"PT",x:283e4,y:199e4,class:"countries",size:10,rotate:-75},{text:"ROMANIA",cc:"RO",x:5451e3,y:26e5,class:"countries",size:12},{text:"SERBIA",cc:"RS",x:52e5,y:23e5,class:"countries",size:7},{text:"SLOVAKIA",cc:"SK",x:504e4,y:2835e3,class:"countries",size:7,rotate:-30},{text:"SLOVENIA",cc:"SI",x:4735e3,y:2522e3,class:"countries",size:7,rotate:-30},{text:"SPAIN",cc:"ES",x:3160096,y:185e4,class:"countries",size:12},{text:"SWEDEN",cc:"SE",x:463e4,y:41e5,class:"countries",size:12,rotate:-75},{text:"SWITZERLAND",cc:"CH",x:42e5,y:2564e3,class:"countries",size:7},{text:"TRKIYE",cc:"TR",x:651e4,y:21e5,class:"countries",size:12},{text:"U.K.",cc:"UK",x:3558e3,y:325e4,class:"countries",size:12},{text:"UKRAINE",cc:"UA",x:589e4,y:305e4,class:"countries"}],fr:[{text:"MER MDITERRANE",x:5472e3,y:1242e3,class:"seas",size:12},{text:"OCAN ATLANTIQUE",x:282e4,y:254e4,class:"seas",size:12},{text:"MER DU NORD",x:3915e3,y:37e5,class:"seas",size:12},{text:"MER BALTIQUE",x:49e5,y:3672e3,class:"seas",size:10,rotate:-50},{text:"MER DE NORVGE",x:385e4,y:48e5,class:"seas",size:12},{text:"MER NOIRE",x:6265e3,y:2472e3,class:"seas",size:12},{text:"ALBANIE",x:51e5,y:206e4,class:"countries",size:7,rotate:80},{text:"AUTRICHE",x:467e4,y:2629e3,class:"countries",size:10},{text:"BELGIQUE",x:39e5,y:303e4,class:"countries",size:7,rotate:30},{text:"BULGARIE",x:5567e3,y:2256e3,class:"countries",size:12},{text:"CROATIE",x:4876e3,y:2455e3,class:"countries",size:7},{text:"CHYPRE",x:6426e3,y:148e4,class:"countries",size:10},{text:"TCHQUIE",x:4707e3,y:2885e3,class:"countries",size:12},{text:"DANEMARK",x:4316e3,y:3621e3,class:"countries",size:10},{text:"ESTONIE",x:522e4,y:399e4,class:"countries",size:10},{text:"FINLANDE",x:5125e3,y:4424e3,class:"countries",size:12},{text:"FRANCE",x:3767740,y:2662817,class:"countries",size:12},{text:"ALLEMAGNE",x:4347284,y:3093276,class:"countries",size:12},{text:"GRCE",x:542e4,y:186e4,class:"countries",size:12},{text:"HONGRIE",x:502e4,y:2654e3,class:"countries",size:10},{text:"ISLANDE",x:304e4,y:4833e3,class:"countries",size:10},{text:"IRLANDE",x:3136e3,y:3394e3,class:"countries",size:10},{text:"ITALIE",x:45e5,y:2181963,class:"countries",size:12},{text:"LETTONIE",x:529e4,y:3776e3,class:"countries",size:10},{text:"LITUANIE",x:519e4,y:363e4,class:"countries",size:10},{text:"LUX.",x:412e4,y:294e4,class:"countries",size:7},{text:"MALTE",x:4731e3,y:1335e3,class:"countries",size:7},{text:"MONT.",x:5073e3,y:2185e3,class:"countries",size:7},{text:"MAC. DU NORD",x:53e5,y:2082e3,class:"countries",size:7},{text:"PAYS-BAS",x:3977e3,y:3208e3,class:"countries",size:7},{text:"NORVEGE",x:433e4,y:4147e3,class:"countries",size:12,rotate:-75},{text:"POLOGNE",x:4964e3,y:3269e3,class:"countries",size:12},{text:"PORTUGAL",x:2836136,y:1956179,class:"countries",size:10,rotate:-75},{text:"ROUMANIE",x:5451e3,y:26e5,class:"countries",size:12},{text:"SERBIE",x:52e5,y:23e5,class:"countries",size:7},{text:"SLOVAQUIE",x:504e4,y:2835e3,class:"countries",size:7,rotate:-30},{text:"SLOVNIE",x:4735e3,y:2522e3,class:"countries",size:7,rotate:-35},{text:"ESPAGNE",x:3160096,y:185e4,class:"countries",size:12},{text:"SUDE",x:47e5,y:4401e3,class:"countries",size:12,rotate:-75},{text:"SUISSE",x:42e5,y:2564e3,class:"countries",size:7},{text:"TURQUIE",x:651e4,y:21e5,class:"countries",size:12},{text:"ROYAUME-UNI",x:3558e3,y:325e4,class:"countries",size:10}],de:[{text:"MITTELMEER",x:5472e3,y:12e5,class:"seas",size:12,letterSpacing:7},{text:"ATLANTISCHER OZEAN",x:282e4,y:254e4,class:"seas",size:12},{text:"NORDSEE",x:3915e3,y:37e5,class:"seas",size:12},{text:"OSTSEE",x:49e5,y:3672e3,class:"seas",size:10,rotate:-50},{text:"NORWEGISCHE MEER",x:385e4,y:48e5,class:"seas",size:12},{text:"SCHWARZE MEER",x:63e5,y:25e5,class:"seas",size:12,letterSpacing:1},{text:"ALBANIEN",x:51e5,y:206e4,class:"countries",size:7,rotate:80},{text:"STERREICH",x:465e4,y:2629e3,class:"countries",size:7},{text:"BELGIEN",x:39e5,y:303e4,class:"countries",size:7,rotate:30},{text:"BULGARIEN",x:5567e3,y:2256e3,class:"countries",size:10},{text:"KROATIEN",x:4876e3,y:2455e3,class:"countries",size:7},{text:"ZYPERN",x:6426e3,y:148e4,class:"countries",size:10},{text:"TSCHECHIEN",x:4707e3,y:2885e3,class:"countries",size:7},{text:"DNEMARK",x:4316e3,y:3621e3,class:"countries",size:10},{text:"ESTLAND",x:522e4,y:399e4,class:"countries",size:7},{text:"FINNLAND",x:515e4,y:4424e3,class:"countries",size:12},{text:"FRANKREICH",x:3767740,y:2662817,class:"countries",size:12},{text:"DEUTSCHLAND",x:4347284,y:3093276,class:"countries",size:10},{text:"GRIECHENLAND",x:555e4,y:15e5,class:"countries",size:10},{text:"UNGARN",x:502e4,y:263e4,class:"countries",size:10},{text:"ISLAND",x:304e4,y:4833e3,class:"countries",size:10},{text:"IRLAND",x:3136e3,y:3394e3,class:"countries",size:10},{text:"ITALIEN",x:4469967,y:2181963,class:"countries",size:12,rotate:35},{text:"LETTLAND",x:529e4,y:38e5,class:"countries",size:7},{text:"LITAUEN",x:519e4,y:363e4,class:"countries",size:7},{text:"LUX.",x:412e4,y:294e4,class:"countries",size:7},{text:"MALTA",x:4731e3,y:133e4,class:"countries",size:7},{text:"MONT.",x:5073e3,y:2185e3,class:"countries",size:7},{text:"NORDMAZEDONIEN",x:535e4,y:2082e3,class:"countries",size:7},{text:"NIEDERLANDE",x:3977e3,y:3208e3,class:"countries",size:7},{text:"NORWEGEN",x:433e4,y:4147e3,class:"countries",size:12,rotate:-75},{text:"POLEN",x:4964e3,y:3269e3,class:"countries",size:12},{text:"PORTUGAL",x:2836136,y:1956179,class:"countries",size:10,rotate:-75},{text:"RUMNIEN",x:5451e3,y:26e5,class:"countries",size:12},{text:"SERBIEN",x:52e5,y:23e5,class:"countries",size:7},{text:"SLOWAKEI",x:504e4,y:2835e3,class:"countries",size:7,rotate:-30},{text:"SLOWENIEN",x:4735e3,y:2522e3,class:"countries",size:7,rotate:-30},{text:"SPANIEN",x:3160096,y:185e4,class:"countries",size:12},{text:"SCHWEDEN",x:467e4,y:418e4,class:"countries",size:12,rotate:-75},{text:"SCHWEIZ",x:42e5,y:2564e3,class:"countries",size:7},{text:"TRUTHAHN",x:651e4,y:21e5,class:"countries",size:12},{text:"VEREINIGTES",x:355e4,y:352e4,class:"countries",size:10},{text:"KNIGREICH",x:355e4,y:342e4,class:"countries",size:10}]},IC_32628:{cc:[{text:"ES",x:420468,y:3180647,class:"cc",size:12}],en:[{text:"Canary Islands",x:420468,y:3180647,class:"countries",size:12}],fr:[{text:"Les les Canaries",x:420468,y:3180647,class:"countries",size:12}],de:[{text:"Kanarische Inseln",x:41e4,y:3180647,class:"countries",size:12}]},GP_32620:{cc:[{text:"FR",x:667e3,y:174e4,class:"cc",size:12}],en:[{text:"Guadeloupe",x:7e5,y:181e4,class:"countries",size:12}]},MQ_32620:{cc:[{text:"FR",x:716521,y:1621322,class:"cc",size:12}],en:[{text:"Martinique",x:716521,y:1621322,class:"countries",size:12}]},GF_32622:{cc:[{text:"FR",x:266852,y:444074,class:"cc",size:12}],en:[{text:"Guyane",x:266852,y:444074,class:"countries",size:12}],de:[{text:"Guayana",x:266852,y:444074,class:"countries",size:12}]},RE_32740:{cc:[{text:"FR",x:348011,y:768e4,class:"cc",size:10}],en:[{text:"Runion",x:348011,y:768e4,class:"countries",size:10}]},YT_32738:{cc:[{text:"FR",x:516549,y:8593920,class:"cc",size:10}],en:[{text:"Mayotte",x:516549,y:8593920,class:"countries",size:10}]},MT_3035:{cc:[{text:"MT",x:4719755,y:1410701,class:"cc",size:10}],en:[{text:"Malta",x:4719755,y:1410701,class:"countries",size:10}]},PT20_32626:{cc:[{text:"PT",x:397418,y:432e4,class:"cc",size:10}],en:[{text:"Azores",x:397418,y:432e4,class:"countries",size:10}],fr:[{text:"Aores",x:397418,y:4271471,class:"countries",size:10}],de:[{text:"Azoren",x:397418,y:4271471,class:"countries",size:10}]},PT30_32628:{cc:[{text:"PT",x:333586,y:3624e3,class:"cc",size:10,rotate:30}],en:[{text:"Madeira",x:333586,y:3624e3,class:"countries",size:10,rotate:30}],fr:[{text:"Madre",x:333586,y:3624e3,class:"countries",size:10,rotate:30}]},LI_3035:{cc:[{text:"LI",x:4287060,y:266e4,class:"cc",size:12}],en:[{text:"Liechtenstein",x:4287060,y:2679e3,class:"countries",size:7}]},IS_3035:{cc:[{text:"IS",x:3011804,y:496e4,class:"cc",size:12}],en:[{text:"Iceland",x:3011804,y:496e4,class:"countries",size:12}],fr:[{text:"Islande",x:3011804,y:496e4,class:"countries",size:12}],de:[{text:"Island",x:3011804,y:496e4,class:"countries",size:12}]},SJ_SV_3035:{cc:[{text:"NO",x:457e4,y:626e4,class:"cc",size:10}],en:[{text:"Svalbard",x:457e4,y:626e4,class:"countries",size:10}],de:[{text:"Spitzbergen",x:457e4,y:626e4,class:"countries",size:7}]},SJ_JM_3035:{cc:[{text:"NO",x:3647762,y:5420300,class:"cc",size:10}],en:[{text:"Jan Mayen",x:3647762,y:5420300,class:"countries",size:7}]},CARIB_32620:{cc:[{text:"FR",x:7e5,y:181e4,class:"cc",size:10},{text:"FR",x:64e4,y:159e4,class:"cc",size:10},{text:"FR",x:54e4,y:1962e3,class:"cc",size:7}],en:[{text:"Guadeloupe",x:7e5,y:181e4,class:"countries",size:10},{text:"Martinique",x:57e4,y:159e4,class:"countries",size:10},{text:"Saint Martin",x:597e3,y:1962e3,class:"countries",size:7}]},WORLD_54030:{en:[{text:"NORTH ATLANTIC",x:-45,y:25,class:"seas",size:10,letterSpacing:1},{text:"SOUTH ATLANTIC",x:-15,y:-25,class:"seas",size:10,letterSpacing:1},{text:"SOUTH PACIFIC",x:-126,y:-25,class:"seas",size:10,letterSpacing:1},{text:"NORTH",x:-136,y:25,class:"seas",size:10,letterSpacing:1},{text:"PACIFIC",x:-134,y:20,class:"seas",size:10,letterSpacing:1},{text:"INDIAN OCEAN",x:80,y:-25,class:"seas",size:10,letterSpacing:1},{text:"SOUTHERN OCEAN",x:-5,y:-67,class:"seas",size:10,letterSpacing:6}]}},PF={AL:{x:515e4,y:2e6},AT:{x:467e4,y:274e4},BE:{x:393e4,y:306e4},BG:{x:5567e3,y:23e5},HR:{x:4657718,y:2400243},CY:{x:6426e3,y:157e4},CH:{x:417e4,y:26e5},CZ:{x:4707e3,y:295e4},DK:{x:4316e3,y:3621e3},EE:{x:522e4,y:405e4},FI:{x:515e4,y:4424e3},FR:{x:3767740,y:2662817},DE:{x:4347284,y:3093276},EL:{x:537e4,y:175e4},HU:{x:502e4,y:267e4},IS:{x:304e4,y:4833e3},IE:{x:3136e3,y:3394e3},IT:{x:45e5,y:2181963},LV:{x:529e4,y:384e4},LT:{x:519e4,y:367e4},LU:{x:412e4,y:294e4},MT:{x:488e4,y:148e4},GE:{x:6912680,y:2696554},UA:{x:5865507,y:3130158},BA:{x:4959262,y:2368688},MD:{x:5736016,y:2835957},ME:{x:5073e3,y:223e4},MK:{x:53e5,y:213e4},NL:{x:402e4,y:3208e3},NO:{x:43e5,y:4147e3},PL:{x:4964e3,y:32e5},PT:{x:276e4,y:199e4},RO:{x:5451e3,y:26e5},RS:{x:52e5,y:237e4},SK:{x:504e4,y:289e4},SI:{x:466e4,y:255e4},ES:{x:32e5,y:2e6},SE:{x:463e4,y:4e6},TR:{x:651e4,y:21e5},UK:{x:3558e3,y:325e4},RU:{x:6842086,y:3230517}};function FF(t){return t}function NF(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return LF(t,e)})}:LF(t,e)}function LF(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=function(t,e){var n=function(t){if(null==t)return FF;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+a,u[1]=(n+=t[1])*i+o;l<c;)u[l]=t[l],++l;return u}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)e.push(n(i[a],a));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,o)}function a(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}function c(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(c)};case"Point":e=a(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(a);break;case"LineString":e=o(t.arcs);break;case"MultiLineString":e=t.arcs.map(o);break;case"Polygon":e=l(t.arcs);break;case"MultiPolygon":e=t.arcs.map(l);break;default:return null}return{type:n,coordinates:e}}return c(e)}(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}var OF={2021:{3035:{"03M":{type:"Topology",arcs:[[[3061,1303],[-152,-59],[-32,-66],[-65,72],[-96,7],[-16,59],[-64,19],[-56,-39],[-120,39],[-184,-19],[-16,26],[32,52],[-16,72],[24,40],[8,183]],[[2885,0],[-8,46],[-65,85],[-40,-7],[-40,40],[0,111],[80,13],[25,46],[72,13],[40,98],[-56,118],[144,196],[-24,79],[88,59],[-24,98],[-8,20],[24,39],[8,52],[48,72],[-88,125]],[[825,2638],[-112,-98],[-72,-7],[-88,-118],[-176,-39],[56,-91],[88,-33],[24,-53],[56,-39],[24,-91],[-56,-46],[24,-105],[-56,-92],[-104,0],[-48,-104],[-16,-40],[-57,7],[-40,-53],[-16,-78],[113,-118],[-97,-65],[-88,-99],[-80,20],[-80,-39],[-24,-13]],[[1098,2304],[-193,66],[24,39],[-16,39],[65,13],[0,33],[-65,79],[-88,65]],[[2308,1689],[-153,-20],[-64,59],[-40,7],[-96,-27],[-104,138],[-8,92],[-32,78],[-64,26],[-32,-59],[-24,0],[-56,86],[-40,137],[-25,65],[-56,0],[-56,46],[-64,-72],[-120,53],[-88,-40],[-88,46]]],transform:{scale:[37.761044752777565,38.54734205626113],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:1000004,lvl:1,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:1000005,lvl:1,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:1000001,lvl:1,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:1000002,lvl:1,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:1000003,lvl:1,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"10M":{type:"Topology",arcs:[[[962,0],[-29,75],[48,131],[21,35],[11,38],[32,117],[-24,44]],[[1021,440],[-64,-29],[-70,36],[-120,2],[3,121]],[[770,570],[-126,16],[-40,91],[-45,4],[-51,93],[-142,4]],[[275,891],[-131,-99],[30,-36],[24,-31],[-6,-86],[-98,-86],[13,-64],[-27,-38],[-80,-31]],[[366,778],[-37,22],[-54,91]]],transform:{scale:[113.2099448513097,114.12782081303801],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:1000005,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[1],properties:{id:1000004,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[2],properties:{id:1000003,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[3],properties:{id:1000001,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[4],properties:{id:1000002,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}}]}}},"20M":{type:"Topology",arcs:[[[536,0],[-24,45],[15,30],[45,92],[-1,44],[-2,37]],[[569,248],[-130,9],[-10,64]],[[429,321],[-64,10],[-78,94],[-83,13]],[[153,502],[-73,-51],[26,-84],[-48,-53],[-3,-52],[-55,-25]],[[204,438],[-51,64]]],transform:{scale:[203.12309601494124,202.56551463031246],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:1000005,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[1],properties:{id:1000004,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[2],properties:{id:1000003,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[3],properties:{id:1000001,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[4],properties:{id:1000002,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}}]}}},"60M":{type:"Topology",arcs:[[[310,138],[-36,-2],[-40,42]],[[234,178],[-123,65]],[[84,278],[-84,-147]],[[111,243],[-27,35]],[[292,0],[18,138]]],transform:{scale:[372.84281730215633,364.87611898580536],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:1000004,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[1],properties:{id:1000003,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[2],properties:{id:1000001,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[3],properties:{id:1000002,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}},{type:"LineString",arcs:[4],properties:{id:1000005,lvl:1,eu:"F",efta:"F",cc:"T",oth:"T",co:"F"}}]}}}},4326:{"03M":{type:"Topology",arcs:[[[1900,1275],[-30,27],[-27,-13],[-34,23],[-87,6],[25,59],[1,70],[20,34],[24,167]],[[1792,1648],[-116,1],[-62,77],[-89,-8],[-60,148],[7,86],[-4,15],[-13,60],[-45,28],[-33,-48],[-26,4],[-31,142],[-11,53],[5,43],[-19,44],[-39,8],[-40,49],[-52,-59],[-93,71],[-38,-6],[-16,-26]],[[945,2388],[-54,27],[-20,28],[-22,-3],[-17,22],[-25,1],[-10,10],[4,17],[27,14],[-15,29],[1,16],[68,1],[-8,16],[-5,30],[-14,29],[-27,42],[-25,22],[-30,41]],[[773,2730],[-89,-69],[-64,-4],[-82,-92],[-133,-15],[27,-93],[64,-43],[16,-50],[38,-44],[9,-75],[-48,-51],[5,-41],[6,-50],[-52,-84],[-78,14],[-35,-66],[-33,-61],[-45,11],[-35,-42],[-18,-72],[33,-71],[48,-55]],[[1017,2330],[-72,58]],[[307,1677],[-36,-12],[-25,-21],[-26,-10],[-76,-90],[-17,4],[-30,31],[-52,-14],[-26,-23],[-19,1]],[[2319,1185],[-116,-32],[-39,-52],[-42,70],[-68,23],[-12,58],[-43,23],[-42,-23],[-57,23]],[[2044,0],[-4,43],[-38,82],[-34,9],[-24,43],[13,97],[61,4],[32,41],[49,0],[37,82],[-26,118],[130,167],[-8,73],[74,46],[-2,18],[-9,92],[24,35],[7,49],[48,52],[-55,134]]],transform:{scale:[.0006038339283908974,.00036983475567765975],translate:[20.35292839300007,42.26281764300006]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000002,co:"F",oth:"F"}},{type:"LineString",arcs:[1],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000001,co:"F",oth:"F"}},{type:"LineString",arcs:[2],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000003,co:"F",oth:"F"}},{type:"LineString",arcs:[3],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000004,co:"F",oth:"F"}},{type:"LineString",arcs:[4],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000005,co:"F",oth:"F"}},{type:"LineString",arcs:[5],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000006,co:"F",oth:"F"}},{type:"LineString",arcs:[6],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000007,co:"F",oth:"F"}},{type:"LineString",arcs:[7],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000008,co:"F",oth:"F"}}]}}},"10M":{type:"Topology",arcs:[[[659,439],[-54,17],[17,111]],[[622,567],[-93,31],[-25,92],[-36,11],[-29,97],[-23,1],[-63,3]],[[328,822],[-33,74],[-27,44]],[[268,940],[-72,-44],[-38,-31],[27,-86],[-14,-65],[-81,-78],[16,-58]],[[353,802],[-25,20]],[[106,578],[-41,-19],[-65,-28]],[[805,408],[-54,-21],[-92,52]],[[709,0],[-22,72],[0,17],[40,36],[18,67],[53,101],[16,64],[-9,51]]],transform:{scale:[.001740521547911524,.0010740945563829907],translate:[20.35292839300007,42.26281764300006]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000002,co:"F",oth:"F"}},{type:"LineString",arcs:[1],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000003,co:"F",oth:"F"}},{type:"LineString",arcs:[2],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000004,co:"F",oth:"F"}},{type:"LineString",arcs:[3],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000005,co:"F",oth:"F"}},{type:"LineString",arcs:[4],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000006,co:"F",oth:"F"}},{type:"LineString",arcs:[5],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000007,co:"F",oth:"F"}},{type:"LineString",arcs:[6],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000001,co:"F",oth:"F"}},{type:"LineString",arcs:[7],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000008,co:"F",oth:"F"}}]}}},"20M":{type:"Topology",arcs:[[[380,252],[-21,26],[0,48]],[[359,326],[-49,17],[-56,107],[-51,11]],[[189,472],[-34,68]],[[155,540],[-66,-39],[18,-66],[-54,-68],[8,-35]],[[61,332],[-21,-13],[-10,-12],[-13,5],[-17,-7]],[[464,234],[-84,18]],[[409,0],[-14,46],[61,110],[8,78]]],transform:{scale:[.003018276831896498,.0018697201537037245],translate:[20.35292839300007,42.26281764300006]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000002,co:"F",oth:"F"}},{type:"LineString",arcs:[1],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000003,co:"F",oth:"F"}},{type:"LineString",arcs:[2],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000004,co:"F",oth:"F"}},{type:"LineString",arcs:[3],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000005,co:"F",oth:"F"}},{type:"LineString",arcs:[4],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000007,co:"F",oth:"F"}},{type:"LineString",arcs:[5],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000001,co:"F",oth:"F"}},{type:"LineString",arcs:[6],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000008,co:"F",oth:"F"}}]}}},"60M":{type:"Topology",arcs:[[[235,156],[-13,46]],[[222,202],[-96,84]],[[117,293],[-21,42]],[[96,335],[-58,-129]],[[126,286],[-9,7]],[[38,206],[-38,-17]],[[287,145],[-52,11]],[[253,0],[34,145]]],transform:{scale:[.004879722822299564,.0030138772626866006],translate:[20.352928393000074,42.26281764300006]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000002,co:"F",oth:"F"}},{type:"LineString",arcs:[1],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000003,co:"F",oth:"F"}},{type:"LineString",arcs:[2],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000004,co:"F",oth:"F"}},{type:"LineString",arcs:[3],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000005,co:"F",oth:"F"}},{type:"LineString",arcs:[4],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000006,co:"F",oth:"F"}},{type:"LineString",arcs:[5],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000001,co:"F",oth:"F"}},{type:"LineString",arcs:[6],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000007,co:"F",oth:"F"}},{type:"LineString",arcs:[7],properties:{eu:"F",efta:"F",cc:"T",lvl:0,id:1000008,co:"F",oth:"F"}}]}}}}},2024:{3035:{"03M":{type:"Topology",arcs:[[[728,1508],[-48,12],[-22,18],[-15,-5],[-16,13],[-22,-4],[-10,8],[0,13],[21,13],[-16,17],[0,13],[58,9],[-5,8],[-10,22],[-16,17],[-27,25],[-21,13],[-32,26]],[[1912,0],[-6,30],[-42,51],[-32,0],[-21,30],[0,69],[53,8],[21,35],[43,4],[26,60],[-37,81],[96,129],[-16,51],[58,43],[0,9],[-21,64],[16,26],[5,34],[32,43],[-58,85]],[[250,942],[-27,-13],[-21,-17],[-21,-8],[-59,-73],[-16,0],[-26,17],[-43,-13],[-21,-21],[-16,0]],[[1657,861],[-27,13],[-21,-13],[-32,13],[-74,-9],[16,47],[-6,47],[11,26],[5,120]],[[1529,1105],[-100,-17],[-64,47],[-75,-17],[-63,94],[-6,60],[-5,13],[-16,38],[-42,13],[-22,-38],[-21,0],[-42,94],[-16,34],[0,30],[-21,30],[-32,0],[-38,30],[-42,-47],[-85,39],[-32,-9],[-10,-21]],[[547,1726],[-69,-60],[-53,-13],[-59,-73],[-111,-25],[32,-60],[58,-22],[16,-34],[37,-26],[16,-51],[-37,-39],[5,-30],[11,-34],[-37,-64],[-64,4],[-26,-51],[-22,-47],[-42,4],[-21,-34],[-11,-52],[37,-47],[43,-30]],[[797,1478],[-69,30]],[[2029,852],[-96,-38],[-32,-39],[-42,43],[-59,4],[-16,39],[-42,13],[-32,-22],[-53,9]]],transform:{scale:[56.97629608361119,58.91534666536319],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"10M":{type:"Topology",arcs:[[[242,508],[-33,47],[-27,27]],[[637,0],[-25,46],[-2,12],[30,29],[7,47],[34,75],[7,45],[-12,33]],[[83,318],[-32,-18],[-51,-26]],[[552,290],[-46,5],[3,78]],[[509,373],[-79,8],[-30,59],[-30,3],[-34,62],[-19,-1],[-52,-6]],[[182,582],[-55,-39],[-28,-25],[30,-56],[-5,-45],[-59,-62],[18,-37]],[[265,498],[-23,10]],[[676,287],[-43,-21],[-81,24]]],transform:{scale:[171.07449827433382,174.72145763645509],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"20M":{type:"Topology",arcs:[[[50,191],[-17,-11],[-8,-10],[-11,1],[-14,-6]],[[305,224],[-44,6],[-58,68],[-44,2]],[[109,350],[-52,-36],[21,-45],[-38,-54],[10,-24]],[[159,300],[-14,6]],[[145,306],[-36,44]],[[381,0],[-17,31],[41,85],[-1,57]],[[404,173],[-74,2]],[[330,175],[-20,15],[-5,34]]],transform:{scale:[286.13294356075795,290.536823841191],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"60M":{type:"Topology",arcs:[[[258,111],[-47,1]],[[32,123],[-32,-17]],[[211,112],[-16,32]],[[195,144],[-94,49]],[[70,225],[-38,-102]],[[101,193],[-8,4]],[[93,197],[-23,28]],[[243,0],[15,111]]],transform:{scale:[447.98943164212585,451.9461704196305],translate:[5167020.037451873,2202278.5103255166]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}}},4326:{"03M":{type:"Topology",arcs:[[[1543,0],[-4,32],[-28,65],[-24,5],[-19,33],[10,70],[47,5],[23,33],[38,0],[28,59],[-19,92],[94,124],[-5,54],[56,37],[0,11],[-9,70],[19,27],[4,38],[38,38],[-42,102]],[[1750,895],[-85,-27],[-32,-37],[-29,54],[-56,16],[-5,43],[-32,16],[-33,-16],[-43,16]],[[1435,960],[-23,22],[-19,-11],[-28,16],[-66,5],[19,44],[0,54],[14,26],[19,125]],[[230,1262],[-24,-5],[-23,-16],[-19,-11],[-56,-65],[-14,0],[-24,27],[-37,-11],[-19,-21],[-14,5]],[[1351,1241],[-84,0],[-47,59],[-71,-6],[-42,114],[5,64],[-5,11],[-9,43],[-33,22],[-24,-38],[-23,6],[-23,108],[-5,37],[0,33],[-14,32],[-28,5],[-29,38],[-42,-43],[-70,54],[-28,-5],[-10,-22]],[[582,2055],[-66,-49],[-47,-5],[-61,-70],[-103,-11],[19,-70],[51,-32],[10,-38],[28,-32],[9,-54],[-37,-44],[4,-26],[5,-38],[-37,-65],[-61,11],[-29,-49],[-23,-48],[-33,11],[-28,-33],[-14,-54],[28,-54],[33,-43]],[[769,1753],[-56,48]],[[713,1801],[-42,17],[-14,21],[-19,0],[-9,16],[-19,0],[-10,6],[5,16],[19,11],[-9,21],[0,11],[51,0],[-5,11],[-4,22],[-10,26],[-23,27],[-19,22],[-23,27]]],transform:{scale:[.0007994261320208862,.0004913384355349169],translate:[20.35361768088405,42.262163108155406]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"10M":{type:"Topology",arcs:[[[539,0],[-17,52],[0,13],[30,27],[13,48],[41,74],[13,47],[-8,38]],[[611,299],[-41,-16],[-69,37]],[[501,320],[-41,13],[12,81]],[[80,421],[-31,-12],[-49,-20]],[[472,414],[-71,24],[-18,66],[-28,7],[-21,72],[-18,0],[-47,2]],[[203,686],[-54,-32],[-29,-22],[21,-63],[-12,-47],[-60,-57],[11,-44]],[[269,585],[-20,16]],[[249,601],[-25,53],[-21,32]]],transform:{scale:[.002290098349828638,.0014718665962452685],translate:[20.35361768088405,42.262163108155406]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"20M":{type:"Topology",arcs:[[[337,0],[-12,36],[51,84],[6,62]],[[382,182],[-69,13]],[[313,195],[-17,20],[-1,37]],[[50,256],[-17,-10],[-8,-8],[-11,3],[-14,-5]],[[295,252],[-40,13],[-46,82],[-41,9]],[[127,417],[-54,-30],[15,-51],[-44,-53],[6,-27]],[[168,356],[-12,10]],[[156,366],[-29,51]]],transform:{scale:[.0036618323062750017,.0024213440887871805],translate:[20.35361768088405,42.262163108155406]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}},"60M":{type:"Topology",arcs:[[[220,0],[29,116]],[[249,116],[-45,8]],[[204,124],[-12,37]],[[192,161],[-83,66]],[[109,227],[-8,6]],[[33,163],[-33,-12]],[[83,266],[-50,-103]],[[101,233],[-18,33]]],transform:{scale:[.005617750767056427,.003795866485053587],translate:[20.35361768088405,42.262163108155406]},objects:{nutsbn_1:{type:"GeometryCollection",geometries:[{type:"LineString",arcs:[0],properties:{id:"1000008",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[1],properties:{id:"1000007",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[2],properties:{id:"1000002",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[3],properties:{id:"1000003",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[4],properties:{id:"1000006",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[5],properties:{id:"1000001",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[6],properties:{id:"1000005",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}},{type:"LineString",arcs:[7],properties:{id:"1000004",lvl:0,eu:"F",efta:"F",cc:"T",oth:"F",co:"F"}}]}}}}}};function DF(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function zF(t,e){let n;return(r,i)=>(()=>{if(n)return n;const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),n=DF(r),n.then(t=>{t.onclose=()=>n=void 0},()=>{}),n})().then(t=>i(t.transaction(e,r).objectStore(e)))}let IF;function GF(){return IF||(IF=zF("keyval-store","keyval")),IF}function RF(t,e=GF()){return e("readonly",e=>DF(e.get(t)))}function jF(t,e,n=GF()){return n("readwrite",n=>(n.put(e,t),DF(n.transaction)))}var BF=new Map,UF=864e5;function WF(){return"undefined"!=typeof window&&((!0===window.isSecureContext||"localhost"===location.hostname||"127.0.0.1"===location.hostname)&&"undefined"!=typeof indexedDB)}function qF(t){return HF.apply(this,arguments)}function HF(){return HF=Fr(Lr().mark(function t(e){var n;return Lr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(WF()){t.next=1;break}return t.abrupt("return",null);case 1:return t.prev=1,t.next=2,RF(e);case 2:return t.abrupt("return",t.sent);case 3:return t.prev=3,n=t.catch(1),console.warn("[IDB] read skipped:",(null==n?void 0:n.name)||n),t.abrupt("return",null);case 4:case"end":return t.stop()}},t,null,[[1,3]])})),HF.apply(this,arguments)}function YF(t,e){return VF.apply(this,arguments)}function VF(){return VF=Fr(Lr().mark(function t(e,n){var r;return Lr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(WF()){t.next=1;break}return t.abrupt("return",!1);case 1:return t.prev=1,t.next=2,jF(e,n);case 2:return t.abrupt("return",!0);case 3:return t.prev=3,r=t.catch(1),console.warn("[IDB] write skipped:",(null==r?void 0:r.name)||r),t.abrupt("return",!1);case 4:case"end":return t.stop()}},t,null,[[1,3]])})),VF.apply(this,arguments)}var $F=function(t,e){var n={};return n.defaultGeoData=void 0,n.allNUTSGeoData=void 0,n.geoJSONs={mixed:{rg0:void 0,rg1:void 0,rg2:void 0,rg3:void 0},cntbn:void 0,cntrg:void 0,nutsbn:void 0,nutsrg:void 0,gra:void 0,worldrg:void 0,worldbn:void 0,kosovo:void 0},n.userGeometries=void 0,n.statisticalRegions=void 0,n.centroidsData=void 0,n.centroidsFeatures=void 0,n._allCentroidsFeatures=void 0,n.getRegionFeatures=function(){return"WORLD"==t.geo_?n.geoJSONs.worldrg:"mixed"===t.nutsLevel_?[n.geoJSONs.mixed.rg0,n.geoJSONs.mixed.rg1,n.geoJSONs.mixed.rg2,n.geoJSONs.mixed.rg3]:n.geoJSONs.nutsrg.concat(n.geoJSONs.cntrg)},n.getDefaultGeoData=function(t,r,i){var a=n.getDefaultGeoDataPromise();return Promise.all(a).then(function(a){var o="function"==typeof r?r(a):a;return n.allNUTSGeoData=o,n.defaultGeoData=o[0],e&&(n.centroidsData="mixed"===i?[o[4],o[5],o[6],o[7]]:o[1]),"WORLD"===t?(n.geoJSONs.worldrg=NF(n.defaultGeoData,n.defaultGeoData.objects.CNTR_RG_20M_2020_4326).features,n.geoJSONs.worldbn=NF(n.defaultGeoData,n.defaultGeoData.objects.CNTR_BN_20M_2020_4326).features,n.geoJSONs.kosovo=NF(n.defaultGeoData,n.defaultGeoData.objects.NUTS_BN_20M_2021_RS_XK_border).features,n.geoJSONs.graticule=[up().step([30,30])()]):(n.geoJSONs.graticule=NF(n.defaultGeoData,n.defaultGeoData.objects.gra).features,n.geoJSONs.nutsrg=NF(n.defaultGeoData,n.defaultGeoData.objects.nutsrg).features,n.geoJSONs.nutsbn=NF(n.defaultGeoData,n.defaultGeoData.objects.nutsbn).features,n.geoJSONs.cntrg=NF(n.defaultGeoData,n.defaultGeoData.objects.cntrg).features,n.geoJSONs.cntbn=NF(n.defaultGeoData,n.defaultGeoData.objects.cntbn).features),o}).catch(function(t){return Promise.reject(t)})},n.getDefaultGeoDataPromise=function(){var n=[0,1,2,3],r=[],i=function(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="".concat(t,"/").concat(e);return n&&"EUR"!==n&&"WORLD"!==n&&(s+="/".concat(n)),s+="/".concat("WORLD"==n?"4326":r),!o&&i&&(s+="/".concat(i)),s+="/".concat(o?"nutspt_":"").concat(a,".json")},a=function(){var t=Fr(Lr().mark(function t(e){var n,r,i,a,o;return Lr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="geojson-cache:".concat(e),!((r=BF.get(n))&&Date.now()-r.timestamp<UF)){t.next=1;break}return t.abrupt("return",r.data);case 1:return t.next=2,qF(n);case 2:if(!((i=t.sent)&&Date.now()-i.timestamp<UF)){t.next=3;break}return BF.set(n,i),t.abrupt("return",i.data);case 3:return t.next=4,Ru(e).catch(function(t){if(null!=i&&i.data)return i.data;throw new Error("Fetch failed for ".concat(e,": ").concat((null==t?void 0:t.message)||t))});case 4:return a=t.sent,o={timestamp:Date.now(),data:a},BF.set(n,o),t.next=5,YF(n,o);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();if(!t||!t.nuts2jsonBaseURL_)throw new Error("Missing required map context or configuration");if("mixed"===t.nutsLevel_&&"WORLD"!==t.geo_)n.forEach(function(e){var n=i(t.nuts2jsonBaseURL_,t.nutsYear_,t.geo_,t.proj_,t.scale_,e);r.push(a(n))}),e&&n.forEach(function(e){var n=i(t.nuts2jsonBaseURL_,t.nutsYear_,t.geo_,t.proj_,t.scale_,e,!0);r.push(a(n))});else if("WORLD"===t.geo_){var o=window.location.hostname.includes("ec.europa.eu")?"https://ec.europa.eu/assets/estat/E/E4/gisco/IMAGE/WORLD_4326.json":"https://raw.githubusercontent.com/eurostat/eurostat-map/master/src/assets/topojson/WORLD_4326.json";r.push(a(o))}else{var s=i(t.nuts2jsonBaseURL_,t.nutsYear_,t.geo_,t.proj_,t.scale_,t.nutsLevel_);if(r.push(a(s)),e){var l=i(t.nuts2jsonBaseURL_,t.nutsYear_,t.geo_,t.proj_,t.scale_,t.nutsLevel_,!0);r.push(a(l))}}return r},n.isGeoReady=function(){if(!n.defaultGeoData&&!n.userGeometries)return!1;var e=!0;return GE(t.insetTemplates_,null,function(t){t.Geometries.isGeoReady()||(e=!1)}),e},n.setUserGeometries=function(t){var e=this;this.userGeometries=t,t.forEach(function(t){t.statisticalRegions&&(e.statisticalRegions=t)})},n.addDefaultGeometriesToMap=function(e,r,i,a,o,s,l,c){(this.geoJSONs.graticule&&r&&e.append("g").attr("id","em-graticule").attr("class","em-graticule").selectAll("path").data(this.geoJSONs.graticule).enter().append("path").attr("d",i),this.geoJSONs.cntrg&&e.append("g").attr("id","em-cntrg").attr("class","em-cntrg").selectAll("path").data(this.geoJSONs.cntrg).enter().append("path").attr("d",i).attr("id",function(t){var e=t.properties.id;if("RS"==e||"EL"==e)return"em-cntrg-"+e}),this.geoJSONs.worldrg&&e.append("g").attr("id","em-worldrg").attr("class","em-worldrg").selectAll("path").data(this.geoJSONs.worldrg).enter().append("path").attr("d",i),this.geoJSONs.nutsrg)&&("mixed"==a?(this.geoJSONs.mixed.rg0=this.geoJSONs.nutsrg,this.geoJSONs.mixed.rg1=NF(n.allNUTSGeoData[1],n.allNUTSGeoData[1].objects.nutsrg).features,this.geoJSONs.mixed.rg2=NF(n.allNUTSGeoData[2],n.allNUTSGeoData[2].objects.nutsrg).features,this.geoJSONs.mixed.rg3=NF(n.allNUTSGeoData[3],n.allNUTSGeoData[3].objects.nutsrg).features,[this.geoJSONs.mixed.rg0,this.geoJSONs.mixed.rg1,this.geoJSONs.mixed.rg2,this.geoJSONs.mixed.rg3].forEach(function(n,r){XF(e.append("g").attr("id","em-nutsrg").attr("class","em-nutsrg em-nutsrg-".concat(r)).selectAll("path").data(n).enter().append("path").attr("d",i).attr("lvl",r),t)}),"EUR"!=s||"3035"!=l&&"4326"!=l||function(t,e,n,r,i){var a=OF[i]?OF[i][n][r]:OF[2024][n][r],o=NF(a,"nutsbn_1").features;t.append("g").attr("id","em-kosovo-bn").attr("class","em-kosovo-bn em-bn-cc").selectAll("path").data(o).enter().append("path").attr("d",e)}(e,i,l,c,o)):XF(e.append("g").attr("id","em-nutsrg").attr("class","em-nutsrg").selectAll("path").data(this.geoJSONs.nutsrg).enter().append("path").attr("d",i),t));this.geoJSONs.cntbn&&e.append("g").attr("id","em-cntbn").attr("class","em-cntbn").selectAll("path").data(this.geoJSONs.cntbn).enter().append("path").filter(function(t){return"T"==t.properties.eu||"T"==t.properties.efta||"T"==t.properties.cc||"T"==t.properties.oth||"T"==t.properties.co?t:void 0}).attr("d",i).attr("id",function(t){return"em-bn-"+t.properties.id}).attr("class",function(t){var e=[];return"T"===t.properties.eu&&e.push("em-bn-eu"),"T"===t.properties.efta&&e.push("em-bn-efta"),"T"===t.properties.cc&&e.push("em-bn-cc"),"T"===t.properties.oth&&e.push("em-bn-oth"),"T"===t.properties.co&&e.push("em-bn-co"),e.join(" ")}),this.geoJSONs.nutsbn&&"mixed"!==a&&(this.geoJSONs.nutsbn.sort(function(t,e){return e.properties.lvl-t.properties.lvl}),e.append("g").attr("id","em-nutsbn").attr("class","em-nutsbn").selectAll("path").data(this.geoJSONs.nutsbn).enter().filter(function(t){return"T"==t.properties.eu||"T"==t.properties.efta||"T"==t.properties.cc||"T"==t.properties.oth||"T"==t.properties.co?t:void 0}).append("path").attr("d",i).attr("class",function(t){var e=t.properties;return e.id>1e5?"em-kosovo-bn":"T"===e.co?"em-bn-co":["em-bn-"+e.lvl].join(" ")})),this.geoJSONs.worldbn&&e.append("g").attr("id","em-worldbn").attr("class","em-worldbn").selectAll("path").data(this.geoJSONs.worldbn).enter().append("path").attr("d",i).attr("class",function(t){return t.properties.POL_STAT>0?"em-bn-d":"T"===t.properties.COAS_FLAG?"em-bn-co":"em-worldbn"}),this.geoJSONs.kosovo&&e.append("g").attr("id","em-kosovo-bn").attr("class","em-kosovo-bn").selectAll("path").data(this.geoJSONs.kosovo).enter().append("path").attr("d",i)},n.addUserGeometriesToMap=function(t,e,n){t.forEach(function(t){var r=e.append("g").attr("id",t.statisticalRegions?"em-user-regions":"").attr("class",t.class?t.class:"").selectAll("path").data(t.features).enter().append("path").attr("d",n);"function"==typeof t.onEach&&t.onEach(r)})},n.getAllRegionFeatures=function(){var e=[];return n.geoJSONs.nutsrg?e="mixed"==t.nutsLevel_?n.geoJSONs.mixed.rg0.concat(n.geoJSONs.mixed.rg1,n.geoJSONs.mixed.rg2,n.geoJSONs.mixed.rg3,n.geoJSONs.cntrg):n.geoJSONs.nutsrg.concat(n.geoJSONs.cntrg):n.userGeometries&&(e=n.statisticalRegions.features),e},n};function XF(t,e){t.on("click",function(t,n){var r,i;null!==(r=e.tooltip_.omitRegions)&&void 0!==r&&r.includes(null===(i=n.properties)||void 0===i?void 0:i.id)||e.onRegionClick_&&e.onRegionClick_(t,n,this,e)})}var JF=function(t,e,n,r){var i=Nz(t,n,r);for(var a in(t=t||{}).proj=t.proj||KF[t.geo],t.scale=t.scale||e.insetScale_,t.footnote=t.footnote||"",t.showSourceLink=t.showSourceLink||!1,t.zoomExtent=t.zoomExtent||e.insetZoomExtent_,t.width=t.width||e.insetBoxWidth_,t.height=t.height||e.insetBoxWidth_,t.insets=t.insets||[],t.insetTemplates=t.insetTemplates||{},t.callback=t.callback||void 0,["nutsLevel_","nutsYear_","hoverColor_","cntrgFillStyle_","cntbnStroke_","cntbnStrokeWidth_","seaFillStyle_","drawCoastalMargin_","coastalMarginColor_","coastalMarginWidth_","coastalMarginStdDev_","graticuleStroke_","graticuleStrokeWidth_","lg_","projectionFunction_","filterGeometriesFunction_","processCentroids_"].forEach(function(t){i[t]=e[t]}),["stat","statData","legend","legendObj","noDataText","language","transitionDuration","tooltip_","classToText_"].forEach(function(t){i[t]=e[t]}),t)i[a+"_"]=t[a];return i.isInset=!0,i},ZF=function(t,e){for(var n=[{geo:"IC",x:0,y:0,width:t,height:.3*t},{geo:"CARIB",x:0,y:.3*t+e,width:.5*t,height:t},{geo:"GF",x:.5*t,y:.3*t+e,width:.5*t,height:.75*t},{geo:"YT",x:.5*t,y:1.05*t+e,width:.25*t,height:.25*t},{geo:"RE",x:.75*t,y:1.05*t+e,width:.25*t,height:.25*t},{geo:"PT20",x:0,y:1.3*t+2*e,width:.75*t,height:.25*t},{geo:"PT30",x:.75*t,y:1.3*t+2*e,width:.25*t,height:.25*t},{geo:"MT",x:0,y:1.55*t+3*e,width:.25*t,height:.25*t},{geo:"LI",x:.25*t,y:1.55*t+3*e,width:.25*t,height:.25*t},{geo:"SJ_SV",x:.5*t,y:1.55*t+3*e,width:.25*t,height:.25*t},{geo:"SJ_JM",x:.75*t,y:1.55*t+3*e,width:.25*t,height:.25*t}],r=0;r<n.length;r++)n[r].drawGraticule=!1;return n},KF={EUR:"3035",IC:"32628",GP:"32620",MQ:"32620",GF:"32622",RE:"32740",YT:"32738",MT:"3035",PT20:"32626",PT30:"32628",LI:"3035",IS:"3035",SJ_SV:"3035",SJ_JM:"3035",CARIB:"32620",WORLD:"54030"},QF=function(t,e){if(e.svg_&&(e.svg_.select("#em-stamp").remove(),t)){var n=e.svg_.append("g").attr("id","em-stamp");t.size||(t.size=60),t.x||(t.x=230),t.y||(t.y=100),t.textColor||(t.textColor="#000"),t.stampColor||(t.stampColor="#000"),t.strokeWidth||(t.strokeWidth=1),t.lineHeight||(t.lineHeight=15),n.append("circle").attr("r",t.size).attr("cx",t.x).attr("cy",t.y).attr("id","em-stamp-circle").attr("fill","none").attr("stroke",t.stampColor).attr("stroke-width",t.strokeWidth);var r=t.text,i=Math.sqrt(eN(r.trim())*t.lineHeight),a=rN(tN(r.trim()),i),o=nN(a,t.lineHeight);n.append("text").attr("text-anchor","middle").attr("fill",t.textColor).attr("id","em-stamp-text").attr("transform","translate(".concat(t.x,",").concat(t.y,") scale(").concat(t.size/o,")")).selectAll("tspan").data(a).enter().append("tspan").attr("x",0).attr("y",function(e,n){return(n-a.length/2+.8)*t.lineHeight}).text(function(t){return t.text.replaceAll("~"," ").replaceAll("","")})}},tN=function(t){return t.split(/(?<=)|\s+/g).map(function(t){return t.trim()}).filter(function(t){return t.length>0})},eN=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","text");n.textContent=t,e.appendChild(n),document.body.appendChild(e);var r=n.getComputedTextLength();return document.body.removeChild(e),r+10},nN=function(t,e){for(var n=0,r=0,i=t.length;r<i;++r){var a=(Math.abs(r-i/2+.5)+.5)*e,o=t[r].width/2;n=Math.max(n,Math.sqrt(Math.pow(o,2)+Math.pow(a,2)))}return n},rN=function(t,e){for(var n=[],r={width:0,text:""},i=0,a=t.length;i<a;++i)if(""!==t[i]){var o=(r.text?r.text+" ":"")+t[i],s=eN(o);(r.width+s)/2<e?(r.width=s,r.text=o):(n.push(r),r={width:eN(t[i]),text:t[i]})}else r.text&&n.push(r),r={width:0,text:""};return r.text&&n.push(r),n},iN=function(t){return t.gridCartogramPositions_||("hexagon"===t.gridCartogramShape_?"\n        ,IS,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,\n        ,  ,  ,  ,NO,SE,FI,EE,  ,  ,  ,  ,\n        ,  ,  ,  ,  ,  ,  ,LV,  ,  ,  ,  ,\n        ,IE,UK,  ,  ,DK,  ,LT,  ,  ,  ,  ,\n        ,  ,  ,  ,NL,DE,PL,  ,  ,  ,  ,  ,\n        ,  ,  ,BE,LU,CZ,SK,UA,  ,  ,  ,  ,\n        ,  ,FR,CH,LI,AT,HU,RO,MD,  ,  ,  ,\n        ,PT,ES,  ,IT,SI,HR,RS,BG,  ,  ,  ,\n        ,  ,  ,  ,  ,  ,BA,ME,MK,  ,  ,  ,  \n        ,  ,  ,  ,  ,  ,  ,AL,EL,TR,GE,  ,  \n        ,  ,  ,  ,MT,  ,  ,  ,  ,CY,  ,  ,  ":"\n        ,IS,  ,  ,NO,SE,FI,  ,  ,  ,  ,  ,\n        ,  ,  ,  ,  ,  ,  ,EE,  ,  ,  ,  ,\n        ,  ,  ,  ,  ,  ,  ,LV,  ,  ,  ,  ,\n        ,IE,UK,  ,  ,DK,  ,LT,  ,  ,  ,  ,\n        ,  ,  ,  ,NL,DE,PL,  ,  ,  ,  ,  ,\n        ,  ,  ,BE,LU,CZ,SK,UA,  ,  ,  ,  ,\n        ,  ,FR,CH,LI,AT,HU,RO,MD,  ,  ,  ,\n        ,PT,ES,  ,IT,SI,HR,RS,BG,  ,  ,  ,\n        ,  ,  ,  ,  ,  ,BA,ME,MK,  ,  ,  ,  \n        ,  ,  ,  ,  ,  ,  ,AL,EL,TR,GE,  ,  \n        ,  ,  ,  ,MT,  ,  ,  ,  ,CY,  ,  ,  ")},aN=function(t){var e=new Map;return Cc(t.trim(),function(t,n){t.forEach(function(t,r){(t=t.trim())&&e.set(t,[r,n])})}),e},oN=function(t,e){return Array.from(t,function(t){var n=b(t,2),r=n[0],i=b(n[1],2),a=i[0],o=i[1],s=e.Geometries.geoJSONs.nutsrg.find(function(t){return t.properties.id==r});return{id:r,col:a,row:o,properties:{id:r,name:s?s.properties.na:""}}})},sN=function(t,e,n){var r=Math.max.apply(Math,x(e.map(function(t){return t.col})))+1,i=Math.max.apply(Math,x(e.map(function(t){return t.row})))+1,a=n.gridCartogramMargins_,o=n.gridCartogramCellPadding_||0,s=(n.width_-a.left-a.right)/r-o,l=(n.height_-a.top-a.bottom)/i-o,c=Math.min(s,l);t.selectAll(".em-grid-cell").data(e).enter().append("g").attr("class","em-grid-cell").attr("transform",function(t){return"translate(".concat(t.col*(c+o)+a.left,", ").concat(t.row*(c+o)+a.top,")")}).each(function(t){Dt(this).append("rect").attr("width",c).attr("height",c).attr("class","em-grid-rect"),Dt(this).append("text").attr("class","em-grid-text").attr("text-anchor","middle").attr("font-size",15).style("pointer-events","none").attr("fill","black").text(t.id).attr("x",c/2).attr("y",c/2+5)})},lN=function(t,e,n){var r=Math.max.apply(Math,x(e.map(function(t){return t.col})))+1,i=Math.max.apply(Math,x(e.map(function(t){return t.row})))+1,a=n.gridCartogramMargins_,o=n.gridCartogramCellPadding_||0,s=Math.min((n.width_-a.left-a.right)/(1.5*r),(n.height_-a.top-a.bottom)/(i*Math.sqrt(3))),l=Math.sqrt(3)*s;t.selectAll(".em-grid-cell").data(e).enter().append("g").attr("class","em-grid-cell").attr("transform",function(t){var e=t.col*(1.5*s+o)+a.left,n=t.row*(l+o)+(t.col%2==1?(l+o)/2:0)+a.top;return"translate(".concat(e,", ").concat(n,")")}).each(function(t){Dt(this).append("path").attr("d",cN(s)).attr("class","em-grid-hexagon"),Dt(this).append("text").attr("class","em-grid-text").attr("text-anchor","middle").attr("font-size",15).style("pointer-events","none").attr("fill","black").text(t.id).attr("y",5)})},cN=function(t){var e=Math.PI/3;return Array.from({length:6},function(n,r){var i=t*Math.cos(e*r),a=t*Math.sin(e*r);return"".concat(0===r?"M":"L").concat(i,",").concat(a)}).join(" ")+" Z"},uN=function(t,e,n,r){t.each(function(){var i=this.getBBox(),a=(e-r.left-r.right-i.width)/2-i.x+r.left,o=(n-r.top-r.bottom-i.height)/2-i.y+r.top;t.attr("transform","translate(".concat(a,", ").concat(o,")"))})};var hN=6378137,fN=.0066943799901413165,dN=484813681109536e-20,pN=Math.PI/2,gN=1e-10,vN=.017453292519943295,_N=57.29577951308232,mN=Math.PI/4,yN=2*Math.PI,bN=3.14159265359,xN={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const wN=xN,MN={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var SN=/[\s_\-\/\(\)]/g;function CN(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(SN,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(SN,"")===i)return t[n]}function EN(t){var e,n,r,i={},a=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),o={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*vN},lat_1:function(t){i.lat1=t*vN},lat_2:function(t){i.lat2=t*vN},lat_ts:function(t){i.lat_ts=t*vN},lon_0:function(t){i.long0=t*vN},lon_1:function(t){i.long1=t*vN},lon_2:function(t){i.long2=t*vN},alpha:function(t){i.alpha=parseFloat(t)*vN},gamma:function(t){i.rectified_grid_angle=parseFloat(t)*vN},lonc:function(t){i.longc=t*vN},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r:function(t){i.a=i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=CN(MN,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*vN},pm:function(t){var e=CN(wN,t);i.from_greenwich=(e||parseFloat(t))*vN},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in a)n=a[e],e in o?"function"==typeof(r=o[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}const kN=class{static getId(t){const e=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(t,e="unit"){if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};const n=t[1],r=parseFloat(t[2])||null,i=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return{type:e,name:n,conversion_factor:r,id:i?{authority:i[1],code:parseInt(i[2],10)}:null}}static convertAxis(t){const e=t[1]||"Unknown";let n;const r=e.match(/^\((.)\)$/);if(r){const t=r[1].toUpperCase();if("E"===t)n="east";else if("N"===t)n="north";else{if("U"!==t)throw new Error(`Unknown axis abbreviation: ${t}`);n="up"}}else n=t[2]?t[2].toLowerCase():"unknown";const i=t.find(t=>Array.isArray(t)&&"ORDER"===t[0]),a=i?parseInt(i[1],10):null,o=t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]));return{name:e,direction:n,unit:this.convertUnit(o),order:a}}static extractAxes(t){return t.filter(t=>Array.isArray(t)&&"AXIS"===t[0]).map(t=>this.convertAxis(t)).sort((t,e)=>(t.order||0)-(e.order||0))}static convert(t,e={}){switch(t[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=t[1],e.base_crs=t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])):null,e.conversion=t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])):null;const n=t.find(t=>Array.isArray(t)&&"CS"===t[0]);n&&(e.coordinate_system={type:n[1],axis:this.extractAxes(t)});const r=t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]);if(r){const t=this.convertUnit(r);e.coordinate_system.unit=t}e.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=t[1];const i=t.find(t=>Array.isArray(t)&&("DATUM"===t[0]||"ENSEMBLE"===t[0]));if(i){const n=this.convert(i);"ENSEMBLE"===i[0]?e.datum_ensemble=n:e.datum=n;const r=t.find(t=>Array.isArray(t)&&"PRIMEM"===t[0]);r&&"Greenwich"!==r[1]&&(n.prime_meridian={name:r[1],longitude:parseFloat(r[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},e.id=this.getId(t);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=t[1],e.ellipsoid=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=t[1],e.members=t.filter(t=>Array.isArray(t)&&"MEMBER"===t[0]).map(t=>({type:"DatumEnsembleMember",name:t[1],id:this.getId(t)}));const a=t.find(t=>Array.isArray(t)&&"ENSEMBLEACCURACY"===t[0]);a&&(e.accuracy=parseFloat(a[1]));const o=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0]);o&&(e.ellipsoid=this.convert(o)),e.id=this.getId(t);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=t[1],e.semi_major_axis=parseFloat(t[2]),e.inverse_flattening=parseFloat(t[3]);t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0])&&this.convert(t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]),e);break;case"CONVERSION":e.type="Conversion",e.name=t[1],e.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,e.parameters=t.filter(t=>Array.isArray(t)&&"PARAMETER"===t[0]).map(t=>this.convert(t));break;case"METHOD":e.type="Method",e.name=t[1],e.id=this.getId(t);break;case"PARAMETER":e.type="Parameter",e.name=t[1],e.value=parseFloat(t[2]),e.unit=this.convertUnit(t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]))),e.id=this.getId(t);break;case"BOUNDCRS":e.type="BoundCRS";const s=t.find(t=>Array.isArray(t)&&"SOURCECRS"===t[0]);if(s){const t=s.find(t=>Array.isArray(t));e.source_crs=t?this.convert(t):null}const l=t.find(t=>Array.isArray(t)&&"TARGETCRS"===t[0]);if(l){const t=l.find(t=>Array.isArray(t));e.target_crs=t?this.convert(t):null}const c=t.find(t=>Array.isArray(t)&&"ABRIDGEDTRANSFORMATION"===t[0]);e.transformation=c?this.convert(c):null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=t[1],e.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,e.parameters=t.filter(t=>Array.isArray(t)&&("PARAMETER"===t[0]||"PARAMETERFILE"===t[0])).map(t=>"PARAMETER"===t[0]?this.convert(t):"PARAMETERFILE"===t[0]?{name:t[1],value:t[2],id:{authority:"EPSG",code:8656}}:void 0),7===e.parameters.length){const t=e.parameters[6];"Scale difference"===t.name&&(t.value=Math.round(1e12*(t.value-1))/1e6)}e.id=this.getId(t);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const u=this.convertUnit(t,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(t=>{t.unit||(t.unit=u)}),u.conversion_factor&&1!==u.conversion_factor&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:u});break;default:e.keyword=t[0]}return e}};const AN=class extends kN{static convert(t,e={}){return super.convert(t,e),e.coordinate_system&&"Cartesian"===e.coordinate_system.subtype&&delete e.coordinate_system,e.usage&&delete e.usage,e}};const TN=class extends kN{static convert(t,e={}){super.convert(t,e);const n=t.find(t=>Array.isArray(t)&&"CS"===t[0]);n&&(e.coordinate_system={subtype:n[1],axis:this.extractAxes(t)});const r=t.find(t=>Array.isArray(t)&&"USAGE"===t[0]);if(r){const t=r.find(t=>Array.isArray(t)&&"SCOPE"===t[0]),n=r.find(t=>Array.isArray(t)&&"AREA"===t[0]),i=r.find(t=>Array.isArray(t)&&"BBOX"===t[0]);e.usage={},t&&(e.usage.scope=t[1]),n&&(e.usage.area=n[1]),i&&(e.usage.bbox=i.slice(1))}return e}};function PN(t){const e=function(t){return t.find(t=>Array.isArray(t)&&"USAGE"===t[0])?"2019":(t.find(t=>Array.isArray(t)&&"CS"===t[0])||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015")}(t);return("2019"===e?TN:AN).convert(t)}const FN=function(t){var e=new GN(t);return e.output()};var NN=1,LN=/\s/,ON=/[A-Za-z]/,DN=/[A-Za-z84_]/,zN=/[,\]]/,IN=/[\d\.E\-\+]/;function GN(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NN}function RN(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(t,e){return jN(e,t),t},r);e&&(t[e]=i)}function jN(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void jN(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&jN(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&jN(t[3],e[n]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void RN(e,n,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],RN(e,n,t),void(e[n].type=n);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return jN(t,e[n]);return RN(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}GN.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;LN.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case NN:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},GN.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(zN.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},GN.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=NN)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=NN,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},GN.prototype.number=function(t){if(!IN.test(t)){if(zN.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},GN.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},GN.prototype.keyword=function(t){if(DN.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=NN)}if(!zN.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},GN.prototype.neutral=function(t){if(ON.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(IN.test(t))return this.word=t,void(this.state=3);if(!zN.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},GN.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function BN(t){return.017453292519943295*t}function UN(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");t.long0||!t.longc||"albers conic equal area"!==e&&"lambert azimuthal equal area"!==e||(t.long0=t.longc),t.lat_ts||!t.lat1||"stereographic south pole"!==e&&"polar stereographic (variant b)"!==e?t.lat_ts||!t.lat0||"polar stereographic"!==e&&"polar stereographic (variant a)"!==e||(t.lat_ts=t.lat0,t.lat0=BN(t.lat0>0?90:-90),delete t.lat1):(t.lat0=BN(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1)}function WN(t){let e={units:null,to_meter:void 0};return"string"==typeof t?(e.units=t.toLowerCase(),"metre"===e.units&&(e.units="meter"),"meter"===e.units&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function qN(t){return"object"==typeof t?t.value*t.unit.conversion_factor:t}function HN(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=qN(t.ellipsoid.semi_major_axis),void 0!==t.ellipsoid.inverse_flattening?e.rf=t.ellipsoid.inverse_flattening:void 0!==t.ellipsoid.semi_major_axis&&void 0!==t.ellipsoid.semi_minor_axis&&(e.rf=e.a/(e.a-qN(t.ellipsoid.semi_minor_axis))))}function YN(t,e={}){return t&&"object"==typeof t?"BoundCRS"===t.type?(YN(t.source_crs,e),t.transformation&&(t.transformation.method&&"NTv2"===t.transformation.method.name?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(t=>t.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(null!==r)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":"GeographicCRS"===r?e.projName="longlat":"ProjectedCRS"===r&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,HN(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,HN(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis)if(e.axis=r.axis.map(t=>{const e=t.direction;if("east"===e)return"e";if("north"===e)return"n";if("west"===e)return"w";if("south"===e)return"s";throw new Error(`Unknown axis direction: ${e}`)}).join("")+"u",r.unit){const{units:t,to_meter:n}=WN(r.unit);e.units=t,e.to_meter=n}else if(r.axis[0]&&r.axis[0].unit){const{units:t,to_meter:n}=WN(r.axis[0].unit);e.units=t,e.to_meter=n}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(t=>{const n=t.name.toLowerCase().replace(/\s+/g,"_"),r=t.value;t.unit&&t.unit.conversion_factor?e[n]=r*t.unit.conversion_factor:"degree"===t.unit?e[n]=r*Math.PI/180:e[n]=r});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),"metre"===e.units&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":YN(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name}}),void 0!==e.latitude_of_false_origin&&(e.lat0=e.latitude_of_false_origin),void 0!==e.longitude_of_false_origin&&(e.long0=e.longitude_of_false_origin),void 0!==e.latitude_of_standard_parallel&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),void 0!==e.latitude_of_1st_standard_parallel&&(e.lat1=e.latitude_of_1st_standard_parallel),void 0!==e.latitude_of_2nd_standard_parallel&&(e.lat2=e.latitude_of_2nd_standard_parallel),void 0!==e.latitude_of_projection_centre&&(e.lat0=e.latitude_of_projection_centre),void 0!==e.longitude_of_projection_centre&&(e.longc=e.longitude_of_projection_centre),void 0!==e.easting_at_false_origin&&(e.x0=e.easting_at_false_origin),void 0!==e.northing_at_false_origin&&(e.y0=e.northing_at_false_origin),void 0!==e.latitude_of_natural_origin&&(e.lat0=e.latitude_of_natural_origin),void 0!==e.longitude_of_natural_origin&&(e.long0=e.longitude_of_natural_origin),void 0!==e.longitude_of_origin&&(e.long0=e.longitude_of_origin),void 0!==e.false_easting&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),void 0!==e.false_northing&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),void 0!==e.standard_parallel_1&&(e.lat1=e.standard_parallel_1),void 0!==e.standard_parallel_2&&(e.lat2=e.standard_parallel_2),void 0!==e.scale_factor_at_natural_origin&&(e.k0=e.scale_factor_at_natural_origin),void 0!==e.scale_factor_at_projection_centre&&(e.k0=e.scale_factor_at_projection_centre),void 0!==e.scale_factor_on_pseudo_standard_parallel&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),void 0!==e.azimuth&&(e.alpha=e.azimuth),void 0!==e.azimuth_at_projection_centre&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),UN(e),e):t}var VN=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function $N(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];-1!==VN.indexOf(i)&&XN(t[i]),"object"==typeof t[i]&&$N(t[i])}}function XN(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var a=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?n+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?n+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?n+="e":-1===a[0].indexOf("west")&&("x"!==a[0]&&"lon"!==a[0]||"west"!==a[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=BN(t.rectified_grid_angle));[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",BN],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",BN],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",BN],["lat0","latitude_of_origin",BN],["lat0","standard_parallel_1",BN],["lat1","standard_parallel_1",BN],["lat2","standard_parallel_2",BN],["azimuth","Azimuth"],["alpha","azimuth",BN],["srsCode","name"]].forEach(function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)}),UN(t)}function JN(t){if("object"==typeof t)return YN(t);const e=function(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}(t);var n=FN(t);if("WKT2"===e){return YN(PN(n))}var r=n[0],i={};return jN(n,i),$N(i),i[r]}function ZN(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?ZN[t]=EN(arguments[1]):ZN[t]=JN(arguments[1]):ZN[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){return Array.isArray(t)?ZN.apply(e,t):ZN(t)});if("string"==typeof t){if(t in ZN)return ZN[t]}else"EPSG"in t?ZN["EPSG:"+t.EPSG]=t:"ESRI"in t?ZN["ESRI:"+t.ESRI]=t:"IAU2000"in t?ZN["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ZN);const KN=ZN;var QN=["3857","900913","3785","102113"];const tL=function(t){if(!function(t){return"string"==typeof t}(t))return"projName"in t?t:JN(t);if(function(t){return t in KN}(t))return KN[t];if(function(t){return 0!==t.indexOf("+")&&-1!==t.indexOf("[")||"object"==typeof t&&!("srsCode"in t)}(t)){var e=JN(t);if(function(t){var e=CN(t,"authority");if(e){var n=CN(e,"epsg");return n&&QN.indexOf(n)>-1}}(e))return KN["EPSG:3857"];var n=function(t){var e=CN(t,"extension");if(e)return CN(e,"proj4")}(e);return n?EN(n):e}return function(t){return"+"===t[0]}(t)?EN(t):void 0};function eL(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function nL(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function rL(t){return t<0?-1:1}function iL(t){return Math.abs(t)<=bN?t:t-rL(t)*yN}function aL(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(pN-e))/r}function oL(t,e){for(var n,r,i=.5*t,a=pN-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(a),a+=r=pN-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-a,Math.abs(r)<=1e-10)return a;return-9999}const sL={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=nL(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*_N>90&&i*_N<-90&&r*_N>180&&r*_N<-180)return null;if(Math.abs(Math.abs(i)-pN)<=gN)return null;if(this.sphere)e=this.x0+this.a*this.k0*iL(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(mN+.5*i));else{var a=Math.sin(i),o=aL(this.e,i,a);e=this.x0+this.a*this.k0*iL(r-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=pN-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(n=oL(this.e,a)))return null}return e=iL(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]};function lL(t){return t}var cL=[sL,{init:function(){},forward:lL,inverse:lL,names:["longlat","identity"]}],uL={},hL=[];function fL(t,e){var n=hL.length;return t.names?(hL[n]=t,t.names.forEach(function(t){uL[t.toLowerCase()]=n}),this):(console.log(e),!0)}function dL(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}const pL={start:function(){cL.forEach(fL)},add:fL,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==uL[e]&&hL[uL[e]]||(e=dL(e))in uL&&hL[uL[e]]?hL[uL[e]]:void 0}};const gL={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},vL=gL.WGS84;var _L={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var mL in _L){var yL=_L[mL];yL.datumName&&(_L[yL.datumName]=yL)}const bL=_L;const xL=function(t,e,n,r,i,a,o){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=dN,s.datum_params[4]*=dN,s.datum_params[5]*=dN,s.datum_params[6]=s.datum_params[6]/1e6+1))),o&&(s.datum_type=3,s.grids=o),s.a=n,s.b=r,s.es=i,s.ep2=a,s};var wL={};async function ML(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var a=await e.getImage(i),o=await a.readRasters(),s=[a.getWidth(),a.getHeight()],l=a.getBoundingBox().map(CL),c=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(CL),u=l[0]+(s[0]-1)*c[0],h=l[3]-(s[1]-1)*c[1],f=o[0],d=o[1],p=[];for(let t=s[1]-1;t>=0;t--)for(let e=s[0]-1;e>=0;e--){var g=t*s[0]+e;p.push([-EL(d[g]),EL(f[g])])}n.push({del:c,lim:s,ll:[-u,h],cvs:p})}var v={header:{nSubgrids:r},subgrids:n};return wL[t]=v,v}function SL(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:wL[t]||null,isNull:!1}}function CL(t){return t*Math.PI/180}function EL(t){return t/3600*Math.PI/180}function kL(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function AL(t){return t.map(function(t){return[EL(t.longitudeShift),EL(t.latitudeShift)]})}function TL(t,e,n){return{name:kL(t,e+8,e+16).trim(),parent:kL(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function PL(t,e,n,r,i){var a=e+176,o=16;!1===i&&(o=8);for(var s=[],l=0;l<n.gridNodeCount;l++){var c={latitudeShift:t.getFloat32(a+l*o,r),longitudeShift:t.getFloat32(a+l*o+4,r)};!1!==i&&(c.latitudeAccuracy=t.getFloat32(a+l*o+8,r),c.longitudeAccuracy=t.getFloat32(a+l*o+12,r)),s.push(c)}return s}function FL(t,e){if(!(this instanceof FL))return new FL(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(t){if(t)throw t};var n=tL(t);if("object"==typeof n){var r=FL.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=CN(bL,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=function(t,e,n,r,i){if(!t){var a=CN(gL,r);a||(a=vL),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<gN)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),o=function(t,e,n,r){var i=t*t,a=e*e,o=(i-a)/i,s=0;return r?(i=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):s=Math.sqrt(o),{es:o,e:s,ep2:(i-a)/a}}(a.a,a.b,a.rf,n.R_A),s=function(t){return void 0===t?null:t.split(",").map(SL)}(n.nadgrids),l=n.datum||xL(n.datumCode,n.datum_params,a.a,a.b,o.es,o.ep2,s);eL(this,n),eL(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&"function"==typeof this.init&&this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}FL.projections=pL,FL.projections.start();const NL=FL;function LL(t,e,n){var r,i,a,o,s=t.x,l=t.y,c=t.z?t.z:0;if(l<-pN&&l>-1.001*pN)l=-pN;else if(l>pN&&l<1.001*pN)l=pN;else{if(l<-pN)return{x:-1/0,y:-1/0,z:t.z};if(l>pN)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),o=Math.cos(l),a=i*i,{x:((r=n/Math.sqrt(1-e*a))+c)*o*Math.cos(s),y:(r+c)*o*Math.sin(s),z:(r*(1-e)+c)*i}}function OL(t,e,n,r){var i,a,o,s,l,c,u,h,f,d,p,g,v,_,m,y=1e-12,b=t.x,x=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+x*x),a=Math.sqrt(b*b+x*x+w*w),i/n<y){if(_=0,a/n<y)return m=-r,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(x,b);o=w/a,h=(s=i/a)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),f=o*l,v=0;do{v++,c=e*(u=n/Math.sqrt(1-e*f*f))/(u+(m=i*h+w*f-u*(1-e*f*f))),g=(p=o*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*h-(d=s*(1-c)*l)*f,h=d,f=p}while(g*g>1e-24&&v<30);return{x:_,y:Math.atan(p/Math.abs(d)),z:m}}function DL(t){return 1===t||2===t}function zL(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==IL(t,!1,n))return;r=hN,i=fN}var a=e.a,o=e.b,s=e.es;if(3===e.datum_type&&(a=hN,o=6356752.314,s=fN),i===s&&r===a&&!DL(t.datum_type)&&!DL(e.datum_type))return n;if((n=LL(n,i,r),DL(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+s*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-s*t.x+o*t.y+t.z)+a}}}(n,t.datum_type,t.datum_params)),DL(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-a)/c;return{x:u+l*h-s*f,y:-l*u+h+o*f,z:s*u-o*h+f}}}(n,e.datum_type,e.datum_params)),n=OL(n,s,a,o),3===e.datum_type)&&0!==IL(e,!0,n))return;return n}function IL(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},a=[];t:for(var o=0;o<t.grids.length;o++){var s=t.grids[o];if(a.push(s.name),s.isNull){i=r;break}if(null!==s.grid)for(var l=s.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,d=h.ll[0]-f,p=h.ll[1]-f,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,v=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(p>r.y||d>r.x||v<r.y||g<r.x)&&(i=GL(r,e,h),!isNaN(i.x)))break t}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*_N+" "+r.y*_N+" tried: '"+a+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function GL(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=iL(i.x-Math.PI)+Math.PI;var a=RL(i,n);if(e){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o,s,l=9;do{if(s=RL(a,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(s.x+a.x),y:i.y-(s.y+a.y)},a.x+=o.x,a.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=iL(a.x+n.ll[0]),r.y=a.y+n.ll[1]}else isNaN(a.x)||(r.x=t.x+a.x,r.y=t.y+a.y);return r}function RL(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),a=Math.floor(r.y),o=r.x-1*i,s=r.y-1*a,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return l;if(a<0||a>=e.lim[1])return l;n=a*e.lim[0]+i;var c=e.cvs[n][0],u=e.cvs[n][1];n++;var h=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var d=e.cvs[n][0],p=e.cvs[n][1];n--;var g=e.cvs[n][0],v=e.cvs[n][1],_=o*s,m=o*(1-s),y=(1-o)*(1-s),b=(1-o)*s;return l.x=y*c+m*h+b*g+_*d,l.y=y*u+m*f+b*v+_*p,l}function jL(t,e,n){var r,i,a,o=n.x,s=n.y,l=n.z||0,c={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==n.z)switch(0===a?(r=o,i=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(r=s,i=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(r=l,i="z"),t.axis[a]){case"e":case"n":c[i]=r;break;case"w":case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c}function BL(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function UL(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function WL(t,e,n,r){var i,a=void 0!==(n=Array.isArray(n)?BL(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){UL(t.x),UL(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=WL(t,i=new NL("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=jL(t,!1,n)),"longlat"===t.projName)n={x:n.x*vN,y:n.y*vN,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=zL(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*_N,y:n.y*_N,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?jL(e,!0,n):(n&&!a&&delete n.z,n)}var qL=NL("WGS84");function HL(t,e,n,r){var i,a,o;return Array.isArray(n)?(i=WL(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(a=WL(t,e,n,r),2===(o=Object.keys(n)).length||o.forEach(function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=n[r]}),a)}function YL(t){return t instanceof NL?t:"object"==typeof t&&"oProj"in t?t.oProj:NL(t)}const VL=function(t,e,n){var r,i,a,o=!1;return void 0===e?(i=YL(t),r=qL,o=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,i=YL(t),r=qL,o=!0),r||(r=YL(t)),i||(i=YL(e)),n?HL(r,i,n):(a={forward:function(t,e){return HL(r,i,t,e)},inverse:function(t,e){return HL(i,r,t,e)}},o&&(a.oProj=i),a)};var $L="AJSAJS",XL="AFAFAF",JL=65,ZL=73,KL=79,QL=86,tO=90;const eO={forward:nO,inverse:function(t){var e=oO(cO(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:rO};function nO(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(i=t.easting,a=t.northing,o=t.zoneNumber,s=lO(o),l=Math.floor(i/1e5),c=Math.floor(a/1e5)%20,function(t,e,n){var r=n-1,i=$L.charCodeAt(r),a=XL.charCodeAt(r),o=i+t-1,s=a+e,l=!1;return o>tO&&(o=o-tO+JL-1,l=!0),(o===ZL||i<ZL&&o>ZL||(o>ZL||i<ZL)&&l)&&o++,(o===KL||i<KL&&o>KL||(o>KL||i<KL)&&l)&&++o===ZL&&o++,o>tO&&(o=o-tO+JL-1),s>QL?(s=s-QL+JL-1,l=!0):l=!1,(s===ZL||a<ZL&&s>ZL||(s>ZL||a<ZL)&&l)&&s++,(s===KL||a<KL&&s>KL||(s>KL||a<KL)&&l)&&++s===ZL&&s++,s>QL&&(s=s-QL+JL-1),String.fromCharCode(o)+String.fromCharCode(s)}(l,c,s))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,a,o,s,l,c}(function(t){var e,n,r,i,a,o,s,l,c=t.lat,u=t.lon,h=6378137,f=.00669438,d=.9996,p=iO(c),g=iO(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60);c>=56&&c<64&&u>=3&&u<12&&(l=32);c>=72&&c<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37));s=iO(6*(l-1)-180+3),e=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=e*Math.cos(p)*Math.cos(p),a=Math.cos(p)*(g-s),o=h*((1-f/4-3*f*f/64-5*f*f*f/256)*p-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*p)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*p)-35*f*f*f/3072*Math.sin(6*p));var v=d*n*(a+(1-r+i)*a*a*a/6+(5-18*r+r*r+72*i-58*e)*a*a*a*a*a/120)+5e5,_=d*(o+n*Math.tan(p)*(a*a/2+(5-r+9*i+4*i*i)*a*a*a*a/24+(61-58*r+r*r+600*i-330*e)*a*a*a*a*a*a/720));c<0&&(_+=1e7);return{northing:Math.round(_),easting:Math.round(v),zoneNumber:l,zoneLetter:sO(c)}}({lat:t[1],lon:t[0]}),e)}function rO(t){var e=oO(cO(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function iO(t){return t*(Math.PI/180)}function aO(t){return t/Math.PI*180}function oO(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var a,o,s,l,c,u,h,f,d,p=.9996,g=6378137,v=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,y=e;r<"N"&&(y-=1e7),h=6*(i-1)-180+3,a=.006739496752268451,d=(f=y/p/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*f)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*f)+151*_*_*_/96*Math.sin(6*f),o=g/Math.sqrt(1-v*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),l=a*Math.cos(d)*Math.cos(d),c=.99330562*g/Math.pow(1-v*Math.sin(d)*Math.sin(d),1.5),u=m/(o*p);var b=d-o*Math.tan(d)/c*(u*u/2-(5+3*s+10*l-4*l*l-9*a)*u*u*u*u/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);b=aO(b);var x,w=(u-(1+2*s+l)*u*u*u/6+(5-2*l+28*s-3*l*l+8*a+24*s*s)*u*u*u*u*u/120)/Math.cos(d);if(w=h+aO(w),t.accuracy){var M=oO({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:M.lat,right:M.lon,bottom:b,left:w}}else x={lat:b,lon:w};return x}function sO(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function lO(t){var e=t%6;return 0===e&&(e=6),e}function cO(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,a++}var o=parseInt(i,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(a++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(a,a+=2);for(var l=lO(o),c=function(t,e){var n=$L.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===ZL&&n++,n===KL&&n++,n>tO){if(i)throw"Bad character: "+t;n=JL,i=!0}r+=1e5}return r}(r.charAt(0),l),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=XL.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===ZL&&n++,n===KL&&n++,n>QL){if(i)throw"Bad character: "+t;n=JL,i=!0}r+=1e5}return r}(r.charAt(1),l);u<uO(s);)u+=2e6;var h=n-a;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,g=h/2,v=0,_=0;return g>0&&(f=1e5/Math.pow(10,g),d=t.substring(a,a+g),v=parseFloat(d)*f,p=t.substring(a+g),_=parseFloat(p)*f),{easting:v+c,northing:_+u,zoneLetter:s,zoneNumber:o,accuracy:f}}function uO(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function hO(t,e,n){if(!(this instanceof hO))return new hO(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}hO.fromMGRS=function(t){return new hO(rO(t))},hO.prototype.toMGRS=function(t){return nO([this.x,this.y],t)};const fO=hO;var dO=.046875,pO=.01953125,gO=.01068115234375;function vO(t){var e=[];e[0]=1-t*(.25+t*(dO+t*(pO+t*gO))),e[1]=t*(.75-t*(dO+t*(pO+t*gO)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function _O(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function mO(t,e,n){for(var r=1/(1-e),i=t,a=20;a;--a){var o=Math.sin(i),s=1-e*o*o;if(i-=s=(_O(i,o,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<gN)return i}return i}const yO={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=vO(this.es),this.ml0=_O(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,a=t.y,o=iL(i-this.long0),s=Math.sin(a),l=Math.cos(a);if(this.es){var c=l*o,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),d=Math.abs(l)>gN?Math.tan(a):0,p=Math.pow(d,2),g=Math.pow(p,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var v=_O(a,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-p+h+u/20*(5-18*p+g+14*h-58*p*h+u/42*(61+179*g-g*p-479*p)))))+this.x0,r=this.a*(this.k0*(v-this.ml0+s*o*c/2*(1+u/12*(5-p+9*h+4*f+u/30*(61+g-58*p+270*h-330*p*h+u/56*(1385+543*g-g*p-3111*p))))))+this.y0}else{var _=l*Math.sin(o);if(Math.abs(Math.abs(_)-1)<gN)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=l*Math.cos(o)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>gN)return 93;r=0}else r=Math.acos(r);a<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,a=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=mO(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(n)<pN){var s=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>gN?Math.tan(n):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),f=Math.pow(c,2),d=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var p=a*Math.sqrt(e)/this.k0,g=Math.pow(p,2);r=n-(e*=c)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*u*f+u-4*h-g/30*(61+90*f-252*u*f+45*d+46*u-g/56*(1385+3633*f+4095*d+1574*d*f)))),i=iL(this.long0+p*(1-g/6*(1+2*f+u-g/20*(5+28*f+24*d+8*u*f+6*u-g/42*(61+662*f+1320*d+720*d*f))))/l)}else r=pN*rL(o),i=0;else{var v=Math.exp(a/this.k0),_=.5*(v-1/v),m=this.lat0+o/this.k0,y=Math.cos(m);e=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(_,2))),r=Math.asin(e),o<0&&(r=-r),i=0===_&&0===y?0:iL(Math.atan2(_,y)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function bO(t){var e=Math.exp(t);return e=(e-1/e)/2}function xO(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function wO(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(xO(1,e)+1))),t<0?-e:e}function MO(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return e+n*Math.sin(2*e)}function SO(t,e,n){for(var r,i,a=Math.sin(e),o=Math.cos(e),s=bO(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),c=2*o*l,u=-2*a*s,h=t.length-1,f=t[h],d=0,p=0,g=0;--h>=0;)r=p,i=d,f=c*(p=f)-r-u*(d=g)+t[h],g=u*p-i+c*d;return[(c=a*l)*f-(u=o*s)*g,c*g+u*f]}const CO={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(yO.init.apply(this),this.forward=yO.forward,this.inverse=yO.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=MO(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=iL(t.x-this.long0),n=t.y;n=MO(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),a=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(a*i,xO(r,i*o)),e=wO(Math.tan(e));var s,l,c=SO(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var a=SO(this.utg,2*i,2*r);i+=a[0],r+=a[1],r=Math.atan(bO(r));var o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r);i=Math.atan2(o*c,xO(l,c*s)),e=iL((r=Math.atan2(l,c*s))+this.long0),n=MO(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};const EO={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(iL(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*vN,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,CO.init.apply(this),this.forward=CO.forward,this.inverse=CO.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function kO(t,e){return Math.pow((1-t)/(1+t),e)}const AO={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mN)/(Math.pow(Math.tan(.5*this.lat0+mN),this.C)*kO(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+mN),this.C)*kO(this.e*Math.sin(n),this.ratexp))-pN,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+mN)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*kO(this.e*Math.sin(t.y),-.5*this.e))-pN,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};const TO={init:function(){AO.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=iL(t.x-this.long0),AO.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=xO(t.x,t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),r=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,AO.inverse.apply(this,[t]),t.x=iL(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function PO(t,e,n){return e*=n,Math.tan(.5*(pN+t))*Math.pow((1-e)/(1+e),.5*n)}const FO={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gN&&(this.k0=.5*(1+rL(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=gN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gN&&Math.abs(Math.cos(this.lat_ts))>gN&&(this.k0=.5*this.cons*nL(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/aL(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=nL(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(PO(this.lat0,this.sinlat0,this.e))-pN,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,a,o,s=t.x,l=t.y,c=Math.sin(l),u=Math.cos(l),h=iL(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=gN&&Math.abs(l+this.lat0)<=gN?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),t.x=this.a*e*u*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,t):(n=2*Math.atan(PO(l,c,this.e))-pN,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=gN?(a=aL(this.e,l*this.con,this.con*c),o=2*this.a*this.k0*a/this.cons,t.x=this.x0+o*Math.sin(s-this.long0),t.y=this.y0-this.con*o*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<gN?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,a;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=gN?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),e=Math.abs(this.coslat0)<gN?this.lat0>0?iL(this.long0+Math.atan2(t.x,-1*t.y)):iL(this.long0+Math.atan2(t.x,t.y)):iL(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=gN){if(o<=gN)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*oL(this.e,r),e=this.con*iL(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=gN?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=iL(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*oL(this.e,Math.tan(.5*(pN+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:PO};const NO={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),a=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*s+this.alpha*a/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+o/this.alpha,l=0,c=a,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]};var LO=1e-7;const OO={init:function(){var t,e,n,r,i,a,o,s,l,c,u,h,f,d,p=0,g=0,v=0,_=0,m=0,y=0,b=0;this.no_off=(f=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],d="object"==typeof(h=this).projName?Object.keys(h.projName)[0]:h.projName,"no_uoff"in h||"no_off"in h||-1!==f.indexOf(d)||-1!==f.indexOf(dL(d))),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),x&&(b=this.alpha),w&&(p=this.rectified_grid_angle),x||w)g=this.longc;else if(v=this.long1,m=this.lat1,_=this.long2,y=this.lat2,Math.abs(m-y)<=LO||(t=Math.abs(m))<=LO||Math.abs(t-pN)<=LO||Math.abs(Math.abs(this.lat0)-pN)<=LO||Math.abs(Math.abs(y)-pN)<=LO)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>gN?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(aL(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),x||w?(x?(u=Math.asin(Math.sin(b)/r),w||(p=b)):(u=p,b=Math.asin(r*Math.sin(u))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(u))/this.B):(a=Math.pow(aL(this.e,m,Math.sin(m)),this.B),o=Math.pow(aL(this.e,y,Math.sin(y)),this.B),i=this.E/a,l=(o-a)/(o+a),c=((c=this.E*this.E)-o*a)/(c+o*a),(t=v-_)<-Math.PI?_-=yN:t>Math.PI&&(_+=yN),this.lam0=iL(.5*(v+_)-Math.atan(c*Math.tan(.5*this.B*(v-_))/l)/this.B),u=Math.atan(2*Math.sin(this.B*iL(v-this.lam0))/(i-1/i)),p=b=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(mN-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(mN+i))},forward:function(t){var e,n,r,i,a,o,s,l,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-pN)>gN){if(e=.5*((a=this.E/Math.pow(aL(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/a)),n=.5*(a+o),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<gN)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),s=Math.abs(o)<LO?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(c.x=s,c.y=l):(s-=this.u_0,c.x=l*this.cosrot+s*this.sinrot,c.y=s*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,r,i,a,o,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),a=.5*(r+1/r),s=((o=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(s)-1)<gN)l.x=0,l.y=s<0?-pN:pN;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=oL(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};const DO={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<gN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=nL(this.e,e,n),i=aL(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=nL(this.e,a,o),l=aL(this.e,this.lat2,a),c=Math.abs(Math.abs(this.lat0)-pN)<gN?0:aL(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>gN?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=gN&&(n=rL(n)*(pN-2e-10));var r,i,a=Math.abs(Math.abs(n)-pN);if(a>gN)r=aL(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((a=n*this.ns)<=0)return null;i=0}var o=this.ns*iL(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,r,i,a,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),n=1):(e=-Math.sqrt(o*o+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=oL(this.e,r)))return null}else i=-pN;return a=iL(l/this.ns+this.long0),t.x=a,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};const zO={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y,u=iL(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,a,o,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(s=1),o=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function IO(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function GO(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function RO(t){return.375*t*(1+.25*t*(1+.46875*t))}function jO(t){return.05859375*t*t*(1+.75*t)}function BO(t){return t*t*t*(35/3072)}function UO(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function WO(t){return Math.abs(t)<pN?t:t-rL(t)*Math.PI}function qO(t,e,n,r,i){var a,o;a=t/e;for(var s=0;s<15;s++)if(a+=o=(t-(e*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN}const HO={init:function(){this.sphere||(this.e0=GO(this.es),this.e1=RO(this.es),this.e2=jO(this.es),this.e3=BO(this.es),this.ml0=this.a*IO(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=iL(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=UO(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es);e=s*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=this.a*IO(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*a/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var a=i+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(a))}else{var o=qO(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-pN)<=gN)return t.x=this.long0,t.y=pN,i<0&&(t.y*=-1),t;var s=UO(this.a,this.e,Math.sin(o)),l=s*s*s/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),u=r*this.a/s,h=u*u;e=o-s*Math.tan(o)/l*u*u*(.5-(1+3*c)*u*u/24),n=u*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(o)}return t.x=iL(n+this.long0),t.y=WO(e),t},names:["Cassini","Cassini_Soldner","cass"]};function YO(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var VO=.3333333333333333,$O=.17222222222222222,XO=.10257936507936508,JO=.06388888888888888,ZO=.0664021164021164,KO=.016415012942191543;const QO={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-pN)<gN?this.mode=this.lat0<0?1:2:Math.abs(e)<gN?this.mode=3:this.mode=4,this.es>0)switch(this.qp=YO(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*VO,e=t*t,n[0]+=e*$O,n[1]=e*JO,e*=t,n[0]+=e*XO,n[1]+=e*ZO,n[2]=e*KO,n}(this.es),this.mode){case 2:case 1:this.dd=1;break;case 3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case 4:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=YO(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else 4===this.mode&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,a,o,s,l,c,u,h=t.x,f=t.y;if(h=iL(h-this.long0),this.sphere){if(a=Math.sin(f),u=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*a+this.cosph0*u*r)<=gN)return null;e=(n=Math.sqrt(2/n))*u*Math.sin(h),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<gN)return null;n=mN-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),a=Math.sin(f),o=YO(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=o/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=pN+f,o=this.qp-o;break;case this.S_POLE:c=f-pN,o=this.qp+o}if(Math.abs(c)<gN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*l*r):(c=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,a,o,s,l=t.x/this.a,c=t.y/this.a;if(this.sphere){var u,h=0,f=0;if((n=.5*(u=Math.sqrt(l*l+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=gN?0:Math.asin(c*f/u),l*=f,c=h*u;break;case this.OBLIQ:n=Math.abs(u)<=gN?this.lat0:Math.asin(h*this.sinph0+c*f*this.cosph0/u),l*=f*this.cosph0,c=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:c=-c,n=pN-n;break;case this.S_POLE:n-=pN}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,(o=Math.sqrt(l*l+c*c))<gN)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*o/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+c*i*this.cosb1/o,a=this.qp*s,c=o*this.cosb1*r-c*this.sinb1*i):(s=c*i/o,a=this.qp*s,c=o*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(a=l*l+c*c))return t.x=this.long0,t.y=this.lat0,t;s=1-a/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,c),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=iL(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function tD(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const eD={init:function(){Math.abs(this.lat1+this.lat2)<gN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=nL(this.e3,this.sin_po,this.cos_po),this.qs1=YO(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=nL(this.e3,this.sin_po,this.cos_po),this.qs2=YO(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=YO(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>gN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=YO(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*iL(e-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),a=iL(i/this.ns0+this.long0),t.x=a,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,a,o=tD(.5*e);if(t<gN)return o;for(var s=t*t,l=1;l<=25;l++)if(o+=a=.5*(i=1-(r=t*(n=Math.sin(o)))*r)*i/Math.cos(o)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return o;return null}};const nD={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y;return r=iL(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),(a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=gN?(o=this.x0+1*this.a*n*Math.sin(r)/a,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/a):(o=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),o=tD((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),a=iL(this.long0+a)):(o=this.phic0,a=0),t.x=a,t.y=o,t},names:["gnom"]};const rD={init:function(){this.sphere||(this.k0=nL(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,a=iL(r-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=YO(this.e,Math.sin(i));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=iL(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*pN:pN;for(var r,i,a,o,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),a=Math.cos(s),o=t*i,s+=r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=iL(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};const iD={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=iL(e-this.long0),i=WO(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=iL(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=WO(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]};const aD={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=GO(this.es),this.e1=RO(this.es),this.e2=jO(this.es),this.e3=BO(this.es),this.ml0=this.a*IO(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,a=t.y,o=iL(i-this.long0);if(r=o*Math.sin(a),this.sphere)Math.abs(a)<=gN?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(a),n=this.a*(WO(a-this.lat0)+(1-Math.cos(r))/Math.tan(a)));else if(Math.abs(a)<=gN)e=this.a*o,n=-1*this.ml0;else{var s=UO(this.a,this.e,Math.sin(a))/Math.tan(a);e=s*Math.sin(r),n=this.a*IO(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,a,o,s,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=gN)e=iL(r/this.a+this.long0),n=0;else{var u;for(o=this.lat0+i/this.a,s=r*r/this.a/this.a+o*o,l=o,a=20;a;--a)if(l+=c=-1*(o*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-o)/u-1),Math.abs(c)<=gN){n=l;break}e=iL(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=gN)n=0,e=iL(this.long0+r/this.a);else{var h,f,d,p,g;for(o=(this.ml0+i)/this.a,s=r*r/this.a/this.a+o*o,l=o,a=20;a;--a)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),f=this.a*IO(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(o*(h*(p=f/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*o*p)/(4*h)+(o-p)*(h*d-2/Math.sin(2*l))-d),Math.abs(c)<=gN){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=iL(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","American_Polyconic","poly"]};const oD={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,a=r/dN*1e-5,o=i,s=1,l=0;for(e=1;e<=10;e++)s*=a,l+=this.A[e]*s;var c,u=l,h=o,f=1,d=0,p=0,g=0;for(e=1;e<=6;e++)c=d*u+f*h,f=f*u-d*h,d=c,p=p+this.B_re[e]*f-this.B_im[e]*d,g=g+this.B_im[e]*f+this.B_re[e]*d;return t.x=g*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,a=r-this.x0,o=(i-this.y0)/this.a,s=a/this.a,l=1,c=0,u=0,h=0;for(e=1;e<=6;e++)n=c*o+l*s,l=l*o-c*s,c=n,u=u+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var d,p=u,g=h,v=o,_=s;for(e=2;e<=6;e++)d=g*u+p*h,p=p*u-g*h,g=d,v+=(e-1)*(this.B_re[e]*p-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*p+this.B_re[e]*g);p=1,g=0;var m=this.B_re[1],y=this.B_im[1];for(e=2;e<=6;e++)d=g*u+p*h,p=p*u-g*h,g=d,m+=e*(this.B_re[e]*p-this.B_im[e]*g),y+=e*(this.B_im[e]*p+this.B_re[e]*g);var b=m*m+y*y;u=(v*m+_*y)/b,h=(_*m-v*y)/b}var x=u,w=h,M=1,S=0;for(e=1;e<=9;e++)M*=x,S+=this.D[e]*M;var C=this.lat0+S*dN*1e5,E=this.long0+w;return t.x=E,t.y=C,t},names:["New_Zealand_Map_Grid","nzmg"]};const sD={init:function(){},forward:function(t){var e=t.x,n=t.y,r=iL(e-this.long0),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=iL(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};const lD={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=vO(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=iL(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),o=20;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<gN)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*_O(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=tD((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=tD(Math.sin(e)/this.n)),n=iL(n+this.long0),e=WO(e)):(e=mO(t.y/this.a,this.es,this.en),(r=Math.abs(e))<pN?(r=Math.sin(e),n=iL(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-gN<pN&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};const cD={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=iL(e-this.long0),i=n,a=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<gN)break}i/=2,Math.PI/2-Math.abs(n)<gN&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=iL(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};const uD={init:function(){Math.abs(this.lat1+this.lat2)<gN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=GO(this.es),this.e1=RO(this.es),this.e2=jO(this.es),this.e3=BO(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=nL(this.e,this.sin_phi,this.cos_phi),this.ml1=IO(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<gN?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=nL(this.e,this.sin_phi,this.cos_phi),this.ml2=IO(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=IO(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=IO(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var a=this.ns*iL(n-this.long0),o=this.x0+e*Math.sin(a),s=this.y0+this.rh-e*Math.cos(a);return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;return 0!==n&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=iL(this.long0+a/this.ns),r=WO(this.g-n/this.a),t.x=i,t.y=r,t):(r=qO(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=iL(this.long0+a/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};const hD={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,a=iL(r-this.long0);Math.abs(i)<=gN&&(e=this.x0+this.R*a,n=this.y0);var o=tD(2*Math.abs(i/Math.PI));(Math.abs(a)<=gN||Math.abs(Math.abs(i)-pN)<=gN)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),l=s*s,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),f=h*h,d=h*(2/c-1),p=d*d,g=Math.PI*this.R*(s*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(f-p)))/(p+l);a<0&&(g=-g),e=this.x0+g;var v=l+h;return g=Math.PI*this.R*(d*v-s*Math.sqrt((p+l)*(l+1)-v*v))/(p+l),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,a=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(o=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(s=o-2*i*i+r*r)*s*s/l/l/l-9*o*s/l/l)/27)/(c=(o-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-u*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<gN?this.long0:iL(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]};const fD={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))},forward:function(t){var e,n,r,i,a,o,s,l,c,u,h,f=t.x,d=t.y,p=Math.sin(t.y),g=Math.cos(t.y),v=iL(f-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=gN?(t.x=this.x0+this.a*(pN-d)*Math.sin(v),t.y=this.y0-this.a*(pN-d)*Math.cos(v),t):Math.abs(this.sin_p12+1)<=gN?(t.x=this.x0+this.a*(pN+d)*Math.sin(v),t.y=this.y0+this.a*(pN+d)*Math.cos(v),t):(c=this.sin_p12*p+this.cos_p12*g*Math.cos(v),l=(s=Math.acos(c))?s/Math.sin(s):1,t.x=this.x0+this.a*l*g*Math.sin(v),t.y=this.y0+this.a*l*(this.cos_p12*p-this.sin_p12*g*Math.cos(v)),t):(e=GO(this.es),n=RO(this.es),r=jO(this.es),i=BO(this.es),Math.abs(this.sin_p12-1)<=gN?(a=this.a*IO(e,n,r,i,pN),o=this.a*IO(e,n,r,i,d),t.x=this.x0+(a-o)*Math.sin(v),t.y=this.y0-(a-o)*Math.cos(v),t):Math.abs(this.sin_p12+1)<=gN?(a=this.a*IO(e,n,r,i,pN),o=this.a*IO(e,n,r,i,d),t.x=this.x0+(a+o)*Math.sin(v),t.y=this.y0+(a+o)*Math.cos(v),t):Math.abs(f)<gN&&Math.abs(d-this.lat0)<gN?(t.x=t.y=0,t):(u=function(t,e,n,r,i,a){const o=r-e,s=Math.atan((1-a)*Math.tan(t)),l=Math.atan((1-a)*Math.tan(n)),c=Math.sin(s),u=Math.cos(s),h=Math.sin(l),f=Math.cos(l);let d,p,g,v,_,m,y,b,x,w,M,S,C,E,k,A=o,T=100;do{if(p=Math.sin(A),g=Math.cos(A),v=Math.sqrt(f*p*(f*p)+(u*h-c*f*g)*(u*h-c*f*g)),0===v)return{azi1:0,s12:0};_=c*h+u*f*g,m=Math.atan2(v,_),y=u*f*p/v,b=1-y*y,x=0!==b?_-2*c*h/b:0,w=a/16*b*(4+a*(4-3*b)),d=A,A=o+(1-w)*a*y*(m+w*v*(x+w*_*(2*x*x-1)))}while(Math.abs(A-d)>1e-12&&--T>0);return 0===T?{azi1:NaN,s12:NaN}:(M=b*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),S=1+M/16384*(4096+M*(M*(320-175*M)-768)),C=M/1024*(256+M*(M*(74-47*M)-128)),E=C*v*(x+C/4*(_*(2*x*x-1)-C/6*x*(4*v*v-3)*(4*x*x-3))),k=i*(1-a)*S*(m-E),{azi1:Math.atan2(f*p,u*h-c*f*g),s12:k})}(this.lat0,this.long0,d,f,this.a,this.f),h=u.azi1,t.x=u.s12*Math.sin(h),t.y=u.s12*Math.cos(h),t))},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,f,d,p,g;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*pN*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=gN?o=this.lat0:(o=tD(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-pN,a=Math.abs(s)<=gN?this.lat0>=0?iL(this.long0+Math.atan2(t.x,-t.y)):iL(this.long0-Math.atan2(-t.x,t.y)):iL(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=a,t.y=o,t}return l=GO(this.es),c=RO(this.es),u=jO(this.es),h=BO(this.es),Math.abs(this.sin_p12-1)<=gN?(o=qO(((f=this.a*IO(l,c,u,h,pN))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,c,u,h),a=iL(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=o,t):Math.abs(this.sin_p12+1)<=gN?(f=this.a*IO(l,c,u,h,pN),o=qO(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,l,c,u,h),a=iL(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=o,t):(d=Math.atan2(t.x,t.y),p=Math.sqrt(t.x*t.x+t.y*t.y),g=function(t,e,n,r,i,a){const o=Math.atan((1-a)*Math.tan(t)),s=Math.sin(o),l=Math.cos(o),c=Math.sin(n),u=Math.cos(n),h=Math.atan2(s,l*u),f=l*c,d=1-f*f,p=d*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),g=1+p/16384*(4096+p*(p*(320-175*p)-768)),v=p/1024*(256+p*(p*(74-47*p)-128));let _,m,y,b,x,w=r/(i*(1-a)*g),M=100;do{m=Math.cos(2*h+w),y=Math.sin(w),b=Math.cos(w),x=v*y*(m+v/4*(b*(2*m*m-1)-v/6*m*(4*y*y-3)*(4*m*m-3))),_=w,w=r/(i*(1-a)*g)+x}while(Math.abs(w-_)>1e-12&&--M>0);if(0===M)return{lat2:NaN,lon2:NaN};const S=s*y-l*b*u,C=a/16*d*(4+a*(4-3*d));return{lat2:Math.atan2(s*b+l*y*u,(1-a)*Math.sqrt(f*f+S*S)),lon2:e+(Math.atan2(y*c,l*b-s*y*u)-(1-C)*a*f*(w+C*y*(m+C*b*(2*m*m-1))))}}(this.lat0,this.long0,d,p,this.a,this.f),t.x=g.lon2,t.y=g.lat2,t)},names:["Azimuthal_Equidistant","aeqd"]};const dD={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y;return r=iL(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=gN)&&(o=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o,s;return t.x-=this.x0,t.y-=this.y0,n=tD((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=gN?(s=this.lat0,t.x=o,t.y=s,t):(s=tD(i*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-pN,Math.abs(a)<=gN?(o=this.lat0>=0?iL(this.long0+Math.atan2(t.x,-t.y)):iL(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=iL(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=o,t.y=s,t))},names:["ortho"]};var pD=1,gD=2,vD=3,_D=4,mD=5,yD=6,bD=1,xD=2,wD=3,MD=4;function SD(t,e,n,r){var i;return t<gN?(r.value=bD,i=0):(i=Math.atan2(e,n),Math.abs(i)<=mN?r.value=bD:i>mN&&i<=pN+mN?(r.value=xD,i-=pN):i>pN+mN||i<=-(pN+mN)?(r.value=wD,i=i>=0?i-bN:i+bN):(r.value=MD,i+=pN)),i}function CD(t,e){var n=t+e;return n<-bN?n+=yN:n>+bN&&(n-=yN),n}const ED={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=pN-mN/2?this.face=mD:this.lat0<=-(pN-mN/2)?this.face=yD:Math.abs(this.long0)<=mN?this.face=pD:Math.abs(this.long0)<=pN+mN?this.face=this.long0>0?gD:_D:this.face=vD,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,a,o,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===mD)i=pN-e,n>=mN&&n<=pN+mN?(l.value=bD,r=n-pN):n>pN+mN||n<=-(pN+mN)?(l.value=xD,r=n>0?n-bN:n+bN):n>-(pN+mN)&&n<=-mN?(l.value=wD,r=n+pN):(l.value=MD,r=n);else if(this.face===yD)i=pN+e,n>=mN&&n<=pN+mN?(l.value=bD,r=-n+pN):n<mN&&n>=-mN?(l.value=xD,r=-n):n<-mN&&n>=-(pN+mN)?(l.value=wD,r=-n-pN):(l.value=MD,r=n>0?-n+bN:-n-bN);else{var c,u,h,f,d,p;this.face===gD?n=CD(n,+pN):this.face===vD?n=CD(n,+bN):this.face===_D&&(n=CD(n,-pN)),f=Math.sin(e),d=Math.cos(e),p=Math.sin(n),c=d*Math.cos(n),u=d*p,h=f,this.face===pD?r=SD(i=Math.acos(c),h,u,l):this.face===gD?r=SD(i=Math.acos(u),h,-c,l):this.face===vD?r=SD(i=Math.acos(-c),h,-u,l):this.face===_D?r=SD(i=Math.acos(-u),h,c,l):(i=r=0,l.value=bD)}return o=Math.atan(12/bN*(r+Math.acos(Math.sin(r)*Math.cos(mN))-pN)),a=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===xD?o+=pN:l.value===wD?o+=bN:l.value===MD&&(o+=1.5*bN),s.x=a*Math.cos(o),s.y=a*Math.sin(o),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=bD:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=xD,e-=pN):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=wD,e=e<0?e+bN:e-bN):(p.value=MD,e+=pN),c=bN/12*Math.tan(e),a=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(a),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?s=-1:s>1&&(s=1),this.face===mD)l=Math.acos(s),d.phi=pN-l,p.value===bD?d.lam=o+pN:p.value===xD?d.lam=o<0?o+bN:o-bN:p.value===wD?d.lam=o-pN:d.lam=o;else if(this.face===yD)l=Math.acos(s),d.phi=l-pN,p.value===bD?d.lam=-o+pN:p.value===xD?d.lam=-o:p.value===wD?d.lam=-o-pN:d.lam=o<0?-o-bN:-o+bN;else{var g,v,_;c=(g=s)*g,v=(c+=(_=c>=1?0:Math.sqrt(1-c)*Math.sin(o))*_)>=1?0:Math.sqrt(1-c),p.value===xD?(c=v,v=-_,_=c):p.value===wD?(v=-v,_=-_):p.value===MD&&(c=v,v=_,_=-c),this.face===gD?(c=g,g=-v,v=c):this.face===vD?(g=-g,v=-v):this.face===_D&&(c=g,g=v,v=-c),d.phi=Math.acos(-_)-pN,d.lam=Math.atan2(v,g),this.face===gD?d.lam=CD(d.lam,-pN):this.face===vD?d.lam=CD(d.lam,-bN):this.face===_D&&(d.lam=CD(d.lam,+pN))}return 0!==this.es&&(u=d.phi<0?1:0,h=Math.tan(d.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),u&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var kD=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],AD=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],TD=.8487,PD=1.3523,FD=_N/5,ND=1/FD,LD=18,OD=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const DD={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=iL(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*FD);r<0?r=0:r>=LD&&(r=17);var i={x:OD(kD[r],n=_N*(n-ND*r))*e,y:OD(AD[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*TD+this.x0,i.y=i.y*this.a*PD+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*TD),y:Math.abs(t.y-this.y0)/(this.a*PD)};if(e.y>=1)e.x/=kD[18][0],e.y=t.y<0?-pN:pN;else{var n=Math.floor(e.y*LD);for(n<0?n=0:n>=LD&&(n=17);;)if(AD[n][0]>e.y)--n;else{if(!(AD[n+1][0]<=e.y))break;++n}var r=AD[n],i=5*(e.y-r[0])/(AD[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var a=t(i);if(i-=a,Math.abs(a)<n)break}return i}(function(t){return(OD(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)},i,gN,100),e.x/=OD(kD[n],i),e.y=(5*n+i)*vN,t.y<0&&(e.y=-e.y)}return e.x=iL(e.x+this.long0),e},names:["Robinson","robin"]};const zD={init:function(){this.name="geocent"},forward:function(t){return LL(t,this.es,this.a)},inverse:function(t){return OL(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ID=0,GD=1,RD=2,jD=3,BD={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const UD={init:function(){if(Object.keys(BD).forEach(function(t){if(void 0===this[t])this[t]=BD[t].def;else{if(BD[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);BD[t].num&&(this[t]=parseFloat(this[t]))}BD[t].degrees&&(this[t]=this[t]*vN)}.bind(this)),Math.abs(Math.abs(this.lat0)-pN)<gN?this.mode=this.lat0<0?GD:ID:Math.abs(this.lat0)<gN?this.mode=RD:(this.mode=jD,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,a=Math.sin(t.y),o=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case jD:n=this.sinph0*a+this.cosph0*o*s;break;case RD:n=o*s;break;case GD:n=-a;break;case ID:n=a}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case jD:n*=this.cosph0*a-this.sinph0*o*s;break;case RD:n*=a;break;case ID:n*=-o*s;break;case GD:n*=o*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var a=xO(t.x,t.y);if(Math.abs(a)<gN)i.x=0,i.y=t.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case jD:i.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/a),t.y=(o-this.sinph0*Math.sin(i.y))*a,t.x*=s*this.cosph0;break;case RD:i.y=Math.asin(t.y*s/a),t.y=o*a,t.x*=s;break;case ID:i.y=Math.asin(o),t.y=-t.y;break;case GD:i.y=-Math.asin(o)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};const WD={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,a=t.x,o=t.y;if(a-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var s=this.radius_p/xO(this.radius_p*Math.cos(o),Math.sin(o));if(n=s*Math.cos(a)*Math.cos(o),r=s*Math.sin(a)*Math.cos(o),i=s*Math.sin(o),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/xO(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/xO(r,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(a)*e,r=Math.sin(a)*e,i=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/xO(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/xO(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,a=-1,o=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*xO(1,s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*xO(1,o));var l=s/this.radius_p;if(e=o*o+l*l+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+s*s+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var qD=1.340264,HD=-.081106,YD=893e-6,VD=.003796,$D=Math.sqrt(3)/2;const XD={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=iL(t.x-this.long0),n=t.y,r=Math.asin($D*Math.sin(n)),i=r*r,a=i*i*i;return t.x=e*Math.cos(r)/($D*(qD+3*HD*i+a*(7*YD+.034164*i))),t.y=r*(qD+HD*i+a*(YD+VD*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,n,r,i,a=t.y;for(i=0;i<12&&(a-=r=(a*(qD+HD*(e=a*a)+(n=e*e*e)*(YD+VD*e))-t.y)/(qD+3*HD*e+n*(7*YD+.034164*e)),!(Math.abs(r)<1e-9));++i);return n=(e=a*a)*e*e,t.x=$D*t.x*(qD+3*HD*e+n*(7*YD+.034164*e))/Math.cos(a),t.y=Math.asin(Math.sin(a)/$D),t.x=iL(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};var JD=1e-10;function ZD(t){var e,n,r,i=iL(t.x-(this.long0||0)),a=t.y;return e=this.am1+this.m1-_O(a,n=Math.sin(a),r=Math.cos(a),this.en),n=r*i/(e*Math.sqrt(1-this.es*n*n)),t.x=e*Math.sin(n),t.y=this.am1-e*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function KD(t){var e,n,r,i;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=xO(t.x,t.y=this.am1-t.y),i=mO(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<pN)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else{if(!(Math.abs(e-pN)<=JD))throw new Error;r=0}return t.x=iL(r+(this.long0||0)),t.y=WO(i),t}function QD(t){var e,n,r=iL(t.x-(this.long0||0)),i=t.y;return n=this.cphi1+this.phi1-i,Math.abs(n)>JD?(t.x=n*Math.sin(e=r*Math.cos(i)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function tz(t){var e,n;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var r=xO(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>pN)throw new Error;return e=Math.abs(Math.abs(n)-pN)<=JD?0:r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=iL(e+(this.long0||0)),t.y=WO(n),t}const ez={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<JD)throw new Error;this.es?(this.en=vO(this.es),this.m1=_O(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=KD,this.forward=ZD):(Math.abs(this.phi1)+JD>=pN?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=tz,this.forward=QD)},names:["bonne","Bonne (Werner lat_1=90)"]};const nz=Object.assign(VL,{defaultDatum:"WGS84",Proj:NL,WGS84:new NL("WGS84"),Point:fO,toPoint:BL,defs:KN,nadgrid:function(t,e,n){return e instanceof ArrayBuffer?function(t,e,n){var r=!0;void 0!==n&&!1===n.includeErrorFields&&(r=!1);var i=new DataView(e),a=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(i),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:kL(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,a),s=function(t,e,n,r){for(var i=176,a=[],o=0;o<e.nSubgrids;o++){var s=TL(t,i,n),l=PL(t,i,s,n,r),c=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),u=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);a.push({ll:[EL(s.lowerLongitude),EL(s.lowerLatitude)],del:[EL(s.longitudeInterval),EL(s.latitudeInterval)],lim:[c,u],count:s.gridNodeCount,cvs:AL(l)});var h=16;!1===r&&(h=8),i+=176+s.gridNodeCount*h}return a}(i,o,a,r),l={header:o,subgrids:s};return wL[t]=l,l}(t,e,n):{ready:ML(t,e)}},transform:WL,mgrs:eO,version:"__VERSION__"});!function(t){t.Proj.projections.add(yO),t.Proj.projections.add(CO),t.Proj.projections.add(EO),t.Proj.projections.add(TO),t.Proj.projections.add(FO),t.Proj.projections.add(NO),t.Proj.projections.add(OO),t.Proj.projections.add(DO),t.Proj.projections.add(zO),t.Proj.projections.add(HO),t.Proj.projections.add(QO),t.Proj.projections.add(eD),t.Proj.projections.add(nD),t.Proj.projections.add(rD),t.Proj.projections.add(iD),t.Proj.projections.add(aD),t.Proj.projections.add(oD),t.Proj.projections.add(sD),t.Proj.projections.add(lD),t.Proj.projections.add(cD),t.Proj.projections.add(uD),t.Proj.projections.add(hD),t.Proj.projections.add(fD),t.Proj.projections.add(dD),t.Proj.projections.add(ED),t.Proj.projections.add(DD),t.Proj.projections.add(zD),t.Proj.projections.add(UD),t.Proj.projections.add(WD),t.Proj.projections.add(XD),t.Proj.projections.add(ez)}(nz);const rz=nz;var iz=function(t){var e;if(t.svg_){if(t.minimap_.size||(t.minimap_.size=150),t.Geometries.geoJSONs.worldrg)cz(t);else Ru(window.location.hostname.includes("ec.europa.eu")?"https://ec.europa.eu/assets/estat/E/E4/gisco/eurostat-map/world-topo-2024-60M-4326.json":"https://raw.githubusercontent.com/eurostat/eurostat-map/master/src/assets/topojson/world-topo-60M.json").then(function(e){var n=NF(e,e.objects.CNTR_RG_60M_2024_4326).features;t.Geometries.geoJSONs.worldrg=n,cz(t)}).catch(function(t){return console.error("Failed to load world-topo-60M.json",t)});window.addEventListener("estatmap:zoomed-"+t.svgId_,function(t,e){var n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){return t.apply(void 0,i)},e)}}(function(t){return az(t.detail)},(null===(e=t.minimap_)||void 0===e?void 0:e.debounce)||3))}},az=function(t){sz(t),lz(t),t._minimapGlobe.selectAll("path").attr("d",t._minimapPath)};function oz(t){return(t+540)%360-180}function sz(t){var e=function(t){var e,n,r=null===(e=t.position_)||void 0===e?void 0:e.x,i=null===(n=t.position_)||void 0===n?void 0:n.y;if(!Number.isFinite(r)||!Number.isFinite(i))return null;if("3035"===t.proj_){var a=b(rz("EPSG:3035","EPSG:4326",[r,i]),2);r=a[0],i=a[1]}else if("54030"===t.proj_){var o=b(rz("EPSG:54030","EPSG:4326",[r,i]),2);r=o[0],i=o[1]}return[r,i]}(t);if(e){var n=b(e,2),r=n[0],i=n[1];t._minimapProjection.rotate([-oz(r),-i,0])}}function lz(t){var e,n=t._minimapBaseScale||t._minimapProjection.scale(),r=t._lastZoomK||(null===(e=t.__lastTransform)||void 0===e?void 0:e.k)||1,i=n*Math.pow(r,.65)*.9,a=.35*n,o=5*n;t._minimapProjection.scale(Math.max(a,Math.min(o,i)))}var cz=function(t){try{var e=t.minimap_||{},n=e.x||80,r=e.y||80,i=e.color||"#929292ff",a=e.size||160,o=t.Geometries.geoJSONs.worldrg;if(t._minimapContainer=t.svg_.append("g").attr("id","em-minimap").attr("transform","translate(".concat(n,",").concat(r,")")),t._minimapContainer.append("circle").attr("class","em-minimap-inner-circle").attr("r",a/2).attr("cx",0).attr("cy",0).attr("fill","white").attr("filter","url(#em-minimap-inner-shadow)"),function(t){var e,n=(null===(e=t.minimap_)||void 0===e?void 0:e.z)||160;t._minimapProjection=gv().scale(n).translate([0,0]),t._minimapPath=yg().projection(t._minimapProjection),t._minimapBaseScale=t._minimapProjection.scale(),sz(t),lz(t)}(t),function(t,e){var n=t._minimapContainer.append("defs");(function(t){var e=t.append("filter").attr("id","em-minimap-inner-shadow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").attr("color-interpolation-filters","sRGB");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3).attr("result","blur"),e.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",0).attr("result","off"),e.append("feComposite").attr("in","SourceAlpha").attr("in2","off").attr("operator","arithmetic").attr("k2","1").attr("k3","-1").attr("result","inner"),e.append("feFlood").attr("flood-color","#000").attr("flood-opacity",.4),e.append("feComposite").attr("in2","inner").attr("operator","in").attr("result","shadow"),e.append("feBlend").attr("in","SourceGraphic").attr("in2","shadow").attr("mode","multiply")})(n),n.append("clipPath").attr("id","minimap-clip").append("circle").attr("r",e/2-3).attr("cx",0).attr("cy",0)}(t,a),t._minimapGlobe=t._minimapContainer.append("g").attr("class","em-minimap-globe").attr("clip-path","url(#minimap-clip)"),t._minimapGlobe.selectAll("path.country").data(o).enter().append("path").attr("d",t._minimapPath).attr("fill","#e0e0e0"),e.highlightIds&&Array.isArray(e.highlightIds)){var s=o.filter(function(t){return e.highlightIds.includes(t.id)});s.length&&s.forEach(function(e){t._minimapGlobe.append("path").datum(e).attr("d",t._minimapPath).attr("fill",i).attr("stroke",i).attr("stroke-width",.5)})}t._minimapContainer.append("circle").attr("class","em-minimap-outer-circle").attr("r",a/2).attr("cx",0).attr("cy",0).attr("fill","none").attr("stroke",i).attr("stroke-width",3),az(t)}catch(t){console.error("Error drawing minimap:",t)}};var uz=function(t,e){var n=t.transform,r=(e.width_/2-n.x)/n.k,i=(e.height_/2-n.y)/n.k,a=b(e._projection.invert([r,i]),2),o=a[0],s=a[1];e.position_.x=o,e.position_.y=s,window.dispatchEvent(new CustomEvent("estatmap:zoomed-"+e.svgId_,{detail:e})),"function"==typeof e.onZoom_&&e.onZoom_(t,e)},hz=function(t,e,n){var r,i,a=t.transform,o=(n.width_/2-a.x)/a.k,s=(n.height_/2-a.y)/a.k,l=b(n._projection.invert([o,s]),2),c=l[0],u=l[1];if(n.__programmaticZoom){var h=n.__programmaticZoom;n.position_.x=h.x,n.position_.y=h.y,n.position_.z=h.z,delete n.__programmaticZoom}else n.position_.x=c,n.position_.y=u,n.position_.z=n.__baseZ/a.k;n._lastZoomK=a.k,pz(a,n),null!==(r=n.labels_)&&void 0!==r&&r.values&&dz(a,n),null!==(i=n.labels_)&&void 0!==i&&i.backgrounds&&fz(a,n),window.dispatchEvent(new CustomEvent("estatmap:zoomed-"+n.svgId_,{detail:n})),"function"==typeof n.onZoom_&&n.onZoom_(t,n)},fz=function(t,e){var n=e.svg_.select("#em-zoom-group-"+e.svgId_).selectAll(".em-label-background"),r=t.k,i=[];n.each(function(){var t=Dt(this),e=parseFloat(t.attr("data-width"))||parseFloat(t.attr("width")),n=parseFloat(t.attr("data-height"))||parseFloat(t.attr("height")),a=parseFloat(t.attr("data-x"))||parseFloat(t.attr("x")),o=parseFloat(t.attr("data-y"))||parseFloat(t.attr("y"));if(e>0&&n>0&&!isNaN(a)&&!isNaN(o)){t.attr("data-width")||(t.attr("data-width",e),t.attr("data-height",n),t.attr("data-x",a),t.attr("data-y",o));var s=e*(1/r),l=n*(1/r),c=a*(1/r),u=o*(1/r);i.push({element:t,targetWidth:s,targetHeight:l,targetX:c,targetY:u})}}),i.forEach(function(t){var e=t.element,n=t.targetWidth,r=t.targetHeight,i=t.targetX,a=t.targetY;e.attr("width",n).attr("height",r).attr("x",i).attr("y",a)})},dz=function(t,e){var n=e.svg_.select("#em-zoom-group-"+e.svgId_).select("#em-labels").selectAll("*"),r=t.k,i=[];n.each(function(){var t=Dt(this),e=window.getComputedStyle(this),n=t.attr("font-size"),a=e.fontSize,o=n||a;if(o&&parseFloat(o)>0){var s=parseFloat(t.attr("data-fs"))||parseFloat(n)||parseFloat(a);t.attr("data-fs")||t.attr("data-fs",s);var l=s/r;i.push({element:this,targetFontSize:l})}}),i.forEach(function(t){var e=t.element,n=t.targetFontSize;e.style.setProperty("font-size","".concat(n,"px"),"important")})},pz=function(t,e){var n=e.svg_.select("#em-zoom-group-"+e.svgId_).selectAll("*"),r=t.k,i=[];n.each(function(){var t=Dt(this),e=window.getComputedStyle(this),n=t.attr("stroke-width"),a=e.strokeWidth,o=n||a;if(o&&parseFloat(o)>0){var s=parseFloat(t.attr("data-sw"))||parseFloat(n)||parseFloat(a);t.attr("data-sw")||t.attr("data-sw",s);var l=s/r;i.push({element:this,targetStrokeWidth:l})}}),i.forEach(function(t){var e=t.element,n=t.targetStrokeWidth;e.style.setProperty("stroke-width","".concat(n,"px"),"important")})};var gz=function(t,e,n){switch(t.proj_){case"3035":return rz("EPSG:4326","EPSG:3035",[e,n]);case"54030":return rz("EPSG:4326","EPSG:54030",[e,n]);default:return[e,n]}};function vz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vz(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function mz(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return yz(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yz(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var bz=window.location.hostname.includes("ec.europa.eu")?"https://ec.europa.eu/assets/estat/E/E4/gisco/pub/euronym/v3/UTF_LATIN/50/EUR.csv":"https://raw.githubusercontent.com/eurostat/euronym/main/pub/v3/UTF_LATIN/50/EUR.csv";function xz(t){return wz.apply(this,arguments)}function wz(){return wz=Fr(Lr().mark(function e(n){var r,i,a,o=arguments;return Lr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:bz,e.next=1,Du(r,t.autoType);case 1:return i=e.sent,a=i,n.placenamesFilter_&&(a=n.placenamesFilter_(i)),n._placenameLabels=a,e.abrupt("return",a);case 2:case"end":return e.stop()}},e)})),wz.apply(this,arguments)}function Mz(){return Mz=Fr(Lr().mark(function t(e){return Lr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._placenameLabels){t.next=1;break}return t.next=1,xz(e);case 1:Sz(e),window.addEventListener("estatmap:zoomend-"+e.svgId_,function(t){Ez(t.detail,t.detail.__lastTransform)});case 2:case"end":return t.stop()}},t)})),Mz.apply(this,arguments)}function Sz(t){var e,n=t.svg_,r=(null===(e=t.__lastTransform)||void 0===e?void 0:e.k)||1,i=Cz(t);console.log("Filtered ".concat(i.length," placenames for zoom level ").concat(r)),n.select("#em-placenames").remove();var a=n.select("#em-zoom-group-"+t.svgId_).append("g").attr("id","em-placenames").attr("class","em-placenames").attr("pointer-events","none");a.selectAll("text").data(i).join("text").attr("x",function(t){return t.screenX}).attr("y",function(t){return t.screenY}).text(function(t){return t.name}).attr("class","em-placename").attr("font-size",function(t){return"".concat(13*t.sizeFactor/r,"px")}).attr("font-weight",function(t){return t.sizeFactor>1?"bold":"normal"}).attr("dy","-0.35em").clone(!0).lower().attr("class","em-placename-halo").attr("stroke-width",3/r),t.placenameGroup_=a}var Cz=function(t){if(!t._placenameLabels)return[];var e,n=t._projection,r=t.width_,i=t.height_,a=t.position_.z,o=t.__lastTransform||{k:1,x:0,y:0},s=o.invertX(0)-30,l=o.invertY(0)-30,c=o.invertX(r)+30,u=o.invertY(i)+30,h=[],f=mz(t._placenameLabels);try{for(f.s();!(e=f.n()).done;){var d=e.value,p=+d.rs,g=+d.r1;if(p&&!(a>p)){var v=+d.lon,_=+d.lat,m=b(gz(t,v,_),2),y=b(n([m[0],m[1]]),2),x=y[0],w=y[1];if(!(x<s||x>c||w<l||w>u)&&(h.push(_z(_z({},d),{},{screenX:x,screenY:w,sizeFactor:a>g?1:1.1})),h.length>=500))break}}}catch(t){f.e(t)}finally{f.f()}return console.log("After filtering, ".concat(h.length," placenames remain.")),h};function Ez(t,e){t._placenameLabels&&t._projection&&Sz(t)}function kz(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Az(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Az(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Az(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Tz=function(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.log(10)));return 5*e<=t?[5*e,5]:2*e<=t?[2*e,2]:[e,1]},Pz=function(t){return t<.01?1e3*t+"mm":t<1?100*t+"cm":t<1e3?1*t+"m":t/1e3};function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}$n({decimal:".",thousands:" ",grouping:[3],currency:["",""]}),rz.defs("EPSG:3035","+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"),rz.defs("EPSG:54030","+proj=robin +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs");var Nz=function(t,e,n){var r={};r._mapType=n,r.updateValuesLabels=CF,r.svgId_="map",r.svg_=void 0,r.width_=Math.min(795,window.innerWidth),r.height_=0,r.containerId_=void 0,r.gridCartogram_=!1,r.gridCartogramShape_="square",r.gridCartogramMargins_={top:80,right:50,bottom:80,left:150},r.gridCartogramCellPadding_=4,r.gridCartogramPositions_=void 0,r.nutsLevel_=3,r.nutsYear_=2024,r.geo_="EUR",r.proj_="3035",r.projectionFunction_=void 0,r.filterGeometriesFunction_=void 0,r.scale_="20M",r.position_={x:void 0,y:void 0,z:void 0},r.placenames_=!1,r.placenamesFilter_=void 0,r.zoomExtent_=void 0,r.translateExtent_=void 0,r.lockPanUntilZoom_=!0,r.onZoomEnd_=void 0,r.onZoom_=void 0,r.onRegionMouseOver_=void 0,r.onRegionMouseMove_=void 0,r.onRegionMouseOut_=void 0,r.onRegionClick_=void 0,r.geometries_=void 0,r.processCentroids_=void 0,r.dorling_=!1,r.animateDorling_=!0,r.dorlingStrength_={x:1,y:1},r.dorlingIterations_=1,r.onDorlingProgress_=void 0,r.dorlingWorker_=!1,r.dorlingWorkerD3URL_=void 0,r.header_=!1,r.footer_=!1,r.footerPadding_=void 0,r.headerPadding_=void 0,r.title_="",r.titlePosition_=void 0,r.subtitle_="",r.subtitlePosition_=void 0,r.showScalebar_=!1,r.scalebarPosition_=[],r.scalebarUnits_=" km",r.scalebarTextOffset_=[0,12],r.scalebarMaxWidth_=150,r.scalebarHeight_=90,r.scalebarStrokeWidth_=1,r.scalebarSegmentHeight_=6,r.scalebarTickHeight_=8,r.stamp_=void 0,r.minimap_=void 0,r.zoomButtons_=!1,r.insetsButton_=!1,r.tooltip_={fontSize:"14px",transitionDuration:200,xOffset:0,yOffset:0,textFunction:null,showFlags:!1,omitRegions:["RU","BY","IL","PS"]},r.hoverColor_="red",r.drawCoastalMargin_=!1,r.coastalMarginStdDev_=3,r.drawGraticule_=!1,r.backgroundMap_=!0,r.labels_=void 0,r.annotations_=void 0,r.annotationsAdded=!1,r.patternFill_=void 0,r.showSourceLink_=!0,r.footnote_="Administrative boundaries: EuroGeographics OpenStreetMap",r.footnoteTooltipText_='<div class="em-footnote-tooltip">The designations employed and the presentation of material on this map do not imply the expression of any opinion whatsoever on the part of the European Union concerning the legal status of any country, territory, city or area or of its authorities, or concerning the delimitation of its frontiers or boundaries. Kosovo*: This designation is without prejudice to positions on status, and is in line with UNSCR 1244/1999 and the ICJ Opinion on the Kosovo declaration of independence.</div>',r.footnoteWrap_=!1,r.footnotePosition_=void 0,r.showEstatLogo_=!1,r.showEstatRibbon_=!1,r.logoPosition_=void 0,r.ribbonPosition_=void 0,r.ribbonWidth_=void 0,r.ribbonHeight_=void 0,r.logoWidth_=void 0,r.logoHeight_=void 0,r.nuts2jsonBaseURL_=window.location.hostname.includes("ec.europa.eu")?"https://ec.europa.eu/assets/estat/E/E4/gisco/pub/nuts2json/v2":"https://raw.githubusercontent.com/eurostat/Nuts2json/master/pub/v2",r.noDataFillStyle_="#bcbcbc",r.insets_=[],r.insetTemplates_={},r.insetBoxPosition_=void 0,r.insetBoxPadding_=5,r.insetBoxWidth_=210,r.insetZoomExtent_=null,r.insetScale_="03M";var i=function(t){r[t.substring(0,t.length-1)]=function(e){return arguments.length?(r[t]=e,r):r[t]}};for(var a in r)i(a);!function(t){t.showZoomButtons=function(e){return console.warn("showZoomButtons() is now DEPRECATED, please use zoomButtons() instead"),t.zoomButtons_=e,t},t.showInsetsButton=function(e){return console.warn("showInsetsButton() is now DEPRECATED, please use insetsButton() instead"),t.insetsButton_=e,t},t.seaFillStyle=function(e){return console.warn("seaFillStyle() is now DEPRECATED, please use the .em-sea CSS class"),FE(".em-sea","fill",e),t},t.cntrgFillStyle=function(e){return console.warn("cntrgFillStyle() is now DEPRECATED, please use the .em-cntrg CSS class"),FE(".em-cntrg","fill",e),t},t.nutsrgFillStyle=function(e){return console.warn("nutsrgFillStyle() is now DEPRECATED, please use the .em-nutsrg CSS class"),FE(".em-nutsrg","fill",e),t},t.nutsbnStroke=function(e){return console.warn("nutsbnStroke() is now DEPRECATED, please use the .bn_0, .bn_1, .bn_2, .bn_3 CSS classes"),e[0]&&FE(".bn_0","stroke",e[0]),e[1]&&FE(".bn_1","stroke",e[1]),e[2]&&FE(".bn_2","stroke",e[2]),e[3]&&FE(".bn_3","stroke",e[3]),t},t.nutsbnStrokeWidth=function(e){return console.warn("nutsbnStrokeWidth() is now DEPRECATED, please use the .bn_0, .bn_1, .bn_2, .bn_3 CSS classes"),e[0]&&FE(".bn_0","stroke-width",e[0]),e[1]&&FE(".bn_1","stroke-width",e[1]),e[2]&&FE(".bn_2","stroke-width",e[2]),e[3]&&FE(".bn_3","stroke-width",e[3]),t},t.graticuleStroke=function(e){return console.warn("graticuleStroke() is now DEPRECATED, please use the .em-graticule CSS class"),FE(".em-graticule","stroke",e),t},t.graticuleStrokeWidth=function(e){return console.warn("graticuleStrokeWidth() is now DEPRECATED, please use the .em-graticule CSS class"),FE(".em-graticule","stroke-width",e),t},t.nutsrgSelFillSty=function(e){return console.warn("nutsrgSelFillSty() is now DEPRECATED, please use hoverColor() instead"),t.hoverColor_=e,t},t.titleFontSize=function(e){return console.warn("map.titleFontSize() is now DEPRECATED. please use the .em-title CSS class"),FE(".em-title","font-size",e),t},t.subtitleFontSize=function(e){return console.warn("map.subtitleFontSize() is now DEPRECATED. please use the .em-subtitle CSS class"),FE(".em-subtitle","font-size",e),t},t.subtitleFontWeight=function(e){return console.warn("map.subtitleFontWeight() is now DEPRECATED. please use the .em-subtitle CSS class"),FE(".em-subtitle","font-weight",e),t},t.titleFill=function(e){return console.warn("map.titleFill() is now DEPRECATED. please use the .em-title CSS class"),FE(".em-title","fill",e),t},t.subtitleFill=function(e){return console.warn("map.subtitleFill() is now DEPRECATED. please use the .em-subtitle CSS class"),FE(".em-subtitle","fill",e),t},t.cntbnStroke=function(e){return console.warn("cntbnStroke() is now DEPRECATED, please use the .em-cntbn .em-bn-eu .em-bn-efta .em-bn-cc .em-bn-oth CSS classes"),e.eu&&FE(".em-bn-eu","stroke",e.eu),e.efta&&FE(".em-bn-efta","stroke",e.efta),e.cc&&FE(".em-bn-cc","stroke",e.cc),e.oth&&FE(".em-bn-oth","stroke",e.oth),e.co&&FE(".em-bn-co","stroke",e.co),t},t.cntbnStrokeWidth=function(e){return console.warn("cntbnStrokeWidth() is now DEPRECATED, please use the .em-cntbn .em-worldbn .em-bn-eu .em-bn-efta .em-bn-cc .em-bn-oth CSS classes"),e.eu&&FE(".em-bn-eu","stroke-width",e.eu),e.efta&&FE(".em-bn-efta","stroke-width",e.efta),e.cc&&FE(".em-bn-cc","stroke-width",e.cc),e.oth&&FE(".em-bn-oth","stroke-width",e.oth),e.co&&FE(".em-bn-co","stroke-width",e.co),t},t.worldStroke=function(e){return console.warn("map.worldStroke() is now DEPRECATED. please use the .em-worldbn .em-bn-co .em-bn-d CSS classes"),FE(".em-worldbn","stroke",e),t},t.worldStrokeWidth=function(e){return console.warn("map.worldStrokeWidth() is now DEPRECATED. please use the .em-worldbn .em-bn-co .em-bn-d CSS classes"),FE(".em-worldbn","stroke-width",e),t},t.worldCoastStroke=function(e){return console.warn("map.worldCoastStroke() is now DEPRECATED. please use the .em-bn-co CSS class"),FE(".em-bn-co","stroke",e),t},t.worldCoastStrokeWidth=function(e){return console.warn("map.worldCoastStrokeWidth() is now DEPRECATED. please use the .em-bn-co CSS class"),FE(".em-bn-co","stroke-width",e),t},t.worldFillStyle=function(e){return console.warn("map.worldFillStyle() is now DEPRECATED. please use the .em-worldrg CSS class"),FE(".em-worldrg","fill",e),t},t.coastalMarginWidth=function(e){return console.warn("map.coastalMarginWidth() is now DEPRECATED. please use the #em-coast-margin CSS rule"),FE("#em-coast-margin","stroke-width",e),t},t.coastalMarginColor=function(e){return console.warn("map.coastalMarginColor() is now DEPRECATED. please use the #em-coast-margin CSS rule"),FE("#em-coast-margin","stroke",e),t},t.fontFamily=function(e){return console.warn("map.fontFamily() is now DEPRECATED. please use the .em-map CSS class"),FE(".em-map","font-family",e),t},t.botTxtFontSize=function(e){return console.warn("map.botTxtFontSize() is now DEPRECATED. please use the .em-footnote CSS class"),FE(".em-footnote","font-size",e),t},t.botTxtFill=function(e){return console.warn("map.botTxtFill() is now DEPRECATED. please use the .em-footnote CSS class"),FE(".em-footnote","fill",e),t},t.scalebarFontSize=function(e){return console.warn("map.scalebarFontSize() is now DEPRECATED. please use the .em-scalebar-label CSS class"),FE(".em-scalebar-label","font-size",e),t},t.frameStroke=function(e){return console.warn("map.frameStroke() is now DEPRECATED. please use the .em-frame CSS class"),FE(".em-frame","stroke",e),t},t.frameStrokeWidth=function(e){return console.warn("map.frameStrokeWidth() is now DEPRECATED. please use the .em-frame CSS class"),FE(".em-frame","stroke-width",e),t},t.psClassifMethod=function(e){return console.warn("psClassifMethod() is now DEPRECATED. please use psClassificationMethod instead"),t.psClassificationMethod_=e,t},t.geoCenter=function(e){return console.warn("map.geoCenter() is now DEPRECATED. Please use map.position({x,y,z}) instead."),t.position_.x=e[0],t.position_.y=e[1],t},t.pixelSize=function(e){return console.warn("map.pixelSize() is now DEPRECATED. Please use the z property in map.position({x,y,z}) instead."),t.position_.z=e,t},t.pixSize=function(e){return console.warn("map.pixelSize() is now DEPRECATED. Please use the z property in map.position({x,y,z}) instead."),t.position_.z=e,t},t.tooltipText=function(e){return console.warn("map.tooltipText() is now DEPRECATED. Please use map.tooltip(config.textFunction) instead. See API reference for details."),t.tooltip_.textFunction=e,t},t.classifMethod=function(e){return console.warn("map.classifMethod() is now DEPRECATED. please use map.classificationMethod() instead."),t.classificationMethod_=e,t},t.threshold=function(e){return console.warn("map.threshold() is now DEPRECATED. please use map.thresholds() instead."),t.thresholds_=e,t},t.psThreshold=function(e){return console.warn("map.psThreshold() is now DEPRECATED. please use map.psThresholds() instead."),t.psThresholds_=e,t},t.clnb=function(e){return console.warn("map.clnb() is now DEPRECATED. please use map.numberOfClasses() instead."),t.numberOfClasses_=e,t},t.nutsLvl=function(e){return console.warn("map.nutsLvl() is now DEPRECATED. please use map.nutsLevel() instead."),t.nutsLevel_=e,t},t.lg=function(e){return console.warn("map.lg() is now DEPRECATED. please use map.language() instead."),t.language_=e,t},t.bottomText=function(e){return console.warn("bottomText is now DEPRECATED. Please use the footnote() method and em-footnote CSS class instead."),t.footnote_=e,t},t.botTxtFontSize=function(e){return console.warn("botTxtFontSize is now DEPRECATED. Please use the em-footnote CSS class instead."),t},t.botTxtFill=function(e){return console.warn("botTxtFill is now DEPRECATED. Please use the em-footnote CSS class instead."),t},t.botTxtPadding=function(e){return console.warn("botTxtPadding is now DEPRECATED. Please use the em-footnote CSS class instead."),t},t.botTxtTooltipTxt=function(e){return console.warn("botTxtTooltipTxt is now DEPRECATED. Please use footnoteTooltipText() instead."),t},t.tooltipShowFlags=function(e){return console.warn("tooltipShowFlags is now DEPRECATED. Please use out.tooltip({showFlags}) instead."),t.tooltip_.showFlags=e,t},t.colorFun=function(e){return console.warn("colorFun is now DEPRECATED. Please use out.colorFunction() instead."),t.colorFunction_=e,t},t.filtersDefinitionFun=function(e){return console.warn("filtersDefinitionFun is now DEPRECATED. Please use out.filtersDefinitionFunction() instead."),t.filtersDefinitionFunction_=e,t},t.labelling=function(e){return console.warn("labelling is now DEPRECATED. Please use out.labels({}) configuration object instead. See documentation for details."),t},t.labelsConfig=function(e){return console.warn("labelsConfig is now DEPRECATED. Please use out.labels({config:yourConfig}) configuration object instead. See documentation for details."),t.labels_=Object.assign(t.labels_||{},{config:e}),t},t.statLabelsPositions=function(e){return console.warn("statLabelsPositions is now DEPRECATED. Please use out.labels({statLabelsPositions:yourPositions}) instead. See documentation for details."),t.labels_=Object.assign(t.labels_||{},{statLabelsPositions:e}),t},t.labelsToShow=function(e){return console.warn("labelsToShow is now DEPRECATED. Please use out.labels({labelFilterFunction:yourFunction(region,map)}) function instead. See documentation for details."),t},t.labelShadowsToShow=function(e){return console.warn("labelShadowsToShow is now DEPRECATED. Please use out.labels({labelFilterFunction:yourFunction(region,map)}) function instead. See documentation for details."),t},t.labelShadow=function(e){return console.warn("labelShadow is now DEPRECATED. Please use out.labels({labelShadow:boolean}) instead. See documentation for details."),t},t.labelShadowWidth=function(e){return console.warn("labelShadow is now DEPRECATED. Please use out.labels({labelShadow:boolean}) instead. See documentation for details."),t},t.labelFilterFunction=function(e){return console.warn("labelFilterFunction is now DEPRECATED. Please use out.labels({labelFilterFunction:yourFunction(region,map)}) instead. See documentation for details."),t},t.labelFill=function(e){return console.warn("map.labelFill() is now DEPRECATED. please use the .em-stat-labels CSS class"),t},t.labelStroke=function(e){return console.warn("map.labelStroke() is now DEPRECATED. please use the .em-stat-labels CSS class"),t},t.labelStrokeWidth=function(e){return console.warn("map.labelStrokeWidth() is now DEPRECATED. please use the .em-stat-labels CSS class"),t},t.labelOpacity=function(e){return console.warn("map.labelOpacity() is now DEPRECATED. please use the .em-stat-labels CSS class"),t},t.labelValuesFontSize=function(e){return console.warn("map.labelValuesFontSize() is now DEPRECATED. please use the .em-stat-labels CSS class"),t},t.labelShadowWidth=function(e){return console.warn("map.labelShadowWidth() is now DEPRECATED. please use the .em-stat-labels-shadows CSS class"),t},t.labelShadowColor=function(e){return console.warn("map.labelShadowColor() is now DEPRECATED. please use the .em-stat-labels-shadows CSS class"),t},t.countriesToShow=function(e){return console.warn("map.countriesToShow() is now DEPRECATED. please use the map.filterGeometriesFunction() function if you wish to filter the default geometries."),t},t.bordersToShow=function(e){return console.warn("map.bordersToShow() is now DEPRECATED. please use the map.filterGeometriesFunction() function if you wish to filter the default geometries."),t},t.flowDonutSizeScale=function(e){return console.warn("map.flowDonutSizeScale() is now DEPRECATED. please use flowNodeSizeScale_() instead."),t.flowDonutSizeScale_=e,t},t.flowDonuts=function(e){return console.warn('map.flowDonuts() is now DEPRECATED. please use flowNodes(true).flowNodeType("donut") instead.'),t.flowNodeType_=e?"donut":"circle",t},t.flowMapType=function(e){return console.warn("map.flowMapType() is now DEPRECATED. please use flowLineType() instead."),t.flowLineType_=e,t},t.flowGradient=function(e){return console.warn("map.flowGradient() is now DEPRECATED. please use flowColorGradient() or flowWidthGradient() instead."),t.flowColorGradient_=e,t},t.flowOverlayColors=function(e){return console.warn("map.flowOverlayColors() is now DEPRECATED. please use flowRegionColors() instead."),t.flowRegionColors_=e,t},t.getFillPatternDefinitionFun=function(e){return console.warn("getFillPatternDefinitionFun is now DEPRECATED. please use fillPatternDefinitionFunction() instead."),t.fillPatternDefinitionFunction_=e,t}}(r),r.geo=function(t){return arguments.length?(r.geo_=t.toUpperCase(),r):r.geo_},["tooltip_","nuts2jsonBaseURL_","processCentroids_"].forEach(function(t){r[t.substring(0,t.length-1)]=function(e){if(!arguments.length)return r[t];if("object"!==qE(e)||null===e||Array.isArray(e))r[t]=e;else for(var n in e)r[t][n]=e[n];return r.insetTemplates_&&GE(r.insetTemplates_,r.svgId_,function(e,n){e[t.substring(0,t.length-1)](n)},e),r}}),r.title=function(t){return arguments.length?(r.title_=t,r.svg()&&r.svg().select("#title"+r.geo()).text(t),r):r.title_},r.subtitle=function(t){return arguments.length?(r.subtitle_=t,r.svg()&&r.svg().select("#subtitle"+r.geo()).text(t),r):r.subtitle_},r.insets=function(){return arguments.length?(1==arguments.length&&"default"===arguments[0]?r.insets_="default":1==arguments.length&&!1===arguments[0]?r.insets_=!1:1==arguments.length&&Array.isArray(arguments[0])?r.insets_=arguments[0]:r.insets_=arguments,r):r.insets_},r.drawGraticule=function(t){if(!arguments.length)return r.drawGraticule_;r.drawGraticule_=t;var e=r.svg_?r.svg().select("#em-graticule"):null,n=r.svg_?r.svg_.select("#em-zoom-group-"+r.svgId_):null;return e&&(e._groups[0][0]&&0==t?e.remove():r.Geometries.geoJSONs.graticule&&r._pathFunction&&n&&1==t&&(e.remove(),n.append("g").attr("id","em-graticule").selectAll("path").data(r.Geometries.geoJSONs.graticule).enter().append("path").attr("d",r._pathFunction).attr("class","em-graticule"),r.svg().select("#em-graticule").each(function(){"WORLD"==r.geo_?this.parentNode.insertBefore(this,this.parentNode.childNodes[3]):this.parentNode.insertBefore(this,this.parentNode.childNodes[1])}))),r},r.drawCoastalMargin=function(t){return arguments.length?(r.drawCoastalMargin_=t,function(t){if(t.svg_){var e=LM("#em-coast-margin"),n=Dt("#em-coastal-blur"),r=Dt("#em-zoom-group-"+t.svgId_)||null;if(e._groups[0][0]&&0==t.drawCoastalMargin_)e.remove();else if(1==t.drawCoastalMargin_&&t._pathFunction&&r){e.remove(),n.remove(),t.svg_.append("filter").attr("id","em-coastal-blur").attr("x","-200%").attr("y","-200%").attr("width","400%").attr("height","400%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",t.coastalMarginStdDev_);var i=function(t){var e=Dt("#em-zoom-group-"+t.svgId_).append("g").attr("id","em-coast-margin");t.Geometries.geoJSONs.cntbn&&e.append("g").attr("id","em-coast-margin-cnt").selectAll("path").data(t.Geometries.geoJSONs.cntbn).enter().filter(function(t){return"T"===t.properties.co}).append("path").attr("d",t._pathFunction),t.Geometries.geoJSONs.nutsbn&&e.append("g").attr("id","em-coast-margin-nuts").selectAll("path").data(t.Geometries.geoJSONs.nutsbn).enter().filter(function(t){return"T"===t.properties.co}).append("path").attr("d",t._pathFunction),t.Geometries.geoJSONs.worldbn&&e.append("g").attr("id","em-coast-margin-nuts").selectAll("path").data(t._geom.worldbn).enter().filter(function(t){return"T"===t.properties.COAS_FLAG}).append("path").attr("d",t._pathFunction)};t.insetTemplates_&&t.drawCoastalMargin_&&(GE(t.insetTemplates_,t.svgId_,i),i(t)),LM("#em-coast-margin").each(function(){"WORLD"==t.geo_?this.parentNode.insertBefore(this,this.parentNode.childNodes[3]):this.parentNode.insertBefore(this,this.parentNode.childNodes[1])})}}}(r),r):r.drawCoastalMargin_},r.annotations=function(t){return arguments.length?(r.annotations_=t,MF(r),r):r.annotations_},r.stamp=function(t){return arguments.length?(r.stamp_=t,QF(r.stamp_,r),r):r.stamp_},r.minimap=function(t){return arguments.length?(r.minimap_=t,iz(r),r):r.minimap_},r.labels=function(t){return arguments.length?(r.labels_=t,function(t){if(t.svg_){var e=t.svg_.selectAll("#em-labels > *");if(e&&e.remove(),t.labels_){var n=t.labels_,r=t.svg_.select("#em-zoom-group-"+t.svgId_);SF(t,r),n.values&&t.updateValuesLabels&&t.updateValuesLabels(t),t.insetTemplates_&&GE(t.insetTemplates_,t.svgId_,function(t){if(n){var e=t.svg_.select("#em-zoom-group-"+t.svgId_);t.labels_&&SF(t,e),n.values&&t.updateValuesLabels&&t.updateValuesLabels(t)}})}}}(r),r):r.labels_},r.position=function(t){return arguments.length?(r.position_=t,function(t,e){if(t.svg_&&t.__zoomBehavior){var n=t.svg_,r=n.select("#em-zoom-group-"+t.svgId_),i=t.__baseZ/e.z,a=b(t._projection([e.x,e.y]),2),o=a[0],s=a[1],l=t.width_/2-o*i,c=t.height_/2-s*i,u=_E.translate(l,c).scale(i);t.__programmaticZoom={x:e.x,y:e.y,z:e.z},t.__lastTransform=u,n.call(t.__zoomBehavior.transform,u),r.attr("data-zoom",i),t.position_.x=e.x,t.position_.y=e.y,t.position_.z=e.z}}(r,t),r):r.position_},r.Geometries=$F(r,e),r.updateGeoMapTemplate=function(t){return r.Geometries.defaultGeoData=null,r.Geometries.allNUTSGeoData=null,r.Geometries.centroidsData=null,r.geometries_?(r.Geometries.setUserGeometries(r.geometries_),r.buildMapTemplate(),t&&t()):r.Geometries.getDefaultGeoData(r.geo_,r.filterGeometriesFunction_,r.nutsLevel_).then(function(){r.buildMapTemplate(),t&&t()}),GE(r.insetTemplates_,r.svgId_,function(e){e.updateGeoMapTemplate(t)}),r};r.buildMapTemplateBase=function(){var t=function(t){var e=Dt("#"+t.svgId());return 0==e.size()&&(e=Dt("body").append("svg").attr("id",t.svgId())),e.attr("class","em-map"),e.classed("em--"+t._mapType,!0),"pie"!==t._mapType&&"coxcomb"!==t._mapType||e.classed("em--ps",!0),e}(r);r.svg_=t,r.isInset||(r._wrapper_=function(t){var e,n=t.node();if(n){var r=n.parentNode;if(r&&!(r instanceof SVGElement)){if(null!==(e=r.classList)&&void 0!==e&&e.contains("em-map-wrapper"))return r;var i=document.createElement("div");return i.className="em-map-wrapper",r.insertBefore(i,n),i.appendChild(n),i}}}(t)),r.containerId_||(r.containerId_=r.svgId_),r.tooltip_.containerId||(r.tooltip_.containerId=r.containerId_),LM("#"+r.svgId()+" > *").remove(),"WORLD"==r.geo_.toUpperCase()&&(r.height()||r.height(.55*r.width()),t.attr("width",r.width()).attr("height",r.height()),r.proj_=54030),r.height()||r.height(.85*r.width()),t.attr("width",r.width()).attr("height",r.height()),t.append("defs").attr("class","em-defs").append("clipPath").attr("id",r.svgId_+"-clip-path").append("rect").attr("x",0).attr("y",0).attr("width",r.width_).attr("height",r.height_),r.drawCoastalMargin_&&t.append("filter").attr("id","em-coastal-blur").attr("x","-200%").attr("y","-200%").attr("width","400%").attr("height","400%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",r.coastalMarginStdDev_),t.append("g").attr("id","em-header-"+r.svgId_).attr("class","em-header");var n=t.append("g").attr("id","em-drawing-"+r.svgId_).attr("class","em-drawing-group").attr("clip-path","url(#".concat(r.svgId_,"-clip-path)"));n.append("g").attr("id","em-zoom-group-"+r.svgId_).attr("class","em-zoom-group");return t.append("g").attr("id","em-footer-"+r.svgId_).attr("class","em-footer"),function(t){if(t.insetTemplates_){for(var e in t.insetTemplates_){var n=Dt("#"+t.insetTemplates_[e].svgId_);n&&n.html("")}t.insetTemplates_={}}}(r),function(t,e,n){t.insetBoxPosition_||(t.insetBoxPosition_=[t.width_-t.insetBoxWidth_-2*t.insetBoxPadding_,2*t.insetBoxPadding_]);var r=Dt("#"+t.svgId_).select("#em-drawing-"+t.svgId_).append("g").attr("id","em-insets-group").attr("class","em-insets").attr("transform","translate("+t.insetBoxPosition_[0]+","+t.insetBoxPosition_[1]+")");"default"===t.insets_&&(t.insets_=ZF(t.insetBoxWidth_,t.insetBoxPadding_));for(var i=0;i<t.insets_.length;i++){var a=t.insets_[i];if(a.svgId=a.svgId||"inset"+a.geo+Math.random().toString(36).substring(7),0==Dt("#"+a.svgId).size()){var o=null==a.x?t.insetBoxPadding_:a.x,s=null==a.y?t.insetBoxPadding_+i*(t.insetBoxPadding_+t.insetBoxWidth_):a.y;r.append("g").attr("id","em-inset-"+a.svgId).attr("class","em-inset").attr("transform","translate("+o+","+s+")").append("svg").attr("id",a.svgId)}if(t.insetTemplates_[a.geo]){var l=JF(a,t,e,n);l.buildMapTemplateBase(),t.insetTemplates_[a.geo]=[t.insetTemplates_[a.geo],l]}else{var c=JF(a,t,e,n).buildMapTemplateBase();t.insetTemplates_[a.geo]=c}}}(r,e,r._mapType),n.append("rect").attr("id","em-frame-"+r.geo_).attr("class","em-frame").attr("x",0).attr("y",0).attr("width",r.width_).attr("height",r.height_),r.stamp_&&QF(r.stamp_,r),r},r.buildMapTemplate=function(){var t=r.svg().select("#em-zoom-group-"+r.svgId_);return t.selectAll("*").remove(),1==r.gridCartogram_?(!function(t){var e=Dt("#em-zoom-group-".concat(t.svgId_)).append("g").attr("id","em-grid-container");t.gridCartogramMargins_=t.gridCartogramMargins_||{top:80,right:80,bottom:80,left:80};var n=iN(t),r=aN(n),i=oN(r,t);"hexagon"===t.gridCartogramShape_?lN(e,i,t):sN(e,i,t),uN(e,t.width_,t.height_,t.gridCartogramMargins_)}(r),r.footnote_=!1):(r.position_.x&&r.position_.y||c(),r.position_.z=r.position_.z||u(),h(),f(),(r.zoomExtent()||r.zoomButtons_)&&(r.zoomExtent_||(console.log("Zoom buttons are enabled, but no zoom extent is defined. Setting default extent to map.zoomExtent([1,10])."),r.zoomExtent_=[1,10]),function(t){var e,n=Dt("#"+t.svgId()),r=_E,i=!t.lockPanUntilZoom_,a=!1,o=t.zoomExtent_||[0,0],s=Math.max(o[0]||1,.01),l=s<1,c=null!==(e=t.panPadFactor_)&&void 0!==e?e:.1,u=l?c*(1/s-1)*t.width_:t.width_,h=l?c*(1/s-1)*t.height_:t.height_,f=t.translateExtent_?t.translateExtent_:l?[[-u,-h],[t.width_+u,t.height_+h]]:[[0,0],[t.width_,t.height_]];if(t.__zoomBehavior=kE().filter(function(t){return!t.target.closest(".em-zoom-buttons")&&!t.target.closest(".em-button")}).extent([[0,0],[t.width_,t.height_]]).scaleExtent(o).translateExtent(f).on("start",function(t){t.sourceEvent&&"wheel"!==t.sourceEvent.type&&n.classed("em-dragging",!0)}).on("zoom",function(e){var o=e.transform,s=t.svg_.select("#em-zoom-group-"+t.svgId_);a?a=!1:(t.__lastTransform=o,o.k!==r.k?(t.lockPanUntilZoom_&&(i=!0),hz(e,r,t),s.attr("data-zoom",o.k).attr("transform",o),r=o):!t.lockPanUntilZoom_||i?(uz(e,t),s.attr("transform",o),r=o):(a=!0,n.call(t.__zoomBehavior.transform,r)))}).on("end",function(e){var r;n.classed("em-dragging",!1),null===(r=t.onZoomEnd_)||void 0===r||r.call(t,e,t),window.dispatchEvent(new CustomEvent("estatmap:zoomend-"+t.svgId_,{detail:t}))}),t.__lastTransform=r,!t.__baseZ){var d=t.height_/2,p=b(t._projection.invert([0,d]),1)[0],g=b(t._projection.invert([t.width_,d]),1)[0];t.__baseZ=(g-p)/t.width_}n.call(t.__zoomBehavior)}(r),r.svg().classed("em-draggable",!0)),r.backgroundMap_&&l(r)),e&&o(r),r.labels_&&SF(r,t),r.annotations_&&(MF(r),r.annotationsAdded=!0),r.placenames_&&function(t){Mz.apply(this,arguments)}(r),r.title()&&function(t){var e=t.isInset?"em-inset-title":"em-title";t.titlePosition()||t.titlePosition([10,NE(e)+(t.isInset?0:10)]),t.header_&&!t.isInset&&t.svg().select("#em-header-"+t.svgId_).empty()&&t.svg().append("g").attr("id","em-header-"+t.svgId_).attr("class","em-header");var n=t.header_&&!t.isInset?t.svg().select("#em-header-"+t.svgId_):t.svg();n.select("#title"+t.geo_).remove(),n.append("text").attr("id","title"+t.geo_).attr("class",e).attr("x",t.titlePosition()[0]).attr("y",t.titlePosition()[1]).html(t.title())}(r),r.subtitle()&&function(t){if(t.subtitle()){var e=t.isInset?"em-inset-subtitle":"em-subtitle",n=t.isInset?"em-inset-title":"em-title";t.subtitlePosition()||t.subtitlePosition([10,NE(n)+NE(e)+15]),t.header_&&!t.isInset&&t.svg().select("#em-header-"+t.svgId_).empty()&&t.svg().append("g").attr("id","em-header-"+t.svgId_).attr("class","em-header");var r=t.header_&&!t.isInset?t.svg().select("#em-header-"+t.svgId_):t.svg();r.select("#subtitle"+t.geo_).remove(),r.append("text").attr("id","subtitle"+t.geo_).attr("class",e).attr("x",t.subtitlePosition()[0]).attr("y",t.subtitlePosition()[1]).html(t.subtitle())}}(r),r.footnote_&&function(t){var e,n=t.footnoteWrap_||1/0,r=t.footnote_||"";e=t.footer_&&!t.isInset?t.footnotePosition_?[t.footnotePosition_[0],t.footnotePosition_[1]]:[5,10]:t.footnotePosition_?t.footnotePosition_:[10,t.height_];var i,a=t.svg();t.footer_&&!t.isInset?(i=a.select("#em-footer-"+t.svgId_)).empty()&&(i=a.append("g").attr("id","em-footer-"+t.svgId_).attr("class","em-footer")):i=a,i.select("#em-footnote").remove();var o,s=i.append("text").attr("id","em-footnote").attr("class","em-footnote").attr("x",e[0]).attr("y",e[1]),l="",c=0,u=kz(r.split(/(\s+)/));try{for(u.s();!(o=u.n()).done;){var h=o.value;(l+h).length>n&&l.length>0?(s.append("tspan").attr("x",e[0]).attr("dy",0===c?0:"1.2em").html(l.trim()),l=h,c++):l+=h}}catch(t){u.e(t)}finally{u.f()}l.trim().length>0&&s.append("tspan").attr("x",e[0]).attr("dy",0===c?0:"1.2em").html(l.trim()),s.on("mouseover",function(){t._tooltip.mw___=t._tooltip.style("max-width"),t._tooltip.style("max-width","400px"),t.footnoteTooltipText_&&t._tooltip.mouseover(t.footnoteTooltipText_)}).on("mousemove",function(e){t.footnoteTooltipText_&&t._tooltip.mousemove(e)}).on("mouseout",function(){t.footnoteTooltipText_&&t._tooltip.mouseout(),t._tooltip.style("max-width",t._tooltip.mw___)})}(r),r.showEstatLogo_&&function(t){var e=t.svg(),n=e.select("#em-logo-group");n.empty()&&(n=e.append("g").attr("id","em-logo-group").attr("class","em-logo-group"));var r=t.logoWidth_||200,i=t.logoHeight_||40,a=t.logoPosition_?t.logoPosition_[0]:t.width_-r-10,o=t.logoPosition_?t.logoPosition_[1]:t.height_-i-10;n.selectAll(".em-eurostat-logo").remove(),n.append("image").attr("href","data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20%20viewBox%3D%22317.6%20263.7%20206.4%2067.9%22%20%20%20%20%20preserveAspectRatio%3D%22xMinYMid%20meet%22%20%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20%20%20%20%20xml%3Aspace%3D%22preserve%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E.st0%7Bfill%3Anone%3B%7D.st1%7Bfill%3A%23164194%3B%7D.st2%7Bfill%3A%23FFED00%3B%7D.st3%7Bfill%3A%237C7C7B%3B%7D%3C%2Fstyle%3E%3Crect%20x%3D%22317.6%22%20y%3D%22263.7%22%20class%3D%22st0%22%20width%3D%22206.4%22%20height%3D%2267.9%22%2F%3E%3Cg%3E%3Cg%3E%3Cg%20id%3D%22EUflag_16_%22%3E%3Cpolygon%20class%3D%22st1%22%20points%3D%22501.4%2C309%20501.4%2C286.3%20467.4%2C286.3%20467.4%2C309%20501.4%2C309%20%22%2F%3E%3C%2Fg%3E%3Cg%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22485%2C289.8%20486.1%2C289.8%20485.2%2C290.5%20485.6%2C291.6%20484.6%2C290.9%20483.7%2C291.6%20484.1%2C290.5%20483.2%2C289.8%20484.3%2C289.8%20484.6%2C288.7%20485%2C289.8%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22485%2C304.9%20486.2%2C304.9%20485.2%2C305.6%20485.6%2C306.7%20484.7%2C306%20483.8%2C306.7%20484.1%2C305.6%20483.2%2C304.9%20484.3%2C304.9%20484.7%2C303.8%20485%2C304.9%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22488.8%2C303.9%20489.9%2C303.9%20489%2C304.6%20489.3%2C305.7%20488.4%2C305%20487.5%2C305.7%20487.9%2C304.6%20486.9%2C303.9%20488.1%2C303.9%20488.4%2C302.8%20488.8%2C303.9%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22488.8%2C290.8%20489.9%2C290.8%20489%2C291.5%20489.3%2C292.6%20488.4%2C291.9%20487.5%2C292.6%20487.9%2C291.5%20486.9%2C290.8%20488.1%2C290.8%20488.4%2C289.7%20488.8%2C290.8%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22491.5%2C293.6%20492.7%2C293.6%20491.8%2C294.3%20492.1%2C295.4%20491.2%2C294.7%20490.3%2C295.4%20490.6%2C294.3%20489.7%2C293.6%20490.9%2C293.6%20491.2%2C292.5%20491.5%2C293.6%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22491.5%2C301.2%20492.7%2C301.2%20491.8%2C301.9%20492.1%2C302.9%20491.2%2C302.3%20490.3%2C302.9%20490.6%2C301.9%20489.7%2C301.2%20490.9%2C301.2%20491.2%2C300.1%20491.5%2C301.2%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22492.6%2C297.3%20493.7%2C297.3%20492.8%2C298%20493.1%2C299.1%20492.2%2C298.4%20491.3%2C299.1%20491.7%2C298%20490.8%2C297.3%20491.9%2C297.3%20492.2%2C296.3%20492.6%2C297.3%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22481.2%2C290.8%20482.3%2C290.8%20481.4%2C291.5%20481.7%2C292.6%20480.8%2C291.9%20479.9%2C292.6%20480.3%2C291.5%20479.4%2C290.8%20480.5%2C290.8%20480.8%2C289.7%20481.2%2C290.8%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22478.5%2C293.6%20479.6%2C293.6%20478.7%2C294.3%20479%2C295.4%20478.1%2C294.7%20477.2%2C295.4%20477.6%2C294.3%20476.7%2C293.6%20477.8%2C293.6%20478.1%2C292.5%20478.5%2C293.6%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22477.5%2C297.3%20478.6%2C297.3%20477.7%2C298%20478%2C299.1%20477.1%2C298.4%20476.2%2C299.1%20476.6%2C298%20475.7%2C297.3%20476.8%2C297.3%20477.1%2C296.3%20477.5%2C297.3%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22478.5%2C301.2%20479.6%2C301.2%20478.7%2C301.9%20479%2C303%20478.1%2C302.3%20477.2%2C303%20477.6%2C301.9%20476.7%2C301.2%20477.8%2C301.2%20478.1%2C300.1%20478.5%2C301.2%20%22%2F%3E%3Cpolygon%20class%3D%22st2%22%20points%3D%22481.2%2C303.9%20482.3%2C303.9%20481.4%2C304.6%20481.8%2C305.7%20480.9%2C305%20480%2C305.7%20480.3%2C304.6%20479.4%2C303.9%20480.5%2C303.9%20480.9%2C302.9%20481.2%2C303.9%20%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20class%3D%22st3%22%20d%3D%22M337.3%2C304.5c0.7%2C0.7%2C1.8%2C1.1%2C3.1%2C1.1c1%2C0%2C1.8-0.2%2C2.5-0.7s1.1-1%2C1.3-1.5h4.2c-0.7%2C2.1-1.7%2C3.6-3.1%2C4.5c-1.4%2C0.9-3.1%2C1.4-5.1%2C1.4c-1.4%2C0-2.6-0.2-3.7-0.7c-1.1-0.4-2-1.1-2.8-1.9s-1.4-1.8-1.8-2.9c-0.4-1.1-0.6-2.4-0.6-3.7c0-1.3%2C0.2-2.5%2C0.6-3.7c0.4-1.1%2C1-2.1%2C1.8-2.9c0.8-0.8%2C1.7-1.5%2C2.8-1.9c1.1-0.5%2C2.3-0.7%2C3.6-0.7c1.5%2C0%2C2.8%2C0.3%2C3.9%2C0.9s2%2C1.4%2C2.7%2C2.3c0.7%2C1%2C1.2%2C2.1%2C1.5%2C3.3c0.3%2C1.2%2C0.4%2C2.5%2C0.3%2C3.9h-12.6C336.2%2C302.7%2C336.6%2C303.8%2C337.3%2C304.5z%20M342.8%2C295.3c-0.6-0.6-1.5-0.9-2.6-0.9c-0.8%2C0-1.4%2C0.1-1.9%2C0.4c-0.5%2C0.3-0.9%2C0.6-1.2%2C1c-0.3%2C0.4-0.5%2C0.8-0.6%2C1.2c-0.1%2C0.4-0.2%2C0.8-0.2%2C1.2h7.8C343.7%2C296.9%2C343.3%2C296%2C342.8%2C295.3z%20M462.6%2C291v3.9h-3.1v8.2c0%2C0.8%2C0%2C1.4%2C0.3%2C1.6c0.3%2C0.3%2C0.8%2C0.4%2C1.6%2C0.4c0.3%2C0%2C0.4%2C0%2C0.7%2C0c0.2%2C0%2C0.6-0.1%2C0.6-0.1v3.7c0%2C0.1-0.8%2C0.1-1.3%2C0.1c-0.5%2C0-0.9%2C0-1.4%2C0c-0.7%2C0-1.4%2C0-2.1-0.2c-0.7-0.1-1.2-0.3-1.7-0.6c-0.5-0.3-0.8-0.7-1.1-1.2c-0.3-0.5-0.3-1.2-0.3-2.1V295h-3.1V291h3.1v-4.7h4.7v4.7H462.6z%20M443.9%2C300.7c-0.3%2C0.1-0.6%2C0.2-0.9%2C0.2c-0.3%2C0.1-0.7%2C0.1-1.1%2C0.2c-0.4%2C0.1-0.8%2C0.1-1.1%2C0.2c-0.4%2C0.1-0.7%2C0.1-1%2C0.3c-0.4%2C0.1-0.7%2C0.3-0.9%2C0.5c-0.3%2C0.2-0.5%2C0.4-0.6%2C0.7c-0.2%2C0.3-0.2%2C0.7-0.2%2C1.1c0%2C0.4%2C0.1%2C0.8%2C0.2%2C1.1c0.2%2C0.3%2C0.4%2C0.5%2C0.6%2C0.7c0.3%2C0.2%2C0.6%2C0.3%2C0.9%2C0.4c0.4%2C0.1%2C0.7%2C0.1%2C1.1%2C0.1c0.9%2C0%2C1.7-0.1%2C2.2-0.5c0.5-0.3%2C0.9-0.7%2C1.1-1.1c0.2-0.4%2C0.3-0.9%2C0.4-1.3c0.1-0.5%2C0-0.8%2C0-1.1v-1.8C444.6%2C300.4%2C444.2%2C300.6%2C443.9%2C300.7%20M434.6%2C293.8c0.5-0.7%2C1.1-1.3%2C1.9-1.7c0.8-0.5%2C1.6-0.7%2C2.6-0.9c0.9-0.2%2C1.9-0.3%2C2.9-0.3c0.9%2C0%2C1.8%2C0.1%2C2.7%2C0.2c0.9%2C0.1%2C1.7%2C0.4%2C2.5%2C0.7c0.7%2C0.4%2C1.2%2C0.9%2C1.7%2C1.5c0.5%2C0.6%2C0.6%2C1.5%2C0.6%2C2.5v9.1c0%2C0.8%2C0.2%2C1.5%2C0.3%2C2.2c0.1%2C0.7%2C0.3%2C1.3%2C0.5%2C1.6l-4.8%2C0c-0.1-0.3-0.1-0.5-0.2-0.8c-0.1-0.3-0.1-0.6-0.1-0.9c-0.8%2C0.8-1.7%2C1.3-2.7%2C1.6c-1%2C0.3-2.1%2C0.5-3.2%2C0.5c-0.8%2C0-1.6-0.1-2.3-0.3c-0.7-0.2-1.3-0.5-1.9-0.9c-0.5-0.4-1-1-1.3-1.6c-0.3-0.7-0.4-1.4-0.4-2.3c0-1%2C0.2-1.8%2C0.5-2.4c0.3-0.6%2C0.8-1.2%2C1.3-1.5c0.5-0.4%2C1.2-0.7%2C1.9-0.9c0.7-0.2%2C1.4-0.3%2C2.1-0.5c0.7-0.1%2C1.4-0.2%2C2.1-0.3c0.7-0.1%2C1.3-0.2%2C1.9-0.3c0.5-0.1%2C1-0.3%2C1.3-0.6c0.3-0.3%2C0.5-0.6%2C0.4-1.1c0-0.5-0.1-0.9-0.3-1.2c-0.2-0.3-0.4-0.5-0.7-0.7c-0.3-0.2-0.6-0.3-1-0.3c-0.4-0.1-0.8-0.1-1.2-0.1c-0.9%2C0-1.7%2C0.1-2.2%2C0.5c-0.5%2C0.4-0.8%2C1.1-0.9%2C1.9h-4.8C433.9%2C295.7%2C434.1%2C294.6%2C434.6%2C293.8%20M431.3%2C291v3.9h-3.9v8.2c0%2C0.8%2C0.3%2C1.4%2C0.5%2C1.6c0.3%2C0.3%2C0.9%2C0.4%2C1.7%2C0.4c0.3%2C0%2C0.6%2C0%2C0.9%2C0c0.3%2C0%2C0.8-0.1%2C0.8-0.1v3.7c-0.8%2C0.1-0.9%2C0.1-1.4%2C0.1c-0.5%2C0-1%2C0-1.5%2C0c-0.7%2C0-1.5%2C0-2.1-0.2c-0.7-0.1-1.3-0.3-1.8-0.6c-0.5-0.3-1-0.7-1.3-1.2c-0.3-0.5-0.5-1.2-0.5-2.1V295h-2.3V291h2.3v-4.7h4.7v4.7H431.3z%20M407.5%2C304.3c0.2%2C0.4%2C0.5%2C0.8%2C0.8%2C1c0.3%2C0.2%2C0.7%2C0.5%2C1.2%2C0.6c0.4%2C0.1%2C0.9%2C0.2%2C1.3%2C0.2c0.3%2C0%2C0.7%2C0%2C1.1-0.1c0.4-0.1%2C0.7-0.2%2C1-0.4c0.3-0.2%2C0.6-0.4%2C0.8-0.7c0.2-0.3%2C0.3-0.6%2C0.3-1.1c0-0.7-0.5-1.3-1.4-1.6c-1-0.4-2.3-0.7-4-1.1c-0.7-0.2-1.4-0.4-2-0.6c-0.7-0.2-1.2-0.5-1.8-0.8c-0.5-0.4-0.9-0.8-1.2-1.3c-0.3-0.5-0.5-1.2-0.5-1.9c0-1.1%2C0.2-2%2C0.7-2.7c0.4-0.7%2C1-1.3%2C1.7-1.7c0.7-0.4%2C1.5-0.7%2C2.4-0.9c0.9-0.2%2C1.8-0.2%2C2.8-0.2c0.9%2C0%2C1.9%2C0.1%2C2.7%2C0.3c0.9%2C0.2%2C1.7%2C0.5%2C2.4%2C0.9c0.7%2C0.4%2C1.3%2C1%2C1.7%2C1.7c0.5%2C0.7%2C0.7%2C1.9%2C0.8%2C2.7h-4.5c-0.1-0.8-0.4-1.6-1-1.9c-0.6-0.3-1.4-0.5-2.2-0.5c-0.3%2C0-0.6%2C0-0.9%2C0c-0.3%2C0-0.6%2C0.1-0.9%2C0.2c-0.3%2C0.1-0.5%2C0.3-0.7%2C0.5c-0.2%2C0.2-0.3%2C0.5-0.3%2C0.9c0%2C0.4%2C0.2%2C0.8%2C0.5%2C1c0.3%2C0.3%2C0.7%2C0.5%2C1.2%2C0.7c0.5%2C0.2%2C1.1%2C0.3%2C1.7%2C0.5c0.6%2C0.1%2C1.3%2C0.3%2C2%2C0.4c0.7%2C0.2%2C1.4%2C0.3%2C2%2C0.6c0.7%2C0.2%2C1.2%2C0.5%2C1.8%2C0.9c0.5%2C0.4%2C0.9%2C0.8%2C1.2%2C1.4c0.3%2C0.6%2C0.5%2C1.2%2C0.5%2C2c0%2C1.1-0.2%2C2.1-0.7%2C2.9c-0.5%2C0.8-1.1%2C1.4-1.8%2C1.9c-0.7%2C0.5-1.6%2C0.8-2.5%2C1c-1%2C0.2-1.9%2C0.3-2.9%2C0.3c-1%2C0-2-0.1-2.9-0.3c-1-0.2-1.8-0.5-2.6-1c-0.7-0.5-1.4-1.3-1.8-2c-0.5-0.8-0.7-1.5-0.8-3.1h4.5C407.2%2C303.6%2C407.3%2C303.9%2C407.5%2C304.3%20M383.7%2C296.3c0.4-1.1%2C1-2.1%2C1.8-2.9c0.8-0.8%2C1.7-1.4%2C2.8-1.8c1.1-0.4%2C2.3-0.6%2C3.7-0.6c1.4%2C0%2C2.6%2C0.2%2C3.7%2C0.6c1.1%2C0.4%2C2%2C1.1%2C2.8%2C1.8c0.8%2C0.8%2C1.4%2C1.8%2C1.8%2C2.9c0.4%2C1.1%2C0.6%2C2.4%2C0.6%2C3.8c0%2C1.4-0.2%2C2.6-0.6%2C3.8c-0.4%2C1.1-1%2C2.1-1.8%2C2.9c-0.8%2C0.8-1.7%2C1.4-2.8%2C1.8c-1.1%2C0.4-2.4%2C0.6-3.7%2C0.6c-1.4%2C0-2.6-0.2-3.7-0.6c-1.1-0.4-2-1-2.8-1.8c-0.8-0.8-1.4-1.8-1.8-2.9c-0.4-1.1-0.6-2.4-0.6-3.8C383.1%2C298.7%2C383.3%2C297.4%2C383.7%2C296.3%20M388.1%2C302.1c0.1%2C0.7%2C0.4%2C1.3%2C0.7%2C1.8c0.3%2C0.5%2C0.8%2C0.9%2C1.3%2C1.3c0.5%2C0.3%2C1.2%2C0.5%2C2%2C0.5c0.8%2C0%2C1.5-0.2%2C2-0.5c0.5-0.3%2C1-0.7%2C1.3-1.3c0.3-0.5%2C0.6-1.1%2C0.7-1.8c0.1-0.7%2C0.2-1.3%2C0.2-2c0-0.7-0.1-1.4-0.2-2.1c-0.1-0.7-0.4-1.3-0.7-1.8c-0.3-0.5-0.8-0.9-1.3-1.3c-0.6-0.3-1.2-0.5-2-0.5c-0.8%2C0-1.5%2C0.2-2%2C0.5c-0.5%2C0.3-1%2C0.8-1.3%2C1.3c-0.3%2C0.5-0.5%2C1.1-0.7%2C1.8c-0.1%2C0.7-0.2%2C1.4-0.2%2C2.1C387.9%2C300.8%2C387.9%2C301.5%2C388.1%2C302.1%20M376.5%2C291v3.9h-0.1c0.2-0.8%2C0.5-1.2%2C0.9-1.7c0.4-0.5%2C0.8-0.9%2C1.3-1.3c0.5-0.3%2C1-0.6%2C1.6-0.8c0.6-0.2%2C1.1-0.3%2C1.6-0.3c0.3%2C0%2C0.9%2C0%2C0.9%2C0.1v4.4c0%2C0-0.4-0.1-0.7-0.1c-0.3%2C0-0.6%2C0-0.9%2C0c-0.9%2C0-1.6%2C0.1-2.2%2C0.4c-0.6%2C0.3-1.1%2C0.7-1.4%2C1.2c-0.4%2C0.5-0.6%2C1.1-0.8%2C1.8c-0.2%2C0.7-0.2%2C1.4-0.2%2C2.2v8.1h-4.7v-18H376.5z%20M363.2%2C309v-2.3h0c-0.6%2C0.8-1.4%2C1.6-2.4%2C2c-1%2C0.4-1.9%2C0.6-3%2C0.6c-1.3%2C0-2.3-0.2-3.1-0.5c-0.8-0.3-1.5-0.8-1.9-1.4c-0.5-0.6-0.8-1.4-1-2.3c-0.2-0.9-0.3-1.9-0.3-3V291h4.7v10.2c0%2C1.4%2C0.3%2C2.5%2C0.8%2C3.2c0.5%2C0.7%2C1.3%2C1.1%2C2.4%2C1.1c1.3%2C0%2C2.3-0.4%2C2.9-1.2c0.6-0.8%2C1-2.1%2C1-3.8V291h4.7v18H363.2z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E").attr("width",r).attr("height",i).attr("x",a).attr("y",o).attr("class","em-eurostat-logo")}(r),r.showEstatRibbon_&&function(t){var e=t.svg(),n=e.select("#em-logo-group");n.empty()&&(n=e.append("g").attr("id","em-logo-group").attr("class","em-logo-group"));var r=t.ribbonWidth_||200,i=t.ribbonHeight_||40,a=t.ribbonPosition_?t.ribbonPosition_[0]:t.width_-r-10,o=t.ribbonPosition_?t.ribbonPosition_[1]:t.height_-i-10;t.footer&&!t.ribbonPosition_&&(o+=80),n.selectAll(".em-eurostat-ribbon").remove(),n.append("image").attr("href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAiIGhlaWdodD0iNjMiIHZpZXdCb3g9IjAgMCAxNDAgNjMiPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIwLjE1NSIgeTE9IjEiIHgyPSIwLjgzNyIgeTI9IjAuMDExIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzA4MmI3YSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjUiIHN0b3AtY29sb3I9IiMwZTQ3Y2IiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtMiIgeDE9IjAuNzU5IiB5MT0iMC45OTEiIHgyPSIwLjI0MyIgeTI9IjAuMDEzIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2Y0ZjVmNSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjN2Q4MDg4IiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTMiIHgxPSIwLjE3IiB5MT0iMC45NzkiIHgyPSIwLjg0MyIgeTI9IjAuMDAyIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZmNmMiIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjUiIHN0b3AtY29sb3I9IiNmYzAiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KCiAgPGcgaWQ9ImV1cm9zdGF0LXJpYmJvbiI+CiAgICA8cGF0aCBkPSJNMTA2LjUyMiA0Ljk4MUw5MC42MjggNC45ODFMNTUuMjUyIDQ3LjEzN0w3MS4xNDYgNDcuMTM3TDEwNi41MjIgNC45ODFaIgogICAgICAgICAgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQpIiAvPgogICAgPHBhdGggZD0iTTM3LjU2MyAyNi4wNkw1My40NTkgMjYuMDZMNzEuMTQ2IDQ3LjEzOEw1NS4yNTIgNDcuMTM4TDM3LjU2MyAyNi4wNloiCiAgICAgICAgICBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudC0yKSIgLz4KICAgIDxwYXRoIGQ9Ik01My40NTYgMjYuMDZMMzcuNTYgMjYuMDZMMi4xODQgNjguMjE2TDE4LjA3OSA2OC4yMTZMNTMuNDU2IDI2LjA2WiIKICAgICAgICAgIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50LTMpIiAvPgogICAgPHBhdGggZD0iTTQ1LjQ5MSAzNS40ODlMNTYuOTc1IDQ5LjE5MkwzNC4wMDYgNDkuMTkyTDQ1LjQ5MSAzNS40ODlaIgogICAgICAgICAgY2xhc3M9ImxvZ28tcmliYm9uLWN1dC1maWxsIgogICAgICAgICAgZmlsbD0iI2ZmZiIgLz4KICAgIDxwYXRoIGQ9Ik0xMDYuNDkxIDQuOTgzTDE0Mi4xODQgNDcuNTI5TDcwLjc5NyA0Ny41MjlMMTA2LjQ5MSA0Ljk4M1oiCiAgICAgICAgICBmaWxsPSIjZmZmIiAvPgogIDwvZz4KPC9zdmc+Cg==").attr("width",r).attr("height",i).attr("x",a).attr("y",o).attr("class","em-eurostat-ribbon")}(r),r.showSourceLink_&&function(t,e){var n,r=t.svg();t.footer_&&!t.isInset?(n=r.select("#em-footer-"+t.svgId_)).empty()&&(n=r.append("g").attr("id","em-footer-"+t.svgId_).attr("class","em-footer")):n=r,n.selectAll("#em-source-link, .em-source-dataset-link, .em-source-pretext").remove();var i=e?t.stat("size"):t.stat();if(i&&i.eurostatDatasetCode){var a=i.eurostatDatasetCode,o="https://ec.europa.eu/eurostat/databrowser/view/".concat(a,"/default/table?lang=en"),s=t.footer_&&!t.isInset?10:t.height_,l=n.append("a").attr("class","em-source-dataset-link").attr("href",o).attr("target","_blank").append("text").attr("class","em-source-dataset-link-text").attr("x",t.width_-10).attr("y",s).text("EUROSTAT").attr("text-anchor","end").node().getComputedTextLength();n.append("text").attr("id","em-source-link").attr("class","em-source-pretext").attr("x",t.width_-l-10-6).attr("y",s).text("Source:").attr("text-anchor","end")}}(r,e),r.showScalebar_&&(2!==r.scalebarPosition_.length&&(r.scalebarPosition_[0]=15,r.scalebarPosition_[1]=r.height_-50),function(t){var e=t.scalebarMaxWidth_,n=t.scalebarTextOffset_[0],r=t.scalebarTextOffset_[1],i=t.position_.z,a=Tz(e*i),o=a[0]/i,s=a[1],l=t.svg().append("g").attr("class","em-scalebar").attr("transform","translate(".concat(t.scalebarPosition_[0],",").concat(t.scalebarPosition_[1],")")).attr("width",e+20).attr("height",t.scalebarHeight_);l.append("line").attr("class","em-scalebar-line").attr("x1",5).attr("y1",1).attr("x2",5).attr("y2",t.scalebarTickHeight_),l.append("text").attr("class","em-scalebar-label").attr("x",5+n).attr("y",t.scalebarTickHeight_+r).text("0");var c={1:4,2:2,5:5}[s],u=o/c,h=t.scalebarSegmentHeight_/2+1;if(u>=15){for(var f=1;f<c;f++)if(l.append("line").attr("class","em-scalebar-line").attr("x1",5+t.scalebarStrokeWidth_/2+f*u).attr("y1",1).attr("x2",5+t.scalebarStrokeWidth_/2+f*u).attr("y2",t.scalebarTickHeight_),l.append("text").attr("class","em-scalebar-label").attr("x",5+n+f*u).attr("y",t.scalebarTickHeight_+r).text(Pz(a[0]/c*f)),1==f)l.append("line").attr("class","em-scalebar-line em-scalebar-midline").attr("x1",5+t.scalebarStrokeWidth_-1).attr("y1",h).attr("x2",5+t.scalebarStrokeWidth_/2+f*u).attr("y2",h);else{var d=5+t.scalebarStrokeWidth_/2+(f-1)*u;d>0&&l.append("line").attr("class","em-scalebar-line em-scalebar-midline").attr("x1",d).attr("y1",h).attr("x2",5+t.scalebarStrokeWidth_/2+f*u).attr("y2",h)}u>=15&&l.append("line").attr("class","em-scalebar-line em-scalebar-midline").attr("x1",5+(c-1)*u).attr("y1",h).attr("x2",5+c*u).attr("y2",h)}else l.append("line").attr("class","em-scalebar-line em-scalebar-midline").attr("x1",5+t.scalebarStrokeWidth_-1).attr("y1",h).attr("x2",5+t.scalebarStrokeWidth_/2+u*c).attr("y2",h);l.append("line").attr("class","em-scalebar-line").attr("x1",o+5).attr("y1",1).attr("x2",o+5).attr("y2",t.scalebarTickHeight_),l.append("text").attr("class","em-scalebar-label").attr("x",o+5+n).attr("y",t.scalebarTickHeight_+r).text(Pz(a[0])+t.scalebarUnits_)}(r)),r.minimap_&&iz(r),r.zoomButtons_&&function(t){var e=Dt("#"+t.svgId()).append("g").attr("class","em-zoom-buttons").style("pointer-events","all"),n=parseInt(LE("em-button","width"))||30,r=e.append("g").attr("class","em-zoom-in em-button").style("cursor","pointer");r.append("title").text("Zoom in"),r.append("rect").attr("width",n).attr("height",n),r.append("text").attr("x",n/2).attr("y",n/2+7).text("+");var i=e.append("g").attr("class","em-zoom-out em-button").style("cursor","pointer").attr("transform","translate(0, ".concat(n,")")).style("cursor","pointer");i.append("title").text("Zoom out"),i.append("rect").attr("width",n).attr("height",n),i.append("text").attr("x",n/2).attr("y",n/2+7).text(""),r.on("click",function(e){e.preventDefault(),e.stopPropagation(),function(t){t.svg_.transition().call(t.__zoomBehavior.scaleBy,2)}(t)}),i.on("click",function(e){e.preventDefault(),e.stopPropagation(),function(t){t.svg_.transition().call(t.__zoomBehavior.scaleBy,.5)}(t)})}(r),r.insetsButton_&&function(t){var e=Dt("#"+t.svgId()),n=parseInt(LE("em-button","width"))||30,r=e.append("g").attr("class","em-insets-button em-button").attr("id","em-insets-button");r.append("title").text("Show/hide inset maps"),r.append("rect").attr("width",n).attr("height",n);var i=document.createComment("!Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.");r.node().appendChild(i);var a=n/700;r.append("path").attr("d","M266.3 48.3L232.5 73.6c-5.4 4-8.5 10.4-8.5 17.1l0 9.1c0 6.8 5.5 12.3 12.3 12.3c2.4 0 4.8-.7 6.8-2.1l41.8-27.9c2-1.3 4.4-2.1 6.8-2.1l1 0c6.2 0 11.3 5.1 11.3 11.3c0 3-1.2 5.9-3.3 8l-19.9 19.9c-5.8 5.8-12.9 10.2-20.7 12.8l-26.5 8.8c-5.8 1.9-9.6 7.3-9.6 13.4c0 3.7-1.5 7.3-4.1 10l-17.9 17.9c-6.4 6.4-9.9 15-9.9 24l0 4.3c0 16.4 13.6 29.7 29.9 29.7c11 0 21.2-6.2 26.1-16l4-8.1c2.4-4.8 7.4-7.9 12.8-7.9c4.5 0 8.7 2.1 11.4 5.7l16.3 21.7c2.1 2.9 5.5 4.5 9.1 4.5c8.4 0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.5-7 0-15.5 7.5-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6c0-10.3 8.3-18.6 18.6-18.6l29.4 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-20.7 0c-7.2 0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8c0 6.2 5.1 11.3 11.3 11.3l11.3 0c6 0 11.8 2.4 16 6.6l6.5 6.5c1.8 1.8 2.8 4.3 2.8 6.8s-1 5-2.8 6.8l-7.5 7.5C386 262 384 266.9 384 272s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16l7.3 0c6.5-20.2 10-41.7 10-64c0-111.4-87.6-202.4-197.7-207.7zm172 307.9c-3.7-2.6-8.2-4.1-13-4.1c-6 0-11.8-2.4-16-6.6L396 332c-7.7-7.7-18-12-28.9-12c-9.7 0-19.2-3.5-26.6-9.8L314 287.4c-11.6-9.9-26.4-15.4-41.7-15.4l-20.9 0c-12.6 0-25 3.7-35.5 10.7L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3l0 3.2c0 17 6.7 33.3 18.7 45.3l16 16c8.5 8.5 20 13.3 32 13.3l21.3 0c13.3 0 24 10.7 24 24c0 2.5 .4 5 1.1 7.3c71.3-5.8 132.5-47.6 165.2-107.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM187.3 100.7c-6.2-6.2-16.4-6.2-22.6 0l-32 32c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l32-32c6.2-6.2 6.2-16.4 0-22.6z").attr("transform","translate(".concat(n/2,", ").concat(n/2,") scale(").concat(a,") translate(").concat(-256,", ").concat(-256,")")).attr("fill","#333").attr("pointer-events","none"),r.on("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.select("#em-insets-group");"none"===n.style("display")||""===n.style("display")?n.style("display","block"):n.style("display","none")})}(r),setTimeout(function(){return r.recalculateLayout()},20),r};var o=function(t){var e;t.Geometries.centroidsData?e="mixed"==t.nutsLevel_?[].concat(x(t.Geometries.centroidsData[0].features),x(t.Geometries.centroidsData[1].features),x(t.Geometries.centroidsData[2].features),x(t.Geometries.centroidsData[3].features)):t.Geometries.centroidsData.features:"WORLD"==t.geo_&&(e=[],t.Geometries.geoJSONs.worldrg.forEach(function(t){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t);"FR"==t.properties.id?n.geometry={coordinates:[2.2,46.2],type:"Point"}:n.geometry={coordinates:dd(t),type:"Point"},e.push(n)})),t.processCentroids_&&(e=t.processCentroids_(e));var n=e.map(function(e){var n=t._projection(e.geometry.coordinates);return e.properties.centroid=n,e});t.Geometries._allCentroidsFeatures=x(n),t.Geometries.centroidsFeatures=n.filter(function(e){return s(e.properties.id,t)}),(r.getCentroidsGroup(t).empty()?t.svg().select("#em-zoom-group-"+t.svgId_).append("g").attr("id","em-centroids-".concat(t.svgId_)).attr("class","em-centroids"):r.getCentroidsGroup(t)).selectAll("g.em-centroid").data(t.Geometries.centroidsFeatures,function(t){return t.properties.id}).join(function(t){return t.append("g").attr("class","em-centroid").attr("id",function(t){return"ps"+t.properties.id}).attr("transform",function(t){return"translate(".concat(t.properties.centroid[0].toFixed(3),",").concat(t.properties.centroid[1].toFixed(3),")")})},function(t){return t},function(t){return t.remove()})};r.getCentroidsGroup=function(t){return t.svg().select("#em-centroids-".concat(t.svgId_))},r.refreshCentroids=function(t){var e=t.Geometries._allCentroidsFeatures;if(e)return t.Geometries.centroidsFeatures=e.filter(function(e){return s(e.properties.id,t)}),r.getCentroidsGroup(t).selectAll("g.em-centroid").data(t.Geometries.centroidsFeatures,function(t){return t.properties.id}).join(function(t){return t.append("g").attr("class","em-centroid").attr("id",function(t){return"ps"+t.properties.id}).attr("transform",function(t){return"translate(".concat(t.properties.centroid[0].toFixed(3),",").concat(t.properties.centroid[1].toFixed(3),")")})},function(t){return t},function(t){return t.remove()}),t};var s=function(t,e){return!e.statCodes_||e.statCodes_.some(function(n){var r,i=null===(r=e.statData(n))||void 0===r?void 0:r.get(t);return i&&!isNaN(i.value)&&0!==i.value})},l=function(t){var e=t.svg().select("#em-zoom-group-"+t.svgId_);e.append("rect").attr("id","sea").attr("class","em-sea").attr("x",-5*t.width_).attr("y",-5*t.height_).attr("width",11*t.width_).attr("height",11*t.height_),"WORLD"==t.geo_&&e.append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",t._pathFunction).attr("class","em-graticule"),t.drawCoastalMargin_&&function(t){var e=t.svg().select("#em-zoom-group-"+t.svgId_).append("g").attr("id","em-coast-margin").attr("class","em-coast-margin");t.Geometries.geoJSONs.cntbn&&e.append("g").attr("id","em-coast-margin-cnt").attr("class","em-coast-margin-cnt").selectAll("path").data(t.Geometries.geoJSONs.cntbn).enter().filter(function(t){return"T"===t.properties.co}).append("path").attr("d",t._pathFunction),t.Geometries.geoJSONs.nutsbn&&e.append("g").attr("id","em-coast-margin-nuts").attr("class","em-coast-margin-nuts").selectAll("path").data(t.Geometries.geoJSONs.nutsbn).enter().filter(function(t){return"T"===t.properties.co}).append("path").attr("d",t._pathFunction),t.Geometries.geoJSONs.worldbn&&e.append("g").attr("id","em-coast-margin-world").attr("class","em-coast-margin-world").selectAll("path").data(t.Geometries.geoJSONs.worldbn).enter().filter(function(t){return"T"===t.properties.COAS_FLAG}).append("path").attr("d",t._pathFunction)}(t),t.geometries_?t.Geometries.addUserGeometriesToMap(t.geometries_,e,t._pathFunction):t.Geometries.addDefaultGeometriesToMap(e,t.drawGraticule_,t._pathFunction,t.nutsLevel_,t.nutsYear_,t.geo_,t.proj_,t.scale_)},c=function(){if(r.projectionFunction_){if("function"==typeof r.projectionFunction_.rotate){var t=r.projectionFunction_.rotate();if(Array.isArray(t)&&t.length>=2){var e,n,i=-t[0],a=-t[1];r.position_.x=null!==(e=r.position_.x)&&void 0!==e?e:i,r.position_.y=null!==(n=r.position_.y)&&void 0!==n?n:a}}else if("function"==typeof r.projectionFunction_.center){var o,s,l=r.projectionFunction_.center();if(Array.isArray(l)&&2===l.length)r.position_.x=null!==(o=r.position_.x)&&void 0!==o?o:l[0],r.position_.y=null!==(s=r.position_.y)&&void 0!==s?s:l[1]}}else{var c,u=Lz[r.geo_+"_"+r.proj_];u?(r.position_.x=r.position_.x||u.geoCenter[0],r.position_.y=r.position_.y||u.geoCenter[1]):null!==(c=r.Geometries.defaultGeoData)&&void 0!==c&&c.bbox&&(r.position_.x=r.position_.x||.5*(r.Geometries.defaultGeoData.bbox[0]+r.Geometries.defaultGeoData.bbox[2]),r.position_.y=r.position_.y||.5*(r.Geometries.defaultGeoData.bbox[1]+r.Geometries.defaultGeoData.bbox[3]))}d()},u=function(){var t,e=Lz[r.geo_+"_"+r.proj_];return e?800*e.pixelSize/r.width_:null!==(t=r.Geometries.defaultGeoData)&&void 0!==t&&t.bbox?Math.min((r.Geometries.defaultGeoData.bbox[2]-r.Geometries.defaultGeoData.bbox[0])/r.width_,(r.Geometries.defaultGeoData.bbox[3]-r.Geometries.defaultGeoData.bbox[1])/r.height_):100},h=function(){"WORLD"===r.geo_?r._projection=r.projectionFunction_||aA(vA).scale(152.63).translate([r.width_/2,r.height_/2]).scale((r.width_-20)/(2*Math.PI)):r._projection=r.projectionFunction_||hv().reflectY(!0).fitSize([r.width_,r.height_],function(t){return{type:"Feature",geometry:{type:"MultiPoint",coordinates:[[t[0],t[1]],[t[2],t[3]]]}}}(WE(r)))},f=function(){r._pathFunction=yg().projection(r._projection)},d=function(){var t=RE("x"),e=RE("y"),n=RE("z");null==t||null==t||isNaN(+t)||(r.position_.x=+t),null==e||null==e||isNaN(+e)||(r.position_.y=+e),null==n||null==n||isNaN(+n)||(r.position_.z=+n)};return r.recalculateLayout=function(){var t=r.svg(),e=t.select("#em-header-"+r.svgId_),n=t.select("#em-drawing-"+r.svgId_),i=t.select("#em-footer-"+r.svgId_),a=n.select("#em-frame-"+r.geo_),o=t.select("#".concat(r.svgId_,"-clip-path rect")),s=0,l=0,c=r.headerPadding_?r.headerPadding_:20,u=r.footerPadding_?r.footerPadding_:10;if(r.header_&&!e.empty()){var h,f,d=null===(h=e.node())||void 0===h||null===(f=h.getBBox)||void 0===f?void 0:f.call(h);d&&(s=d.height+c)}if(r.footer_&&!i.empty()){var p,g,v=null===(p=i.node())||void 0===p||null===(g=p.getBBox)||void 0===g?void 0:g.call(p);v&&(l=v.height+u)}n.attr("transform","translate(0, ".concat(s,")")),i.attr("transform","translate(0, ".concat(s+r.height_+u,")")),a.attr("x",0).attr("y",0).attr("width",r.width_).attr("height",r.height_),o.attr("x",0).attr("y",0).attr("width",r.width_).attr("height",r.height_);var _=r.height_+s+l+u;t.attr("width",r.width_).attr("height",_)},r},Lz={EUR_3035:{geoCenter:[479e4,342e4],pixelSize:6400},IC_32628:{geoCenter:[443468,3145647],pixelSize:1e3},GP_32620:{geoCenter:[669498,1784552],pixelSize:130},MQ_32620:{geoCenter:[716521,1621322],pixelSize:130},GF_32622:{geoCenter:[266852,444074],pixelSize:500},RE_32740:{geoCenter:[348011,7661627],pixelSize:130},YT_32738:{geoCenter:[516549,8583920],pixelSize:70},MT_3035:{geoCenter:[4719755,1441701],pixelSize:70},PT20_32626:{geoCenter:[397418,4271471],pixelSize:1500},PT30_32628:{geoCenter:[333586,3622706],pixelSize:150},LI_3035:{geoCenter:[4287060,2672e3],pixelSize:40},IS_3035:{geoCenter:[3011804,496e4],pixelSize:700},SJ_SV_3035:{geoCenter:[457e4,6160156],pixelSize:800},SJ_JM_3035:{geoCenter:[3647762,5408300],pixelSize:100},CARIB_32620:{geoCenter:[636345,1669439],pixelSize:500},WORLD_54030:{geoCenter:[14,17],pixelSize:9e3}};function Oz(t,e){var n,r,i,a,o=function(t,e,n){if(0===Object.entries(t).length)return null;var r,i=[];if(n&&!zz(n.name)&&(n=null),"string"==typeof t&&(t=[t]),Array.isArray(t)||Dz(t)){if(t.length===e)return n&&-1===t.findIndex(function(t){return null==t})?n.from(t):t;if(1===t.length){for(r=0;r<e;r++)i.push(t[0]);return i}}for(r=0;r<e;r++){var a=void 0===t[r]?null:t[r];i.push(a)}return i};if(this.length=0,this.id=[],null!=t)switch(this.class=t.class||"bundle",this.class){case"bundle":var s=[],l=0;if(this.error=null,this.length=0,null===t||"object"!=typeof t)return void(this.class=null);if(t.hasOwnProperty("error"))return void(this.error=t.error);if("dataset"===t.class||"collection"===t.class||"dimension"===t.class)return new Oz(t);for(r in t)l++,s.push(r);this.__tree__=t,this.length=l,this.id=s;break;case"dataset":t.hasOwnProperty("__tree__")?this.__tree__=n=t.__tree__:this.__tree__=n=t,this.label=n.label||null,this.note=n.note||null,this.link=n.link||null,this.href=n.href||null,this.updated=n.updated||null,this.source=n.source||null,this.extension=n.extension||null;var c,u=0,h=n.size||n.dimension&&n.dimension.size;if(this.size=h,this.value=n.hasOwnProperty("value")&&null!==n.value&&0!==n.value.length?n.value:{},Array.isArray(this.value)||Dz(this.value))u=this.value.length;else{var f=1;for(c=h.length;c--;)f*=h[c];u=f}if(this.value=o(this.value,u,e),this.status=n.hasOwnProperty("status")&&null!==n.status?o(n.status,u):null,n.hasOwnProperty("dimension")){var d=n.dimension,p=n.role||!n.version&&d.role||null,g=n.id||d.id,v=h.length,_=function(t){p.hasOwnProperty(t)||(p[t]=null)};if(!Array.isArray(g)||!Array.isArray(h)||g.length!=v)return;if(this.length=v,this.id=g,p&&(_("time"),_("geo"),_("metric"),_("classification")),p&&null===p.classification){var m=[],y=["time","geo","metric"],b=function(t,e){for(var n=e.length;n--;)if(t===e[n])return!0;return!1};for(c=0;c<3;c++){var x=p[y[c]];null!==x&&(m=m.concat(x))}for(p.classification=[],c=0;c<v;c++)b(g[c],m)||p.classification.push(g[c]);0===p.classification.length&&(p.classification=null)}this.role=p,this.n=u;for(var w=0,M=this.length;w<M;w++)if(d[g[w]].category.hasOwnProperty("index")){if(Array.isArray(d[g[w]].category.index)){var S={},C=d[g[w]].category.index;for(i=C.length,a=0;a<i;a++)S[C[a]]=a;d[g[w]].category.index=S}}else{var E=0;for(r in d[g[w]].category.index={},d[g[w]].category.label)d[g[w]].category.index[r]=E++}}else this.length=0;break;case"dimension":if(!t.hasOwnProperty("__tree__"))return new Oz({version:"2.0",class:"dataset",dimension:{d:t},id:["d"],size:[function(t){var e=void 0===t.index?t.label:t.index;return Array.isArray(e)?e.length:Object.keys(e).length}(t.category)],value:[null]}).Dimension(0);var k=[],A=(n=t.__tree__).category;if(!n.hasOwnProperty("category"))return;if(!A.hasOwnProperty("label"))for(r in A.label={},A.index)A.label[r]=r;for(r in A.index)k[A.index[r]]=r;this.__tree__=n,this.label=n.label||null,this.note=n.note||null,this.link=n.link||null,this.href=n.href||null,this.id=k,this.length=k.length,this.role=t.role,this.hierarchy=A.hasOwnProperty("child"),this.extension=n.extension||null;break;case"category":var T=t.child;this.id=T,this.length=null===T?0:T.length,this.index=t.index,this.label=t.label,this.note=t.note||null,this.unit=t.unit,this.coordinates=t.coord;break;case"collection":if(this.length=0,this.label=t.label||null,this.note=t.note||null,this.link=t.link||null,this.href=t.href||null,this.updated=t.updated||null,this.source=t.source||null,this.extension=t.extension||null,null!==this.link&&t.link.item){var P=t.link.item;if(this.length=Array.isArray(P)?P.length:0,this.length)for(a=0;a<this.length;a++)this.id[a]=P[a].href}}}function Dz(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t.buffer)}function zz(t){return-1!==["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].indexOf(t)}function Iz(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}Oz.prototype.Item=function(t){if(null===this||"collection"!==this.class||!this.length)return null;if("number"==typeof t)return t>this.length||t<0?null:this.link.item[t];var e,n=[];if("object"==typeof t){if(!t.class&&!t.follow)return null;t.class&&(e="dataset"===t.class&&"boolean"==typeof t.embedded?!0===t.embedded?function(t,e,r){var i=t.link.item[e];r.class===i.class&&i.id&&i.size&&i.dimension&&n.push(i)}:function(t,e,r){var i=t.link.item[e];r.class!==i.class||i.id&&i.size&&i.dimension||n.push(i)}:function(t,e,r){r.class===t.link.item[e].class&&n.push(t.link.item[e])})}else e=function(t,e){n.push(t.link.item[e])};for(var r=0;r<this.length;r++)e(this,r,t);return n},Oz.prototype.Dataset=function(t){if(null===this)return null;if("dataset"===this.class)return void 0!==t?this:[this];var e,n=[],r=0;if("collection"===this.class){var i=this.Item({class:"dataset",embedded:!0});if(void 0===t){for(e=i.length;r<e;r++)n.push(new Oz(i[r]));return n}if("number"==typeof t&&t>=0&&t<i.length)return new Oz(i[t]);if("string"==typeof t)for(e=i.length;r<e;r++)if(i[r].href===t)return new Oz(i[r]);return null}if("bundle"!==this.class)return null;if(void 0===t){for(e=this.id.length;r<e;r++)n.push(this.Dataset(this.id[r]));return n}if("number"==typeof t){var a=this.id[t];return void 0!==a?this.Dataset(a):null}var o=this.__tree__[t];return void 0===o?null:new Oz({class:"dataset",__tree__:o})},Oz.prototype.Dimension=function(t,e){e="boolean"!=typeof e||e;var n,r=[],i=this.id.length,a=function(t,e){if(null!==t)for(var n in t)for(var r=null!==t[n]?t[n].length:0;r--;)if(t[n][r]===e)return n;return null};if(null===this||"dataset"!==this.class)return null;if(void 0===t){for(n=0;n<i;n++)r.push(this.Dimension(this.id[n]));return r}if("number"==typeof t){var o=this.id[t];return void 0!==o?this.Dimension(o,e):null}var s=this.role;if("object"==typeof t){if(t.hasOwnProperty("role")){for(n=0;n<i;n++){var l=this.id[n];a(s,l)===t.role&&r.push(this.Dimension(l,e))}return void 0===r[0]?null:r}return null}var c=this.__tree__.dimension;if(void 0===c)return null;var u=c[t];return void 0===u?null:e?new Oz({class:"dimension",__tree__:u,role:a(s,t)}):function(t,e){var n=[];for(var r in t)n[t[r]]=e[r];return n}(u.category.index,u.category.label)},Oz.prototype.Category=function(t){if(null===this||"dimension"!==this.class)return null;if(void 0===t){for(var e=[],n=0,r=this.id.length;n<r;n++)e.push(this.Category(this.id[n]));return e}if("number"==typeof t){var i=this.id[t];return void 0!==i?this.Category(i):null}var a=this.__tree__.category;if(void 0===a)return null;var o=a.index[t];if(void 0===o)return null;var s=a.unit&&a.unit[t]||null,l=a.coordinates&&a.coordinates[t]||null,c=a.child&&a.child[t]||null,u=a.note&&a.note[t]||null;return new Oz({class:"category",index:o,label:a.label[t],note:u,child:c,unit:s,coord:l})},Oz.prototype.Dice=function(t,e,n){var r,i,a,o,s=function(t,e){return t.hasOwnProperty(e)&&!!t[e]};if(null===this||"dataset"!==this.class||null===this.value)return null;if("object"!=typeof t)return this;"object"!=typeof e?("boolean"==typeof e&&!0===e&&(r=!0),"boolean"==typeof n&&!0===n||(n=!1)):(r=s(e,"clone"),n=s(e,"drop"),i=s(e,"stringify"),a=s(e,"ovalue"),o=s(e,"ostatus"));var l,c=this.value,u=r?new Oz(JSON.parse(JSON.stringify(this))):this,h=u.status,f=[],d=[],p=function(t,e){var n,r,i,a=(n=t,r=e,i={},Array.isArray(n[r])?(n[r].forEach(function(t,e){null!==t&&(i[String(e)]=t)}),i):n[r]);delete t[e],t[e]=a};Array.isArray(t)&&(t=function(t){var e={};return t.forEach(function(t){e[t[0]]=t[1]}),e}(t)),null===t&&(t={});var g=Object.keys(t);return g.length>0&&(g.forEach(function(e){var n=t[e];Array.isArray(n)||(t[e]=[n]),0===t[e].length&&delete t[e]}),n&&(t=function(t){var e={};return Object.keys(t).forEach(function(n){e[n]=u.Dimension(n).id.filter(function(e){return-1===t[n].indexOf(e)})}),e}(t)),u.toTable({type:"arrobj",content:"id",status:!0}).forEach(function(e,n){var r=[];g.forEach(function(n){var i=t[n],a=[];i.forEach(function(t){a.push(e[n]===t)}),r.push(-1!==a.indexOf(!0))}),-1===r.indexOf(!1)&&(f.push(e.value),d.push(e.status))}),g.forEach(function(e){var n=u.Dimension(e).id,r=0,i={};u.size[u.id.indexOf(e)]=t[e].length,n.forEach(function(n){-1!==t[e].indexOf(n)&&(i[n]=r,r++)}),u.__tree__.dimension[e].category.index=i}),u.n=f.length,u.value=u.__tree__.value=Dz(c)?function(t,e){return e.from(t)}(f,c.constructor):f,u.status=u.__tree__.status=null!==h?d:null),i?((l=u.__tree__).hasOwnProperty("id")||(l.version="2.0",l.hasOwnProperty("class")||(l.class="dataset"),l.id=l.dimension.id,l.size=l.dimension.size,delete l.dimension.id,delete l.dimension.size,l.dimension.hasOwnProperty("role")&&(l.role=l.dimension.role,delete l.dimension.role)),l.hasOwnProperty("status")&&-1!==["null","{}","[]"].indexOf(JSON.stringify(l.status))&&delete l.status,l.hasOwnProperty("role")&&(delete l.role.classification,["geo","time","metric"].forEach(function(t){null===l.role[t]&&delete l.role[t]})),a&&p(l,"value"),o&&l.hasOwnProperty("status")&&p(l,"status"),JSON.stringify(l)):u},Oz.prototype.Slice=function(t){if(null===this||"dataset"!==this.class||0===Object.entries(this.value).length)return null;if(void 0===t)return this;if(!Array.isArray(t)){var e,n=[];for(e in t)n.push([e,t[e]]);t=n}return this.Dice(t.map(function(t){return[t[0],[t[1]]]}))},Oz.prototype.Data=function(t,e){var n,r,i=[],a=function(t){for(var e in t)if(t.hasOwnProperty(e))return e};if(null===this||"dataset"!==this.class||null===this.value)return null;if(void 0===t){for(r=this.value.length,n=0;n<r;n++)i.push(this.Data(n));return i}if("boolean"!=typeof e&&(e=!0),"number"==typeof t){var o=this.value[t];return void 0===o?null:e?{value:o,status:this.status?this.status[t]:null}:o}var s="object",l=this.__tree__,c=l.size||l.dimension&&l.dimension.size,u=c.length;if(Array.isArray(t)){if(!Array.isArray(t[0])){if(this.length!==t.length)return null;var h=1,f=0,d=[],p=[];for(n=0;n<u;n++)if(void 0!==t[n]){if("number"!=typeof t[n]||t[n]>=c[n])return null;f+=(h*=n>0?c[u-n]:1)*t[u-n-1]}else d.push(n),p.push(c[n]);if(d.length>1)return null;if(1===d.length){for(var g=0,v=p[0];g<v;g++){var _=[];for(n=0;n<u;n++)n!==d[0]?_.push(t[n]):_.push(g);i.push(this.Data(_,e))}return i}return e?{value:this.value[f],status:this.status?this.status[f]:null}:this.value[f]}s="array"}var m=function(t,e,n){var r,i=[],o={},s=t.dimension,l=t.id||s.id,c=t.size||s&&s.size;if("array"===n){for(r=e.length;r--;)o[e[r][0]]=e[r][1];e=o}for(var u=0,h=l.length;u<h;u++){var f=l[u],d=e[f];i.push("string"==typeof d?d:1===c[u]?a(s[f].category.index):null)}return i}(l,t,s),y=[],b=l.dimension,x=l.id||b.id;for(n=0,r=m.length;n<r;n++)y.push(b[x[n]].category.index[m[n]]);return this.Data(y,e)},Oz.prototype.toTable=function(t,e){if(null===this||"dataset"!==this.class||null===this.value)return null;1==arguments.length&&"function"==typeof t&&(e=t,t=null),"arrobj"!==(t=t||{field:"label",content:"label",vlabel:"Value",slabel:"Status",type:"array",status:!1,unit:!1,by:null,prefix:"",drop:[],meta:!1,comma:!1,bylabel:!1}).type&&"objarr"!==t.type||void 0!==t.field||(t.field="id");var n,r,i,a,o,s,l,c,u,h="id"===t.field,f=function(t){return(h?"value":t)||"Value"},d=function(t){return(h?"status":t)||"Status"},p=this.__tree__,g=!0===t.status;if("function"==typeof e){n=this.toTable(t);var v=[],_="array"!==t.type?0:1;for(o=(R="object"!==t.type?n.slice(_):n.rows.slice(0)).length,r=0;r<o;r++){var m=e.call(this,R[r],r);void 0!==m&&v.push(m)}return"object"===t.type?{cols:n.cols,rows:v}:("array"===t.type&&v.unshift(n[0]),v)}if("arrobj"===t.type||"objarr"===t.type){var y=[],b=p.role&&p.role.metric,x=function(){},w={},M=this,S=M.id,C=t.by&&-1!==S.indexOf(t.by)?t.by:null,E=!0===t.meta,k=void 0!==t.drop&&Array.isArray(t.drop)?t.drop:[],A=!0===t.comma,T=!0===t.bylabel,P=M.value.constructor,F=function(e){var n,r={},i=f(t.vlabel);return"objarr"===t.type&&(n=null===C&&zz(P.name)?function(t){r[t]=t===i?P.from(e,function(e){return e[t]}):e.map(function(e){return e[t]})}:function(t){r[t]=e.map(function(e){return e[t]})},Object.keys(e[0]).forEach(n),e=r),E?(r={},S.forEach(function(t){var e=M.Dimension(t);r[t]={label:e.label,role:e.role,categories:{id:e.id,label:M.Dimension(t,!1)}}}),{meta:{label:M.label,source:M.source,updated:M.updated,id:S,status:g,unit:t.unit,by:C,bylabel:T,drop:null!==C&&k.length>0?k:null,prefix:null!==C?B||"":null,comma:A,dimensions:r},data:e}):e};C&&(t.field="id");var N=(n=this.toTable({field:t.field,vlabel:t.vlabel,slabel:t.slabel,content:t.content,status:g})).shift();if(null===C&&t.unit&&b){if("id"!==t.content)for(var L=b.length;L--;){var O=this.Dimension(b[L]);w[b[L]]={};for(var D=O.length;D--;)w[b[L]][O.Category(D).label]=O.id[D]}x=function(e,n){if(-1!==b.indexOf(e)){var r=p.dimension[e].category;r.unit?z.unit=r.unit["id"!==t.content?w[e][n]:n]:z.unit=null}},t.unit=!0}else t.unit=!1;for(o=n.length,r=0;r<o;r++){var z={};for(i=n[r].length;i--;)z[N[i]]=n[r][i],x(N[i],n[r][i]);y.push(z)}if(A&&y.forEach(function(t){null!==t.value&&(t.value=(""+t.value).replace(".",","))}),null!==C){var I,G={},R=[],j={},B=void 0!==t.prefix?t.prefix:"";k.forEach(function(t,e){(!M.Dimension(t)||M.Dimension(t).length>1)&&(k[e]="")});var U=S.filter(function(t){return t!==C&&-1===k.indexOf(t)}),W=M.Dimension(C);for(var q in"id"!==t.content?T?I=function(t,e,n){t[e][B+n[C]]=n.value}:(W.Category().forEach(function(t,e){j[t.label]=W.id[e]}),I=function(t,e,n){t[e][B+j[n[C]]]=n.value}):I=function(t,e,n){t[e][B+n[C]]=n.value},y.forEach(function(t){var e=function(t,e){var n=[];return e.forEach(function(e){n.push(t[e])}),n.join("\t")}(t,U);void 0===G[e]&&(G[e]=function(t,e){var n={};return e.forEach(function(e){n[e]=t[e]}),n}(t,U)),I(G,e,t,C)}),G)R.push(G[q]);return g=!1,F(R)}return F(y)}if("object"===t.type){var H="number"==typeof this.value[0]||null===this.value[0]?"number":"string";s=function(t,e){var n=h&&t||e||t;nt.push({id:t,label:n,type:"string"})},l=function(t,e,n){var r=f(t),i=d(e);n&&nt.push({id:"status",label:i,type:"string"}),nt.push({id:"value",label:r,type:H})},c=function(t){pt.push({v:t})},u=function(t){pt.push({v:t}),rt.push({c:pt})}}else s=function(t,e){var n=h&&t||e||t;nt.push(n)},l=function(t,e,n){var r=f(t),i=d(e);n&&nt.push(i),nt.push(r),et.push(nt)},c=function(t){pt.push(t)},u=function(t){pt.push(t),et.push(pt)};var Y=p.dimension,V=p.id||Y.id,$=p.size||Y.size,X=V.length;if(X!=$.length)return!1;var J=[],Z=1,K=(L=1,[]),Q=[],tt=[],et=[],nt=[],rt=[];for(r=0;r<X;r++){var it=V[r];s(it,Y[it].label),Z*=$[r],L*=$[r];var at=[];for(i=0;i<$[r];i++)for(var ot in Y[V[r]].category.index)if(Y[V[r]].category.index[ot]===i){var st="id"!==t.content&&Y[V[r]].category.label?Y[V[r]].category.label[ot]:ot;at.push(st)}J.push(at),K.push(L)}for(l(t.vlabel,t.slabel,g),o=J.length,r=0;r<o;r++){for(var lt=[],ct=0,ut=J[r].length;ct<ut;ct++)for(var ht=0;ht<Z/K[r];ht++)lt.push(J[r][ct]);Q.push(lt)}for(o=Q.length,r=0;r<o;r++){var ft=[],dt=0;for(a=0;a<Z;a++)ft.push(Q[r][dt]),++dt===Q[r].length&&(dt=0);tt.push(ft)}for(a=0;a<Z;a++){var pt=[];o=Q.length;for(var gt=0;gt<o;gt++)c(tt[gt][a]);g&&c(this.status?this.status[a]:null),u(this.value[a])}return"object"===t.type?{cols:nt,rows:rt}:et},Oz.prototype.node=function(){return this.__tree__},Oz.prototype.toString=function(){return this.class},Oz.prototype.Unflatten=function(t){if(null===this||"dataset"!==this.class||null===this.value||"function"!=typeof t)return null;const e=this.id,n=this.size,r=[];for(let i=0;i<this.n;i++){const a=this.Data(i),o={};let s=i;for(let t=e.length-1;t>=0;t--){const e=this.Dimension(t),r=this.id[t],i=n[t],a=s%i;e.Category(a);const l=e.id[a];s=Math.floor(s/i),o[r]=l}const l=t(o,a,i,r);void 0!==l&&r.push(l)}return r};var Gz=function(t){var e={__data:void 0,_data_:void 0,get:function(t){return t?e._data_?e._data_[t]:void 0:e._data_},getValue:function(t){var n=e.get(t);return n?n.value:void 0},set:function(t,n){e._data_=e._data_||{};var r=e._data_[t];return r?n.value?(r.value=n.value,r.status=n.status):r.value=n:e._data_[t]=n.value?n:{value:n},e},setData:function(t){return e.__data=t,e._data_={},Object.keys(t).forEach(function(n){return e.set(n,t[n])}),e},setManualMultiDate:function(t){for(var n in e._data_=e._data_||{},t){var r=t[n];for(var i in e._data_[n]={},r){var a=r[i];e._data_[n][i]={value:a}}}return e},getArray:function(){if(e._data_)return Object.values(e._data_).map(function(t){return t.value}).filter(function(t){return 0==t||t})},getUniqueValues:function(){return Object.values(e._data_).map(function(t){return t.value}).filter(function(t,e,n){return n.indexOf(t)===e})},getMin:function(){if(e._data_)return Object.values(e._data_).map(function(t){return t.value}).filter(function(t){return 0==t||t&&":"!==t}).reduce(function(t,e){return Math.min(t,e)})},getMax:function(){if(e._data_)return Object.values(e._data_).map(function(t){return t.value}).filter(function(t){return 0==t||t&&":"!==t}).reduce(function(t,e){return Math.max(t,e)})},getMaxRegionId:function(){if(e._data_){var t=-1/0,n=null;for(var r in e._data_){var i=e._data_[r].value;null!=i&&":"!==i&&i>t&&(t=i,n=r)}return n}},getMinRegionId:function(){if(e._data_){var t=1/0,n=null;for(var r in e._data_){var i=e._data_[r].value;null!=i&&":"!==i&&i<t&&(t=i,n=r)}return n}},isReady:function(){return null!=e._data_},metadata:void 0,unitText_:void 0,retrieveFromRemote:function(t,n,a){return e.eurostatDatasetCode_?r(t,n,a):e.csvURL_&&i(a),e},eurostatDatasetCode_:void 0,filters_:{lastTimePeriod:1},precision_:2,label_:void 0},n=function(t,n){return e.filters_.geo||(e.filters_.geoLevel=t+""=="0"?"country":"nuts"+t),Ru(function(t,e,n,r){n=n||"en",r=r||"json";var i=[];if(i.push("https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/",t,"?","format=",r,"&lang=",n),e)for(var a in e){var o=e[a];if(Array.isArray(o))for(var s=0;s<o.length;s++)i.push("&",a,"=",o[s]);else i.push("&",a,"=",o)}return i.join("")}(e.eurostatDatasetCode_,e.filters_,n))},r=function(t,r,i){e._data_=null,n(t,r).then(function(t){var n;if(t.error)return console.error("Error retrieving Eurostat data: "+(null===(n=t.error[0])||void 0===n?void 0:n.label));var r=function(t,e,n){var r="object"==typeof e?e:null;return"function"!=typeof n&&(n=null),n||"function"!=typeof e||(n=e),"object"==typeof t?new Oz(t,n):"version"===t?"1.6.0":fetch?fetch(t,r).then(Iz).then(function(t){return new Oz(t,n)}):void 0}(t);e.metadata={label:r.label,href:r.href,source:r.source,updated:r.updated,extension:r.extension},e.metadata.time=r.Dimension("time").id[0],e._data_=function(t){for(var e={},n=t.Dimension("geo").id,r=0;r<n.length;r++)e[n[r]]=t.Data(r);return e}(r),Object.keys(e._data_).forEach(function(t){null===e._data_[t].value&&(e._data_[t].value=":")}),i&&i()})};e.getTime=function(){var t=e.filters_.time;return t||(e._data_?e.metadata.time:void 0)},e.csvURL_=void 0,e.geoCol_="geo",e.valueCol_="value";var i=function(t){e._data_=null,Du(e.csvURL_).then(function(n){e._data_=function(t,e,n){for(var r={},i=0;i<t.length;i++){var a=t[i],o=a[n];r[a[e]]=o?{value:isNaN(+o)?o:+o,status:""}:{value:":",status:""}}return r}(n,e.geoCol_,e.valueCol_),e.metadata={href:e.csvURL_},t&&t()})};if(["unitText_"].forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t)for(var a in t)e[a+"_"]=t[a];return e};function Rz(t,e){var n=t.map;n.patternFill_&&n.patternFill_.forEach(function(r,i){if(r.legendLabel){var a=i*t.shapeHeight+i*t.shapePadding+15,o=e.append("g").attr("class","em-legend-item em-pattern-legend-item"),s=r.color||"#000";("#fff"===s.toLowerCase()||"white"===s.toLowerCase())&&o.append("rect").attr("x",0).attr("y",a).attr("width",t.shapeWidth).attr("height",t.shapeHeight).attr("fill","#ddd"),o.append("rect").attr("class","em-legend-rect").attr("x",0).attr("y",a).attr("width",t.shapeWidth).attr("height",t.shapeHeight).attr("fill","url(#".concat(r.patternId||r.pattern,")")).on("mouseover",function(){jz(n,r.patternId||r.pattern),n.insetTemplates_&&GE(n.insetTemplates_,n.svgId,jz,r.patternId||r.pattern)}).on("mouseout",function(){Bz(n),n.insetTemplates_&&GE(n.insetTemplates_,n.svgId,Bz)}),o.append("text").attr("class","em-legend-label").attr("x",t.shapeWidth+t.labelOffsets.x).attr("y",a+t.shapeHeight/2).attr("dominant-baseline","middle").attr("dy","0.35em").text(r.legendLabel)}})}function jz(t,e){var n="url(#".concat(e,")"),r=UE(t);t.svg_.selectAll(r).selectAll("[ecl]").filter(function(){return!Dt(this).classed("pattern-fill-overlay")}).style("fill","white"),t.svg_.selectAll(".pattern-fill-overlay").style("opacity",0),t.svg_.selectAll(".pattern-fill-overlay").filter(function(){return Dt(this).attr("fill")===n}).style("opacity",1)}function Bz(t){t.svg_.selectAll(".pattern-fill-overlay").style("opacity",1);var e=UE(t);t.svg_.selectAll(e).selectAll("[ecl]").filter(function(){return!Dt(this).classed("pattern-fill-overlay")}).each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}var Uz=function(t,e,n){var r=t.histogram.orientation||"horizontal",i=t.histogram.showCounts,a=t.histogram.showPercentages,o=t.histogram.labelRotation||0,s=t.histogram.margin||{top:0,right:0,bottom:0,left:0},l=t.histogram.height||200,c=t.histogram.width||270,u=t.getNumberOfClasses(t),h=t.getLabelFormatter(t),f=t.getColorClassifier(t),d=new Array(u).fill(0),p=function(t){var e=t.map;return Object.values(e.statData()._data_).map(function(t){return t.value})}(t),g=function(t){var e=t.map;return e.colors_?e.colors_:Array.from({length:e.numberOfClasses_}).map(function(t,n){return e.classToFillStyle()(n,e.numberOfClasses_)})}(t),v=rI(t);p.forEach(function(t){var e=f(t);"number"==typeof e&&e>=0&&e<d.length&&d[e]++});var _=d.reduce(function(t,e){return t+e},0),m=t.lgg.append("g").attr("class","em-legend-histogram").attr("transform","translate(".concat(e,", ").concat(n,")"));function y(e,n){var r=Dt(this).style("stroke","black").attr("ecl"),i=g.length-1-parseInt(r,10);aI(t.map,i),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,aI,r)}function b(e,n){Dt(this).style("stroke","none");oI(t.map),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,oI)}"vertical"===r?function(e){var n=d.slice().reverse(),r=n.map(function(t){return _>0?t/_*100:0}),o=v.slice().reverse(),u=Mm().domain(n.map(function(t,e){return e})).range([s.top,l-s.bottom]).padding(.1),f=Qn().domain([0,It(n)]).nice().range([s.left,c-s.right]);e.selectAll("rect").data(n).join("rect").attr("class","em-legend-histogram-bar").attr("y",function(t,e){return u(e)}).attr("x",s.left).attr("height",u.bandwidth()).attr("width",function(t){return f(t)-s.left}).attr("fill",function(t,e){return g[g.length-e-1]}).attr("ecl",function(t,e){return e}).on("mouseover",y).on("mouseout",b),(i||a)&&e.selectAll("text.em-histogram-label").data(n).join("text").attr("class","em-legend-label em-histogram-label").attr("x",function(t){return f(t)+5}).attr("y",function(t,e){return u(e)+u.bandwidth()/2}).attr("alignment-baseline","middle").text(function(t,e){return a?"".concat(r[e].toFixed(1),"%"):n[e]});var p=e.append("g").attr("id","em-legend-histogram-y-axis").attr("transform","translate(".concat(s.left,",0)"));if("thresholds"===t.labelType){for(var m=[],x=0;x<o.length;x++){var w=u(x);void 0!==w&&m.push(w+u.bandwidth())}var M=Qn().domain([0,l]).range([0,l]);p.call(ba(M).tickValues(m).tickFormat(function(t,e){return h?h(o[e],e):o[e]}).tickSize(4).tickSizeOuter(0))}else"ranges"===t.labelType&&p.call(ba(u).tickSizeOuter(0).tickSize(0).tickFormat(function(t,e){return h?h(o[e],e):o[e]}));p.selectAll("text").attr("class","em-legend-label em-tick-label").attr("text-anchor","end")}(m):function(e){var n=d.slice().reverse(),r=n.map(function(t){return _>0?t/_*100:0}),u=g.slice().reverse(),f=Mm().domain(n.map(function(t,e){return e})).range([s.left,c-s.right]).padding(.1),p=Qn().domain([0,It(n)]).nice().range([l-s.bottom,s.top]);e.selectAll("rect").data(n).join("rect").attr("class","em-legend-histogram-bar").attr("x",function(t,e){return f(e)}).attr("y",function(t){return p(t)}).attr("width",f.bandwidth()).attr("height",function(t){return l-s.bottom-p(t)}).attr("fill",function(t,e){return u[e]}).attr("ecl",function(t,e){return e}).on("mouseover",y).on("mouseout",b),(i||a)&&e.selectAll("text.em-histogram-label").data(n).join("text").attr("class","em-legend-label em-histogram-label").attr("x",function(t,e){return f(e)+f.bandwidth()/2}).attr("y",function(t){return p(t)-5}).attr("text-anchor","middle").text(function(t,e){return a?"".concat(r[e].toFixed(1),"%"):t});var m=e.append("g").attr("id","em-legend-histogram-x-axis").attr("transform","translate(0, ".concat(l-s.bottom,")"));if("thresholds"===t.labelType){for(var x=[],w=0;w<v.length;w++){var M=v.length-w-1,S=f(M);void 0!==S&&x.push(S+f.bandwidth())}var C=Qn().domain([0,c]).range([0,c]);m.call(ya(C).tickValues(x).tickFormat(function(t,e){return h?h(v[e],e):v[e]}).tickSize(4).tickSizeOuter(0)),m.selectAll("text").attr("class","em-legend-label em-tick-label").attr("text-anchor","end").attr("dy","0em").attr("dx","-0.45em").attr("transform","rotate(-".concat(o,")"))}else"ranges"===t.labelType&&(m.call(ya(f).tickSizeOuter(0).tickSize(0).tickFormat(function(t,e){return h?h(v[e],e):v[e]})),m.selectAll("text").attr("class","em-legend-label em-tick-label").attr("text-anchor","end").attr("dy","0.35em").attr("dx","-0.35em").attr("transform","rotate(-".concat(o,")")))}(m)};function Wz(t,e,n){t.map;t._continuousLegendContainer=t.lgg.append("g").attr("class","em-continuous-legend").attr("id","em-continuous-legend").attr("transform","translate(".concat(e,", ").concat(n,")"));var r="ps"==t.map._mapType?t.colorLegend:t,i="vertical"===r.orientation,a="legend-gradient-"+Math.random().toString(36).substr(2,5),o=t.width||6*t.shapeWidth,s=i?t.shapeWidth:t.shapeHeight;if(function(t,e,n){for(var r,i=t.map,a="function"==typeof(null===(r=i.colorFunction_)||void 0===r?void 0:r.domain),o=20,s=function(t){var e=t.valueTransform_||function(t){return t},n=qz(t);return n.map(e)}(i),l=b(3===s.length?s:[s[0],null,s[1]],3),c=l[0],u=l[1],h=l[2],f=t._continuousLegendContainer.append("defs").append("linearGradient").attr("id",e).attr("x1","0%").attr("x2",n?"0%":"100%").attr("y1",n?"100%":"0%").attr("y2","0%"),d=0;d<=o;d++){var p=d/o,g=void 0;g=3===s.length?p<.5?c+2*p*(u-c):u+2*(p-.5)*(h-u):c+p*(h-c);var v=i.colorFunction_(a?g:p);f.append("stop").attr("offset","".concat(100*p,"%")).attr("stop-color",v)}}(t,a,i),function(t,e,n,r,i){var a=Hz(e),o=e._continuousLegendContainer.append("rect").attr("class","em-legend-gradient").attr("id","em-legend-gradient").attr("x",0).attr("y",a).attr("width",i?r:n).attr("height",i?n:r).style("fill","url(#".concat(t,")"));!function(t,e,n,r){var i=e.map,a=qz(i),o=i.valueUntransform_||function(t){return t},s=e._continuousLegendContainer,l=Hz(e),c=function(t){return"ps"==t._mapType?Xz:Vz}(i),u=function(t){return"ps"==t._mapType?Jz:$z}(i);t.on("mousemove",function(t){var u,h=b(Oa(t,this),2),f=h[0],d=h[1],p=r?d-l:f,g=Math.max(0,Math.min(n,p)),v=g/n,_=r?1-v:v;if(3===a.length){var m=b(a,3),y=m[0],x=m[1],w=m[2];if(_<.5)u=y+(x-y)*(_/.5);else u=x+(w-x)*((_-.5)/.5)}else{var M=b(a,2),S=M[0];u=S+_*(M[1]-S)}u=o(u),s.selectAll(".em-hover-line, .em-hover-tick, .em-hover-label").remove();var C=r?0:g,E=r?g+l:0;s.append("line").attr("class","em-hover-line").attr("x1",C).attr("y1",E).attr("x2",r?C+e.shapeWidth:C).attr("y2",r?E:E+e.shapeHeight).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none"),s.append("circle").attr("class","em-hover-tick").attr("cx",r?C+e.shapeWidth:C).attr("cy",r?E:E+e.shapeHeight).attr("r",3).attr("fill","black").attr("pointer-events","none");var k=iI(e);s.append("text").attr("class","em-hover-label").attr("x",r?C+e.shapeWidth+5:C).attr("y",r?E:E+e.shapeHeight+12).attr("text-anchor",r?"start":"middle").attr("alignment-baseline","middle").attr("pointer-events","none").text(k(u)),c(i,u)}),t.on("mouseout",function(){s.selectAll(".em-hover-line, .em-hover-tick, .em-hover-label").remove(),u(i)})}(o,e,n,i)}(a,t,o,s,i),function(t){return t.ticks>1||t.tickValues}(t)?function(t,e,n,r){var i=t.map,a=qz(i),o=t._continuousLegendContainer.append("g").attr("class","em-legend-ticks"),s=iI(t),l=i.valueTransform_||function(t){return t},c=Hz(t),u=Array.isArray(t.tickValues)&&t.tickValues?t.tickValues.map(l):function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};if(Array.isArray(t)&&3===t.length){var r=b(t,3),i=r[0],a=r[1],o=r[2];return Array.from({length:e},function(t,r){var s=r/(e-1);return n(s<.5?i+2*s*(a-i):a+2*(s-.5)*(o-a))})}var s=b(t,2),l=s[0],c=s[1];return Array.from({length:e},function(t,r){return n(l+r/(e-1)*(c-l))})}(a,t.ticks,l);u.forEach(function(l,h){var f=function(t,e){if(3===e.length){var n=b(e,3),r=n[0],i=n[1],a=n[2];return t<i?.5*(t-r)/(i-r):.5+.5*(t-i)/(a-i)}return(t-e[0])/(e[1]-e[0])}(l,a);if(r){var d=n,p=e-f*e+c;o.append("line").attr("class","em-legend-tick").attr("x1",d).attr("y1",p).attr("x2",d+t.tickLength).attr("y2",p);var g=Array.isArray(t.tickLabels)&&null!=t.tickLabels[h]?t.tickLabels[h]:i.valueUntransform_?s(i.valueUntransform_(l)):s(l);o.append("text").attr("class","em-legend-label em-legend-ticklabel").attr("x",d+t.tickLength+3).attr("y",p).attr("dy","0.35em").attr("text-anchor","start").text(g)}else{var v=f*e,_=n+c;o.append("line").attr("class","em-legend-tick").attr("x1",v).attr("y1",_).attr("x2",v).attr("y2",_+t.tickLength);var m=Array.isArray(t.tickLabels)&&null!=t.tickLabels[h]?t.tickLabels[h]:i.valueUntransform_?s(i.valueUntransform_(l)):s(l);o.append("text").attr("class","em-legend-label em-legend-ticklabel").attr("x",v).attr("y",_+t.tickLength+10).attr("dy","0").attr("text-anchor",0===h?"start":h===u.length-1?"end":"middle").text(m)}})}(t,o,s,i):function(t,e,n,r){var i=Hz(t),a=t.lowLabel,o=t.highLabel,s=t.pointOfDivergenceLabel,l=t._continuousLegendContainer;if(r){var c=e,u=n+5;a&&l.append("text").attr("class","em-legend-label").attr("x",u).attr("y",i+c).attr("dy","-0.2em").attr("text-anchor","start").text(a),o&&l.append("text").attr("class","em-legend-label").attr("x",u).attr("y",i).attr("dy","0.8em").attr("text-anchor","start").text(o),s&&l.append("text").attr("class","em-legend-label").attr("x",u).attr("y",i+c/2).attr("dy","0.35em").attr("text-anchor","start").text(s)}else{var h=n+i+10;a&&l.append("text").attr("class","em-legend-label").attr("x",0).attr("y",h).attr("text-anchor","start").text(a),o&&l.append("text").attr("class","em-legend-label").attr("x",e).attr("y",h).attr("text-anchor","end").text(o),s&&l.append("text").attr("class","em-legend-label").attr("x",e/2).attr("y",h).attr("text-anchor","middle").text(s)}}(t,o,s,i),t.noData){var l=(i?t.width+5:s+30)+Hz(t);r.pointOfDivergence&&r.pointOfDivergencePadding&&(l+=r.pointOfDivergencePadding);var c=t._continuousLegendContainer.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(0,",").concat(l,")"));t.appendNoDataLegend(c,r.noDataText,Vz,$z)}}function qz(t){var e;return"function"==typeof(null===(e=t.colorFunction_)||void 0===e?void 0:e.domain)?t.colorFunction_.domain():t.domain_||[0,1]}function Hz(t){return"ps"==t.map._mapType?t.colorLegend.titlePadding:t.titlePadding}function Yz(t){var e,n,r;return t&&t.legend_&&null!==(e=null!==(n=t.legend_.highlightTolerance)&&void 0!==n?n:null===(r=t.legend_.colorLegend)||void 0===r?void 0:r.highlightTolerance)&&void 0!==e?e:1}function Vz(t,e){var n=Yz(t),r=UE(t),i=t.svg_.selectAll(r).selectAll("[ecl]");i&&i.each(function(){var t=Dt(this),r=t.attr("ecl");if(r&&"nd"!==r){var i=+r;i>=e-n&&i<=e+n?t.style("fill",Dt(this).attr("fill___")):t.style("fill","white")}else{if("nd"===e)return;t.style("fill","white")}})}function $z(t){var e=UE(t);t.svg_.selectAll(e).selectAll("[ecl]").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function Xz(t,e){var n=Yz(t);t.getCentroidsGroup(t).selectAll("[ecl]").each(function(){var r=Dt(this),i=r.attr("ecl");if(!i||"nd"===i)return"nd"===e?void r.style("opacity",t.psFillOpacity_):void r.style("opacity",0);var a=+i;a>=e-n&&a<=e+n?r.style("opacity",t.psFillOpacity_):r.style("opacity",0)})}function Jz(t){t.getCentroidsGroup(t).selectAll("[ecl]").each(function(){Dt(this).style("opacity",t.psFillOpacity_)})}function Zz(t,e,n){var r,i;t._discreteLegendContainer=t.lgg.append("g").attr("class","em-discrete-legend-container").attr("transform","translate(".concat(e,",").concat(n,")")),null!==(r=t.colorLegend)&&void 0!==r&&r.title&&t._discreteLegendContainer.append("text").attr("class","em-legend-title em-color-legend-title").attr("id","em-color-legend-title").attr("x",0).attr("y",0).text(t.colorLegend.title);var a="ps"==t.map._mapType?t.colorLegend:t;if("ranges"===t.labelType||"ranges"===(null===(i=t.colorLegend)||void 0===i?void 0:i.labelType)?function(t,e){for(var n=t.map,r=t._discreteLegendContainer,i=t.getLabelFormatter(t),a=t.getNumberOfClasses(t),o=t.getHighlightFunction(n),s=t.getUnHighlightFunction(n),l=t.getClassToFillStyle(t),c=t.getColorClassifier(t),u=Kz(t),h=function(){var n=f*e.shapeHeight+u,h=0,d=t.ascending?a-f-1:f,p=l(d,a),g=r.append("g").attr("class","em-legend-item");e.pointOfDivergenceLabel&&f>=e.pointOfDivergence&&(n+=e.pointOfDivergencePadding),g.append("rect").attr("class","em-legend-rect").attr("x",h).attr("y",n).attr("width",e.shapeWidth).attr("height",e.shapeHeight).style("fill",p).on("mouseover",function(){Dt(this).raise(),o(t.map,d),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,o,d)}).on("mouseout",function(){s(t.map),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,s,d)}),f>0&&g.append("line").attr("class","em-legend-separator").attr("x1",0).attr("y1",n).attr("x2",e.sepLineLength).attr("y2",n),g.append("text").attr("class","em-legend-label").attr("x",Math.max(e.shapeWidth,e.sepLineLength+e.tickLength)+(e.labelOffsets.x||0)).attr("y",n+e.shapeHeight/2).attr("dy","0.3em").text(e.labels?e.labels[f]:i(c.invertExtent(d)[t.ascending?0:1],f))},f=0;f<a;f++)h();if(e.pointOfDivergenceLabel)for(var d=0;d<a;d++){var p=d*e.shapeHeight+u;d==e.pointOfDivergence&&Qz(t,p,e)}}(t,a):function(t,e){var n,r,i,a,o,s,l=t.map,c=t._discreteLegendContainer,u=t.getNumberOfClasses(t),h=Kz(t),f=t.getHighlightFunction(l),d=t.getUnHighlightFunction(l),p=t.getColorClassifier(t),g=t.getClassToFillStyle(t),v=t.getColorStats(t),_=t.getLabelFormatter(t);if((t.maxMin||e.maxMin)&&v&&(null!=v&&v.getMin&&null!=v&&v.getMax&&(n=v.getMin(),r=v.getMax()),null!=v&&v.getMaxRegionId&&null!=v&&v.getMinRegionId)){var m,y,b,x;i=v.getMinRegionId(),a=v.getMaxRegionId();var w=l.Geometries.getAllRegionFeatures(),M=w.find(function(t){return t.properties.id===i}),S=w.find(function(t){return t.properties.id===a});M&&(o=(null===(m=M.properties)||void 0===m?void 0:m.na)||(null===(y=M.properties)||void 0===y?void 0:y.na)||i),S&&(s=(null===(b=S.properties)||void 0===b?void 0:b.na)||(null===(x=S.properties)||void 0===x?void 0:x.na)||a)}for(var C=function(n){var r=n*e.shapeHeight+h,i=0,a=t.ascending?u-n-1:n,o=g(a,u),s=c.append("g").attr("class","em-legend-item");if(s.append("rect").attr("class","em-legend-rect").attr("x",i).attr("y",r).attr("width",e.shapeWidth).attr("height",e.shapeHeight).style("fill",o).on("mouseover",function(){Dt(this).raise(),f(l,a),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,f,a)}).on("mouseout",function(){d(l),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,d,a)}),n>0&&s.append("line").attr("class","em-legend-separator").attr("x1",0).attr("y1",r).attr("x2",t.sepLineLength).attr("y2",r),n>0&&s.append("line").attr("class","em-legend-tick").attr("x1",e.sepLineLength).attr("y1",r).attr("x2",e.sepLineLength+e.tickLength).attr("y2",r),n<u-1){var v=s.append("text").attr("class","em-legend-label").attr("x",Math.max(e.shapeWidth,e.sepLineLength+e.tickLength)+(e.labelOffsets.x||0)).attr("y",r+e.shapeHeight).attr("dy","0.3em").text(function(){if(e.labels)return e.labels[n];if(null!=p&&p.invertExtent){var r=p.invertExtent(a);return _(r[t.ascending?0:1])}return l.noDataText_||""});e.pointOfDivergenceLabel&&n==e.pointOfDivergence-1&&v.attr("class","em-legend-label em-legend-label-divergence")}},E=0;E<u;E++)C(E);if((t.maxMin||e.maxMin)&&Number.isFinite(n)&&Number.isFinite(r)){var k=0,A=e.maxMinTickLength?e.sepLineLength+e.maxMinTickLength:e.sepLineLength+e.tickLength,T=e.maxMinTickLength?Math.max(e.shapeWidth,e.sepLineLength+e.maxMinTickLength)+(e.labelOffsets.x||0):Math.max(e.shapeWidth,e.sepLineLength+e.tickLength)+(e.labelOffsets.x||0),P=_(r)+(e.maxMinLabels?e.maxMinLabels[1]:""),F=_(n)+(e.maxMinLabels?e.maxMinLabels[0]:"");e.maxMinRegionLabels&&(P="".concat(_(r)," (").concat(s,")"),F="".concat(_(n)," (").concat(o,")"));var N=c.append("g").attr("class","em-legend-max-min-group"),L=h;N.append("line").attr("class","em-legend-tick em-legend-tick-max").attr("x1",k).attr("y1",L).attr("x2",A).attr("y2",L),N.append("text").style("pointer-events","all").style("cursor","pointer").on("mouseover",function(){var e=t.getNumberOfClasses(t);!function(t,e,n){var r=UE(t),i=e-1,a=t.svg_.selectAll(r).selectAll("[ecl]");a.style("fill","white"),a.filter("[ecl='"+i+"']").each(function(e){e.properties.id===n&&Dt(this).style("fill",t.hoverColor_)})}(l,e,a)}).on("mouseout",function(){oI(l)}).attr("class","em-legend-label em-legend-label-max").attr("x",T).attr("y",L).attr("dy","0.3em").text(P);var O=u*e.shapeHeight+h;N.append("line").attr("class","em-legend-tick em-legend-tick-min").attr("x1",k).attr("y1",O).attr("x2",A).attr("y2",O),N.append("text").style("pointer-events","all").style("cursor","pointer").on("mouseover",function(){!function(t,e){var n=UE(t),r=0,i=t.svg_.selectAll(n).selectAll("[ecl]");i.style("fill","white"),i.filter("[ecl='"+r+"']").each(function(n){n.properties.id===e&&Dt(this).style("fill",t.hoverColor_)})}(l,i)}).on("mouseout",function(){oI(l)}).attr("class","em-legend-label em-legend-label-min").attr("x",T).attr("y",O).attr("dy","0.3em").text(F)}if(e.pointOfDivergenceLabel)for(var D=0;D<u;D++){var z=D*e.shapeHeight+h;D==e.pointOfDivergence&&Qz(t,z,e)}}(t,a),a.noData){var o=t.getNumberOfClasses(t)*a.shapeHeight+Kz(t)+3;a.pointOfDivergence&&a.pointOfDivergencePadding&&(o+=a.pointOfDivergencePadding);var s=t._discreteLegendContainer.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(0,",").concat(o,")")),l=t.getHighlightFunction(t.map),c=t.getUnHighlightFunction(t.map);t.appendNoDataLegend(s,a.noDataText,l,c)}}function Kz(t){var e="ps"==t.map._mapType?t.colorLegend.titlePadding:0;return t.maxMin&&(e+=10),e}function Qz(t,e,n){var r,i,a,o=t._discreteLegendContainer.append("g").attr("class","em-legend-divergence-container");"ranges"==n.labelType&&(e+=n.pointOfDivergencePadding/2);var s=t._discreteLegendContainer.selectAll(".em-legend-label").nodes().reduce(function(t,e){return Math.max(t,e.getBBox().width)},0),l=t.divergingLineLength||t.shapeWidth+(null===(r=t.labelOffsets)||void 0===r?void 0:r.x)+s+(null===(i=t.labelOffsets)||void 0===i?void 0:i.x)+15;o.append("line").attr("x1",0).attr("y1",e).attr("x2",0+l).attr("y2",e).attr("class","em-legend-diverging-line");var c=t.pointOfDivergenceLabel.split("|");if(c.length>1){var u=t.divergingArrowLength||30,h=0+l;o.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",6).attr("markerHeight",6).attr("refX",0).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, ".concat(6," ").concat(3,", 0 ").concat(6)).attr("fill","black"),o.append("line").attr("class","em-legend-diverging-line").attr("x1",h).attr("y1",e).attr("x2",h).attr("y2",e-u).attr("marker-end","url(#arrowhead)"),o.append("line").attr("class","em-legend-diverging-line").attr("x1",h).attr("y1",e).attr("x2",h).attr("y2",e+u).attr("marker-end","url(#arrowhead)"),o.append("text").attr("class","em-legend-label").attr("x",h+10).attr("y",e-u+10).attr("dy","0.3em").text(c[0]),o.append("text").attr("class","em-legend-label").attr("x",h+10).attr("y",e+u-10).attr("dy","0.3em").text(c[1])}else o.append("text").attr("class","em-legend-diverging-label em-legend-label").attr("x",0+l+5).attr("y",e).attr("dy","0.3em").text(t.pointOfDivergenceLabel);"thresholds"!=t.labelType&&"thresholds"!=(null===(a=t.colorLegend)||void 0===a?void 0:a.labelType)||(c.length>1?t._discreteLegendContainer.selectAll(".em-legend-label-divergence").attr("x",0+l+10):t._discreteLegendContainer.selectAll(".em-legend-label-divergence").remove())}function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function eI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var nI=function(t,e){var n=II(t);if(n.labelType="thresholds",n.sepLineLength=n.shapeWidth,n.tickLength=4,n.decimals=0,n.labelOffsets={x:3,y:0},n.labels=null,n.histogram=null,n.pointOfDivergenceLabel=void 0,n.pointOfDivergence=void 0,n.pointOfDivergencePadding=7,n.divergingLineLength=void 0,n.divergingArrowLength=void 0,n.lowLabel="Low",n.highLabel="High",n.ticks=0,n.tickValues=void 0,n.tickLabels=void 0,n.orientation="vertical",e)for(var r in e)"histogram"===r&&"object"===qE(e[r])?n.histogram=eI({orientation:"horizontal",showCounts:!1,showPercentages:!1,labelRotation:0},e.histogram):n[r]=e[r];return n.update=function(){if(n.updateConfig(),n.updateContainer(),n.lgg.node()){var t=n.map;if(n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle(),!t.classToFillStyle())return;n.pointOfDivergenceLabel&&!n.pointOfDivergence&&(n.pointOfDivergence=t.numberOfClasses_/2);var e=n.getBaseY(),r=n.getBaseX();if(n.histogram?Uz(n,r,e):"continuous"===t.colorSchemeType_?Wz(n,r,e):Zz(n,r,e),t.opacityScale_){var i=n.lgg.node().getBBox().height+10;!function(t,e,n){var r,i=t.map,a=i.statData("alpha");if(a&&a.isReady()){var o=i.opacityScale_,s=o.domain()[0],l=o.domain()[1],c=iI(t);t._alphaLegendContainer=t.lgg.append("g").attr("class","alpha-legend-container").attr("transform","translate(".concat(e,",").concat(n,")"));for(var u=0;u<40;u++){var h=s+(l-s)*u/40;t._alphaLegendContainer.append("rect").attr("x",3*u).attr("y",0).attr("width",3).attr("height",10).style("fill","#000").style("opacity",o(h))}t._alphaLegendContainer.append("text").attr("x",0).attr("y",22).attr("class","em-legend-label").text(c(s)),t._alphaLegendContainer.append("text").attr("x",120).attr("y",22).attr("text-anchor","end").attr("class","em-legend-label").text(c(l)),t._alphaLegendContainer.append("text").attr("x",60).attr("y",-5).attr("text-anchor","middle").attr("class","em-legend-label").text((null===(r=a.unitText)||void 0===r?void 0:r.call(a))||"Transparency")}}(n,r,e+i)}if(n.map.patternFill_){var a=n.lgg.node().getBBox().height,o=n.lgg.append("g").attr("class","pattern-fill-legend").attr("transform","translate(".concat(n.getBaseX(),", ").concat(a+n.boxPadding+5,")"));Rz(n,o)}n.setBoxDimension()}},n.labelDecNb=function(t){return console.warn("labelDecNb is now DEPRECATED. Please use decimals instead."),n},n};function rI(t){var e=t.map,n=e.thresholds_.length>1?e.thresholds_:Array.from({length:e.numberOfClasses_}).map(function(n,r){return e.classifier().invertExtent(r)[t.ascending?0:1]}).slice(1);return n}function iI(t){if("ranges"==t.labelType){var e=rI(t);return t.labelFormatter||function(n,r){var i=Wn(".".concat(t.decimals,"f"));return 0===r?"> ".concat(i(e[e.length-1])):r===e.length?"< ".concat(i(e[0])):"".concat(i(e[e.length-r-1])," - < ").concat(i(e[e.length-r]),"  ")}}return t.labelType,t.labelFormatter||Wn(".".concat(t.decimals,"f"))}function aI(t,e){var n=UE(t),r=t.svg_.selectAll(n).selectAll("[ecl]");r.style("fill","white"),r.filter("[ecl='"+e+"']").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function oI(t){var e=UE(t);t.svg_.selectAll(e).selectAll("[ecl]").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function sI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Array.isArray(e)){var n=t.svg().select("defs");n.empty()&&(n=t.svg().append("defs"));var r={};e.forEach(function(e){var i,a=e.pattern,o=void 0===a?"hatching":a,s=e.regionIds,l=void 0===s?[]:s,c=e.color,u=void 0===c?"#000":c,h=e.strokeWidth,f=void 0===h?1:h,d=e.customPattern,p=e.spacing;if(d){var g=d.match(/id=['"]([^'"]+)['"]/);if(!g)return void console.warn("customPattern must include an id attribute.");i=g[1],t.svg().select("#".concat(i)).empty()&&n.node().insertAdjacentHTML("beforeend",d)}else{var v=u.replace("#","").toLowerCase();i="".concat(o,"-").concat(v,"-sw").concat(f),function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8,o=t.svg().select("defs");if(t.svg().select("#".concat(CSS.escape(e))).empty()){var s=o.append("pattern").attr("id",e).attr("patternUnits","userSpaceOnUse").attr("width",a).attr("height",a);"hatching"===n?s.append("path").attr("d","M-".concat(a/8,",").concat(a/8," l").concat(a/4,",-").concat(a/4," M0,").concat(a," l").concat(a,",-").concat(a," M").concat(a-a/8,",").concat(a+a/8," l").concat(a/4,",-").concat(a/4)).attr("stroke",r).attr("stroke-width",i):"crosshatch"===n?s.append("path").attr("d","M0,0 l".concat(a,",").concat(a," M").concat(a,",0 l-").concat(a,",").concat(a)).attr("stroke",r).attr("stroke-width",i):"dots"===n?s.append("circle").attr("cx",a/2).attr("cy",a/2).attr("r",i).attr("fill",r):(console.warn('Unknown pattern "'.concat(n,'", defaulting to hatching.')),s.append("path").attr("d","M-".concat(a/8,",").concat(a/8," l").concat(a/4,",-").concat(a/4," M0,").concat(a," l").concat(a,",-").concat(a," M").concat(a-a/8,",").concat(a+a/8," l").concat(a/4,",-").concat(a/4)).attr("stroke",r).attr("stroke-width",i))}}(t,i,o,u,f,p)}e.patternId=i,l.forEach(function(t){r[t]||(r[t]=[]),r[t].push(i)})}),t.svg().selectAll(BE(t)).each(function(t){var e,n=this,i=null==t||null===(e=t.properties)||void 0===e?void 0:e.id,a=r[i];if(a&&a.length){var o=Dt(this);a.forEach(function(t){var e=o.node().cloneNode(!0);Dt(e).attr("fill","url(#".concat(t,")")).attr("pointer-events","none").attr("class",(o.attr("class")||"")+"pattern-fill-overlay"),Dt(n.parentNode).append(function(){return e})})}})}else console.warn("patternFill expects an array of configs")}function lI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function cI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return uI(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uI(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function uI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hI(t,e){var r=function(r){var i,a,o,s,l,c=r.Geometries.centroidsFeatures||[];if(c.length){dI(r);var u,h=null!==(i=null===(a=r.dorlingStrength_)||void 0===a?void 0:a.x)&&void 0!==i?i:1,f=null!==(o=null===(s=r.dorlingStrength_)||void 0===s?void 0:s.y)&&void 0!==o?o:1,d=null!==(l=r.dorlingIterations_)&&void 0!==l?l:1,p=!1!==r.dorlingWorker_,g=r.dorlingWorkerD3URL_||"https://unpkg.com/d3@7/dist/d3.min.js",v=cI(c);try{for(v.s();!(u=v.n()).done;){var _,m=u.value,y=null===(_=r._projection)||void 0===_?void 0:_.call(r,m.geometry.coordinates);y?(m.x=y[0],m.y=y[1]):(m.x=NaN,m.y=NaN)}}catch(t){v.e(t)}finally{v.f()}var b=t.getCentroidsGroup(r).selectAll("g.em-centroid"),x=function(t){t.attr("transform",function(t){return!t||isNaN(t.x)||isNaN(t.y)?null:"translate(".concat(t.x,",").concat(t.y,")")})};if(!1===r.animateDorling_){if(p){console.log("Running Dorling simulation asynchronously in a Web Worker");var w=new Worker(new URL(n.p+n.u(222),n.b),{type:void 0});return w.postMessage({nodes:c.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lI(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t)}),radii:c.map(function(t){return e(t)}),strengthX:h,strengthY:f,iterations:d,d3URL:g}),void(w.onmessage=function(t){var e=t.data,n=e.type,i=e.nodes,a=e.progress,o=e.total;"progress"!==n?"end"===n&&i&&(c.forEach(function(t,e){t.x=i[e].x,t.y=i[e].y}),x(b),fI(1,r),w.terminate()):fI(a/o,r)})}for(var M=ph(c).force("x",_h(function(t){return t.properties.centroid[0]}).strength(h)).force("y",mh(function(t){return t.properties.centroid[1]}).strength(f)).force("collide",rh(function(t){return e(t)}).iterations(d)).stop(),S=Math.ceil(Math.log(M.alphaMin())/Math.log(1-M.alphaDecay())),C=0;C<S;C++)M.tick(),C%10==0&&x(b);return x(b),fI(1,r),M}return r.simulation=ph(c).force("x",_h(function(t){return t.properties.centroid[0]}).strength(h)).force("y",mh(function(t){return t.properties.centroid[1]}).strength(f)).force("collide",rh(function(t){return e(t)}).iterations(d)).on("tick",function(){return x(b)}),r.simulation}};r(t),t.insetTemplates_&&GE(t.insetTemplates_,t.svgId_,function(t){r(t)})}function fI(t,e){e.onDorlingProgress_&&e.onDorlingProgress_(t,e)}function dI(t){t.simulation&&(t.simulation.stop(),t.simulation.on("tick",null),t.simulation=null)}function pI(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Number).filter(function(t){return Number.isFinite(t)&&t>0}),r=It(n),i=zt(n);(!Number.isFinite(r)||r<=0)&&(r=1),(!Number.isFinite(i)||i<=0)&&(i=r);var a=Math.max(0,e),o=Hm().domain([0,r]).range([0,t]).clamp(!0);function s(t){var e=+t;return!Number.isFinite(e)||e<=0?0:Math.max(a,o(e))}return s.domain=function(){return[i,r]},s.maxSize=function(){return t},s.minSize=function(){return a},s.baseScale=function(){return o},s}function gI(t){!function(t){var e,n,r,i,a=null!==(e=null!==(n=null===(r=t.statData("size"))||void 0===r?void 0:r.getArray())&&void 0!==n?n:null===(i=t.statData())||void 0===i?void 0:i.getArray())&&void 0!==e?e:[],o="spike"===t.psShape_||"bar"===t.psShape_||"line"===t.psShape_,s=o?function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Number).filter(function(t){return Number.isFinite(t)&&t>0}),r=It(n),i=zt(n);(!Number.isFinite(r)||r<=0)&&(r=1),(!Number.isFinite(i)||i<=0)&&(i=r);var a=Math.max(0,e),o=Qn().domain([0,r]).range([0,t]).clamp(!0);function s(t){var e=+t;return!Number.isFinite(e)||e<=0?0:Math.max(a,o(e))}return s.domain=function(){return[i,r]},s.maxSize=function(){return t},s.minSize=function(){return a},s.baseScale=function(){return o},s}(a,t.psMaxSize_,t.psMinSize_||0):pI(a,t.psMaxSize_,t.psMinSize_||0);t.classifierSize(s)}(t),t.statData("color").getArray()&&function(t){var e=function(t){return x(Array(t).keys())};if("quantile"===t.psClassificationMethod_){var n=t.statData("color").getArray(),r=e(t.psClasses_);t.classifierColor(scaleQuantile().domain(n).range(r))}else if("equinter"===t.psClassificationMethod_){var i=t.statData("color").getArray(),a=e(t.psClasses_);t.classifierColor(scaleQuantize().domain([min(i),max(i)]).range(a)),t.makeClassifNice_&&t.classifierColor().nice()}else if("threshold"===t.psClassificationMethod_){t.psClasses(t.psThresholds().length+1);var o=e(t.psClasses_);t.classifierColor(scaleThreshold().domain(t.psThresholds()).range(o))}}(t)}function vI(t){if(t.svg_&&t.classifierColor_){var e=t.statData("color");t.svg_.selectAll(".em-centroid").attr("ecl",function(n){var r=e.get(n.properties.id);if(!r)return"nd";var i=r.value;return 0!==i&&!i||":"==i?"nd":+t.classifierColor_(+i)})}}function _I(t,e){var n=Oe(e||"#ffffff"),r=n?n.formatHex():"#ffffff",i=t.svgId_||"",a=function(t,e){return function(t,e){var n=e;t=t.replace(/^#/,""),3===t.length&&(t=t.split("").map(function(t){return t+t}).join(""));var r=parseInt(t,16),i=r>>16&255,a=r>>8&255,o=255&r;return i=Math.min(255,Math.round(i+(255-i)*n)),a=Math.min(255,Math.round(a+(255-a)*n)),o=Math.min(255,Math.round(o+(255-o)*n)),"#".concat((1<<24|i<<16|a<<8|o).toString(16).slice(1))}(t,e)}(r,t.psBrightenFactor_||.9);FE("#".concat(i,".em--ps .em-nutsrg"),"fill",a)}var mI=function(t,e){var n=t.svg().selectAll(BE(t)),r=MI(t);n.on("mouseover",function(n,i){var a=r.get(i.properties.id);0!==(null==a?void 0:a.value)&&":"!==(null==a?void 0:a.value)||(Dt(this).style("fill",t.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(i,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,i,this,t))}).on("mousemove",function(n,i){var a=r.get(i.properties.id);0!==(null==a?void 0:a.value)&&":"!==(null==a?void 0:a.value)||(e._tooltip&&e._tooltip.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,i,this,t))}).on("mouseout",function(n,i){var a=r.get(i.properties.id);if(0===(null==a?void 0:a.value)||":"===(null==a?void 0:a.value)){var o=Dt(this);o.style("fill",o.attr("fill___")),e._tooltip&&e._tooltip.mouseout(),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,i,this,t)}})},yI=function(t,e){t.svg().selectAll("g.em-centroid").on("mouseover",function(n,r){var i=Dt(this.childNodes[0]);i.attr("fill___",i.style("fill")),i.style("fill",e.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(r,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,r,this,t)}).on("mousemove",function(n,r){e._tooltip&&e._tooltip.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,r,this,t)}).on("mouseout",function(n,r){var i=Dt(this.childNodes[0]),a=i.attr("fill___");a&&(i.style("fill",a),e._tooltip&&e._tooltip.mouseout()),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,r,this,t)})},bI=function(t){var e=UI(t,!0,"ps");e.psShape_="circle",e.psCustomShape_,e.psCustomSVG_,e.psSpikeWidth_=7,e.psOffset_={x:0,y:0},e.psMaxSize_=30,e.psMinSize_=5,e.psBarWidth_=10,e.psMaxValue_=void 0,e.psMinValue_=void 0,e.psSizeScale_=void 0,e.psFill_="#009569",e.psFillOpacity_=1,e.psStroke_="#ffffff",e.psStrokeWidth_=.2,e.psStrokeOpacity_=1,e.psClasses_=5,e.psColors_=null,e.psColorFun_=Rw,e.psClassToFillStyle_=void 0,e.psBrightenFactor_=.9,e.psThresholds_=[0],e.psClassificationMethod_="quantile",e.makeClassifNice_=!0,e.classifierSize_=void 0,e.classifierColor_=void 0,e.tooltip_.textFunction=SI,e.psCodeLabels_=!1;var n=["psMaxSize_","psMinSize_","psMaxValue_","psMinValue_","psFill_","psFillOpacity_","psStrokeOpacity_","psStroke_","psStrokeWidth_","classifierSize_","classifierColor_","psShape_","psCustomShape_","psBarWidth_","psClassToFillStyle_","psColorFun_","psSizeScale_","noDataFillStyle_","psThresholds_","psColors_","psCustomSVG_","psOffset_","psClassificationMethod_","psClasses_","dorling_","dorlingStrength_","dorlingIterations_","animateDorling_","psSpikeWidth_","psCodeLabels_","psBrightenFactor_"];function r(t){_I(t,e.psFill_),e.psClassToFillStyle()||e.psClassToFillStyle(xI(e.psColorFun_,e.psColors_));var n,r,o=MI(t);t.svg_&&(t.svg_.selectAll(":not(#em-insets-group) g.em-centroid > *").remove(),e.updateSymbolsDrawOrder(t),r=e.psCustomSVG_?function(t,n){return t.getCentroidsGroup(t).selectAll("g.em-centroid").append("g").filter(function(t){var e=n.get(t.properties.id);if(e&&":"!==e.value)return t}).attr("class","ps").html(e.psCustomSVG_).attr("transform",function(t){var r=n.get(t.properties.id),i=e.classifierSize_(+r.value);if(i)return"translate(".concat(e.psOffset_.x*i,",").concat(e.psOffset_.y*i,") scale(").concat(i,")")})}(t,o):"bar"==e.psShape_?function(t,n){return t.getCentroidsGroup(t).selectAll("g.em-centroid").append("rect").filter(function(t){var e=n.get(t.properties.id);if(e&&":"!==e.value)return t}).attr("width",e.psBarWidth_).attr("height",function(t){var r=n.get(t.properties.id);return r&&r.value?e.classifierSize_(+r.value):0}).attr("transform",function(){this.getBoundingClientRect();return"translate(".concat(-this.getAttribute("width")/2)+", -".concat(this.getAttribute("height"),")")})}(t,o):"circle"==e.psShape_?function(t,n){var r=t.svg().selectAll("g.em-centroid").filter(function(t){var e=n.get(t.properties.id);return e&&":"!==e.value&&e.value}).append("circle").attr("stroke-width",e.psStrokeWidth()).attr("stroke",e.psStroke()).attr("fill-opacity",e.psFillOpacity()).attr("stroke-opacity",e.psStrokeOpacity()).style("pointer-events","none").transition().duration(e.transitionDuration()).attr("r",function(t){var r=n.get(t.properties.id),i=e.classifierSize_(+r.value);return i<0&&console.error("Negative radius for circle:",t.properties.id),isNaN(i)&&console.error("NaN radius for circle:",t.properties.id),i}).on("end",function(){Dt(this).style("pointer-events",null)});return r}(t,o):"spike"==e.psShape_?function(t,n){var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.psSpikeWidth_;return"M".concat(-n/2,",0L0,").concat(-t,"L").concat(n/2,",0")},i=t.svg().selectAll("g.em-centroid"),a=i.append("path").attr("d",function(t){var i=n.get(t.properties.id),a=i?e.classifierSize_(+i.value):0;return r(a)}).style("fill",function(t){return t.color||"steelblue"}).attr("fill-opacity",t.psFillOpacity_).attr("stroke",t.psStroke_).attr("stroke-width",t.psStrokeWidth_);return a}(t,o):function(t,n){return t.svg().selectAll("g.em-centroid").append("path").filter(function(t){var e=n.get(t.properties.id);if(e&&":"!==e.value)return t}).attr("class","ps").attr("d",function(t){if(n){var r=n.get(t.properties.id);if(0==r||r){var i=e.classifierSize_(+r.value)||0;if(e.psCustomShape_)return e.psCustomShape_.size(i*i)();var a=wI[e.psShape_]||wI.circle;return rC().type(a).size(i*i)()}}})}(t,o),i(t,o),function(t){t.attr("fill-opacity",e.psFillOpacity()).attr("stroke-opacity",e.psStrokeOpacity()).attr("stroke",e.psStroke()).attr("stroke-width",e.psStrokeWidth()).style("fill",function(){if(e.classifierColor_){var t=Dt(this.parentNode).attr("ecl");return t&&"nd"!==t?e.psClassToFillStyle_(t,e.psClasses_):e.noDataFillStyle_||"gray"}return e.psFill_}).attr("fill___",function(){return Dt(this).style("fill")})}(r),a(t,o),function(t,e){yI(t,e),mI(t,e)}(t,e),null!==(n=e.labels_)&&void 0!==n&&n.values&&e.updateValuesLabels(t),e.patternFill_&&sI(t,e.patternFill_));return t}n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.psColorFun=function(t){return arguments.length?(e.psColorFun_=t,e.psClassToFillStyle_=xI(e.psColorFun_,e.psColors_),e):e.psColorFun_},e.psThresholds=function(t){return arguments.length?(e.psThresholds_=t,e.psClasses(t.length+1),e):e.psThresholds_},e.updateClassification=function(){try{return gI(e),e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,vI),vI(e),e}catch(t){console.error("Error in proportional symbols classification: "+t.message),console.error(t)}};var i=function(t,n){var r=BE(t),i=t.svg().selectAll(r);if("WORLD"!==t.geo_){if("mixed"==t.nutsLevel_){!function(t,n,r){r.style("display",function(e){if(!this.parentNode.classList.contains("em-cntrg")){var r=n.get(e.properties.id);return!r||!r.value&&0!==r&&0!==r.value?"none":"WORLD"==t.geo_?"block":void 0}}),r.style("stroke",function(t){var e=Dt(this),r=e.attr("lvl"),i=e.style("stroke"),a=n.get(t.properties.id);if(a&&a.value)return"0"!==r?i||"#777":void 0}).style("stroke-width",function(t){var r=Dt(this),i=r.attr("lvl"),a=r.style("stroke-width"),o=n.get(t.properties.id);if(o&&o.value)return"WORLD"==e.geo_&&"0"!==i?a||"#777":void 0})}(t,n,i);var a=[];t.svg().selectAll("g.em-centroid").each(function(t){var e;null!==(e=t.properties)&&void 0!==e&&e.centroid&&a.push(t)}),t.Geometries.centroidsFeatures=a}i.attr("ecl",function(t){var e=n.get(t.properties.id);return!e||!e.value&&0!==e&&0!==e.value?"ni":e&&e.value&&":"==e.value?"nd":void 0}),i.style("fill",null),i.filter(function(t){var e=n.get(t.properties.id);return e&&":"===e.value}).style("fill",e.noDataFillStyle()).attr("fill___",e.noDataFillStyle())}},a=function(t,n){var r,i=t.svg().selectAll("g.em-centroid");if(e.psCodeLabels_)i.filter(function(t){var e=n.get(t.properties.id);return":"!==(null==e?void 0:e.value)&&null!=(null==e?void 0:e.value)}).append("text").attr("class","em-circle-code-label").text(function(t){var e=n.get(t.properties.id);return":"===(null==e?void 0:e.value)?"":t.properties.id}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-family","sans-serif").style("font-size",function(t){var r,i,a=n.get(t.properties.id),o=a?e.classifierSize_(+a.value):0,s=null!==(r=e.labels_)&&void 0!==r&&r.values&&null!==(i=n.get(t.properties.id))&&void 0!==i&&i.value?.8:.9;return"square"===e.psShape_&&(s-=.4),"".concat(o*s,"px")}).attr("fill",function(){var t,e=null===(t=window.getComputedStyle(this.parentNode.firstChild))||void 0===t?void 0:t.fill;return jE(e)}).attr("dy",function(t){var r,i;return null!==(r=e.labels_)&&void 0!==r&&r.values&&null!==(i=n.get(t.properties.id))&&void 0!==i&&i.value?"-0.3em":"0"});if(null!==(r=e.labels_)&&void 0!==r&&r.values)i.filter(function(t){var e=n.get(t.properties.id);return":"!==(null==e?void 0:e.value)&&null!=(null==e?void 0:e.value)}).append("text").attr("class","em-circle-stat-label").text(function(t){var e=n.get(t.properties.id);if(null!=e&&e.value)return e.value}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-family","sans-serif").style("font-size",function(t){var r=n.get(t.properties.id),i=r?e.classifierSize_(+r.value):0;return"".concat(.4*i,"px")}).attr("fill",function(){var t,n=(null===(t=window.getComputedStyle(this.parentNode.firstChild))||void 0===t?void 0:t.fill)||e.psFill_;return jE(n)}).attr("dy",function(t){return e.psCodeLabels_?"0.8em":"0"})};return e.updateSymbolsDrawOrder=function(t){var n=e.getCentroidsGroup(t),r=MI(t);t.Geometries.centroidsFeatures&&t.Geometries.centroidsFeatures.length||(t.Geometries.centroidsFeatures=t.svg().selectAll("g.em-centroid").data().filter(function(t){var e;return null==t||null===(e=t.properties)||void 0===e?void 0:e.centroid}));var i=t.Geometries.centroidsFeatures.filter(function(t){var e,n=null===(e=r.get)||void 0===e||null===(e=e.call(r,t.properties.id))||void 0===e?void 0:e.value;return null!=n&&":"!==n}).sort(function(t,e){return r.get(e.properties.id).value-r.get(t.properties.id).value});n.selectAll("g.em-centroid").remove(),n.selectAll("g.em-centroid").data(i,function(t){return t.properties.id}).enter().append("g").attr("class","em-centroid").attr("id",function(t){return"ps"+t.properties.id}).attr("transform",function(t){return"translate(".concat(t.properties.centroid[0].toFixed(3),",").concat(t.properties.centroid[1].toFixed(3),")")}),vI(t)},e.updateStyle=function(){try{if(r(e),e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),e.dorling_){var t=MI(e);hI(e,function(n){var r=t.get(n.properties.id),i=r?e.classifierSize_(+r.value):0;return"square"===e.psShape_?i/2*Math.SQRT2:i})}else dI(e);return e}catch(t){console.error("Error in proportional symbols styling: "+t.message),console.error(t)}},e.getLegendConstructor=function(){return LI},e},xI=function(t,e){return t=t||Rw,e?function(t,n){return e[t]}:function(e,n){return t(e/(n-1))}},wI={cross:LS,square:RS,diamond:zS,triangle:YS,star:qS,wye:QS,circle:NS};function MI(t){return t.statData("size").getArray()?t.statData("size"):t.statData()}var SI=function(t,e){var n,r;if(e.tooltip_.omitRegions&&e.tooltip_.omitRegions.includes(t.properties.id))return"";var i=t.properties.na,a=t.properties.id,o=function(t,e,n){return":"===t?n||"Data not available":zE(t)+(e?" "+e:"")},s=e.statData("size").getArray()?e.statData("size"):e.statData(),l=s.get(t.properties.id),c=(null===(n=s.unitText)||void 0===n?void 0:n.call(s))||"",u="<tr><td>".concat(o(null==l?void 0:l.value,c,e.noDataText_),"</td></tr>"),h="",f=null!==(r=e.statData("color"))&&void 0!==r&&r.getArray()?e.statData("color"):null;if(f){var d,p=f.get(t.properties.id),g=(null===(d=f.unitText)||void 0===d?void 0:d.call(f))||"";h="<tr><td>".concat(o(null==p?void 0:p.value,g,e.noDataText_),"</td></tr>")}return'\n    <div class="em-tooltip-bar">\n      <b>'.concat(i,"</b>").concat(a?" (".concat(a,")"):"",'\n    </div>\n    <div class="em-tooltip-text">\n      <table class="em-tooltip-table">\n        <tbody>\n          ').concat(u,"\n          ").concat(h,"\n        </tbody>\n      </table>\n    </div>\n  ").trim()};function CI(t,e,n,r,i){var a,o,s,l,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16;if(i){var u=NE("em-size-legend-title");c+=u,e.append("text").attr("class","em-size-legend-title").attr("id","em-size-legend-title").attr("x",0).attr("y",u).text(i)}var h=r.domain();n||(n=[h[1],h[0]]);var f=r(It(n)),d=f,p=2*f+c,g=e.append("g").attr("transform","translate(".concat(d,",").concat(p,")")).attr("class","em-circle-size-legend").attr("id","em-circle-size-legend").attr("text-anchor","right").style("fill","black").selectAll("g").data(n.filter(function(t){return r(t)})).join("g").attr("class","em-legend-item");g.append("circle").attr("class","em-legend-circle").style("fill","none").attr("stroke","black").attr("cy",function(t){return-r(t)}).attr("r",r);var v=(null===(a=t.sizeLegend)||void 0===a?void 0:a.labelFormatter)||zE;null!==(o=t.nodeSizeLegend)&&void 0!==o&&o.labelFormatter&&(v=t.nodeSizeLegend.labelFormatter);var _=(null===(s=t.sizeLegend)||void 0===s?void 0:s.labels)||(null===(l=t.nodeSizeLegend)||void 0===l?void 0:l.labels);return g.append("text").attr("class","em-legend-label").attr("dy","0.35em").attr("y",function(t,e){return-1-2*r(t)}).attr("x",f+5).text(function(t,e){return _&&_[e]?_[e]:v(t)}),g.append("line").style("stroke-dasharray",2).style("stroke","grey").attr("x1",2).attr("y1",function(t,e){return-1-2*r(t)}).attr("x2",f+5).attr("y2",function(t,e){return-1-2*r(t)}),t}function EI(t){var e,n=t.map,r=(null===(e=t.sizeLegend)||void 0===e?void 0:e.labelFormatter)||spaceAsThousandSeparator,i=n.classifierSize_.domain()[1],a=n.classifierSize_.domain()[0],o=n.classifierSize_(i),s=t.sizeLegend.values||[i,a],l=NE("em-legend-label"),c=l-2,u=t._sizeLegendContainer.append("g").attr("id","em-spike-legend");if(t.sizeLegend.title){var h=NE("em-size-legend-title");t.sizeLegend.titlePadding+=h,u.append("text").attr("class","em-size-legend-title").attr("id","em-size-legend-title").attr("x",0).attr("y",h).text(t.sizeLegend.title)}var f=u.append("g").attr("id","em-spike-items").attr("transform","translate(".concat(t.boxPadding,",").concat(t.sizeLegend.titlePadding,")")).attr("fill","black").attr("text-anchor","middle").style("font-size","".concat(l,"px")).selectAll().data(s).join("g").attr("transform",function(e,n){return"translate(".concat(40*n+t.boxPadding,",").concat(o+5,")")});f.append("path").attr("fill",n.psFill_).attr("fill-opacity",n.psFillOpacity_).attr("stroke",n.psStroke_).attr("stroke-width",n.psStrokeWidth_).attr("d",function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.psSpikeWidth_;return"M".concat(-e/2,",0L0,").concat(-t,"L").concat(e/2,",0")}(n.classifierSize_(t))}),f.append("text").attr("class","em-legend-label").attr("dy",c).text(function(t){return r(t)})}function kI(t,e,n,r,i){var a=t.map;null==t.sizeLegend._cursorY&&(t.sizeLegend._cursorY=t.boxPadding+(t.sizeLegend.title?t.titleFontSize+t.sizeLegend.titlePadding:0));var o=a.classifierSize_(a.classifierSize_.domain()[1]),s=o,l=t.sizeLegend._cursorY+t.sizeLegend.shapePadding,c=t._sizeLegendContainer.append("g").attr("transform","translate(".concat(s,",").concat(l,")")).attr("class","em-size-legend-item"),u=function(t){var e,n=t.map;if(n.psCustomSVG_)e=n.psCustomSVG_;else if(n.psCustomShape_)e=n.psCustomShape_;else if("bar"==n.psShape_)e=symbol().type({draw:function(t,e){var r=Math.sqrt(e);t.moveTo(0,0),t.lineTo(0,r),t.lineTo(n.psBarWidth_,r),t.lineTo(n.psBarWidth_,0),t.lineTo(0,0),t.closePath()}});else{var r=wI[n.psShape_]||wI.circle;e=symbol().type(r)}return e}(t),h=u.size(n*n)();c.append("g").style("fill",function(e){return a.classifierColor_?t.sizeLegend.shapeFill:a.psFill_}).style("fill-opacity",a.psFillOpacity()).style("stroke",t.sizeLegend.shapeStroke?t.sizeLegend.shapeStroke:a.psStroke()).style("stroke-width",a.psStrokeWidth()).append("path").attr("d",h).attr("transform",function(){return"translate(".concat(t.sizeLegend.shapeOffsets.x,",").concat(t.sizeLegend.shapeOffsets.y,")")});var f=o/2+t.sizeLegend.labelOffsets.x+t.boxPadding;c.append("text").attr("class","em-legend-label").attr("dy","0.35em").attr("x",f).attr("y",0).text(i(e));var d=c.node().getBBox().height;t.sizeLegend._cursorY+=d+t.sizeLegend.shapePadding}function AI(t,e,n){var r=t.map;if(t._sizeLegendContainer=t.lgg.append("g").attr("class","em-size-legend-container").attr("id","em-size-legend-container").attr("transform","translate(".concat(e,",").concat(n,")")),t.sizeLegend._cursorY=null,r.psCustomSVG_||"circle"!==r.psShape_)if("spike"===r.psShape_)EI(t);else{var i,a=(null===(i=t.sizeLegend)||void 0===i?void 0:i.labelFormatter)||zE,o=r.classifierSize_.domain();r.customSymbols={nodeHeights:0},t.sizeLegend.values||(t.sizeLegend.values=[o[1],o[0]]);var s=t.sizeLegend.values.length;(!s||s<2)&&(console.warn("eurostat-map: sizeLegend.values length must be at least 2"),s=2);for(var l=1;l<s+1;l++){var c=t.sizeLegend.values[l-1],u=r.classifierSize_(c);"bar"===r.psShape_?PI(t,c,u,l,a):"custom"===r.psShape_||r.psCustomSVG_?TI(t,c,u,l,a):kI(t,c,u,0,a)}}else CI(t,t._sizeLegendContainer,t.sizeLegend.values,r.classifierSize_,t.sizeLegend.title,t.sizeLegend.titlePadding);t.sizeLegend.noData&&function(t){var e=t._sizeLegendContainer.node().getBBox(),n={default:20,bar:35,spike:30,circle:1,square:20},r=n[t.map.psShape_]||n.default,i=t.noDataShapeHeight,a=e.height+r+i/2,o=0,s=t._sizeLegendContainer.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(o,",").concat(a,")"));t.appendNoDataLegend(s,t.sizeLegend.noDataText,FI,NI)}(t)}function TI(t,e,n,r,i){var a,o=t.map,s=t.boxPadding;if(o.customSymbols.prevSymb||(a=t.boxPadding+(t.sizeLegend.title?t.titleFontSize+t.sizeLegend.titlePadding:0)+20,o.customSymbols.initialTranslateY=a,o.customSymbols.prevScale=n),o.customSymbols.prevSymb){var l=o.customSymbols.prevSymb.node().getBBox();o.customSymbols.nodeHeights=o.customSymbols.nodeHeights+l.height*o.customSymbols.prevScale,a=o.customSymbols.initialTranslateY+o.customSymbols.nodeHeights+t.sizeLegend.shapePadding*(r-1),o.customSymbols.prevScale=n}var c=t._sizeLegendContainer.append("g").attr("transform","translate(".concat(s,",").concat(a,")")).attr("class","em-size-legend-item");o.customSymbols.prevSymb=c.append("g").attr("class","em-size-legend-symbol").style("fill",function(e){return o.classifierColor_?t.sizeLegend.shapeFill:o.psFill_}).style("fill-opacity",o.psFillOpacity()).style("stroke",t.sizeLegend.shapeStroke?t.sizeLegend.shapeStroke:o.psStroke()).style("stroke-width",o.psStrokeWidth()).attr("stroke","black").attr("stroke-width",.5).append("g").html(o.psCustomSVG_).attr("transform",function(){return o.psCustomSVG_?"translate(".concat(t.sizeLegend.shapeOffsets.x,",").concat(t.sizeLegend.shapeOffsets.y,") scale(").concat(n,")"):"translate(".concat(t.sizeLegend.shapeOffsets.x,",").concat(t.sizeLegend.shapeOffsets.y,")")});var u=s+o.classifierSize_(o.classifierSize_.domain()[0])+t.sizeLegend.labelOffsets.x,h=t.sizeLegend.shapeOffsets.y/2+1;c.append("text").attr("class","em-legend-label").attr("dy","0.35em").attr("x",u).attr("y",h).text(i(e))}function PI(t,e,n,r,i){var a=t.map;null==t.sizeLegend._cursorY&&(t.sizeLegend._cursorY=t.boxPadding+(t.sizeLegend.title?t.titleFontSize+t.sizeLegend.titlePadding:0));var o=t.boxPadding,s=t.sizeLegend._cursorY+t.sizeLegend.shapePadding,l=function(t){var e,n=t.map;if(n.psCustomSVG_)e=n.psCustomSVG_;else if(n.psCustomShape_)e=n.psCustomShape_;else if("bar"==n.psShape_){var r=function(t,e){var r=Math.sqrt(e);t.moveTo(0,0),t.lineTo(0,r),t.lineTo(n.psBarWidth_,r),t.lineTo(n.psBarWidth_,0),t.lineTo(0,0),t.closePath()};e=rC().type({draw:r})}else{var i=wI[n.psShape_]||wI.circle;e=rC().type(i)}return e}(t),c=l.size(n*n)(),u=t._sizeLegendContainer.append("g").attr("class","em-size-legend-item").attr("transform","translate(".concat(o,",").concat(s,")"));u.append("g").style("fill",a.classifierColor_?t.sizeLegend.shapeFill:a.psFill_).style("fill-opacity",a.psFillOpacity()).style("stroke",t.sizeLegend.shapeStroke?t.sizeLegend.shapeStroke:a.psStroke()).style("stroke-width",a.psStrokeWidth()).append("path").attr("d",c).attr("transform",function(){return a.psCustomSVG_?"translate(".concat(t.sizeLegend.shapeOffsets.x,",").concat(t.sizeLegend.shapeOffsets.y,") scale(").concat(n,")"):"translate(".concat(t.sizeLegend.shapeOffsets.x,",").concat(t.sizeLegend.shapeOffsets.y,")")});var h=o+a.psBarWidth_+t.sizeLegend.labelOffsets.x,f=n/2+t.sizeLegend.labelOffsets.y;u.append("text").attr("class","em-legend-label").attr("dy","0.35em").attr("x",h).attr("y",f).text(i(e));var d=u.node().getBBox().height;t.sizeLegend._cursorY+=d+t.sizeLegend.shapePadding}function FI(t,e){var n=t.getCentroidsGroup(t).selectAll("[ecl]");n.each(function(t,e){Dt(this).style("opacity","0")}),n.filter("[ecl='"+e+"']").each(function(e,n){Dt(this).style("opacity",t.psFillOpacity_)})}function NI(t){t.getCentroidsGroup(t).selectAll("[ecl]").each(function(e,n){Dt(this).style("opacity",t.psFillOpacity_)})}var LI=function(t,e){var n=II(t);if(n.sizeLegend={title:null,titlePadding:15,values:void 0,cellNb:3,shapePadding:5,shapeOffsets:{x:0,y:0},shapeFill:"white",shapeStroke:null,labelOffsets:{x:10,y:0},decimals:0,labelFormatter:void 0,labels:null,noData:!1,noDataText:"No data",_totalBarsHeight:0,_totalD3SymbolsHeight:0},n.colorLegend={title:null,titlePadding:10,marginTop:30,shapeWidth:25,shapeHeight:20,shapePadding:1,labelOffsets:{x:5,y:0},decimals:0,labelFormatter:void 0,labelType:"thresholds",labels:null,noData:!0,noDataText:"No data",sepLineLength:24,sepLineStroke:"black",sepLineStrokeWidth:1,tickLength:5,pointOfDivergenceLabel:void 0,pointOfDivergence:void 0,pointOfDivergencePadding:7,divergingLineLength:void 0,divergingArrowLength:void 0},e)for(var r in e)if("colorLegend"==r||"sizeLegend"==r){for(var i in n[r])void 0!==e[r][i]&&(n[r][i]=e[r][i]);0==e.colorLegend&&(n.colorLegend=!1)}else n[r]=e[r];return n.update=function(){if(n.updateConfig(),n.updateContainer(),n.lgg.node()){n.lgg.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle(),n.sizeLegend._totalBarsHeight=0,n.sizeLegend._totalD3SymbolsHeight=0;var e=n.getBaseY(),r=n.getBaseX();if(t.classifierSize_&&AI(n,r,e),t.classifierColor_&&n.colorLegend){var i=r,a=e;n._sizeLegendContainer&&(a+=n._sizeLegendContainer.node().getBBox().height+n.colorLegend.marginTop),Zz(n,i,a)}if(n.map.patternFill_){var o=n.lgg.node().getBBox().height,s=n.lgg.append("g").attr("class","pattern-fill-legend").attr("transform","translate(".concat(r,", ").concat(o+n.boxPadding+5,")"));Rz(n,s)}n.setBoxDimension()}},n};function OI(t){if("ranges"==t.colorLegend.labelType){var e=function(t){var e=t.map,n=e.psThresholds_.length>1?e.psThresholds_:Array.from({length:e.psClasses_}).map(function(n,r){return e.classifier().invertExtent(r)[t.ascending?0:1]}).slice(1);return n}(t);return t.colorLegend.labelFormatter||function(n,r){var i=Wn(".".concat(t.decimals,"f"));return 0===r?"> ".concat(i(e[e.length-1])):r===e.length?"< ".concat(i(e[0])):"".concat(i(e[e.length-r-1])," - < ").concat(i(e[e.length-r]),"  ")}}return t.colorLegend.labelType,t.colorLegend.labelFormatter||Wn(".".concat(t.decimals,"f"))}function DI(t,e){var n=t.getCentroidsGroup(t).selectAll("[ecl]");n.each(function(t,e){Dt(this).style("opacity","0")}),n.filter("[ecl='"+e+"']").each(function(e,n){Dt(this).style("opacity",t.psFillOpacity_)})}function zI(t){t.getCentroidsGroup(t).selectAll("[ecl]").each(function(e,n){Dt(this).style("opacity",t.psFillOpacity_)})}var II=function(t){var e={};function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new WeakSet,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=i.maxDepth||100;if(a.has(t))return t;if(a.add(t),o>s)return console.warn("Max recursion depth (".concat(s,") reached.")),t;for(var l in e)if(e.hasOwnProperty(l)&&t.hasOwnProperty(l)){var c=e[l],u=t[l];"function"==typeof c?t[l]=c:r(c)&&r(u)?n(u,c,i,a,o+1):Array.isArray(c)&&Array.isArray(u)?t[l]=i.mergeArrays?x(new Set([].concat(x(u),x(c)))):x(c):c instanceof Date?t[l]=new Date(c.getTime()):c instanceof RegExp?t[l]=new RegExp(c):c instanceof Map?t[l]=new Map(c):c instanceof Set?t[l]=new Set(c):t[l]=c}return t}function r(t){return"[object Object]"===Object.prototype.toString.call(t)}return e.map=t,e.svgId="em-legend-container-"+Math.round(1e5*Math.random()),e.svg=void 0,e.lgg=void 0,e.x=void 0,e.y=void 0,e.boxPadding=7,e.boxOpacity=.7,e.title="",e.titleFontSize=NE("em-legend-title"),e.width=150,e.titlePadding=5,e.shapeWidth=25,e.shapeHeight=20,e.shapePadding=5,e.labelFontSize=NE("em-legend-label"),e.labelOffsets={x:5,y:5},e.labelFormatter=null,$n({decimal:".",thousands:" ",grouping:[3],currency:["",""]}),e.noData=!0,e.noDataText="No data",e.noDataPadding=5,e.noDataShapeWidth=25,e.noDataShapeHeight=20,e.ascending=!0,e.decimals=0,e.maxMin=!0,e.maxMinLabels=["",""],e.build=function(){e.svg=Dt("#"+e.svgId),e.svg.selectAll("*").remove(),e.lgg=e.svg.attr("class","em-legend")},e.update=function(){return console.log("Legend update function not implemented"),e},e.updateContainer=function(){var t=e.map;e.lgg.selectAll("*").remove(),e.svg.attr("id")!==t.legend_.svgId&&e.build()},e.updateConfig=function(){var t=e.map;t.legend_&&n(e,t.legend_)},e.makeBackgroundBox=function(){e.lgg.append("rect").attr("id","em-legend-background").attr("class","em-legend-background").style("opacity",e.boxOpacity)},e.addTitle=function(){if(e.title){var t=e.lgg.append("g").attr("id","em-legend-titles"),n=NE("em-legend-title");t.append("text").attr("class","em-legend-title").attr("x",e.boxPadding).attr("y",e.boxPadding+n).text(e.title)}},e.addSubtitle=function(){if(e.subtitle){var t=e.lgg.select("#em-legend-titles"),n=NE("em-legend-title"),r=NE("em-legend-subtitle");t.append("text").attr("class","em-legend-subtitle").attr("x",e.boxPadding).attr("y",e.boxPadding+n+r+3).text(e.subtitle)}},e.getBaseY=function(){return e.boxPadding+(e.title?NE("em-legend-title"):0)+(e.subtitle?NE("em-legend-subtitle"):0)+10},e.getBaseX=function(){return e.boxPadding},e.setBoxDimension=function(){if(e.lgg.node()){var t=e.lgg.node().getBBox({stroke:!0}),n=e.boxPadding;e.svg.select("#em-legend-background").attr("x",t.x-n).attr("y",t.y-n).attr("width",t.width+2*n).attr("height",t.height+2*n)}},e.appendNoDataLegend=function(t,n,r,i){var a=e.map;t.append("rect").attr("class","em-legend-rect").style("fill",a.noDataFillStyle()).attr("y",e.noDataPadding).attr("width",e.noDataShapeWidth).attr("height",e.noDataShapeHeight).on("mouseover",function(){r(a,"nd"),a.insetTemplates_&&GE(a.insetTemplates_,a.svgId,r,"nd")}).on("mouseout",function(){i(a),a.insetTemplates_&&GE(a.insetTemplates_,a.svgId,i,"nd")}),t.append("text").attr("class","em-legend-label em-legend-label-no-data").attr("dy","0.35em").attr("x",e.noDataShapeWidth+5).attr("y",e.noDataShapeHeight/2+e.noDataPadding).style("pointer-events","all").style("cursor","pointer").on("mouseover",function(){r(a,"nd"),a.insetTemplates_&&GE(a.insetTemplates_,a.svgId,r,"nd")}).on("mouseout",function(){i(a),a.insetTemplates_&&GE(a.insetTemplates_,a.svgId,i,"nd")}).text(n)},e.getNumberOfClasses=function(t){var e=t.map;return"ps"===e._mapType?e.psClasses_:e.numberOfClasses_},e.getLabelFormatter=function(t){return"ps"===t.map._mapType?OI(t):iI(t)},e.getClassToFillStyle=function(t){var e=t.map;return"ps"===e._mapType?e.psClassToFillStyle_:e.classToFillStyle_},e.getColorClassifier=function(t){var e=t.map;return"ps"===e._mapType?e.classifierColor_:e.classifier_},e.getColorStats=function(t){var e=t.map;return"ps"===e._mapType?e.statData("color"):e.statData()},e.getHighlightFunction=function(t){return"ps"==t._mapType?DI:aI},e.getUnHighlightFunction=function(t){return"ps"==t._mapType?zI:oI},e},GI=function(t){var e,n,r;function i(){r=Dt("#"+t.id),r.empty()&&(r=Dt("body").append("div").attr("id",t.id)),r.attr("class","em-tooltip")}return(t=t||{}).containerId=t.containerId||t.svgId||"map",t.id=t.id||"em-tooltip-".concat(t.containerId),t.offset={x:(null===(e=t.offset)||void 0===e?void 0:e.x)||t.xOffset||30,y:(null===(n=t.offset)||void 0===n?void 0:n.y)||t.yOffset||20},t.transitionDuration=0,t.opacity=t.opacity||1,i.mouseover=function(e){if(r.html(e),e){var n=event.pageX,a=event.pageY;i.ensureTooltipOnScreen(n,a),r.interrupt().transition().duration(t.transitionDuration).style("opacity",t.opacity)}},i.mousemove=function(t){var e=t.pageX,n=t.pageY;this.ensureTooltipOnScreen(e,n)},i.mouseout=function(){r.interrupt().transition().duration(t.transitionDuration).style("opacity",0)},i.style=function(t,e){return 1==arguments.length?r.style(t):(r.style(t,e),i)},i.attr=function(t,e){return 1==arguments.length?r.attr(t):(r.attr(t,e),i)},i.ensureTooltipOnScreen=function(e,n){var i=r.node();i.style.left=e+t.offset.x+"px",i.style.top=n-t.offset.y+"px";var a=document.getElementById(t.containerId).getBoundingClientRect(),o=a.width,s=a.height;if(i.offsetLeft>a.left+o-i.clientWidth){var l=e-i.clientWidth-t.offset.x;if(i.style.left=l+"px",i.offsetLeft+i.clientWidth>e){var c=e-i.clientWidth-t.offset.x;i.style.left=c+"px"}}i.offsetTop+i.clientHeight>a.top+s&&(i.style.top=i.offsetTop-i.clientHeight+"px")},i(),i},RI="em-loading-overlay";function jI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading",n=function(t){if(!t)return null;var e=t.querySelector("#".concat(RI));return e||((e=document.createElement("div")).id=RI,e.classList.add("is-hidden"),e.setAttribute("aria-hidden","true"),e.innerHTML='\n        <div class="em-spinner-stack" role="status" aria-live="polite">\n            <div class="em-loading-spinner" aria-hidden="true"></div>\n            <div class="em-loading-label">Loading</div>\n        </div>\n    ',t.appendChild(e),e)}(t);if(n){var r=n.querySelector(".em-loading-label");r&&(r.textContent=e),n.classList.remove("is-hidden"),n.setAttribute("aria-hidden","false")}}var BI=!1,UI=function(t,e,n){var r=Nz(t,e,n);if(r.stat_={default:void 0},r.stat=function(t,e){return arguments.length?2==arguments.length?(r.stat_[t]=e,r):"string"==typeof t||t instanceof String?r.stat_[t]:(r.stat_=t.default?t:{default:t},r):r.stat_.default},r.statData_={default:Gz(),color:Gz(),size:Gz(),v1:Gz(),v2:Gz(),v3:Gz()},r.statData=function(t,e){return arguments.length?1===arguments.length?(r.statData_[t]||(r.statData_[t]=Gz()),r.statData_[t]):(r.statData_[t]=e,r):r.statData_.default},r.noDataText_="No data available",r.language_="en",r.transitionDuration_=500,r.tooltip_.textFunction=void 0,r.filtersDefinitionFunction_=void 0,r.callback_=void 0,r.legend_=void 0,r.legendObj_=void 0,["legend_","legendObj_","noDataText_","language_","transitionDuration_","tooltipText_","filtersDefinitionFunction_","callback_"].forEach(function(t){r[t.substring(0,t.length-1)]=function(e){return arguments.length?(r[t]=e,r):r[t]}}),t)for(var i in t)r[i]&&null!=t[i]&&r[i](t[i]);r.legend=function(t){if(!arguments.length)return r.legend_;if(0==t){var e=r.legendObj();if(e){var n=Dt("#"+e.svgId);n.size()>0&&n.selectAll("*").remove()}return r.legend_=t,r}return r.legend_=t,r.legendObj_&&r.updateLegend(),r},r.updateLegend=function(t){return r.legendObj_&&r.legendObj().update(),r},r.build=function(){return r.projectionFunction_&&r.proj("4326"),r.buildMapTemplateBase(),r.filtersDefinitionFunction_&&r.filtersDefinitionFunction_(r.svg(),r.numberOfClasses_),r.legend()&&r.buildLegend(),r.tooltip_||r.tooltip_||(r.tooltip_={id:r.svgId()}),r._tooltip=GI(r.tooltip_),r.updateGeoData(),r.updateStatData(),r},r.updateLoader=function(){!r.isInset&&r._wrapper_&&(r._loadingGeo_||r._loadingStat_?jI(r._wrapper_,"Loading"):function(t){if(t){var e=t.querySelector("#".concat(RI));e&&(e.classList.add("is-hidden"),e.setAttribute("aria-hidden","true"))}}(r._wrapper_))},r.buildLegend=function(){r.legendObj(r.getLegendConstructor()(r,r.legend()));var t=r.legendObj();if(0==Dt("#"+t.svgId).size()){var e=null==t.x?r.width()-100-t.boxPadding:t.x,n=null==t.y?t.boxPadding:t.y;r.svg().append("g").attr("id",t.svgId).attr("class","em-legend").attr("transform","translate("+e+","+n+")")}t.build()};var a=function(){for(var t in r.statData_){var e=!!r.stat_[t],n=!(!r.statData_[t]||!r.statData_[t].get());if((e||n)&&!r.statData_[t].isReady())return!1}return!0};r.updateGeoData=function(){return r._loadingGeo_=!0,r.updateLoader(),r.updateGeoMapTemplate(function(){r._loadingGeo_=!1,r.updateLoader(),a()&&(BI||(BI=!0,Promise.resolve().then(function(){BI=!1,r.updateStatValues(),r.callback()&&r.callback()(r)})))}),r},r.updateStatData=function(){var t=o();for(var e in t&&(r._loadingStat_=!0,r.updateLoader()),r.stat_){var n,i,s=r.stat(e),l=null===(n=(i=r.statData(e)).get)||void 0===n?void 0:n.call(i);if((s||l)&&s){var c=Gz(s);r.statData(e,c);var u=r.nutsLevel_;"mixed"===u&&(u=0),c.retrieveFromRemote(u,r.language(),function(){r.Geometries.isGeoReady()&&a()&&(BI||(BI=!0,Promise.resolve().then(function(){r._loadingStat_=!1,r.updateLoader(),BI=!1,r.updateStatValues(),r.callback()&&r.callback()(r)})))})}}return r};var o=function(){for(var t in r.stat_){var e=r.stat_[t];if(e&&(e.eurostatDatasetCode_||e.csvURL_))return!0}return!1};function s(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return r.updateStatValues=function(){return e&&(r.insetTemplates_&&GE(r.insetTemplates_,r.svgId_,r.refreshCentroids),r.refreshCentroids(r)),r.updateClassification(),r.updateStyle(),r.legend_&&r.legendObj()&&r.legendObj().update(),r},r.updateClassification=function(){return console.log("Map updateClassification function not implemented"),r},r.updateStyle=function(){return console.log("Map updateStyle function not implemented"),r},r.getLegendConstructor=function(){return console.log("Map getLegendConstructor function not implemented"),II},r.getTime=function(){return r.statData("default").getTime()},r.setFromURL=function(){var t=WI();return t.w&&r.width(t.w),t.h&&r.height(t.h),t.x&&t.y&&r.geoCenter([t.x,t.y]),t.z&&r.pixelSize(t.z),t.s&&r.scale(t.s),t.lvl&&r.nutsLevel(t.lvl),t.time&&(r.filters_.time=t.time,delete r.filters_.lastTimePeriod),t.proj&&r.proj(t.proj),t.geo&&r.geo(t.geo),t.ny&&r.nutsYear(t.ny),t.language&&r.language(t.language),t.numberOfClasses&&r.numberOfClasses(+t.numberOfClasses),r},r.exportMapToSVG=function(){var t=r.svg_.node().cloneNode(!0);t.hasAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.hasAttribute("xmlns:xlink")||t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),document.body.appendChild(t),OE(t),DE(t),document.body.removeChild(t);var e=function(t){var e='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n'+t.outerHTML;e=e.replace(/&nbsp;/g,"&#160;").replace(/&copy;/g,"&#169;").replace(/&reg;/g,"&#174;").replace(/&times;/g,"&#215;").replace(/&deg;/g,"&#176;");var n=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(n)}(t),n=document.createElement("a");return n.href=e,n.download="eurostatmap.svg",document.body.appendChild(n),n.click(),document.body.removeChild(n),r},r.exportMapToPNG=function(){var t=Fr(Lr().mark(function t(e,n){var i,a,o,l,c,u,h,f,d,p,g,v,_;return Lr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((i=r.svg_.node().cloneNode(!0)).hasAttribute("xmlns")||i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.hasAttribute("xmlns:xlink")||i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),document.body.appendChild(i),!document.fonts||!document.fonts.ready){t.next=4;break}return t.prev=1,t.next=2,document.fonts.ready;case 2:t.next=4;break;case 3:t.prev=3,_=t.catch(1),console.warn("document.fonts.ready failed",_);case 4:return OE(i),DE(i),i.querySelector("rect[data-export-background]")||(a=i.getAttribute("width")||i.viewBox.baseVal.width||i.getBoundingClientRect().width,o=i.getAttribute("height")||i.viewBox.baseVal.height||i.getBoundingClientRect().height,(l=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x",0),l.setAttribute("y",0),l.setAttribute("width",String(a)),l.setAttribute("height",String(o)),l.setAttribute("fill","#ffffff"),l.setAttribute("data-export-background","true"),i.insertBefore(l,i.firstElementChild)),c=new XMLSerializer,u=c.serializeToString(i),document.body.removeChild(i),h=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),f=URL.createObjectURL(h),d=Math.round(e||parseFloat(i.getAttribute("width"))||800),p=Math.round(n||parseFloat(i.getAttribute("height"))||600),(g=new Image).crossOrigin="anonymous",v=function(t){try{URL.revokeObjectURL(f)}catch(t){}if(t)try{URL.revokeObjectURL(t)}catch(t){}},g.onload=function(){try{var t=document.createElement("canvas");t.width=d,t.height=p;var e=t.getContext("2d");e.fillStyle="#ffffff",e.fillRect(0,0,d,p),e.drawImage(g,0,0,d,p),t.toBlob(function(t){if(!t)return console.error("canvas.toBlob returned null  likely CORS/taint issue."),window.open().document.write("<pre>"+s(u)+"</pre>"),void v();var e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="eurostat-map.png",document.body.appendChild(n),n.click(),document.body.removeChild(n),v(e)},"image/png")}catch(t){console.error("Error drawing SVG to canvas:",t),window.open().document.write("<pre>"+s(u)+"</pre>"),v()}},g.onerror=function(t){console.error("Image failed to load for export. Likely CORS or invalid SVG. Error:",t),window.open().document.write("<pre>"+s(u)+"</pre>"),v()},g.src=f,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,null,[[1,3]])}));return function(e,n){return t.apply(this,arguments)}}(),r},WI=function(){for(var t={},e=["w","h","x","y","z","s","lvl","time","proj","geo","ny","language","sl","numberOfClasses"],n=0;n<e.length;n++)t[e[n]]=getURLParameterByName(e[n]);return t};function qI(t){return t.slice().sort(function(t,e){return t-e})}function HI(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],a=0;a<e;a++)i.push(0);n.push(i)}return n}function YI(t,e,n,r){var i;if(t>0){var a=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*a*a}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function VI(t,e,n,r,i,a,o){if(!(t>e)){var s=Math.floor((t+e)/2);r[n][s]=r[n-1][s-1],i[n][s]=s;var l=n;t>n&&(l=Math.max(l,i[n][t-1]||0)),l=Math.max(l,i[n-1][s]||0);var c,u,h,f=s-1;e<r[0].length-1&&(f=Math.min(f,i[n][e+1]||0));for(var d=f;d>=l&&!((c=YI(d,s,a,o))+r[n-1][l-1]>=r[n][s]);--d)(u=YI(l,s,a,o)+r[n-1][l-1])<r[n][s]&&(r[n][s]=u,i[n][s]=l),l++,(h=c+r[n-1][d-1])<r[n][s]&&(r[n][s]=h,i[n][s]=d);VI(t,s-1,n,r,i,a,o),VI(s+1,e,n,r,i,a,o)}}function $I(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=qI(t),r=function(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}(n);if(1===r)return[n];var i=HI(e,n.length),a=HI(e,n.length);!function(t,e,n){for(var r=e[0].length,i=t[Math.floor(r/2)],a=[],o=[],s=0,l=void 0;s<r;++s)l=t[s]-i,0===s?(a.push(l),o.push(l*l)):(a.push(a[s-1]+l),o.push(o[s-1]+l*l)),e[0][s]=YI(0,s,a,o),n[0][s]=0;for(var c=1;c<e.length;++c)VI(c<e.length-1?c:r-1,r-1,c,e,n,a,o)}(n,i,a);for(var o=[],s=a[0].length-1,l=a.length-1;l>=0;l--){var c=a[l][s];o[l]=n.slice(c,s+1),l>0&&(s=c-1)}return o}function XI(t,e){if(e>t.length)return null;t=t.slice().sort(function(t,e){return t-e});var n=function(t,e){var n,r,i=[],a=[],o=0;for(n=0;n<t.length+1;n++){var s=[],l=[];for(r=0;r<e+1;r++)s.push(0),l.push(0);i.push(s),a.push(l)}for(n=1;n<e+1;n++)for(i[1][n]=1,a[1][n]=0,r=2;r<t.length+1;r++)a[r][n]=Number.POSITIVE_INFINITY;for(var c=2;c<t.length+1;c++){for(var u=0,h=0,f=0,d=0,p=1;p<c+1;p++){var g=c-p+1,v=t[g-1];if(o=(h+=v*v)-(u+=v)*u/++f,0!=(d=g-1))for(r=2;r<e+1;r++)a[c][r]>=o+a[d][r-1]&&(i[c][r]=g,a[c][r]=o+a[d][r-1])}i[c][1]=1,a[c][1]=o}return{lowerClassLimits:i,varianceCombinations:a}}(t,e);return function(t,e,n){var r=t.length,i=[],a=n;for(i[n]=t[t.length-1];a>0;)i[a-1]=t[e[r][a]-1],r=e[r][a]-1,a--;return i}(t,n.lowerClassLimits,e)}var JI=function(){this.totalCount=0,this.data={}};JI.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},JI.prototype.score=function(t){var e,n={};for(var r in t){var i=t[r];for(e in this.data)n[e]={},this.data[e][r]?n[e][r+"_"+i]=(this.data[e][r][i]||0)/this.totalCount:n[e][r+"_"+i]=0}var a={};for(e in n)for(var o in a[e]=0,n[e])a[e]+=n[e][o];return a};var ZI=function(){this.weights=[],this.bias=0};ZI.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return(e+=this.bias)>0?1:0},ZI.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if("number"==typeof n&&n!==e){for(var r=e-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*t[i];this.bias+=r}return this};Math.log(Math.sqrt(2*Math.PI));Math.sqrt(2*Math.PI);var KI=Math.sqrt(2*Math.PI);function QI(t){for(var e=t,n=t,r=1;r<15;r++)e+=n*=t*t/(2*r+1);return Math.round(1e4*(.5+e/KI*Math.exp(-t*t/2)))/1e4}for(var tG=[],eG=0;eG<=3.09;eG+=.01)tG.push(QI(eG));var nG=function(t){var e=UI(t,!1,"ch");e.numberOfClasses_=7,e.classificationMethod_="quantile",e.thresholds_=[0],e.colors_=null,e.makeClassifNice_=!0;var n=["#D4DAF0","#C1C9EB","#A8B4E6","#93A2DC","#7C90D6","#677CD2","#5169BE","#3C57B0","#2644A7","#15246B"];e.colorFunction_=function(t){return or(Tr,n)(Math.min(Math.max(0,t),1))},e.classToFillStyle_=void 0,e.classifier_=void 0,e.tooltip_.textFunction=aG,e.colorSchemeType_="discrete",e.valueTransform_=function(t){return t},e.valueUntransform_=function(t){return t},e.pointOfDivergence_=null;var r=["numberOfClasses_","classificationMethod_","thresholds_","makeClassifNice_","colorFunction_","classToFillStyle_","noDataFillStyle_","classifier_","colors_","colorFunction_","colorSchemeType_","valueTransform_","valueUntransform_","pointOfDivergence_"];function i(t){var n=function(t){return x(Array(t).keys())},r=e.statData().getArray(),i=function(t){t.attr("ecl",function(t){var n=e.statData().get(t.properties.id);if(n){var r=n.value;return":"===r||null===r?"nd":"continuous"===e.colorSchemeType_?r:null!=r?+e.classifier_(r):void 0}})};if(function(){var t=n(e.numberOfClasses_);if("continuous"===e.colorSchemeType_){var i,a=e.valueTransform_||function(t){return t},o=r.map(a),s=zt(o),l=It(o),c=function(t){return null!==t.pointOfDivergence_}(e);if(!("function"==typeof(null===(i=e.colorFunction_)||void 0===i?void 0:i.domain)))if(c){var u,h=a(null!==(u=e.pointOfDivergence_)&&void 0!==u?u:0);e.domain_=[s,h,l]}else e.domain_=[s,l];e.classifier(function(t){return t})}var f=x(r).filter(function(t){return!isNaN(parseFloat(t))&&isFinite(t)});switch(e.classificationMethod_){case"quantile":e.classifier(le().domain(r).range(t));break;case"equal-interval":case"equinter":e.classifier(tr().domain([zt(r),It(r)]).range(t)),e.makeClassifNice_&&e.classifier().nice();break;case"threshold":e.numberOfClasses(e.thresholds_.length+1),e.classifier(er().domain(e.thresholds_).range(n(e.numberOfClasses_)));break;case"jenks":var d=XI(f,e.numberOfClasses_).slice(1,-1);e.classifier(er().domain(d).range(t));break;case"ckmeans":var p=$I(f,e.numberOfClasses_).map(function(t){return t.pop()}),g=p.slice(0,-1);e.classifier(er().domain(g).range(t))}}(),t.svg_){var a=BE(t);if(i(t.svg().selectAll(a)),"mixed"===t.nutsLevel_)i(t.svg().selectAll("path.em-nutsrg0"))}}function a(t){if(e.filtersDefinitionFunction_?e.classToFillStyle(iG()):e.classToFillStyle(rG(e.colorFunction_,e.colors_)),t.svg_){var n=BE(t),r=t.svg().selectAll(n);r.style("pointer-events","none").transition().duration(e.transitionDuration()).style("fill",s).end().then(function(){r.style("pointer-events",null),r.each(function(){var t=Dt(this);t.attr("fill___",t.style("fill"))}),l(t,r),e.gridCartogram_&&t.svg().selectAll(".em-grid-text").each(function(){var t=Dt(this.parentNode).style("fill");Dt(this).attr("fill",jE(t))})}).catch(function(t){}),"mixed"===e.nutsLevel_&&o(t),e.labels_&&e.labels_.values&&e.updateValuesLabels(t),e.patternFill_&&sI(t,e.patternFill_)}}r.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&r.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.colorFunction=function(t){if(!arguments.length)return e.colorFunction_;if(e.colorFunction_=t,e.filtersDefinitionFunction_)e.classToFillStyle(iG());else{var n=rG(e.colorFunction_,e.colors_,e.colorSchemeType_);e.classToFillStyle(n)}return e},e.threshold=function(t){return arguments.length?(e.thresholds_=t,e.numberOfClasses(t.length+1),e):e.thresholds_},e.filtersDefinitionFunction=function(t){return arguments.length?(e.filtersDefinitionFunction_=t,e.svg()&&e.filtersDefinitionFunction_(e.svg(),e.numberOfClasses_),e):e.filtersDefinitionFunction_},e.updateClassification=function(){try{return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,i),i(e),e}catch(t){console.error("Error in updateClassification:",t.message),console.error(t)}},e.updateStyle=function(){try{return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,a),a(e),e}catch(t){console.error("Error in updateStyle:",t.message),console.error(t)}},e.getLegendConstructor=function(){return nI};var o=function(t){t.svg().selectAll(BE(t)).each(function(){if(!this.parentNode.classList.contains("em-cntrg")){var t=Dt(this),e=t.attr("ecl"),n=t.attr("lvl"),r=e||"0"===n;if(t.style("display",r?"block":"none"),e&&"0"!==n){var i=t.style("stroke")||"#777",a=t.style("stroke-width")||.2;t.style("stroke",i).style("stroke-width",a)}}})};var s=function(t){var n,r=Dt(this).attr("ecl"),i=e.colorSchemeType_||"discrete";if(r||"0"===r)return"nd"===r?e.noDataFillStyle_||"gray":e.filtersDefinitionFunction_?e.classToFillStyle_(r):"continuous"===i?function(t,e){var n,r=e.colorFunction_,i=e.domain_||[0,1],a="function"==typeof(null==r?void 0:r.domain),o=e.valueTransform_||function(t){return t},s=o(t);if(isNaN(s))return e.noDataFillStyle_||"gray";if(a)return r(s);if(3===i.length){var l,c=b(i,3),u=c[0],h=c[2],f=o(null!==(l=e.pointOfDivergence_)&&void 0!==l?l:0);n=s<f?.5*(s-u)/(f-u):.5+.5*(s-f)/(h-f)}else{var d=b(i,2),p=d[0];n=(s-p)/(d[1]-p)}return r(Math.min(Math.max(n,0),1))}(+r,e):null!==(n=e.Geometries)&&void 0!==n&&n.userGeometries?e.classToFillStyle_(r,e.numberOfClasses_||1):"WORLD"===e.geo_?e.classToFillStyle_(r,e.numberOfClasses_||1)||e.cntrgFillStyle_:e.classToFillStyle_(r,e.numberOfClasses_||1)},l=function(t,n){var r=function(e){var n;return null===(n=t.tooltip_.omitRegions)||void 0===n?void 0:n.includes(e)};n.on("mouseover",function(n,i){r(i.properties.id)||(Dt(this).style("fill",t.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(i,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,i,this,t))}).on("mousemove",function(n,i){r(i.properties.id)||(e._tooltip&&e._tooltip.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,i,this,t))}).on("mouseout",function(n,i){if(!r(i.properties.id)){var a=Dt(this);a.style("fill",a.attr("fill___")),e._tooltip&&e._tooltip.mouseout(),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,i,this,t)}})};return e.highlightRegion=function(t){if(!e.svg_)return e;var n=BE(e),r=e.svg().selectAll(n).filter(function(e){return e.properties.id===t});if(!r.empty()){var i=r.datum();if(r.style("fill",e.hoverColor_||"orange"),e._tooltip){var a=e.tooltip_.textFunction(i,e);e._tooltip.mouseover(a);var o=r.node().getBBox(),s=e.__lastTransform||{x:0,y:0,k:1},l=(o.x+o.width/2)*s.k+s.x,c=(o.y+o.height/2)*s.k+s.y,u=e.svg().node().getBoundingClientRect(),h=u.left+l,f=u.top+c;e._tooltip.ensureTooltipOnScreen(h,f)}e.onRegionMouseOver_&&e.onRegionMouseOver_(null,i,r.node(),e)}return e},e.clearHighlight=function(){if(!e.svg_)return e;var t=BE(e);return e.svg().selectAll(t).each(function(){var t=Dt(this),e=t.attr("fill___");e&&t.style("fill",e)}),e._tooltip&&e._tooltip.mouseout(),e},e},rG=function(t,e){return t=t||ar,"continuous"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"discrete")?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1],r=(e-n[0])/(n[1]-n[0]);return t(Math.min(Math.max(r,0),1))}:e?function(t,n){return e[t]}:function(e,n){return t(e/(n-1))}},iG=function(){return function(t){return"url(#pattern_"+t+")"}},aG=function(t,e){if(e.tooltip_.omitRegions&&e.tooltip_.omitRegions.includes(t.properties.id))return"";var n=[],r=t.properties.na||t.properties.name,i=t.properties.id;n.push('\n        <div class="em-tooltip-bar">\n            <b>'.concat(r,"</b>").concat(i?" (".concat(i,")"):"","\n        </div>\n    "));var a=e.statData(),o=a.get(i),s=a.unitText()||"";if(!o||0!==o.value&&!o.value||":"===o.value)return n.push('\n            <div class="em-tooltip-text no-data">\n                <table class="em-tooltip-table">\n                    <tbody>\n                        <tr><td>'.concat(e.noDataText_,"</td></tr>\n                    </tbody>\n                </table>\n            </div>\n        ")),n.join("");n.push('\n        <div class="em-tooltip-text">\n            <table class="em-tooltip-table">\n                <tbody>\n                    <tr><td>'.concat(zE(o.value)," ").concat(s,"</td></tr>\n                </tbody>\n            </table>\n        </div>\n    "));var l=o.status;if(l&&e.tooltip_.showFlags){var c="short"===e.tooltip_.showFlags?l:flags[l]||l;n.push(' <span class="status-flag">'.concat(c,"</span>"))}return n.join("")},oG=function(t,e){var n=II(t);if(n.order=void 0,e)for(var r in e)n[r]=e[r];function i(t,e){var n=UE(t),r=t.svg_.selectAll(n).selectAll("[ecl]");r.style("fill","white"),r.filter("[ecl='"+e+"']").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function a(t){var e=UE(t);t.svg_.selectAll(e).selectAll("[ecl]").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}return n.update=function(){if(n.updateConfig(),n.updateContainer(),n.lgg.node()&&n.map.classifier_){n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle();var t=n.getBaseY(),e=n.getBaseX();if(n._categoricalContainer=n.lgg.append("g").attr("class","em-legend-categorical").attr("transform","translate(".concat(e,", ").concat(t,")")),function(t){for(var e=t._categoricalContainer,n=t.map,r=n.classToFillStyle()?Object.keys(n.classToFillStyle()):n.classifier_.domain(),o=t.order?t.order:r,s=function(){var r=o[l],s=n.classifier_(r),c=n.classToFillStyle_[r],u=t.titlePadding+l*(t.shapeHeight+t.shapePadding);e.append("rect").attr("class","em-legend-rect").attr("x",0).attr("y",u).attr("width",t.shapeWidth).attr("height",t.shapeHeight).style("fill",c).on("mouseover",function(){i(t.map,s),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.svgId_,i,s)}).on("mouseout",function(){a(t.map),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.svgId_,a,s)}),e.append("text").attr("class","em-legend-label").attr("x",t.shapeWidth+t.labelOffsets.x).attr("y",u+.5*t.shapeHeight).attr("dy","0.35em").text(n.classToText()?n.classToText()[r]:r)},l=0;l<o.length;l++)s()}(n),n.map.patternFill_){var r=n.lgg.node().getBBox().height,o=n.lgg.append("g").attr("class","pattern-fill-legend").attr("transform","translate(".concat(e,", ").concat(r+15,")"));Rz(n,o)}if(n.noData){var s=n.lgg.node().getBBox().height+10,l=e,c=n.lgg.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(l,",").concat(s+15,")"));n.appendNoDataLegend(c,n.noDataText,i,a)}n.setBoxDimension()}},n},sG=function(t,e){var n=[];t.properties.id?n.push('<div class="em-tooltip-bar">'+t.properties.na+" ("+t.properties.id+") </div>"):n.push('<div class="em-tooltip-bar">'+t.properties.na+"</div>");var r=e.statData().get(t.properties.id);if(!r||0!=r.value&&!r.value)return n.push(e.noDataText_),n.join("");var i=r.value;if(e.classToText_){var a=e.classToText_[i];return n.push('\n    <div class="em-tooltip-text">\n    <table class="em-tooltip-table">\n    <tbody>\n    <tr>\n    <td>\n    '.concat(a||i,"\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </div>\n")),n.join("")}return n.push('\n    <div class="em-tooltip-text">\n    <table class="em-tooltip-table">\n    <tbody>\n    <tr>\n    <td>\n    '.concat(i,"\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </div>\n")),n.join("")},lG=function(t,e){var n=II(t);if(n.squareSize=100,n.rotation=0,n.label1="Variable 1",n.label2="Variable 2",n.axisTitleFontSize=NE("em-bivariate-axis-title"),n.breaks1=void 0,n.breaks2=void 0,n.showBreaks=!1,n.tickLength=5,n.yAxisLabelsOffset={x:0,y:0},n.xAxisLabelsOffset={x:0,y:0},n.yAxisTitleOffset={x:0,y:0},n.xAxisTitleOffset={x:0,y:0},n.boxPadding=n.labelFontSize,n.noDataYOffset=30,n.axisArrows=!0,n.arrowHeight=15,n.arrowWidth=14,n.arrowPadding=10,e)for(var r in e)n[r]=e[r];function i(t,e,n){var r=UE(t),i=t.svg_.selectAll(r).selectAll("[ecl1],[ecl2]");i.style("fill","white"),i.filter("[ecl1='".concat(e,"']")).filter("[ecl2='".concat(n,"']")).filter(":not([nd])").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function a(t){var e=UE(t);t.svg_.selectAll(e).selectAll("[ecl1],[ecl2]").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}return n.update=function(){if(n.updateConfig(),n.updateContainer(),n._horizontalOffset=n.axisTitleFontSize+n.arrowPadding,n.lgg.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle(),n._y=n.boxPadding+(n.title?n.titleFontSize+n.boxPadding:0),function(){for(var t=n.lgg,e=n.map.numberOfClasses(),r=n.squareSize/e,o=0===n.rotation?0:.7071*n.squareSize+n.boxPadding,s=0,l=t.append("g").attr("class","bivariate-squares-chart").attr("transform","translate(".concat(n.boxPadding+n._horizontalOffset,",").concat(o+n._y,") rotate(").concat(n.rotation,") translate(").concat(n.boxPadding,",0)")),c=0;c<e;c++)for(var u=function(){var t=e-c-1,o=e-h-1,u=n.map.classToFillStyle()(t,o);l.append("rect").attr("class","em-bivariate-square").attr("x",s+(e-1-c)*r).attr("y",h*r).attr("width",r).attr("height",r).style("fill",u).on("mouseover",function(){i(n.map,t,o),n.map.insetTemplates_&&GE(n.map.insetTemplates_,n.map.svgId,i,t,o),Dt(this).raise()}).on("mouseout",function(){a(n.map),n.map.insetTemplates_&&GE(n.map.insetTemplates_,n.map.svgId,a,t,o)})},h=0;h<e;h++)u();l.append("rect").attr("class","em-bivariate-frame").attr("x",s).attr("y",0).attr("width",n.squareSize).attr("height",n.squareSize).attr("stroke-width",.7)}(),!n.breaks1&&!n.breaks2&&n.showBreaks){var e=t.classifier1_;"function"==typeof e.quantiles?n.breaks1=e.quantiles().map(function(t){return parseFloat(t.toFixed(0))}):e.domain&&(n.breaks1=e.domain().map(function(t){return parseFloat(t.toFixed(0))}));var r=t.classifier2_;"function"==typeof r.quantiles?n.breaks2=r.quantiles().map(function(t){return parseFloat(t.toFixed(0))}):r.domain&&(n.breaks2=r.domain().map(function(t){return parseFloat(t.toFixed(0))}))}var o,s;!function(){var t=0===n.rotation?0:.7071*n.squareSize+n.boxPadding,e=0,r=n.map.numberOfClasses(),i=n.squareSize/r,a=n.lgg.append("g").attr("class","bivariate-break-labels").attr("transform","translate(".concat(n.boxPadding+n._horizontalOffset,",").concat(t+n._y,") rotate(").concat(n.rotation,") translate(").concat(n.boxPadding,",0)"));if(n.breaks1)for(var o=0;o<n.breaks1.length;o++){var s=e+i*(o+1),l=n.squareSize+NE("em-bivariate-tick-label");a.append("text").attr("class","em-bivariate-tick-label").attr("x",s+n.xAxisLabelsOffset.x).attr("y",l+n.xAxisLabelsOffset.y).text(n.breaks1[o]),a.append("line").attr("class","em-bivariate-tick").attr("x1",s).attr("x2",s).attr("y1",n.squareSize).attr("y2",n.squareSize+n.tickLength)}if(n.breaks2)for(var c=0;c<n.breaks2.length;c++){var u=e,h=i*(c+2)-i;a.append("text").attr("class","em-bivariate-tick-label").attr("x",u+n.yAxisLabelsOffset.x).attr("y",h-n.yAxisLabelsOffset.y-(n.tickLength+2)).text(x(n.breaks2).reverse()[c]).attr("text-anchor","middle").attr("transform","rotate(-90, ".concat(u,", ").concat(h,")")),a.append("line").attr("class","em-bivariate-tick").attr("x1",u).attr("x2",u-n.tickLength).attr("y1",h).attr("y2",h)}}(),n._xAxisArrowY=0,n._yAxisArrowX=0,n.axisArrows&&function(){var t=0===n.rotation?0:.7071*n.squareSize+n.boxPadding,e=0,r=n.lgg.append("g").attr("class","bivariate-axis-arrows").attr("transform","translate(".concat(n.boxPadding+n._horizontalOffset,",").concat(t+n._y,") rotate(").concat(n.rotation,") translate(").concat(n.boxPadding,",0)"));n._xAxisArrowY=n.squareSize+n.tickLength+n.arrowPadding,(n.showBreaks||n.breaks1&&n.breaks2)&&(n._xAxisArrowY+=NE("em-bivariate-tick-label")/1.5);r.append("path").attr("class","em-bivariate-axis-arrow").attr("d",sS()([[e,n._xAxisArrowY],[e+n.squareSize,n._xAxisArrowY]])).attr("stroke","black").attr("marker-end","url(#arrowhead)"),n._yAxisArrowX=-n.tickLength-n.arrowPadding,(n.showBreaks||n.breaks1&&n.breaks2)&&(n._yAxisArrowX-=n.labelFontSize/2);r.append("path").attr("class","em-bivariate-axis-arrow").attr("d",sS()([[n._yAxisArrowX,n.squareSize],[n._yAxisArrowX,0]])).attr("stroke","black").attr("marker-end","url(#arrowhead)")}(),function(){var t=0===n.rotation?0:.7071*n.squareSize+n.boxPadding,e=0,r=n.lgg.append("g").attr("class","bivariate-axis-titles").attr("transform","translate(".concat(n.boxPadding+n._horizontalOffset,",").concat(t+n._y,") rotate(").concat(n.rotation,") translate(").concat(n.boxPadding,",0)")),i=n.squareSize+n.xAxisLabelsOffset.y+(n.axisArrows?n.arrowPadding+n.arrowHeight:7),a=e;(n.showBreaks||n.breaks1&&n.breaks2)&&(i+=NE("em-bivariate-tick-label"));n.xAxisTitleOffset&&(i+=n.xAxisTitleOffset.y);n.xAxisTitleOffset&&(a+=n.xAxisTitleOffset.x);r.append("text").attr("class","em-bivariate-axis-title em-bivariate-axis-title-x").attr("x",a).attr("y",i).text(n.label1).attr("dominant-baseline","hanging").attr("alignment-baseline","hanging");var o=(n.axisArrows?n._yAxisArrowX-n.arrowPadding:7)+(-45==n.rotation?-4:-10);(n.showBreaks||n.breaks1&&n.breaks2)&&(i+=NE("em-bivariate-tick-label"));var s=-n.squareSize;n.yAxisTitleOffset&&(o+=n.yAxisTitleOffset.y);n.yAxisTitleOffset&&(s+=n.yAxisTitleOffset.x);r.append("text").attr("class","em-bivariate-axis-title em-bivariate-axis-title-y").attr("x",s).attr("y",o).text(n.label2).style("transform",n.rotation<0?"translate(".concat(n.axisArrows?-51:-15,"px, 95px) rotate(90deg)"):"rotate(-90deg)")}(),n.lgg.append("defs").append("marker").attr("viewBox","0 0 ".concat(n.arrowWidth," ").concat(n.arrowHeight)).attr("id","arrowhead").attr("refX",0).attr("refY",5).attr("markerWidth",n.arrowWidth).attr("markerHeight",n.arrowHeight).attr("orient","auto").append("path").attr("d","M 0 0 L 5 5 L 0 10").attr("marker-units","strokeWidth"),n.noData&&(o=0===n.rotation?n.noDataYOffset+n.squareSize/n.map.numberOfClasses_+n.arrowHeight/2:n.noDataYOffset,s=0===n.rotation?n._y+n.squareSize+o:n._y+1.4142*n.squareSize+2*n.boxPadding+o,n.lgg.append("rect").attr("class","em-bivariate-nodata").attr("x",n.boxPadding+n.noDataShapeWidth/2).attr("y",s+(0==n.rotation?0:-10)).attr("width",n.noDataShapeWidth).attr("height",n.noDataShapeHeight).style("fill",n.map.noDataFillStyle()).on("mouseover",function(){("mixed"==n.map.nutsLevel_?LM("#em-nutsrg"):Dt("#em-nutsrg")).selectAll("[nd='nd']").style("fill","red")}).on("mouseout",function(){("mixed"==n.map.nutsLevel_?LM("#em-nutsrg"):Dt("#em-nutsrg")).selectAll("[nd='nd']").style("fill",function(){return Dt(this).attr("fill___")}),Dt(this).style("fill",n.map.noDataFillStyle())}),n.lgg.append("text").attr("class","em-bivariate-nodata-label").attr("x",n.boxPadding+n.noDataShapeWidth+(n.noDataShapeWidth/2+5)).attr("y",s+.5*n.noDataShapeHeight+1+(0==n.rotation?0:-10)).text(n.noDataText)),n.setBoxDimension()},n},cG=function(t,e,n,r,i){for(var a=[],o=sn(e,n),s=sn(r,i),l=0;l<t;l++){for(var c=l/(t-1),u=sn(o(c),s(c)),h=[],f=0;f<t;f++)h.push(u(f/(t-1)));a.push(h)}return function(t,e){return a[t][e]}},uG=function(t,e){var n=[],r=t.properties.na||t.properties.name;t.properties.id?n.push('<div class="em-tooltip-bar" >'+r+" ("+t.properties.id+") </div>"):n.push('<div class="em-tooltip-bar" >'+r+"</div>");var i=e.statData("v1").get(t.properties.id),a=e.statData("v1").unitText(),o=e.statData("v2").get(t.properties.id),s=e.statData("v2").unitText();return n.push('\n        <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n        <table class="em-tooltip-table">\n        <tbody>\n        <tr>\n        <td>\n        '.concat(i&&i.value?zE(i.value):""," ").concat(a&&i&&i.value?a:"","\n        ").concat(!i||0!=i.value&&!i.value?e.noDataText_:"","\n        </td>\n        </tr>\n        <tr>\n        <td>\n        ").concat(o&&o.value?zE(o.value):""," ").concat(s&&o&&o.value?s:"","\n        ").concat(!o||0!=o.value&&!o.value?e.noDataText_:"","\n        </td>\n        </tr>\n        </tbody>\n        </table>\n        </div>\n    ")),n.join("")};function hG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HE(r.key),r)}}function dG(t,e,n){return e&&fG(t.prototype,e),n&&fG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var pG=function(){return dG(function t(){hG(this,t)},null,[{key:"geometricMean",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?t.filter(function(t){return 0!==t}):t;return 0===e.length?0:Math.exp(e.reduce(function(t,e){return t+Math.log(e)},0)/e.length)}},{key:"centre",value:function(t){var e=this.geometricMean(t.map(function(t){return t[0]})),n=this.geometricMean(t.map(function(t){return t[1]})),r=this.geometricMean(t.map(function(t){return t[2]})),i=e+n+r;return[e/i,n/i,r/i]}},{key:"perturbe",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/3,1/3,1/3];return t.map(function(t){if(!t)return null;var n=[t[0]*e[0],t[1]*e[1],t[2]*e[2]],r=n.reduce(function(t,e){return t+e},0);return[n[0]/r,n[1]/r,n[2]/r]})}},{key:"powerScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map(function(t){if(!t)return null;var n=[Math.pow(t[0],e),Math.pow(t[1],e),Math.pow(t[2],e)],r=n.reduce(function(t,e){return t+e},0);return[n[0]/r,n[1]/r,n[2]/r]})}},{key:"close",value:function(t){var e=this;return t.map(function(t){if(!e.isValidTernary(t))return null;var n=t[0]+t[1]+t[2];return[t[0]/n,t[1]/n,t[2]/n]})}},{key:"validateTernaryPoints",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n){if(3!==n.length)throw new Error("Ternary point must have exactly 3 components, got ".concat(n.length));if(n.some(function(t){return t<0}))throw new Error("Ternary point contains negative values: [".concat(n,"]"));var r=n[0]+n[1]+n[2];if(Math.abs(r-1)>1e-9)throw new Error("Ternary point components must sum to 1, got ".concat(r,": [").concat(n,"]"))}}}},{key:"isValidTernary",value:function(t){return Array.isArray(t)&&3===t.length&&t.every(function(t){return"number"==typeof t&&!Number.isNaN(t)})}}])}(),gG=function(){return dG(function t(){hG(this,t)},null,[{key:"ternaryMeshCentroids",value:function(t){for(var e=t*t,n=[],r=1;r<=e;r++){var i=Math.floor(Math.sqrt(e-r)),a=i*i,o=((-e+r+i*(i+2)+1)%2-3*a-3*r+3*e+1)/(6*t),s=-((-e+a+r+2*i+1)%2+3*i-3*t+1)/(3*t),l=((-e+a+r+2*i+1)%2+3*a+6*i+3*r-3*e+1)/(6*t);n.push({id:r,p1:o,p2:s,p3:l})}return n}},{key:"ternaryMeshVertices",value:function(t){var e=Math.sqrt(t.length),n=[];return t.forEach(function(t){var r=e-Math.floor(Math.sqrt(e*e-t.id)),i=t.id-(r-1)*(2*e-r+1),a=2*Math.pow(-1,i%2)/(3*e),o=Math.pow(-1,i%2)/(3*e);n.push({id:t.id,vertex:1,p1:t.p1-a,p2:t.p2+o,p3:t.p3+o}),n.push({id:t.id,vertex:2,p1:t.p1+o,p2:t.p2-a,p3:t.p3+o}),n.push({id:t.id,vertex:3,p1:t.p1+o,p2:t.p2+o,p3:t.p3-a})}),n}},{key:"ternaryDistance",value:function(t,e){return e.map(function(e){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return-(r*i+i*n+n*r)})}},{key:"ternaryNearest",value:function(t,e){var n=this;return t.map(function(t){if(!t)return null;var r=n.ternaryDistance(t,e),i=r.indexOf(Math.min.apply(Math,x(r)));return e[i]})}},{key:"ternarySextantVertices",value:function(t){for(var e=[],n=[t[0],1-t[0],0],r=[t[0],0,1-t[0]],i=[0,t[1],1-t[1]],a=[1-t[1],t[1],0],o=[1-t[2],0,t[2]],s=[0,1-t[2],t[2]],l=[[t,o,[1,0,0],a,t],[t,a,n,t],[t,n,[0,1,0],s,t],[t,s,i,t],[t,i,[0,0,1],r,t],[t,r,o,t]],c=1;c<=6;c++)for(var u=l[c-1],h=0;h<u.length;h++)e.push({id:c,vertex:h+1,p1:u[h][0],p2:u[h][1],p3:u[h][2]});return e}},{key:"ternarySurroundingSextant",value:function(t,e){return t.map(function(t){if(!t)return null;var n=[t[0]>e[0],t[1]>e[1],t[2]>e[2]];return!n[0]||n[1]||n[2]?n[0]&&n[1]&&!n[2]?2:n[0]||!n[1]||n[2]?!n[0]&&n[1]&&n[2]?4:n[0]||n[1]||!n[2]?n[0]&&!n[1]&&n[2]?6:null:5:3:1})}},{key:"ternaryToCartesian",value:function(t){return[.5*(2*t[2]+t[1]),Math.sqrt(3)/2*t[1]]}},{key:"cartesianToTernary",value:function(t,e){var n=2*e/Math.sqrt(3),r=t-n/2;return[1-n-r,n,r]}},{key:"ternaryLimits",value:function(t){var e=[1,1,1],n=[0,0,0];return t.forEach(function(t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),n[0]=Math.max(n[0],t[0]),n[1]=Math.max(n[1],t[1]),n[2]=Math.max(n[2],t[2])}),{lower:e,upper:n}}}])}(),vG=function(){return dG(function t(){hG(this,t)},null,[{key:"colorMapTricolore",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/3,1/3,1/3],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:140,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:80,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.4,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=pG.close(x(t)),u=pG.close(x(t));if(Number.isFinite(r)&&r<100){var h=gG.ternaryMeshCentroids(r).map(function(t){return[t.p1,t.p2,t.p3]});u=gG.ternaryNearest(u,h)}var f=pG.perturbe(u,[1/n[0],1/n[1],1/n[2]]);return pG.powerScale(f,l).map(function(n,r){if(!n)return{p1:t[r][0],p2:t[r][1],p3:t[r][2],h:null,c:null,l:null,rgb:null};var l=n.map(function(t){return t*a}),u=[i,i+120,i+240].map(function(t){return t*Math.PI/180}),h=u.map(function(t,e){return{re:l[e]*Math.cos(t),im:l[e]*Math.sin(t)}}).reduce(function(t,e){return{re:t.re+e.re,im:t.im+e.im}},{re:0,im:0}),f=(180*Math.atan2(h.im,h.re)/Math.PI+360)%360,d=Math.sqrt(h.re*h.re+h.im*h.im),p=d*s/a+1-s,g=p*o,v=p*d,_=e.hclToHex(f,v,g);return{p1:c[r][0],p2:c[r][1],p3:c[r][2],h:f,c:v,l:g,rgb:_}})}},{key:"colorMapSextant",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/3,1/3,1/3],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["#FFFF00","#B3DCC3","#01A0C6","#B8B3D8","#F11D8C","#FFB3B3"];if(6!==n.length)throw new Error("Sextant values array must have exactly 6 elements");var r=pG.close(x(t)),i=gG.ternarySurroundingSextant(r,e);return r.map(function(e,r){if(!e)return{p1:t[r][0],p2:t[r][1],p3:t[r][2],sextant:null,rgb:null};var a=i[r],o=null!==a?n[a-1]:null;return{p1:e[0],p2:e[1],p3:e[2],sextant:a,rgb:o}})}},{key:"hclToHex",value:function(t,e,n){(t%=360)<0&&(t+=360),e=Math.max(0,Math.min(e,230)),n=Math.max(0,Math.min(n,100));var r=t*Math.PI/180,i=(n+16)/116,a=Math.cos(r)*e/500+i,o=i-Math.sin(r)*e/200,s=.95047*(a>.206893034?Math.pow(a,3):(a-16/116)/7.787),l=1*(i>.206893034?Math.pow(i,3):(i-16/116)/7.787),c=1.08883*(o>.206893034?Math.pow(o,3):(o-16/116)/7.787),u=3.2406*s-1.5372*l-.4986*c,h=-.9689*s+1.8758*l+.0415*c,f=.0557*s-.204*l+1.057*c,d=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};u=d(u),h=d(h),f=d(f);var p=function(t){var e=function(t){return Math.round(255*function(t){return Math.max(0,Math.min(1,t))}(t))}(t).toString(16);return 1===e.length?"0"+e:e};return"#".concat(p(u)).concat(p(h)).concat(p(f))}}])}(),_G=function(){return dG(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:520,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{top:20,right:60,bottom:50,left:60};if(hG(this,t),this.canvas=null,this.ctx=null,"object"!=qE(e))throw new Error('D3.js is required for visualization. Please install it with "npm install d3" or include it in your HTML.');this.container=Dt(n),this.width=r,this.height=i,this.margin=a,this.svg=this.container.append("svg").attr("width",r).attr("height",i),this.triangle=this.svg.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),this.legend=this.svg.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),this.circles=this.svg.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")"))},[{key:"createContinuousPlot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.center,r=void 0===n?[1/3,1/3,1/3]:n,i=e.hue,a=void 0===i?80:i,o=e.chroma,s=void 0===o?140:o,l=e.lightness,c=void 0===l?80:l,u=e.contrast,h=void 0===u?.4:u,f=e.spread,d=void 0===f?1:f,p=e.showData,g=void 0===p||p,v=e.showCenter,_=void 0===v||v,m=e.showLines,y=void 0===m||m,b=e.labels,x=void 0===b?["p","p","p"]:b,w=e.labelPosition,M=void 0===w?"corner":w,S=this.width-this.margin.left-this.margin.right,C=this.height-this.margin.top-this.margin.bottom,E=Math.min(S,C);this.canvas&&Dt(this.canvas).remove(),this.triangle.selectAll("*").remove(),this.legend.selectAll("*").remove(),this.circles.selectAll("*").remove(),this.canvas=document.createElement("canvas"),this.canvas.width=E,this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx&&(this.drawContinuousTriangle(E,r,a,s,c,h,d),this.triangle.append("image").attr("x",0).attr("y",0).attr("width",E).attr("height",E).attr("href",this.canvas.toDataURL()),this.drawTriangleFrame(E,x,r,_,y,M),g&&t.length>0&&this.addDataPoints(t,E))}},{key:"createDiscretePlot",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.center,i=void 0===r?[1/3,1/3,1/3]:r,a=n.breaks,o=void 0===a?4:a,s=n.hue,l=void 0===s?80:s,c=n.chroma,u=void 0===c?140:c,h=n.lightness,f=void 0===h?80:h,d=n.contrast,p=void 0===d?.4:d,g=n.spread,v=void 0===g?1:g,_=n.showData,m=void 0===_||_,y=n.showCenter,x=void 0===y||y,w=n.showLines,M=void 0===w||w,S=n.labels,C=void 0===S?["p","p","p"]:S,E=n.labelPosition,k=void 0===E?"corner":E,A=this.width-this.margin.left-this.margin.right,T=this.height-this.margin.top-this.margin.bottom,P=Math.min(A,T);this.triangle.selectAll("*").remove(),this.legend.selectAll("*").remove(),this.circles.selectAll("*").remove();var F=gG.ternaryMeshCentroids(o),N=gG.ternaryMeshVertices(F),L=F.map(function(t){return[t.p1,t.p2,t.p3]}),O=vG.colorMapTricolore(L,i,100,l,u,f,p,v);oi(N,function(t){return t.id}).forEach(function(e,n){var r=e.map(function(e){var n=b(t.ternaryToSvgCoords([e.p1,e.p2,e.p3],P),2),r=n[0],i=n[1];return"".concat(r,",").concat(i)}).join(" "),i=O[Number(n)-1].rgb;t.triangle.append("polygon").attr("points",r).attr("fill",i).attr("stroke","none")}),this.drawTriangleFrame(P,C,i,x,M,k),m&&e.length>0&&this.addDataPoints(e,P)}},{key:"createSextantPlot",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.center,i=void 0===r?[1/3,1/3,1/3]:r,a=n.values,o=void 0===a?["#FFFF00","#B3DCC3","#01A0C6","#B8B3D8","#F11D8C","#FFB3B3"]:a,s=n.showData,l=void 0===s||s,c=n.showCenter,u=void 0===c||c,h=n.showLines,f=void 0===h||h,d=n.labels,p=void 0===d?["p","p","p"]:d,g=n.labelPosition,v=void 0===g?"corner":g;if(6!==o.length)throw new Error("Sextant plot requires exactly 6 color values");var _=this.width-this.margin.left-this.margin.right,m=this.height-this.margin.top-this.margin.bottom,y=Math.min(_,m);this.triangle.selectAll("*").remove(),this.legend.selectAll("*").remove(),this.circles.selectAll("*").remove(),oi(gG.ternarySextantVertices(i),function(t){return t.id}).forEach(function(e,n){e.sort(function(t,e){return t.vertex-e.vertex});var r=e.map(function(e){var n=b(t.ternaryToSvgCoords([e.p1,e.p2,e.p3],y),2),r=n[0],i=n[1];return"".concat(r,",").concat(i)}).join(" "),i=Number(n)-1;t.triangle.append("polygon").attr("points",r).attr("fill",o[i]).attr("stroke","none")}),this.drawTriangleFrame(y,p,i,u,f,v),l&&e.length>0&&this.addDataPoints(e,y)}},{key:"drawContinuousTriangle",value:function(t,e,n,r,i,a,o){if(this.ctx){for(var s=t,l=this.ctx.createImageData(s,s),c=0;c<s;c++)for(var u=0;u<s;u++){var h=b(this.svgToTernaryCoords([u,c],s),3),f=h[0],d=h[1],p=h[2];if(!(f<0||d<0||p<0||f>1||d>1||p>1)){var g=vG.colorMapTricolore([[f,d,p]],e,100,n,r,i,a,o)[0],v=parseInt(g.rgb.slice(1,3),16),_=parseInt(g.rgb.slice(3,5),16),m=parseInt(g.rgb.slice(5,7),16),y=4*(c*s+u);l.data[y]=v,l.data[y+1]=_,l.data[y+2]=m,l.data[y+3]=255}}this.ctx.putImageData(l,0,0)}}},{key:"drawTriangleFrame",value:function(t,e,n,r,i){var a=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"corner",s=[[1,0,0],[0,1,0],[0,0,1]].map(function(e){return a.ternaryToSvgCoords(e,t)}),l=s.map(function(t){return t.join(",")}).join(" ");if(this.triangle.append("polygon").attr("points",l).attr("fill","none").attr("stroke","black").attr("stroke-width",1),"edge"===o){var c=[[(s[0][0]+s[1][0])/2-35,(s[0][1]+s[1][1])/2-14],[(s[1][0]+s[2][0])/2+35,(s[1][1]+s[2][1])/2-14],[(s[0][0]+s[2][0])/2,(s[0][1]+s[2][1])/2+25]],u=[-60,60,0];e.forEach(function(t,e){a.legend.append("text").attr("x",c[e][0]).attr("y",c[e][1]).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform","rotate(".concat(u[e],",").concat(c[e][0],",").concat(c[e][1],")")).text(t)})}else{var h=[[s[0][0],s[0][1]+25],[s[1][0],s[1][1]-15],[s[2][0],s[2][1]+25]];e.forEach(function(t,e){a.legend.append("text").attr("x",h[e][0]).attr("y",h[e][1]).attr("text-anchor","middle").text(t)})}var f=[.25,.5,.75];if(i&&(f.forEach(function(e){var n=[a.ternaryToSvgCoords([e,0,1-e],t),a.ternaryToSvgCoords([e,1-e,0],t)];a.legend.append("line").attr("x1",n[0][0]).attr("y1",n[0][1]).attr("x2",n[1][0]).attr("y2",n[1][1]).attr("stroke","#aaa").attr("stroke-width",.5).attr("opacity",.7)}),f.forEach(function(e){var n=[a.ternaryToSvgCoords([0,e,1-e],t),a.ternaryToSvgCoords([1-e,e,0],t)];a.legend.append("line").attr("x1",n[0][0]).attr("y1",n[0][1]).attr("x2",n[1][0]).attr("y2",n[1][1]).attr("stroke","#aaa").attr("stroke-width",.5).attr("opacity",.7)}),f.forEach(function(e){var n=[a.ternaryToSvgCoords([1-e,0,e],t),a.ternaryToSvgCoords([0,1-e,e],t)];a.legend.append("line").attr("x1",n[0][0]).attr("y1",n[0][1]).attr("x2",n[1][0]).attr("y2",n[1][1]).attr("stroke","#aaa").attr("stroke-width",.5).attr("opacity",.7)})),r){var d=b(this.ternaryToSvgCoords(n,t),2),p=d[0],g=d[1];this.triangle.append("circle").attr("cx",p).attr("cy",g).attr("r",3).attr("fill","black").attr("stroke","white"),[[this.ternaryToSvgCoords([n[0],0,1-n[0]],t),this.ternaryToSvgCoords([n[0],1-n[0],0],t)],[this.ternaryToSvgCoords([0,n[1],1-n[1]],t),this.ternaryToSvgCoords([1-n[1],n[1],0],t)],[this.ternaryToSvgCoords([0,1-n[2],n[2]],t),this.ternaryToSvgCoords([1-n[2],0,n[2]],t)]].forEach(function(t){a.triangle.append("line").attr("x1",t[0][0]).attr("y1",t[0][1]).attr("x2",t[1][0]).attr("y2",t[1][1]).attr("stroke","black").attr("stroke-width",.5).attr("opacity",.5)})}f.forEach(function(e){var n=[a.ternaryToSvgCoords([e,1-e,0],t),a.ternaryToSvgCoords([e,0,1-e],t)];a.legend.append("text").attr("x",n[0][0]-5).attr("y",n[0][1]).attr("text-anchor","end").attr("font-size","10px").text(100*e+"%")}),f.forEach(function(e){var n=[a.ternaryToSvgCoords([0,e,1-e],t),a.ternaryToSvgCoords([1-e,e,0],t)];a.legend.append("text").attr("x",n[0][0]+5).attr("y",n[0][1]).attr("text-anchor","start").attr("font-size","10px").text(100*e+"%")}),f.forEach(function(e){var n=[a.ternaryToSvgCoords([1-e,0,e],t),a.ternaryToSvgCoords([0,1-e,e],t)];a.legend.append("text").attr("x",n[0][0]).attr("y",n[0][1]+10).attr("text-anchor","middle").attr("font-size","10px").text(100*e+"%")})}},{key:"addDataPoints",value:function(t,e){var n=this,r=pG.close(x(t));pG.validateTernaryPoints(r),r.forEach(function(t,r){if(t){var i=b(n.ternaryToSvgCoords(t,e),2),a=i[0],o=i[1];n.circles.append("circle").datum({point:t,id:r}).attr("cx",a).attr("cy",o).attr("r",2).attr("fill","black").attr("opacity",.5)}})}},{key:"ternaryToSvgCoords",value:function(t,e){var n=b(gG.ternaryToCartesian(t),2);return[n[0]*e,e-n[1]*e]}},{key:"svgToTernaryCoords",value:function(t,e){return gG.cartesianToTernary(t[0]/e,1-t[1]/e)}}])}();function mG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function yG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mG(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mG(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var bG=function(t){var e,n,r,i,a,o,s,l,c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=II(t);return h.width=null!==(e=u.width)&&void 0!==e?e:160,h.height=null!==(n=u.height)&&void 0!==n?n:160,h.padding=null!==(r=u.padding)&&void 0!==r?r:{top:10,right:30,bottom:30,left:30},h.type=null!==(i=u.type)&&void 0!==i?i:"continuous",h.showCenter=null===(a=u.showCenter)||void 0===a||a,h.showLines=null!==(o=u.showLines)&&void 0!==o&&o,h.meanCentering=null!==(s=u.meanCentering)&&void 0!==s&&s,h.labels=null!==(l=u.labels)&&void 0!==l?l:["Variable 1","Variable 2","Variable 3"],h.labelPosition=null!==(c=u.labelPosition)&&void 0!==c?c:"corner",h.hue=u.hue,h.chroma=u.chroma,h.lightness=u.lightness,h.contrast=u.contrast,h.spread=u.spread,h.breaks=u.breaks,Object.assign(h,u),h.update=function(){return h.updateConfig(),h.updateContainer(),h.lgg.node()?(h.makeBackgroundBox(),h.title&&h.addTitle(),h.subtitle&&h.addSubtitle(),function(){var t=h.lgg;t.selectAll("*").remove();var e=t.append("foreignObject").attr("x",0).attr("y",0).attr("width",h.width).attr("height",h.height).append("xhtml:div").style("width","".concat(h.width,"px")).style("height","".concat(h.height,"px")),n=[[1,0,0],[0,1,0],[0,0,1],[1/3,1/3,1/3]],r=h.meanCentering?pG.centre(n):[1/3,1/3,1/3],i=new _G(e.node(),h.width,h.height,h.padding),a={center:r,hue:h.hue,chroma:h.chroma,lightness:h.lightness,contrast:h.contrast,spread:h.spread,labels:h.labels,labelPosition:h.labelPosition,showCenter:h.showCenter,showLines:h.showLines};"discrete"===h.type?i.createDiscretePlot(n,yG(yG({},a),{},{breaks:h.breaks})):i.createContinuousPlot(n,a)}(),h.setBoxDimension(),h):h},h},xG=function(t){var e=UI(t,!1,"chtri");e.ternaryCodes_=["v1","v2","v3"],e.meanCentering_=!0,e.noDataFillStyle_="#ccc",e.hue_=10,e.chroma_=120,e.lightness_=70,e.contrast_=.2,e.spread_=.8,e.breaks_=16,e._ternaryColors_=null,e.tooltip_.textFunction=wG;var n=["ternaryCodes_","meanCentering_","noDataFillStyle_","hue_","chroma_","lightness_","contrast_","spread_","breaks_"];function r(t){if(t.svg()&&t._ternaryColors_){var n=BE(t),r=t._ternaryColors_;t.svg().selectAll(n).transition().duration(e.transitionDuration()).style("fill",function(e,n){return r[n]||t.noDataFillStyle_}).end().then(function(){t.svg().selectAll(n).each(function(){var t=Dt(this);t.attr("fill___",t.style("fill"))})})}}return n.forEach(function(t){e[t.slice(0,-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.updateClassification=function(){var t=e.Geometries.getRegionFeatures();if(!t||0===t.length)return e;var n=b(e.ternaryCodes_,3),r=n[0],i=n[1],a=n[2];if(!e.statData(r)||!e.statData(i)||!e.statData(a))return console.warn("Ternary map requires exactly 3 stat datasets"),e;var o=t.map(function(t){var n,o,s,l=t.properties.id;return[+(null===(n=e.statData(r).get(l))||void 0===n?void 0:n.value)||0,+(null===(o=e.statData(i).get(l))||void 0===o?void 0:o.value)||0,+(null===(s=e.statData(a).get(l))||void 0===s?void 0:s.value)||0]}),s=e.meanCentering_?pG.centre(o):[1/3,1/3,1/3];return e._ternaryColors_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.center,r=void 0===n?[1/3,1/3,1/3]:n,i=e.breaks,a=void 0===i?4:i,o=e.hue,s=void 0===o?80:o,l=e.chroma,c=void 0===l?140:l,u=e.lightness,h=void 0===u?80:u,f=e.contrast,d=void 0===f?.4:f,p=e.spread,g=void 0===p?1:p;return vG.colorMapTricolore(t,r,a,s,c,h,d,g).map(function(t){return t.rgb})}(o,{center:s,breaks:e.breaks_,hue:e.hue_,chroma:e.chroma_,lightness:e.lightness_,contrast:e.contrast_,spread:e.spread_}),e},e.updateStyle=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),r(e),function(t,n){var r=function(e){var n;return null===(n=t.tooltip_.omitRegions)||void 0===n?void 0:n.includes(e)};n.on("mouseover",function(n,i){r(i.properties.id)||(Dt(this).style("fill",t.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(i,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,i,this,t))}).on("mousemove",function(n,i){r(i.properties.id)||(e._tooltip&&e._tooltip.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,i,this,t))}).on("mouseout",function(n,i){if(!r(i.properties.id)){var a=Dt(this);a.style("fill",a.attr("fill___")),e._tooltip&&e._tooltip.mouseout(),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,i,this,t)}})}(e,e.svg().selectAll(BE(e))),e},e.getLegendConstructor=function(){return bG},e},wG=function(t,e){var n=[],r=t.properties.na||"",i=t.properties.id||"";n.push('<div class="em-tooltip-bar">'.concat(r).concat(i?" (".concat(i,")"):"","</div>"));var a=b(e.ternaryCodes_,3),o=a[0],s=a[1],l=a[2],c=e.statData(o).get(i),u=e.statData(s).get(i),h=e.statData(l).get(i);return n.push('<div class="em-tooltip-text" style="background:#fff;color:#171a22;padding:4px;font-size:15px;">\n      <table class="em-tooltip-table"><tbody>\n        <tr><td>'.concat(e.statData(o).label_||o,": ").concat(null!=c&&c.value?zE(c.value):"","</td></tr>\n        <tr><td>").concat(e.statData(s).label_||s,": ").concat(null!=u&&u.value?zE(u.value):"","</td></tr>\n        <tr><td>").concat(e.statData(l).label_||l,": ").concat(null!=h&&h.value?zE(h.value):"","</td></tr>\n      </tbody></table></div>")),n.join("")},MG=function(t,e){var n=II(t);if(e)for(var r in e)n[r]=e[r];function i(t,e){t.svg_.selectAll("pattern").selectAll("rect").each(function(){var t=Dt(this);t.attr("data-original-fill")||t.attr("data-original-fill",t.style("fill")),t.style("fill","white")}),t.svg_.selectAll("pattern").selectAll("rect[code='"+e+"']").each(function(){var t=Dt(this);t.style("fill",t.attr("data-original-fill"))})}function a(t){t.svg_.selectAll("pattern").selectAll("rect").each(function(){var t=Dt(this),e=t.attr("data-original-fill");e&&t.style("fill",e)})}return n.update=function(){n.updateConfig(),n.updateContainer();var t=n.map,e=t.svg(),r=n.lgg;r.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle();var o=0,s=t.catColors(),l=function(l){var c=n.boxPadding+(n.title?n.titleFontSize+n.boxPadding:0)+o*(n.shapeHeight+n.shapePadding);t.catColors()[l];r.append("rect").attr("class","em-legend-rect").attr("x",n.boxPadding).attr("y",c).attr("width",n.shapeWidth).attr("height",n.shapeHeight).style("fill",s[l]).attr("stroke","black").attr("stroke-width",.5).on("mouseover",function(){Dt(this).raise(),i(n.map,l),n.map.insetTemplates_&&GE(n.map.insetTemplates_,n.map.svgId,i,l)}).on("mouseout",function(){a(n.map),n.map.insetTemplates_&&GE(n.map.insetTemplates_,n.map.svgId,a)}),r.append("text").attr("class","em-legend-label").attr("x",n.boxPadding+n.shapeWidth+n.labelOffsets.x).attr("y",c+.5*n.shapeHeight).text(t.catLabels()[l]||l).on("mouseover",function(){e.selectAll("pattern").selectAll("rect[code='"+l+"']").style("fill",t.hoverColor())}).on("mouseout",function(){var n=t.catColors()[l]||"lightgray";e.selectAll("pattern").selectAll("rect[code='"+l+"']").style("fill",n)}),o++};for(var c in s)l(c);if(n.noData){var u=n.boxPadding+(n.title?n.titleFontSize+n.boxPadding:0)+o*(n.shapeHeight+n.shapePadding);r.append("rect").attr("class","em-legend-rect").attr("x",n.boxPadding).attr("y",u).attr("width",n.shapeWidth).attr("height",n.shapeHeight).style("fill",t.noDataFillStyle()).on("mouseover",function(){e.select("#em-nutsrg").selectAll("[nd='nd']").style("fill",t.hoverColor()),Dt(this).style("fill",t.hoverColor())}).on("mouseout",function(){e.select("#em-nutsrg").selectAll("[nd='nd']").style("fill",function(e){t.noDataFillStyle()});Dt(this).style("fill",t.noDataFillStyle())}),r.append("text").attr("class","em-legend-label").attr("x",n.boxPadding+n.shapeWidth+n.labelOffsets.x).attr("y",u+.5*n.shapeHeight).text(n.noDataText).on("mouseover",function(){e.select("#em-nutsrg").selectAll("[nd='nd']").style("fill",t.hoverColor())}).on("mouseout",function(){e.select("#em-nutsrg").selectAll("[nd='nd']").style("fill",function(e){t.noDataFillStyle()})})}n.setBoxDimension()},n};function SG(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return CG(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CG(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function CG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var EG=function(t,e){var n=II(t);if(n.sizeLegend={title:null,titlePadding:10,values:null,labelFormatter:void 0,noData:!1,noDataText:"No data"},n.colorLegend={title:null,titlePadding:10,marginTop:33,labelOffsets:{x:5,y:5},shapeWidth:25,shapeHeight:20,shapePadding:1,noData:!0,noDataText:"No data"},n._sizeLegendHeight=0,e)for(var r in e)if("colorLegend"==r||"sizeLegend"==r){for(var i in n[r])void 0!==e[r][i]&&(n[r][i]=e[r][i]);0==e.colorLegend&&(n.colorLegend=!1)}else n[r]=e[r];function a(t,e){var n=t.svg_.selectAll(".piechart").selectAll("path[code]");n.style("opacity",0),n.filter("path[code='"+e+"']").each(function(){Dt(this).style("opacity",1)})}function o(t){t.svg_.selectAll(".piechart").selectAll("path[code]").each(function(){Dt(this).style("opacity",1)})}return n.update=function(){n.updateConfig(),n.updateContainer();var t=n.map,e=n.lgg;e.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle();var r=n.getBaseY(),i=n.getBaseX();t.classifierSize_&&(n._sizeLegendContainer=e.append("g").attr("class","em-pie-size-legend").attr("transform","translate(".concat(i,", ").concat(r,")")),CI(n,n._sizeLegendContainer,n.sizeLegend.values,t.classifierSize_,n.sizeLegend.title,n.sizeLegend.titlePadding)),function(t,e,n){var r=t.map,i=t.colorLegend;if(t._colorLegendContainer=t.lgg.append("g").attr("class","em-pie-color-legend"),t._sizeLegendContainer){var s=t._sizeLegendContainer.node().getBBox().height;t._colorLegendContainer.attr("transform","translate(".concat(e,",").concat(s+t.colorLegend.marginTop,")"))}else t._colorLegendContainer.attr("transform","translate(".concat(e,",").concat(n,")"));i.title&&t._colorLegendContainer.append("text").attr("id","em-color-legend-title").attr("class","em-color-legend-title").attr("x",0).attr("y",t.titleFontSize).text(i.title);var l=0,c=r.catColors(),u=function(e){var n=t.colorLegend.titlePadding+(i.title?t.titleFontSize:0)+l*(i.shapeHeight+i.shapePadding);r.catColors()[e];t._colorLegendContainer.append("rect").attr("class","em-legend-rect").attr("x",0).attr("y",n).attr("width",i.shapeWidth).attr("height",i.shapeHeight).style("fill",c[e]).attr("stroke","black").attr("stroke-width",.5).on("mouseover",function(){a(t.map,e),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,a,e)}).on("mouseout",function(){o(t.map),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,o,e)}),t._colorLegendContainer.append("text").attr("class","em-legend-label").attr("x",i.shapeWidth+i.labelOffsets.x).attr("y",n+.5*i.shapeHeight).attr("dy","0.35em").text(r.catLabels()[e]||e),l++};for(var h in c)u(h);if(i.noData){var f=0;t._sizeLegendContainer&&(f=t._sizeLegendContainer.node().getBBox().height);var d=f+t.colorLegend.marginTop+t.boxPadding+(i.title?t.titleFontSize+t.boxPadding:0)+l*(i.shapeHeight+i.shapePadding),p=t.lgg.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(t.boxPadding,",").concat(d,")"));t.appendNoDataLegend(p,t.noDataText,a,o)}}(n,i,r),n.setBoxDimension()},n};function kG(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return AG(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AG(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function AG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var TG=function(t){var e=UI(t,!0,"pie");e.dorling_=(null==t?void 0:t.dorling)||!1,e.animateDorling_=!0,e.pieMinRadius_=5,e.pieMaxRadius_=15,e.pieChartInnerRadius_=0,e.pieStrokeFill_="white",e.pieStrokeWidth_=.3,e.tooltipPieRadius_=40,e.tooltipPieInnerRadius_=0,e.catColors_=void 0,e.catLabels_=void 0,e.pieOtherColor_="#FFCC80",e.pieOtherText_="Other",e.showOnlyWhenComplete_=!1,e.classifierSize_=null,e.statPie_=null,e.pieTotalCode_=void 0,e.statCodes_=void 0,["catColors_","catLabels_","showOnlyWhenComplete_","noDataFillStyle_","pieMaxRadius_","pieMinRadius_","pieChartInnerRadius_","pieOtherColor_","pieOtherText_","pieStrokeFill_","pieStrokeWidth_","dorling_","animateDorling_","pieTotalCode_","statCodes_"].forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&["catColors","catLabels","showOnlyWhenComplete","noDataFillStyle","pieMaxRadius","pieMinRadius","pieChartInnerRadius","pieOtherColor","pieOtherText","pieStrokeFill","pieStrokeWidth","statCodes"].forEach(function(n){null!=t[n]&&e[n](t[n])}),e.statPie=function(t,n,r,i,a,o){t.filters=t.filters||{};for(var s=0;s<r.length;s++){var l=r[s];t.filters[n]=l;var c={};for(var u in t)c[u]=t[u];for(var h in c.filters={},t.filters)c.filters[h]=t.filters[h];e.stat(l,c),a&&(e.catColors_=e.catColors_||{},e.catColors_[l]=a[s]),i&&(e.catLabels_=e.catLabels_||{},e.catLabels_[l]=i[s])}if(e.statCodes_=r,o){e.pieTotalCode_=o,t.filters[n]=o;var f={};for(var d in t)f[d]=t[d];for(var p in f.filters={},t.filters)f.filters[p]=t.filters[p];e.stat(o,f)}else e.pieTotalCode_=void 0;return e},e.updateClassification=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,n),n(e),e};var n=function(t){if(!e.statCodes_){e.statCodes_=Object.keys(e.statData_);var n=e.statCodes_.indexOf("default");n>-1&&e.statCodes_.splice(n,1)}var r,i=(r=[],e.getCentroidsGroup(e).selectAll("g.em-centroid").data().forEach(function(t){var e=t.properties.id,n=a(e);n&&r.push(n)}),Xr(r));return isNaN(i[0])||(e.classifierSize_=Hm().domain(i).range([e.pieMinRadius_,e.pieMaxRadius_])),e};function r(t){var n=[];if(e.svg_){var r=t.getCentroidsGroup(t);if(r){r.selectAll("g.em-centroid").append("g").attr("class","em-pie").attr("id",function(t){return n.push(t),"pie_"+t.properties.id});var o=BE(e),s=e.svg().selectAll(o);"WORLD"!==t.geo_&&"mixed"==t.nutsLevel_&&function(t,e){e.each(function(e){var n=Dt(this);if(!this.parentNode.classList.contains("em-cntrg")){var r=n.attr("lvl"),a=i(e.properties.id),o=a?"WORLD"===t.geo_?"block":null:"none",s=null,l=null;a&&"0"!==r&&(s=n.style("stroke")||"#777","WORLD"===t.geo_&&(l=n.style("stroke-width")||"#777")),n.style("display",o).style("stroke",s).style("stroke-width",l)}})}(t,s),function(t){t.forEach(function(t){var n=t.properties.id,r=[],o=i(n);for(var s in o)r.push({code:s,value:o[s]});if(r&&0!=r.length){var l=e.svg().selectAll("#pie_"+n),c=e.classifierSize_(a(n)),u=e.pieChartInnerRadius_,h=hS().sort(null).value(function(t){return t.value}),f=tS().innerRadius(u).outerRadius(c),d=l.append("g").attr("class","piechart").attr("stroke",e.pieStrokeFill_).attr("stroke-width",e.pieStrokeWidth_+"px").style("pointer-events","none"),p=h(r);d.selectAll("path").data(p).join("path").attr("fill",function(t){return e.catColors_[t.data.code]||"lightgray"}).attr("code",function(t){return t.data.code}).each(function(t){this._current={startAngle:t.startAngle,endAngle:t.startAngle}}).transition().delay(function(t,e){return 150*e}).duration(e.transitionDuration_).attrTween("d",function(t){var e=xn(this._current,t);return this._current=e(1),function(t){return f(e(t))}}).on("end",function(){Dt(d.node()).style("pointer-events",null)});d.on("mouseover",function(t,n){Dt(this).style("stroke-width",e.pieStrokeWidth_+1).style("stroke","black"),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(n,e))}).on("mousemove",function(t){e._tooltip&&e._tooltip.mousemove(t)}).on("mouseout",function(){Dt(this).style("stroke-width",e.pieStrokeWidth_).style("stroke",e.pieStrokeFill_),e._tooltip&&e._tooltip.mouseout()})}})}(n),function(t,n){n.on("mouseover",function(t,n){var r=Dt(this);r.attr("fill___",r.style("fill")),r.style("fill",e.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(n,e))}).on("mousemove",function(t,n){e._tooltip&&e._tooltip.mousemove(t)}).on("mouseout",function(){var t=Dt(this);t.attr("fill___")&&(t.style("fill",t.attr("fill___")),e._tooltip&&e._tooltip.mouseout())})}(0,s)}}}e.updateStyle=function(){try{if(!e.classifierSize_)return;if(!e.catColors_){e.catColors({});for(var t=0;t<e.statCodes_.length;t++)e.catColors_[e.statCodes_[t]]=rw[t%10]}return e.pieTotalCode_&&(e.catColors_.other=e.pieOtherColor_,e.catLabels_.other=e.pieOtherText_),e.catLabels_=e.catLabels_||{},e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),r(e),e.dorling_?hI(e,function(t){var n=a(t.properties.id)||0;return e.classifierSize_(n)||0}):dI(e),e}catch(t){console.error("Error in pie symbols styling: "+t.message),console.error(t)}};var i=function(t){for(var n={},r=0,i=e.statCodes_,a=0;a<i.length;a++){var o=i[a],s=e.statData(o).get(t),l=null==s?void 0:s.value;if(null==l||isNaN(l)){if(e.showOnlyWhenComplete())return}else n[o]=l,r+=l}if(e.pieTotalCode_){var c=e.statData(e.pieTotalCode_).get(t),u=null==c?void 0:c.value;r=null==u||isNaN(u)?0:u}if(r&&!isNaN(r)){var h,f=kG(i);try{for(f.s();!(h=f.n()).done;){var d=h.value;void 0!==n[d]&&(n[d]/=r)}}catch(t){f.e(t)}finally{f.f()}if(e.pieTotalCode_){var p=Object.values(n).reduce(function(t,e){return t+e},0);n.other=Math.max(0,1-p)}return n}};var a=function(t){var n,r=0;if(e.pieTotalCode_)!(n=e.statData(e.pieTotalCode_).get(t))||0!=n.value&&!n.value||isNaN(n.value)?e.showOnlyWhenComplete()&&(r=void 0):r=n.value;else for(var i=0;i<e.statCodes_.length;i++){var a=e.statCodes_[i];if(!(n=e.statData(a).get(t))||0!=n.value&&!n.value||isNaN(n.value)){if(e.showOnlyWhenComplete())return}else r+=n.value}if(0!=r)return r};e.getLegendConstructor=function(){return EG};var o=150,s=120,l=Math.min(o,s)/2-10,c=hS().sort(null).value(function(t){return t.value}),u=tS().innerRadius(0).outerRadius(.8*l),h=tS().innerRadius(.9*l).outerRadius(.9*l);return e.tooltip_.textFunction=function(t,n){var r=t.properties.na||t.properties.name,f=t.properties.id,d=i(f),p=[];for(var g in d)p.push({code:g,value:d[g]});var v="";if(v+='<div class="em-tooltip-bar">'.concat(r).concat(f?" (".concat(f,")"):"","</div>"),!p||0===p.length)return v+="<div>".concat(e.noDataText(),"</div>");var _,m="",y="",b="",x=kG(c(p));try{for(x.s();!(_=x.n()).done;){var w=_.value,M=e.catColors()[w.data.code]||"lightgray",S=u(w);if(m+='<path d="'.concat(S,'" fill="').concat(M,'" stroke="white" stroke-width="1" opacity="0.7"></path>'),w.data.value>.1){var C=u.centroid(w),E=h.centroid(w),k=h.centroid(w),A=w.startAngle+(w.endAngle-w.startAngle)/2;k[0]=.95*l*(A<Math.PI?1:-1),y+='<polyline points="'.concat(C.join(",")," ").concat(E.join(",")," ").concat(k.join(","),'"\n                stroke="black" fill="none" stroke-width="1" />');var T=h.centroid(w);T[0]=.99*l*(A<Math.PI?1:-1);var P=A<Math.PI?"start":"end",F=(100*w.data.value).toFixed();isNaN(F)||(b+='<text x="'.concat(T[0],'" y="').concat(T[1],'" text-anchor="').concat(P,'" font-size="12px">\n                    ').concat(F,"%\n                </text>"))}}}catch(t){x.e(t)}finally{x.f()}v+="\n        <div class='em-tooltip-piechart-container'>\n            <svg viewBox=\"".concat(-75," ").concat(-60," ").concat(o," ").concat(s,'" width="').concat(o,'" height="').concat(115,'">\n                <g transform="translate(0,0)">\n                    ').concat(m,"\n                    ").concat(y,"\n                    ").concat(b,"\n                </g>\n            </svg>\n        </div>\n    "),v+='<div class="em-tooltip-breakdown">';var N,L=e.statCodes_.map(function(t){var n=e.statData(t).get(f);return n&&void 0!==n.value&&null!==n.value?{code:t,label:e.catLabels_[t],value:n.value,color:e.catColors()[t]||"#666"}:null}).filter(Boolean).sort(function(t,e){return e.value-t.value}),O=a(f)||L.reduce(function(t,e){return t+e.value},0),D=kG(L);try{for(D.s();!(N=D.n()).done;){var z,I=N.value,G=O?(I.value/O*100).toFixed(0):0;v+='\n        <div class="em-breakdown-item">\n            <span class="em-breakdown-color" style="background:'.concat(I.color,'"></span>\n            <span class="em-breakdown-label">').concat(I.label,'</span>\n            <span class="em-breakdown-value">').concat(null!==(z=I.value)&&void 0!==z&&z.toFixed?zE(I.value):0," (").concat(isNaN(G)?0:G,"%)</span>\n        </div>\n    ")}}catch(t){D.e(t)}finally{D.f()}if(null!=O){var R=e.statData(e.statCodes_[0]).unitText()||"";v+='\n        <div class="em-breakdown-item em-total">\n            <span class="em-breakdown-label">Total</span>\n            <span class="em-breakdown-value">'.concat(zE(O)," ").concat(R,"</span>\n        </div>\n    ")}return v+="</div>"},e};function PG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function FG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PG(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PG(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var NG=function(t){var e=UI(t,!0,"spark");e.sparkLineColor_="black",e.sparkAreaColor_="#41afaa",e.sparkLineWidth_=30,e.sparkLineHeight_=20,e.sparkLineStrokeWidth_=.4,e.sparkLineOpacity_=.6,e.sparkType_="line",e.sparkLineCircleRadius_=0,e.sparkTooltipChart_={width:100,height:50,margin:{left:60,right:40,top:40,bottom:40},circleRadius:1.5},e.showOnlyWhenComplete_=!1,e.sparkLineChartFunction_=void 0,e.statSpark_=null,e.sparkHeightClassifier_=null;var n=["sparkLineColor_","showOnlyWhenComplete_","sparkType_","sparkLineWidth_","sparkLineHeight_","sparkLineStrokeWidth_","sparkLineOpacity_","sparkLineCircleRadius_","sparkLineAreaColor_","sparkTooltipChart_","sparkLineChartFunction_"];n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.sparklineData_=void 0,e.sparklineData=function(t){var n=Object.keys(t[Object.keys(t)[0]]);return e._statDates=n,n.forEach(function(n){var r=Gz(),i={};for(var a in t){var o=t[a];i[a]=o[n]}r.setData(i),e.statData(n,r)}),e},e.statSpark=function(t,n,r){t.filters=t.filters||{};for(var i=0;i<n.length;i++){var a=n[i];t.filters.time=a;var o={};for(var s in t)o[s]=t[s];for(var l in o.filters={},t.filters)o.filters[l]=t.filters[l];e.stat(a,o),r&&(e.catLabels_=e.catLabels_||{},e.catLabels_[a]=r[i])}return e._statDates=n,e},e._statDates=void 0;var r=function(t){for(var n=[],r=0,i=0;i<e._statDates.length;i++){var a=e._statDates[i],o=e.statData(a).get(t);if(!o||0!=o.value&&!o.value||isNaN(o.value)){if(e.showOnlyWhenComplete())return}else n.push({date:a,value:o.value}),r+=o.value}if(0!=r){for(var s=1;s<n.length;s++){var l=n[s-1].value,c=n[s].value;n[s].percentageChange=0===l?.001:(c-l)/l*100}return n}};function i(t){var n=[];t.getCentroidsGroup(t).selectAll("g.em-centroid").attr("id",function(t){return n.push(t.properties.id),"spark_"+t.properties.id});return n.forEach(function(t){var n=e.svg().select("#spark_"+t),i=r(t);i&&a(n,i,e.sparkLineWidth_,e.sparkLineHeight_)}),function(t){var n=BE(t),i=e.svg().selectAll(n);i.on("mouseover",function(t,n){if(r(n.properties.id)){var i=Dt(this);i.attr("fill___",i.style("fill")),i.style("fill",e.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(n,e))}}).on("mousemove",function(t,n){r(n.properties.id)&&e._tooltip&&e._tooltip.mousemove(t)}).on("mouseout",function(){var t=Dt(this);t.style("fill");t.attr("fill___")&&(t.style("fill",t.attr("fill___")),e._tooltip&&e._tooltip.mouseout())})}(t),t}function a(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e.sparkLineChartFunction_&&e.sparkLineChartFunction_!==a)return e.sparkLineChartFunction_(t,n,r,i,o);var s=Qn().domain([0,e._statDates.length-1]).range([.5,r-.5]),l=zt(n.map(function(t){return t.value}))||0,c=It(n.map(function(t){return t.value}))||1,u=Qn().domain([l,c]).range([i,0]),h=n.map(function(t,e){return FG(FG({},t),{},{scaledXValue:s(e),scaledYValue:u(t.value)})}),f=u(0);o&&(t.append("g").attr("class","axis-x").attr("transform","translate(0, ".concat(i,")")).call(ya(s).ticks(e._statDates.length).tickFormat(function(t,n){return e._statDates[n]})).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"),t.append("g").attr("class","axis-y").call(ba(u).ticks(5)),l<0&&c>0&&t.append("line").attr("x1",0).attr("x2",r).attr("y1",f).attr("y2",f).attr("stroke","gray").attr("stroke-dasharray","2,2").attr("stroke-width",1));var d=sS().x(function(t){return t.scaledXValue}).y(function(t){return t.scaledYValue});"area"===e.sparkType_&&t.append("path").datum(h).attr("fill","function"==typeof e.sparkAreaColor_?function(t,n){return e.sparkAreaColor_(t,n)}:e.sparkAreaColor_).attr("stroke","none").attr("opacity",e.sparkLineOpacity_).attr("fill-opacity",.3).attr("d",lS().x(function(t){return t.scaledXValue}).y0(f).y1(function(t){return t.scaledYValue}));var p=t.append("path").datum(h).attr("fill","none").attr("opacity",e.sparkLineOpacity_).attr("stroke","function"==typeof e.sparkLineColor_?function(t,n){return e.sparkLineColor_(t,n)}:e.sparkLineColor_).attr("stroke-width","function"==typeof e.sparkLineStrokeWidth_?function(t,n){return e.sparkLineStrokeWidth_(t,n)}:e.sparkLineStrokeWidth_+"px").attr("d",d);if(!o){var g=p.node().getTotalLength();p.attr("stroke-dasharray",g).attr("stroke-dashoffset",g).transition().duration(e.transitionDuration()).attr("stroke-dashoffset",0)}t.selectAll("circle").data(h).enter().append("circle").attr("cx",function(t){return t.scaledXValue}).attr("cy",function(t){return t.scaledYValue}).attr("r",e.sparkLineCircleRadius_).attr("fill","red").attr("stroke","none")}e.updateClassification=function(){if(!e._statDates){e._statDates=Object.keys(e.statData_);var t=e._statDates.indexOf("default");t>-1&&e._statDates.splice(t,1)}return e.domain=function(){var t=[];if(e.getCentroidsGroup(e).selectAll("g.em-centroid").data().forEach(function(e){var n=e.properties.id,r=o(n);void 0!==r&&t.push(r)}),0===t.length)return[0,1];return Xr(t)}(),e.widthClassifier_=Hm().domain(e.domain).range([0,e.sparkLineWidth_]),e.heightClassifier_=Hm().domain(e.domain).range([0,e.sparkLineHeight_]),e},e.updateStyle=function(){try{return i(e),e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,i),e}catch(t){console.error("Error in proportional symbols styling: "+t.message),console.error(t)}return e},e.tooltip_.textFunction=function(t,n){var i=[],o=t.properties.na,s=t.properties.id;i.push('\n                <div class="em-tooltip-bar">\n                    <b>'.concat(o,"</b>").concat(s?" (".concat(s,")"):"","\n                </div>\n            "));var l=e.sparkTooltipChart_.height,c=e.sparkTooltipChart_.width,u=e.sparkTooltipChart_.margin,h=r(t.properties.id);if(h){var f=c+u.left+u.right,d=l+u.top+u.bottom,p=AM("div").attr("class","em-tooltip-chart-container");a(p.append("svg").attr("class","em-tooltip-chart-svg").attr("width",f).attr("height",d).append("g").attr("transform","translate(".concat(u.left,", ").concat(u.top,")")),h,c,l,!0),i.push(p.node().outerHTML)}return i.join("")};var o=function(t){for(var n=0,r=0;r<e._statDates.length;r++){var i=e._statDates[r],a=e.statData(i);if(a&&"function"==typeof a.get){var o=a.get(t);if(!o||0!==o.value&&!o.value||isNaN(o.value)){if(e.showOnlyWhenComplete())return}else o.value>n&&(n=o.value)}}if(0!==n)return n};return e.getLegendConstructor=function(){return nI},e},LG=Wn?Wn(".2s"):function(t){return String(t)},OG=Wn?Wn(","):function(t){return String(t)};function DG(t,e,n){var r,i=t.map;null===(r=t._flowColorContainer)||void 0===r||r.remove(),t._flowColorContainer=t.lgg.append("g").attr("class","em-flow-color-legend").attr("transform","translate(".concat(e,", ").concat(n,")"));var a=t._flowColorContainer.append("text").attr("class","em-color-legend-title").attr("id","em-color-legend-title").attr("dy","0.35em").text(t.flowColorLegend.title||"Destination"),o=[];if("function"==typeof i.flowColor_)o=t.flowColorLegend.items&&t.flowColorLegend.items.length>0?t.flowColorLegend.items.map(function(t){var e;return{label:t.label,color:t.color,key:null!==(e=t.key)&&void 0!==e?e:null}}):[{label:"please specify legend items ...",color:"#888",key:null}];else{var s=i.topLocationColorScale;o=Array.from(i.topLocationKeys||[]).map(function(t){return{key:t,label:i.nodeNameMap.get(t)||t,color:s(t)}}),o.push({key:"Other",label:"Other",color:i.flowColor_})}var l=a.node().getBBox().height+t.flowColorLegend.titlePadding;t.itemHeight;o.forEach(function(e,n){var r=t._flowColorContainer.append("g").attr("class","em-color-legend-item").attr("transform","translate(0, ".concat(22*n+l,")")).style("cursor","pointer").on("mouseover",function(){!function(t){if(!t)return;LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",function(){return this.getAttribute("data-dest")===t}).classed("dimmed",function(){return!(this.getAttribute("data-dest")===t)})}(e.key),Dt(this).select("text").style("font-weight","bold"),Dt(this).select("rect").attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",!1).classed("dimmed",!1),Dt(this).select("text").style("font-weight","normal"),Dt(this).select("rect").attr("stroke","none")});r.append("rect").attr("width",18).attr("height",22).attr("fill",e.color),r.append("text").attr("x",25).attr("y",14).attr("class","em-legend-label").text(e.label)})}var zG=function(t,e){var n=II(t);if(n.flowWidthLegend={title:null,titlePadding:17,values:null,marginTop:15,labelFormatter:void 0,labels:null,color:"#333",orientation:"horizontal",segments:3,width:150,maxMin:!1},n.nodeSizeLegend={title:null,titlePadding:25,values:null,labels:null,marginTop:20,labelFormatter:void 0},n.flowColorLegend={title:null,titlePadding:0,marginTop:50,items:[],ticks:!1},n.regionColorLegend={title:null,titlePadding:15,marginTop:30,labels:["Exporter","Importer"]},e)for(var r in e)if("colorLegend"==r||"flowWidthLegend"==r||"nodeSizeLegend"==r||"flowColorLegend"==r||"regionColorLegend"==r){for(var i in n[r])void 0!==e[r][i]&&(n[r][i]=e[r][i]);0==e.colorLegend&&(n.colorLegend=!1)}else n[r]=e[r];return n.update=function(){n.updateConfig(),n.updateContainer();var t=n.map,e=n.lgg;if(t.legend_)for(var r in t.legend_)if("colorLegend"==r||"flowWidthLegend"==r||"nodeSizeLegend"==r||"flowColorLegend"==r||"regionColorLegend"==r)for(var i in n[r])void 0!==t.legend_[r][i]&&(n[r][i]=t.legend_[r][i]);else n[r]=t.legend_[r];e.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle(),function(t){var e=t.map,n=t.getBaseX(),r=t.getBaseY();t.flowWidthLegend&&("vertical"==t.flowWidthLegend.orientation?function(t,e,n){var r,i=t.map;if(i.strokeWidthScale){t._flowWidthContainer=t.lgg.append("g").attr("class","em-flow-width-legend").attr("transform","translate(".concat(e,", ").concat(n,")"));var a=t.flowWidthLegend,o=null!==(r=a.segments)&&void 0!==r?r:5;a.title&&t._flowWidthContainer.append("text").attr("class","em-width-legend-title").text(a.title||"Flow width");for(var s=[],l=t.map.maxFlowCount,c=t.map.minFlowCount,u=0;u<o;u++){var h=1===o?.5:u/(o-1);s.push(c+h*(l-c))}var f=a.values||s,d=a.titlePadding||10,p=i.strokeWidthScale;f.forEach(function(e,n){var r=p(e);if(n>0){var i=p(f[n-1]);d+=i/2+r/n+7}var o=a.labelFormatter?a.labelFormatter(e):zE(e);a.labels&&a.labels[n]&&(o=a.labels[n]),t._flowWidthContainer.append("line").attr("x1",0).attr("x2",40).attr("y1",d).attr("y2",d).attr("stroke",a.color?a.color:"#6b6b6b").attr("stroke-width",r),t._flowWidthContainer.append("text").attr("x",50).attr("y",d).attr("dy","0.35em").attr("class","em-legend-label").text(o)})}}(t,n,r+t.flowWidthLegend.marginTop):function(t,e,n){var r,i,a,o;if(!t)return null;var s=t.map||t;if(!s||!s.strokeWidthScale)return null;t._flowWidthContainer&&t._flowWidthContainer.remove();var l=t.flowWidthLegend;t._flowWidthContainer=t.lgg.append("g").attr("class","em-flow-width-legend-horizontal").attr("transform","translate(".concat(e,", ").concat(n,")")),l.title&&t._flowWidthContainer.append("text").attr("class","em-width-legend-title").text(l.title||"Flow width");for(var c=null!==(r=l.x)&&void 0!==r?r:0,u=l.width||t.width,h=null!==(i=l.segments)&&void 0!==i?i:5,f=null!==(a=l.labelOffset)&&void 0!==a?a:12,d=null!==(o=l.pad)&&void 0!==o?o:0,p=c+d,g=c+u-d,v=Math.max(0,g-p),_=[],m=t.map.maxFlowCount,y=t.map.minFlowCount,b=0;b<h+1;b++){var w=1===h?.5:b/(h-1);_.push(y+w*(m-y))}var M=l.values||_,S=Math.max(1,M.length-1),C=v/S,E=M.map(function(t){return Math.max(.5,s.strokeWidthScale(t))}),k=Math.max.apply(Math,x(E)),A=s.strokeWidthScale(m)+l.titlePadding,T=t._flowWidthContainer.append("g").attr("class","em-flow-legend-texts"),P=t._flowWidthContainer.append("g").attr("class","em-flow-legend-lines");P.append("line").attr("class","em-flow-legend-baseline").attr("x1",p).attr("x2",g).attr("y1",A).attr("y2",A).attr("stroke","#eee").attr("stroke-width",1);for(var F=0;F<S;F++){var N,L,O=p+F*C,D=F===S-1?g:p+(F+1)*C,z=E[F],I=M[F];P.append("line").style("stroke-width",z).attr("x1",O).attr("x2",D).attr("y1",A).attr("y2",A).style("stroke",null!==(N=l.color)&&void 0!==N?N:"#000").style("stroke-opacity",null!==(L=l.strokeOpacity)&&void 0!==L?L:1);var G=(O+D)/2;T.append("text").attr("x",G).attr("y",A-f).attr("dy","-0.35em").attr("class","em-legend-label em-flow-legend-label em-flow-width-horizontal-label").text(LG(I))}l.maxMin&&(T.append("text").attr("x",p).attr("y",A+k+6).attr("class","em-legend-label em-flow-legend-min-label").attr("dy","0.5em").text(OG(Math.round(y))),T.append("text").attr("x",g).attr("y",A+k+6).attr("class","em-legend-label em-flow-legend-max-label").attr("dy","0.5em").text(OG(Math.round(m))))}(t,n,r+t.flowWidthLegend.marginTop));var i=t._flowWidthContainer.node(),a=i.getBBox().height;e.flowNodes_&&e._nodeSizeScale&&(t._nodeLegendContainer=t.lgg.append("g").attr("class","em-node-color-legend").attr("transform","translate(".concat(n,", ").concat(r+a,")")),t._nodeSizeContainer=t._nodeLegendContainer.append("g").attr("class","em-node-size-legend").attr("transform","translate(".concat(0,", ",t.nodeSizeLegend.marginTop,")")),CI(t,t._nodeSizeContainer,t.nodeSizeLegend.values,e._nodeSizeScale,t.nodeSizeLegend.title,t.nodeSizeLegend.titlePadding));if(t.flowColorLegend&&(e.flowNodes_&&e._nodeSizeScale||"function"==typeof e.flowColor_)){var o=t.lgg.node().getBBox().height+t.flowColorLegend.marginTop;DG(t,n,o)}if((e.importerRegionIds.length>0||e.exporterRegionIds.length>0)&&t.regionColorLegend){var s=t.lgg.node().getBBox().height+t.regionColorLegend.marginTop;!function(t,e,n){var r;null===(r=t._regionColorContainer)||void 0===r||r.remove(),t._regionColorContainer=t.lgg.append("g").attr("class","em-flow-region-color-legend").attr("transform","translate(".concat(e,", ").concat(n,")"));t._regionColorContainer.append("text").attr("class","em-color-legend-title").attr("id","em-color-legend-title").attr("dy","0.35em").text(t.regionColorLegend.title||"Region fill colors");var i=t.map,a=YE(YE({},t.regionColorLegend.labels[0],i.flowRegionColors_[0]),t.regionColorLegend.labels[1],i.flowRegionColors_[1]),o=t.regionColorLegend.titlePadding;Object.entries(a).forEach(function(e,n){var r=b(e,2),i=r[0],a=r[1];t._regionColorContainer.append("rect").attr("x",0).attr("y",o+20*n).attr("width",t.shapeWidth).attr("height",t.shapeHeight).attr("fill",a),t._regionColorContainer.append("text").attr("x",t.shapeWidth+5).attr("y",o+20*n+15).attr("class","em-legend-label").text(i)})}(t,n,s)}}(n),n.setBoxDimension()},n};function IG(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.cacheKey,r=void 0===n?"default":n,i=e.scale,a=void 0===i?1:i,o=e.markerUnits,s=void 0===o?"strokeWidth":o,l=e.hoverColor,c=void 0===l?"black":l,u=e.outlineColor,h=void 0===u?"#ffffff":u,f=e.idBase,d=void 0===f?function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"arrow","-").concat(Math.random().toString(36).slice(2))}("arrow"):f,p=e.useContextStroke,g=void 0===p||p,v=t.node();if(v._arrowCache||(v._arrowCache=new Map),v._arrowCache.has(r))return v._arrowCache.get(r);var _,m=function(t){var e=t.select("defs");return e.empty()&&(e=t.append("defs")),e}(t),y={normal:"".concat(d),hover:"".concat(d,"-hover"),outline:"".concat(d,"-outline")};(m.select("#".concat(y.normal)).empty()&&jG(m,y.normal,{markerUnits:s,scale:a,fill:g?"context-stroke":c,out:e.out}),m.select("#".concat(y.hover)).empty()&&jG(m,y.hover,{markerUnits:s,scale:a,fill:c,out:e.out}),m.select("#".concat(y.outline)).empty())&&jG(m,y.outline,{markerUnits:s,scale:a,fill:(null===(_=e.out)||void 0===_?void 0:_.flowOutlineColor_)||h,out:e.out});return v._arrowCache.set(r,y),y}function GG(t,e){if(!e)return t;var n=e[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal"];return t.attr("marker-end",n?"url(#".concat(n,")"):null)}function RG(t,e,n){return GG(t,e,n?"hover":"normal")}function jG(t,e,n){var r=n.markerUnits,i=void 0===r?"strokeWidth":r,a=n.scale,o=void 0===a?1:a,s=n.fill,l=void 0===s?"context-stroke":s,c=10,u=3*o;t.append("marker").attr("id",e).attr("markerUnits",i).attr("markerWidth",u).attr("markerHeight",u).attr("viewBox","0 0 ".concat(c," ").concat(c)).attr("refX",9.9).attr("refY",5).attr("orient","auto").append("path").attr("fill",l).attr("d","M0,0 L".concat(9.9,",").concat(5," L0,").concat(c," L").concat(2.2,",").concat(5," Z"))}function BG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function UG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?BG(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BG(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function WG(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return qG(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qG(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function qG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function HG(t,e){var n,r=new Map(t.map(function(t){return[t.id,t]})),i=new Map,a=WG(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s="object"===qE(o.source)?o.source.id:o.source,l="object"===qE(o.target)?o.target.id:o.target,c=r.get(s),u=r.get(l);if(c&&u){var h=s<l?"".concat(s,"|").concat(l):"".concat(l,"|").concat(s);if(!i.has(h)){var f=s<l?c:u,d=s<l?u:c;i.set(h,{key:h,idA:f.id,idB:d.id,nodeA:f,nodeB:d,coordsA:[f.x,f.y],coordsB:[d.x,d.y],flowAB:0,flowBA:0,sampleAB:null,sampleBA:null})}var p=i.get(h),g=+o.value||0;s===p.idA&&l===p.idB?(p.flowAB+=g,p.sampleAB||(p.sampleAB=o)):(p.flowBA+=g,p.sampleBA||(p.sampleBA=o))}}}catch(t){a.e(t)}finally{a.f()}return i}function YG(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return VG(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VG(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function VG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function XG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$G(Object(n),!0).forEach(function(e){YE(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$G(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function JG(t,e){var n=t.svg_,r=t.flowGraph_,i=t.flowColorGradient_||t.flowOpacityGradient_;t._nodeById=t._nodeById||new Map(r.nodes.map(function(t){return[t.id,t]}));var a=function(t,e){var n,r=HG(t,e),i=new Map(t.map(function(t){return[t.id,t]})),a=t.map(function(t){return UG({},t)}),o=[],s=0,l=WG(r.values());try{for(l.s();!(n=l.n()).done;){var c=n.value,u=c.idA,h=c.idB,f=c.coordsA,d=c.coordsB,p=c.flowAB,g=c.flowBA,v=c.sampleAB,_=c.sampleBA,m=i.get(u),y=i.get(h);if(m&&y){var b=v?UG({},v):{},x=_?UG({},_):{};if(delete b.source,delete b.target,delete b.value,delete x.source,delete x.target,delete x.value,p>0&&g>0){var w="__mid__".concat(u,"__").concat(h,"__").concat(s++),M={id:w,x:(f[0]+d[0])/2,y:(f[1]+d[1])/2,isMidpoint:!0};a.push(M),o.push(UG(UG({},b),{},{source:w,target:h,value:p,route:c,originId:u,destId:h,dir:"AtoB"})),o.push(UG(UG({},x),{},{source:w,target:u,value:g,route:c,originId:h,destId:u,dir:"BtoA"}))}else p>0?o.push(UG(UG({},b),{},{source:u,target:h,value:p,route:c,originId:u,destId:h,dir:"AtoB"})):g>0&&o.push(UG(UG({},x),{},{source:h,target:u,value:g,route:c,originId:h,destId:u,dir:"BtoA"}))}}}catch(t){l.e(t)}finally{l.f()}return{nodes:a,links:o}}(r.nodes,r.links),o=function(t,e){var n=function(t){var e=t.nodes,n=t.links;return{nodes:e.map(function(t){return XG({},t)}),links:n.map(function(t){return XG({},t)})}}(e);return function(t){var e,n=t.nodes,r=t.links,i=function(t){return t.id},a=YG(n.entries());try{for(a.s();!(e=a.n()).done;){var o=b(e.value,2),s=o[0],l=o[1];l.index=s,l.sourceLinks=[],l.targetLinks=[]}}catch(t){a.e(t)}finally{a.f()}var c,u=new Map(n.map(function(t,e){return[i(t,e,n),t]})),h=YG(r.entries());try{for(h.s();!(c=h.n()).done;){var f=b(c.value,2),d=f[0],p=f[1];p.index=d;var g=p.source,v=p.target;"object"!==qE(g)&&(g=p.source=u.get(g)),"object"!==qE(v)&&(v=p.target=u.get(v)),g&&v&&(g.sourceLinks.push(p),v.targetLinks.push(p))}}catch(t){h.e(t)}finally{h.f()}}(n),function(t){var e,n=t.nodes,r=YG(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.value=Math.max(Bi(i.sourceLinks,function(t){return t.value}),Bi(i.targetLinks,function(t){return t.value}))}}catch(t){r.e(t)}finally{r.f()}}(n),function(t){var e=t.nodes,n=e.length,r=new Set(e),i=new Set,a=0;for(;r.size;){var o,s=YG(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.depth=a;var c,u=YG(l.sourceLinks);try{for(u.s();!(c=u.n()).done;){var h=c.value.target;i.add(h)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){s.e(t)}finally{s.f()}if(++a>n){console.log("Detected circular link(s); continuing layout.");break}r=i,i=new Set}}(n),function(t){var e=t.nodes,n=new Set,r=[];function i(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.has(t))return null!==(e=t.height)&&void 0!==e?e:0;n.add(t),r.push(t);var o,s=0,l=YG(t.targetLinks);try{for(l.s();!(o=l.n()).done;){var c=o.value.source;if(r.includes(c))console.log("Circular link detected between ".concat(c.id," and ").concat(t.id));else{var u=i(c,a+1);u+1>s&&(s=u+1)}}}catch(t){l.e(t)}finally{l.f()}return t.height=s,r.pop(),s}var a,o=YG(e);try{for(o.s();!(a=o.n()).done;){i(a.value)}}catch(t){o.e(t)}finally{o.f()}var s,l=Math.min.apply(Math,x(e.map(function(t){var e;return null!==(e=t.height)&&void 0!==e?e:0}))),c=YG(e);try{for(c.s();!(s=c.n()).done;){var u,h=s.value;h.height=(null!==(u=h.height)&&void 0!==u?u:0)-l}}catch(t){c.e(t)}finally{c.f()}}(n),function(t,e){var n,r=e.nodes,i=YG(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.sourceLinks.forEach(function(e){return e.width=t.strokeWidthScale(e.value)}),a.targetLinks.forEach(function(e){return e.width=t.strokeWidthScale(e.value)});var o=Math.max(Bi(a.sourceLinks,function(t){return t.width}),Bi(a.targetLinks,function(t){return t.width}));a.x0=a.x1=a.x,a.y0=a.y-o/2,a.y1=a.y+o/2}}catch(t){i.e(t)}finally{i.f()}!function(t){var e,n=YG(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.sourceLinks,a=r.targetLinks;i.sort(function(t,e){return t.target.y-e.target.y}),a.sort(function(t,e){return t.source.y-e.source.y})}}catch(t){n.e(t)}finally{n.f()}}(r)}(t,n),function(t,e){var n,r=e.nodes,i=YG(r);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.y;if(a.isMidpoint){var s,l=YG(a.sourceLinks);try{for(l.s();!(s=l.n()).done;){s.value.y0=o}}catch(t){l.e(t)}finally{l.f()}var c,u=YG(a.targetLinks);try{for(u.s();!(c=u.n()).done;){c.value.y1=o}}catch(t){u.e(t)}finally{u.f()}a.y0=o,a.y1=o}else if(t.flowStack_){var h,f=[],d=[],p=YG(a.sourceLinks);try{for(p.s();!(h=p.n()).done;){var g=h.value,v=g.target,_={link:g,width:g.width,otherY:v.y,at:"out"};(v.x<a.x?f:d).push(_)}}catch(t){p.e(t)}finally{p.f()}var m,y=YG(a.targetLinks);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=b.source,w={link:b,width:b.width,otherY:x.y,at:"in"};(x.x<a.x?f:d).push(w)}}catch(t){y.e(t)}finally{y.f()}var M=f.reduce(function(t,e){return t+e.width},0),S=d.reduce(function(t,e){return t+e.width},0);f.sort(t.flowOrder_),d.sort(t.flowOrder_);for(var C=o-M/2,E=0,k=f;E<k.length;E++){var A=k[E],T=C+A.width/2;"out"===A.at?A.link.y0=T:A.link.y1=T,C+=A.width}for(var P=o-S/2,F=0,N=d;F<N.length;F++){var L=N[F],O=P+L.width/2;"out"===L.at?L.link.y0=O:L.link.y1=O,P+=L.width}var D=Math.max(M,S);a.y0=o-D/2,a.y1=o+D/2}else{var z,I=YG(a.sourceLinks);try{for(I.s();!(z=I.n()).done;){z.value.y0=o}}catch(t){I.e(t)}finally{I.f()}var G,R=YG(a.targetLinks);try{for(R.s();!(G=R.n()).done;){G.value.y1=o}}catch(t){R.e(t)}finally{R.f()}a.y0=o,a.y1=o}}}catch(t){i.e(t)}finally{i.f()}}(t,n),function(t){var e,n=t.nodes,r=YG(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.isMidpoint){var a=[].concat(x(i.sourceLinks||[]),x(i.targetLinks||[]));if(2===a.length){var o,s=[],l=YG(a);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.source===i?s.push({x:c.target.x0,y:c.y1}):c.target===i&&s.push({x:c.source.x1,y:c.y0})}}catch(t){l.e(t)}finally{l.f()}if(2===s.length){var u=(s[0].y+s[1].y)/2;i.y=u,i.y0=u,i.y1=u;var h,f=YG(a);try{for(f.s();!(h=f.n()).done;){var d=h.value;d.source===i&&(d.y0=u),d.target===i&&(d.y1=u)}}catch(t){f.e(t)}finally{f.f()}}}}}}catch(t){r.e(t)}finally{r.f()}}(n),n}(t,a),s=o.nodes,l=o.links,c=t.flowArrows_?IG(n,{cacheKey:"sankey",scale:t.flowArrowScale_||1,markerUnits:"strokeWidth",hoverColor:t.hoverColor_||"black",outlineColor:t.flowOutlineColor_||"#ffffff",useContextStroke:!0}):null,u=n.select("defs").empty()?n.append("defs"):n.select("defs"),h=l.map(function(){return IE("gradient")});return i&&function(t,e,n,r){e.selectAll("linearGradient").data(r).join("linearGradient").attr("id",function(t,e){return n[e]}).attr("gradientUnits","userSpaceOnUse").attr("x1",function(t){var e,n,r,i;return null!==(e=null!==(n=null==t||null===(r=t.source)||void 0===r?void 0:r.x1)&&void 0!==n?n:null==t||null===(i=t.target)||void 0===i?void 0:i.x0)&&void 0!==e?e:0}).attr("x2",function(t){var e,n,r,i;return null!==(e=null!==(n=null==t||null===(r=t.target)||void 0===r?void 0:r.x0)&&void 0!==n?n:null==t||null===(i=t.source)||void 0===i?void 0:i.x1)&&void 0!==e?e:0}).attr("y1",function(t){var e,n;return null!==(e=null!==(n=null==t?void 0:t.y0)&&void 0!==n?n:null==t?void 0:t.y1)&&void 0!==e?e:0}).attr("y2",function(t){var e,n;return null!==(e=null!==(n=null==t?void 0:t.y1)&&void 0!==n?n:null==t?void 0:t.y0)&&void 0!==e?e:0}).each(function(e){var n,r,i=Dt(this);i.selectAll("stop").remove();var a=t.flowColorGradient_&&null!==(n=null===(r=t.flowRegionColors_)||void 0===r?void 0:r[0])&&void 0!==n?n:QG(t,e),o=t.flowColorGradient_?"function"==typeof t.flowColor_?t.flowColor_(e):t.flowColor_:QG(t,e),s=t.flowOpacityGradient_?0:1,l=1;i.append("stop").attr("offset","0%").attr("stop-color",a).attr("stop-opacity",s),i.append("stop").attr("offset","100%").attr("stop-color",o).attr("stop-opacity",l)})}(t,u,h,l),function(t,e,n,r,i,a){var o,s=t.flowColorGradient_||t.flowOpacityGradient_,l=function(t,e){return t.append("g").attr("class","em-flow-lines").attr("id","em-flow-lines").style("opacity",e.flowOpacity_)}(e,t),c=t.flowCurvatureSettings_||{},u=null!==(o=c.curvature)&&void 0!==o?o:.5,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.gapX,r=void 0===n?10:n,i=e.padX,a=void 0===i?2:i,o=e.padY,s=void 0===o?2:o,l=e.bumpY,c=void 0===l?0:l,u=e.curvature,h=void 0===u?.5:u;return function(e){var n=e.source.x1,i=e.y0,o=e.target.x0,l=e.y1;if(n===o)return"M".concat(n,",").concat(i,"L").concat(o,",").concat(l);var u,f=n>o,d=f?o:n,p=f?l:i,g=f?n:o,v=f?i:l,_=[[d,p]],m=function(t){return p+(v-p)*(g===d?0:(t-d)/(g-d))},y=[],b=YG(t);try{for(b.s();!(u=b.n()).done;){var x,w,M=u.value;if(M!==e.source&&M!==e.target){var S=M.x0;if(!(S<=d||S>=g)){var C=null!==(x=M.y0)&&void 0!==x?x:M.y,E=null!==(w=M.y1)&&void 0!==w?w:M.y,k=(C+E)/2,A=S-a,T=S+a,P=m(S),F=P>=k,N=C-(F?0:s),L=E+(F?s:0);if(P>=N&&P<=L){var O=F?L+c:N-c,D=Math.max(d,A-r),z=Math.min(g,T+r);if(z<D)continue;y.push({x1:D,x2:z,y:O})}}}}}catch(t){b.e(t)}finally{b.f()}if(y.length){y.sort(function(t,e){return t.x1-e.x1});var I,G=[],R=YG(y);try{for(R.s();!(I=R.n()).done;){var j=I.value;if(!G.length||j.x1>G[G.length-1].x2)G.push(XG({},j));else{var B=G[G.length-1];B.x2=Math.max(B.x2,j.x2),B.y=j.y}}}catch(t){R.e(t)}finally{R.f()}for(var U=0,W=G;U<W.length;U++){var q=W[U],H=Math.max(d,q.x1),Y=Math.min(g,q.x2),V=_[_.length-1][0];H>V&&(_.push([H,q.y]),V=H),Y>V&&_.push([Y,q.y])}}_.push([g,v]),f&&_.reverse();for(var $="function"==typeof h?h(e):h,X="M".concat(_[0][0],",").concat(_[0][1]),J=1;J<_.length;J++)X+=tR(_[J-1],_[J],$);return X}}(n,XG(XG({},c),{},{curvature:"function"==typeof c.curvature?c.curvature:function(t){return t.source&&t.source.isMidpoint?.5*u:u}}));r.forEach(function(e,n){var r=h(e),o=function(t,e){var n,r,i,a,o,s,l;return t.topLocationKeys&&null!==(n=(r=t.topLocationKeys).has)&&void 0!==n&&n.call(r,null==e||null===(i=e.target)||void 0===i?void 0:i.id)?e.target.id:null!==(a=null!==(o=null==e||null===(s=e.target)||void 0===s?void 0:s.id)&&void 0!==o?o:null==e||null===(l=e.source)||void 0===l?void 0:l.id)&&void 0!==a?a:"Other"}(t,e),c=QG(t,e),u=s?"url(#".concat(a[n],")"):c;t.flowOutlines_&&!t.flowWidthGradient_&&function(t,e,n,r,i){var a=r.width+t.flowOutlineWidth_,o=ZG(t,a,n),s=o.dashVis,l=o.dashGap,c=e.append("path").attr("d",n).attr("fill","none").attr("class","em-flow-link-outline").attr("stroke",t.flowOutlineColor_).attr("stroke-width",a).attr("stroke-dasharray",t.flowArrows_?"".concat(s," ").concat(l):null).style("pointer-events","none");t.flowArrows_&&GG(c,i,"outline")}(t,l,r,e,i);var f=t.flowWidthGradient_?function(t,e,n,r,i,a,o){var s=KG(r,function(){return n},{startRatio:t.flowWidthGradientSettings_.startRatio,samples:t.flowWidthGradientSettings_.samples,minStartWidth:t.flowWidthGradientSettings_.minStartWidth,capEnd:t.flowArrows_},0);if(t.flowOutlines_){var l=KG(r,function(){return n},{startRatio:t.flowWidthGradientSettings_.startRatio,samples:t.flowWidthGradientSettings_.samples,minStartWidth:t.flowWidthGradientSettings_.minStartWidth,capEnd:t.flowArrows_},t.flowOutlineWidth_);e.append("path").attr("d",l).attr("fill",t.flowOutlineColor_).attr("class","em-flow-link-outline")}var c=e.append("path").attr("d",s).attr("fill",i).attr("class","em-flow-link em-flow-link-tapered").attr("data-color-key",a).attr("data-color",o);return c}(t,l,r,e,u,o,c):function(t,e,n,r,i,a,o,s){var l=ZG(t,r.width,n),c=l.dashVis,u=l.dashGap,h=e.append("path").attr("d",n).attr("fill","none").attr("class","em-flow-link").attr("stroke",i).attr("stroke-width",r.width).attr("stroke-linecap","butt").attr("stroke-dasharray",t.flowArrows_?"".concat(c," ").concat(u):null).attr("data-color-key",a).attr("data-color",s);t.flowArrows_&&GG(h,o,"normal");return h}(t,l,r,e,u,o,i,c);!function(t,e,n){n.usesGradient;var r=n.paint,i=n.link,a=n.arrowIds;e.on("mouseover",function(){t.flowWidthGradient_?Dt(this).attr("fill",t.hoverColor_):(Dt(this).attr("stroke",t.hoverColor_),t.flowArrows_&&RG(Dt(this),a,!0)),t._tooltip&&t._tooltip.mouseover(t.tooltip_.textFunction(i,t))}).on("mousemove",function(e){t._tooltip&&t._tooltip.mousemove(e)}).on("mouseout",function(){t.flowWidthGradient_?Dt(this).attr("fill",r):(Dt(this).attr("stroke",r),t.flowArrows_&&RG(Dt(this),a,!1)),t._tooltip&&t._tooltip.mouseout()})}(t,f,{usesGradient:s,paint:u,link:e,arrowIds:i})})}(t,e,s,l,c,h),function(t,e,n){var r=n.filter(function(t){return!t.isMidpoint});e.append("g").attr("class","em-flow-node-stems").selectAll("rect").data(r,function(t){return t.id}).join("rect").attr("x",function(t){return t.x0-.5}).attr("y",function(e){return t.flowStack_?e.y0:e.y}).attr("width",1).attr("height",function(e){return t.flowStack_?Math.max(0,e.y1-e.y0):0}).attr("fill","#000")}(t,e,s),n.node()}function ZG(t,e,n){var r,i,a,o,s,l=t.flowArrows_?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t*(3*e)*.9;return.85*n}(e,t.flowArrowScale_):0,c=b((r=n,i=l,a=Math.max(0,function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e.getTotalLength()}(r)),o=Math.max(0,a-Math.min(i,a)),s=Math.min(i,a),[o,s]),2);return{backoff:l,dashVis:c[0],dashGap:c[1]}}function KG(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.startRatio,i=void 0===r?.25:r,a=n.samples,o=void 0===a?48:a,s=n.minStartWidth,l=void 0===s?1.5:s,c=n.capEnd,u=void 0===c?!out.flowArrows_:c,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:48,n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",t);for(var r=n.getTotalLength(),i=[],a=0;a<=e;a++){var o=n.getPointAtLength(r*a/e);i.push([o.x,o.y])}return i}(e(t),o),d=[],p=0;p<f.length;p++){var g=f[Math.max(0,p-1)],v=f[Math.min(f.length-1,p+1)],_=v[0]-g[0],m=v[1]-g[1],y=Math.hypot(_,m)||1;d.push([-m/y,_/y])}for(var b=Math.max(l,t.width*i),x=t.width,w=[],M=[],S=f.length-1,C=0;C<=S;C++){var E=(b+(x-b)*(C/S))/2+h,k=d[C][0]*E,A=d[C][1]*E;w.push([f[C][0]+k,f[C][1]+A]),M.push([f[C][0]-k,f[C][1]-A])}M.reverse(),u&&(w[S][1]=M[0][1]=(w[S][1]+M[0][1])/2);for(var T="M".concat(w[0][0],",").concat(w[0][1]),P=1;P<w.length;P++)T+="L".concat(w[P][0],",").concat(w[P][1]);for(var F=0;F<M.length;F++)T+="L".concat(M[F][0],",").concat(M[F][1]);return T+="Z"}function QG(t,e){var n,r,i="string"==typeof t.flowColor_?t.flowColor_:"#999999";if("function"==typeof t.flowColor_)try{var a=t.flowColor_(e);if(null!=a)return a}catch(t){console.log("flowColor_ threw in sankey getFlowStroke:",t)}return function(t,e,n,r){if(!t.topLocationKeys||!t.flowTopLocations_||!t.flowNodes_)return r;var i=t.flowTopLocationsType_||"sum";if("origin"===i)return t.topLocationKeys.has(e)?t.topLocationColorScale(e):r;if("destination"===i)return t.topLocationKeys.has(n)?t.topLocationColorScale(n):r;return t.topLocationKeys.has(n)?t.topLocationColorScale(n):t.topLocationKeys.has(e)?t.topLocationColorScale(e):r}(t,null!==(n=e.originId)&&void 0!==n?n:"object"===qE(e.source)?e.source.id:e.source,null!==(r=e.destId)&&void 0!==r?r:"object"===qE(e.target)?e.target.id:e.target,i)}function tR(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=b(t,2),i=r[0],a=r[1],o=b(e,2),s=o[0],l=o[1],c=function(t){return i+(s-i)*t},u=c(n),h=c(1-n);return"C".concat(u,",").concat(a," ").concat(h,",").concat(l," ").concat(s,",").concat(l)}function eR(t,e){var n,r=t.width_||t.innerWidth_||1e3,i=t.height_||t.innerHeight_||800,a=Math.sqrt(r*r+i*i),o={segments:Qn().domain([0,a]).range([1,10]),nodes:t._nodeSizeScale||Hm().range([4,18])},s=function(t,e,n){var r={nodes:[],links:[],paths:[]};return r.nodes=t.map(function(t){return t.fx=t.x,t.fy=t.y,t}),e.forEach(function(t){for(var e=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}(t.source,t.target),i=Math.round(n.segments(e)),a=Qn().domain([0,i+1]).range([t.source.x,t.target.x]),o=Qn().domain([0,i+1]).range([t.source.y,t.target.y]),s=t.source,l=[s],c=1;c<=i;c++){var u={x:a(c),y:o(c)};l.push(u),r.nodes.push(u),r.links.push({source:s,target:u}),s=u}l.push(t.target),r.links.push({source:s,target:t.target}),r.paths.push(l)}),r}(t.flowGraph_.nodes,t.flowGraph_.links,o),l=t.flowArrows_?t._arrowIds||{}:null,c=sS().curve(dC.beta(.85)).x(function(t){return t.x}).y(function(t){return t.y}),u=e.selectAll("path.em-flow-link").data(s.paths).enter().append("path").attr("d",c).attr("class","em-flow-link").attr("fill","none").style("cursor","pointer").style("pointer-events","auto").attr("stroke-linecap","butt").attr("stroke-opacity",null!==(n=t.flowOpacity_)&&void 0!==n?n:1).each(function(e,n){var r,i,a=e[0],o=e[e.length-1],s=a.id||a.code||a.iata,c=o.id||o.code||o.iata,u=null!==(r=null===(i=t.flowGraph_.links)||void 0===i||null===(i=i[n])||void 0===i?void 0:i.value)&&void 0!==r?r:1,h=sR(t,s,c,null,u),f=lR(t,s,c),d=h,p=t.strokeWidthScale(u);Dt(this).attr("data-nb",u).attr("data-origin",s).attr("data-dest",c).attr("data-color",h).attr("data-color-key",f).attr("stroke",d).attr("stroke-width",p).attr("stroke-dasharray",t.flowArrows_?"5 5":null),t.flowArrows_&&GG(Dt(this),l,"normal")});u.on("mouseover",function(e,n){var r,i,a=n[0],o=n[n.length-1],s=a.id||a.code||a.iata,c=o.id||o.code||o.iata,u=null!==(r=null===(i=t.flowGraph_.links)||void 0===i||null===(i=i.find(function(t){return(t.source.id||t.source.code)===s&&(t.target.id||t.target.code)===c}))||void 0===i?void 0:i.value)&&void 0!==r?r:1;cR(t,s,c,u,l).call(this,e)}).on("mousemove",function(e){t._tooltip&&t._tooltip.mousemove(e)}).on("mouseout",function(e,n){var r=Dt(this).attr("data-color");hR(t,r,l).call(this,e)});var h=ph().alphaDecay(t.flowBundleSettings_.alphaDecay).force("charge",gh().strength(t.flowBundleSettings_.chargeStrength).distanceMax(t.flowBundleSettings_.distanceMax?t.flowBundleSettings_.distanceMax:2*o.nodes.range()[1])).force("link",oh().strength(t.flowBundleSettings_.linkStrength).distance(0).iterations(t.flowBundleSettings_.linkIterations)).on("tick",function(){return u.attr("d",c)}).on("end",function(){return console.log("layout complete")});h.nodes(s.nodes),h.force("link").links(s.links)}function nR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return rR(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function rR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function iR(t,e){!function(t,e){if(null==t||!t.flowGraph_)return;var n=t.svg_||e,r=t.flowArrows_?IG(n,{cacheKey:"straight",scale:t.flowArrowScale_||1,markerUnits:"strokeWidth",hoverColor:t.hoverColor_||"black",outlineColor:t.flowOutlineColor_||"#ffffff",useContextStroke:!0}):null,i=function(t){var e=t.flowGraph_||{},n=e.nodes,r=void 0===n?[]:n,i=e.links,a=void 0===i?[]:i;t._nodeById=t._nodeById||new Map(r.map(function(t){return[t.id,t]}));var o=[];if(t.flowBidirectional_){var s,l=nR(HG(r,a).values());try{for(l.s();!(s=l.n()).done;){var c=s.value,u=c.idA,h=c.idB,f=c.nodeA,d=c.nodeB,p=c.flowAB,g=c.flowBA,v=(f.x+d.x)/2,_=(f.y+d.y)/2;p>0&&g>0?(o.push({originId:u,destId:h,x1:v,y1:_,x2:d.x,y2:d.y,value:p,route:c,nodeA:f,nodeB:d,isHalf:!0}),o.push({originId:h,destId:u,x1:v,y1:_,x2:f.x,y2:f.y,value:g,route:c,nodeA:f,nodeB:d,isHalf:!0})):p>0?o.push({originId:u,destId:h,x1:f.x,y1:f.y,x2:d.x,y2:d.y,value:p,route:c,nodeA:f,nodeB:d}):g>0&&o.push({originId:h,destId:u,x1:d.x,y1:d.y,x2:f.x,y2:f.y,value:g,route:c,nodeA:f,nodeB:d})}}catch(t){l.e(t)}finally{l.f()}}else{var m,y=new Map,b=(t.flowGraph_||{}).links,w=void 0===b?[]:b,M=t._nodeById,S=nR(w);try{for(S.s();!(m=S.n()).done;){var C=m.value,E=aR(C.source),k=aR(C.target);if(E&&k&&E!==k){var A=E<k?"".concat(E,"|").concat(k):"".concat(k,"|").concat(E),T=+C.value||+C.nb||0;if(T>0){var P=M.get(E)||("object"===qE(C.source)?C.source:null),F=M.get(k)||("object"===qE(C.target)?C.target:null);if(P&&F){var N=y.get(A);N?N.value+=T:y.set(A,{originId:E,destId:k,nodeA:P,nodeB:F,value:T,get x1(){return this.nodeA.x},get y1(){return this.nodeA.y},get x2(){return this.nodeB.x},get y2(){return this.nodeB.y}})}}}}}catch(t){S.e(t)}finally{S.f()}o.push.apply(o,x(y.values()))}return o}(t);!function(t,e){var n,r=nR(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a="function"==typeof t.strokeWidthScale?t.strokeWidthScale(i.value):i.value||1;i.width=+(null==a?1:a).toFixed(1)}}catch(t){r.e(t)}finally{r.f()}}(t,i);var a=function(t,e,n){var r=t.flowColorGradient_||t.flowOpacityGradient_;if(!r)return null;for(var i=t.svg_||e,a=i.select("defs").empty()?i.append("defs"):i.select("defs"),o=new Map,s=new Array(n.length),l=0;l<n.length;l++){var c=n[l],u=sR(t,c.originId,c.destId,c.route,c.value),h="".concat(Math.round(c.x1),":").concat(Math.round(c.y1),":").concat(Math.round(c.x2),":").concat(Math.round(c.y2),":").concat(u,":").concat(t.flowOpacityGradient_?1:0),f=o.get(h);if(!f){var d,p;f=IE("flowgrad"),o.set(h,f);var g=a.append("linearGradient").attr("id",f).attr("gradientUnits","userSpaceOnUse").attr("x1",c.x1).attr("y1",c.y1).attr("x2",c.x2).attr("y2",c.y2),v=t.flowColorGradient_&&null!==(d=null===(p=t.flowRegionColors_)||void 0===p?void 0:p[0])&&void 0!==d?d:u,_=t.flowOpacityGradient_?0:1,m=1;g.append("stop").attr("offset","0%").attr("stop-color",v).attr("stop-opacity",_),g.append("stop").attr("offset","100%").attr("stop-color",u).attr("stop-opacity",m)}s[l]=f}return s}(t,e,i);!function(t,e,n,r,i){var a=e.select(".em-flow-lines").empty()?e.append("g").attr("class","em-flow-lines").attr("id","em-flow-lines"):e.select(".em-flow-lines"),o=!!r;if(t.flowEdgeBundling_)return void eR(t,a);for(var s=0;s<n.length;s++){var l=n[s],c=sR(t,l.originId,l.destId,l.route,l.value),u=lR(t,l.originId,l.destId),h=o&&r[s]?"url(#".concat(r[s],")"):c,f=void 0;if(t.flowWidthGradient_){var d,p,g,v,_,m=l.x2-l.x1,y=l.y2-l.y1,b=Math.hypot(m,y)||1,x=-y/b,w=m/b,M=null!==(d=null===(p=t.flowWidthGradientSettings_)||void 0===p?void 0:p.startRatio)&&void 0!==d?d:.25,S=null!==(g=null===(v=t.flowWidthGradientSettings_)||void 0===v?void 0:v.minStartWidth)&&void 0!==g?g:.25*l.width,C=Math.max(S,l.width*M),E=l.width,k=l.x1+x*(C/2),A=l.y1+w*(C/2),T=l.x2+x*(E/2),P=l.y2+w*(E/2),F=l.x2-x*(E/2),N=l.y2-w*(E/2),L=l.x1-x*(C/2),O=l.y1-w*(C/2),D="M".concat(k,",").concat(A,"L").concat(T,",").concat(P,"L").concat(F,",").concat(N,"L").concat(L,",").concat(O,"Z");f=a.append("path").attr("d",D).attr("class","em-flow-link em-flow-link-tapered").attr("fill",h).attr("data-color-key",u).attr("data-color",c).attr("data-nb",l.value).attr("data-origin",l.originId).attr("data-dest",l.destId).attr("opacity",null!==(_=t.flowOpacity_)&&void 0!==_?_:1),t.flowArrows_&&GG(f,i,"normal")}else{var z,I=Math.hypot(l.x2-l.x1,l.y2-l.y1)||0,G=t.flowArrows_?oR(l.width):0,R=Math.max(0,I-G),j=t.flowArrows_?Math.min(G,I):null;f=a.append("line").datum(l).attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).attr("class","em-flow-link").attr("data-nb",l.value).attr("data-origin",l.originId).attr("data-dest",l.destId).attr("stroke",h).attr("stroke-width",l.width).attr("stroke-opacity",null!==(z=t.flowOpacity_)&&void 0!==z?z:1).attr("stroke-linecap","butt").attr("stroke-dasharray",t.flowArrows_?"".concat(R," ").concat(j):null).attr("data-color",c).attr("data-color-key",u)}f.on("mouseover",cR(t,l.originId,l.destId,l.value,i)).on("mousemove",uR(t)).on("mouseout",hR(t,c,i)),t.flowArrows_&&GG(f,i,"normal")}}(t,e,i,a,r)}(t,e)}var aR=function(t){var e,n;return t&&"object"===qE(t)?null!==(e=null!==(n=t.id)&&void 0!==n?n:t.iata)&&void 0!==e?e:t.code:t};function oR(t){return.7*(t*(3*(out.flowArrowScale_||1))*.9)}function sR(t,e,n,r,i){var a="string"==typeof t.flowColor_?t.flowColor_:"#999999",o=t._nodeById||new Map(t.flowGraph_.nodes.map(function(t){return[t.id,t]})),s={source:o.get(e)||{id:e},target:o.get(n)||{id:n},value:i,route:r};if("function"==typeof t.flowColor_){var l;try{l=t.flowColor_(s)}catch(t){}if(null==l&&t.flowColor_.length>=3)try{l=t.flowColor_(e,n,r)}catch(t){}if(null!=l)return l}return function(t,e,n,r){if(!t.topLocationKeys||!t.flowTopLocations_)return r;var i=t.flowTopLocationsType_||"sum";if("origin"===i)return t.topLocationKeys.has(e)?t.topLocationColorScale(e):r;if("destination"===i)return t.topLocationKeys.has(n)?t.topLocationColorScale(n):r;return t.topLocationKeys.has(n)?t.topLocationColorScale(n):t.topLocationKeys.has(e)?t.topLocationColorScale(e):r}(t,e,n,a)}function lR(t,e,n){if(!t.topLocationKeys)return null;var r=t.flowTopLocationsType_||"sum";return"origin"===r?t.topLocationKeys.has(e)?e:"Other":"destination"===r?t.topLocationKeys.has(n)?n:"Other":t.topLocationKeys.has(n)?n:t.topLocationKeys.has(e)?e:"Other"}function cR(t,e,n,r,i){return function(a){var o=t.hoverColor_||"black";if(Dt(this).attr("stroke",o).attr("stroke-opacity",1),t.flowArrows_&&RG(Dt(this),i,!0),t._tooltip){var s=t.flowGraph_.nodes.find(function(t){return t.id===e}),l=t.flowGraph_.nodes.find(function(t){return t.id===n}),c={source:s,target:l,value:r};t._tooltip.mouseover(t.tooltip_.textFunction(c,t))}}}function uR(t){return function(e){t._tooltip&&t._tooltip.mousemove(e)}}function hR(t,e,n){return function(){Dt(this).attr("stroke",e).attr("stroke-opacity",t.flowOpacity_),t.flowArrows_&&RG(Dt(this),n,!1),t._tooltip&&t._tooltip.mouseout()}}function fR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return dR(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function dR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pR(t,e){!function(t){var e,n=t.flowGraph_.nodes,r=t.topLocationKeys||new Set,i=(t.topLocationColorScale,t.flowTopLocationsType_),a=fR(n);try{var o=function(){var n,a=e.value,o=new Map,s=0,l=fR(a.targetLinks);try{for(l.s();!(n=l.n()).done;){var c=n.value,u=c.source.id;if(u!==a.id){var h=void 0;h="origin"===i?r.has(u)?u:"Other":"destination"===i?r.has(a.id)?a.id:"Other":r.has(u)||r.has(a.id)?r.has(a.id)?a.id:u:"Other",o.set(h,(o.get(h)||0)+c.value)}else t.flowInternal_&&(s+=c.value)}}catch(t){l.e(t)}finally{l.f()}var f,d=fR(a.sourceLinks);try{for(d.s();!(f=d.n()).done;){var p=f.value,g=p.target.id;if(g!==a.id){var v=void 0;v="origin"===i?r.has(a.id)?a.id:"Other":"destination"===i?r.has(g)?g:"Other":r.has(g)||r.has(a.id)?r.has(g)?g:a.id:"Other",o.set(v,(o.get(v)||0)+p.value)}else t.flowInternal_&&(s+=p.value)}}catch(t){d.e(t)}finally{d.f()}a.donutValues=Array.from(o.entries()).map(function(e){var n=b(e,2),r=n[0];return{label:r,value:n[1],color:MR(r,a.id,t)}}),t.flowInternal_&&s>0&&a.donutValues.push({label:"Internal",value:s,color:"#999"})};for(a.s();!(e=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}}(t),function(t){var e,n={},r=fR(t.flowGraph_.nodes);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]={x:i.x,y:i.y,incoming:0,outgoing:0,internal:0}}}catch(t){r.e(t)}finally{r.f()}var a,o=fR(t.flowGraph_.links);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.source.id,c=s.target.id;n[l]&&(n[l].outgoing+=s.value),n[c]&&(n[c].incoming+=s.value),l===c&&(n[l].internal+=s.value)}}catch(t){o.e(t)}finally{o.f()}t.locationStats=n}(t);var n=e.append("g").attr("class","donuts").attr("id","donuts"),r=It(t.flowGraph_.nodes,function(t){return Bi(t.donutValues,function(t){return t.value})});t._nodeSizeScale=t.flowNodeSizeScale_||Hm().domain([0,r]).range([3,10]);var i=tS().innerRadius(5),a=hS().value(function(t){return t.value}).sort(null);Object.entries(t.locationStats).forEach(function(e){var r=b(e,2),o=r[0],s=r[1],l=s.x,c=s.y,u=s.incoming,h=s.outgoing,f=s.internal,d=t.flowInternal_?u+h+f:u+h;if(0!==d){var p=bR(o,t),g=xR(o,t),v=[].concat(x(p),x(g)),_=new Map;v.forEach(function(t){var e=t.color;_.set(e,(_.get(e)||0)+t.value)});var m=Array.from(_,function(t){var e=b(t,2),n=e[0];return{label:n,value:e[1],color:n}}),y=a(m);y.forEach(function(e){e.data.parent={id:o,name:t.nodeNameMap.get(o)||o,donutValues:m}});var w=n.append("g").attr("class","donut-group").attr("transform","translate(".concat(l,",").concat(c,")")).attr("data-total",d),M=t.flowNodeMouseoverFunction_||_R;w.selectAll("path").data(y).join("path").attr("d",i.innerRadius(.4*t._nodeSizeScale(d)).outerRadius(t._nodeSizeScale(d))).attr("fill",function(t){return t.data.color}).attr("stroke","white").attr("stroke-width",.5).style("cursor","pointer").on("mouseover",function(e,n){t._tooltip&&t._tooltip.mouseover(M(n,t)),mR(e,t.svg_),gR(o)}).on("mousemove",function(e,n){t._tooltip&&t._tooltip.mousemove(e)}).on("mouseout",function(e,n){t._tooltip&&t._tooltip.mouseout(),yR(e,t.svg_),vR()}),w.append("circle").attr("r",.4*t._nodeSizeScale(d)).attr("fill","white").style("cursor","pointer").on("mouseover",function(e){var n=y[0];t._tooltip&&t._tooltip.mouseover(M(n,t)),mR(e,t.svg_),gR(o)}).on("mousemove",function(e){t._tooltip&&t._tooltip.mousemove(e)}).on("mouseout",function(e){t._tooltip&&t._tooltip.mouseout(),yR(e,t.svg_),vR()})}})}function gR(t){t&&LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",function(){var e=this.getAttribute("data-origin"),n=this.getAttribute("data-dest");return e===t||n===t}).classed("dimmed",function(){var e=this.getAttribute("data-origin"),n=this.getAttribute("data-dest");return!(e===t||n===t)})}function vR(){LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",!1).classed("dimmed",!1)}function _R(t,e){var n,r,i=Wn(".0%"),a=t.data.parent,o=Bi(a.donutValues,function(t){return t.value}),s=null===(n=e.statData)||void 0===n?void 0:n.call(e),l=(null==s||null===(r=s.unitText)||void 0===r?void 0:r.call(s))||"",c=[];c.push('\n        <div class="em-tooltip-bar">\n            <b><span class="em-tooltip-label-text">'.concat(a.name||a.id||"Unknown location","</span></b>\n        </div>\n    ")),c.push('<div class="em-tooltip-text"><table class="em-tooltip-table em-donut-tooltip-table"><tbody>');var u=bR(a.id,e),h=Bi(u,function(t){return t.value});if(h>0){var f=i(h/o);c.push('\n            <tr class="em-donut-tooltip-section-header">\n                <td>Incoming:</td>\n                <td>'.concat(zE(h)," (").concat(f,")</td>\n            </tr>\n        ")),u.forEach(function(t){var e=i(t.value/o);c.push('\n                <tr class="em-donut-tooltip-row">\n                    <td class="em-donut-tooltip-label">\n                        <span class="em-donut-tooltip-colorchip" style="background:'.concat(t.color,'"></span>\n                        <span class="em-tooltip-label-text">').concat(t.name||t.key,'</span>\n                    </td>\n                    <td class="em-donut-tooltip-value">\n                        ').concat(zE(t.value)," (").concat(e,")\n                    </td>\n                </tr>\n            "))})}var d=xR(a.id,e),p=Bi(d,function(t){return t.value});if(p>0){var g=i(p/o);c.push('\n            <tr class="em-donut-tooltip-section-header">\n                <td>Outgoing:</td>\n                <td>'.concat(zE(p)," (").concat(g,")</td>\n            </tr>\n        ")),d.forEach(function(t){var e=i(t.value/o);c.push('\n                <tr class="em-donut-tooltip-row">\n                    <td class="em-donut-tooltip-label">\n                        <span class="em-donut-tooltip-colorchip" style="background:'.concat(t.color,'"></span>\n                        <span class="em-tooltip-label-text">').concat(t.name||t.key,'</span>\n                    </td>\n                    <td class="em-donut-tooltip-value">\n                        ').concat(zE(t.value)," (").concat(e,")\n                    </td>\n                </tr>\n            "))})}return c.push('\n        <tr class="em-donut-tooltip-total">\n            <td colspan="2">Total: '.concat(zE(o)," ").concat(l,"</td>\n        </tr>\n    ")),c.push("</tbody></table></div>"),c.join("")}var mR=function(t,e){var n=+e.attr("data-zoom")||1;Dt(t.target.parentNode).selectAll("path").each(function(){var t=Dt(this),e=+t.attr("stroke-width")||0;t.attr("data-stroke-width",e)}).attr("stroke","black").attr("stroke-width",2/n)},yR=function(t,e){var n=+e.attr("data-zoom")||1;Dt(t.target.parentNode).selectAll("path").attr("stroke","white").attr("stroke-width",function(){return(+Dt(this).attr("data-stroke-width")||0)/n})};function bR(t,e){var n,r=e.topLocationKeys,i=e.flowTopLocationsType_,a=e.flowInternal_,o={},s=fR(e.flowGraph_.links);try{for(s.s();!(n=s.n()).done;){var l=n.value,c=l.source.id,u=l.target.id;if(u===t)if(c!==u){var h=void 0;o[h="destination"===i?t:"origin"===i?r.has(c)?c:"Other":r.has(c)||r.has(t)?r.has(c)?c:t:"Other"]=(o[h]||0)+l.value}else a&&(o.Internal=(o.Internal||0)+l.value)}}catch(t){s.e(t)}finally{s.f()}return wR(Object.entries(o).map(function(n){var r,i=b(n,2),a=i[0],o=i[1];return{key:a,name:(null===(r=e.nodeNameMap)||void 0===r?void 0:r.get(a))||a,value:o,color:MR(a,t,e)}}))}function xR(t,e){var n,r=e.topLocationKeys,i=e.flowTopLocationsType_,a=e.flowInternal_,o={},s=fR(e.flowGraph_.links);try{for(s.s();!(n=s.n()).done;){var l=n.value,c=l.source.id,u=l.target.id;if(c===t)if(c!==u){var h=void 0;o[h="origin"===i?t:"destination"===i?r.has(u)?u:"Other":r.has(u)||r.has(t)?r.has(u)?u:t:"Other"]=(o[h]||0)+l.value}else a&&(o.Internal=(o.Internal||0)+l.value)}}catch(t){s.e(t)}finally{s.f()}return wR(Object.entries(o).map(function(n){var r,i=b(n,2),a=i[0],o=i[1];return{key:a,name:(null===(r=e.nodeNameMap)||void 0===r?void 0:r.get(a))||a,value:o,color:MR(a,t,e)}}))}function wR(t){return t.sort(function(t,e){return"Other"===t.key?1:"Other"===e.key?-1:e.value-t.value})}function MR(t,e,n){var r=n.topLocationKeys||new Set,i=n.topLocationColorScale;return"Other"===t?"#666":"Internal"===t?r.has(e)?i(e):"#999":r.has(t)?i(t):"#666"}function SR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return CR(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function CR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ER(t,e){t.locationStats||function(t){var e,n={},r=SR(t.flowGraph_.nodes);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]={x:i.x,y:i.y,incoming:0,outgoing:0,internal:0}}}catch(t){r.e(t)}finally{r.f()}var a,o=SR(t.flowGraph_.links);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.source.id,c=s.target.id,u=s.value||0;n[l]&&(n[l].outgoing+=u),n[c]&&(n[c].incoming+=u),l===c&&(n[l].internal+=u)}}catch(t){o.e(t)}finally{o.f()}t.locationStats=n}(t);var n=t.locationStats,r=t.flowInternal_,i=Object.values(n).map(function(t){return r?t.incoming+t.outgoing+t.internal:t.incoming+t.outgoing});It(i.length?i:[0]);t._nodeSizeScale=t.flowNodeSizeScale_||pI(i,t.flowMaxNodeSize_||20,t.flowMinNodeSize_||0);var a=e.append("g").attr("class","em-node-circles");Object.entries(n).forEach(function(e){var i=b(e,2),o=i[0],s=i[1],l=r?s.incoming+s.outgoing+s.internal:s.incoming+s.outgoing;if(l){var c=a.append("g").attr("class","em-node-circle-group").attr("transform","translate(".concat(s.x,",").concat(s.y,")")).attr("data-id",o),u=t._nodeSizeScale(l);c.append("circle").attr("r",u).attr("class","em-node-circle").attr("fill",function(e){var n;return null!==(n=t.topLocationKeys)&&void 0!==n&&n.has(e)?t.topLocationColorScale(e):"string"==typeof t.flowColor_?t.flowColor_:"#2d50a0"}(o)).attr("stroke","white").attr("stroke-width",.5).style("cursor","pointer").on("mouseover",function(e){Dt(this).attr("stroke-width",1.5),t._tooltip&&t._tooltip.mouseover(function(e){var i,a,o,s=n[e],l=s.incoming,c=s.outgoing,u=s.internal,h=r?l+c+u:l+c,f=(null===(i=t.statData)||void 0===i||null===(i=i.call(t))||void 0===i||null===(a=i.unitText)||void 0===a?void 0:a.call(i))||"";return'\n            <div class="em-tooltip-bar"><b>'.concat((null===(o=t.nodeNameMap)||void 0===o?void 0:o.get(e))||e,'</b></div>\n            <div class="em-tooltip-text">\n                <table class="em-tooltip-table"><tbody>\n                    <tr><td>Incoming:</td><td style="text-align:right">').concat(zE(l),'</td></tr>\n                    <tr><td>Outgoing:</td><td style="text-align:right">').concat(zE(c),"</td></tr>\n                    ").concat(r?'<tr><td>Internal:</td><td style="text-align:right">'.concat(zE(u),"</td></tr>"):"",'\n                    <tr class="em-tooltip-total">\n                        <td colspan="2" style="padding-top:4px;font-weight:bold;">\n                            Total: ').concat(zE(h)," ").concat(f,"\n                        </td>\n                    </tr>\n                </tbody></table>\n            </div>\n        ")}(o)),function(t){if(!t)return;LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",function(){var e=this.getAttribute("data-origin"),n=this.getAttribute("data-dest");return e===t||n===t}).classed("dimmed",function(){var e=this.getAttribute("data-origin"),n=this.getAttribute("data-dest");return!(e===t||n===t)})}(o)}).on("mouseout",function(e){Dt(this).attr("stroke-width",.5),t._tooltip&&t._tooltip.mouseout(e),LM(".em-flow-link, .em-flow-link-bundled").classed("highlighted",!1).classed("dimmed",!1)}).on("mousemove",function(e){t._tooltip&&t._tooltip.mousemove(e)})}})}function kR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return AR(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function AR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var TR=function(t){var e=UI(t,!0,"flow");e.strokeWidthScale=null,e.tooltip_.textFunction=FR,e.flowLineType_="curved",e.flowBidirectional_=!0,e.flowStack_=!0,e.flowEdgeBundling_=!1,e.flowCurvatureSettings_={gapX:10,padX:2,padY:2,bumpY:1,curvature:.5},e.flowColor_="#848484ff",e.flowRegionColors_=["#bbd7ee","#c7e3c6"],e.flowRegionLabels_=["Exporter","Importer"],e.flowMaxWidth_=30,e.flowMinWidth_=1,e.flowArrows_=!0,e.flowArrowScale_=.7,e.flowOutlines_=!0,e.flowOutlineWidth_=1.2,e.flowOutlineColor_="#ffffff",e.flowLabelOffsets_={x:3,y:0},e.flowOpacity_=.5,e.flowOrder_=function(t,e){var n,r,i,a,o=t.otherY-e.otherY;if(o)return o;if(t.at!==e.at)return"out"===t.at?-1:1;var s=(null!==(n=e.link.value)&&void 0!==n?n:0)-(null!==(r=t.link.value)&&void 0!==r?r:0);return s||String(null!==(i=t.link.id)&&void 0!==i?i:"").localeCompare(String(null!==(a=e.link.id)&&void 0!==a?a:""))},e.flowNodes_=!1,e.flowNodeType_="circle",e.flowMinNodeSize_=3,e.flowMaxNodeSize_=10,e.flowNodeSizeScale_=null,e.flowInternal_=!0,e.flowTopLocations_=0,e.flowTopLocationsType_="destination",e.flowColorGradient_=!1,e.flowOpacityGradient_=!1,e.flowWidthGradient_=!1,e.flowWidthGradientSettings_={startRatio:.25,samples:48,minStartWidth:1.5,capEnd:!0,curvatureFollow:!0},e.flowBundleSettings_={alphaDecay:.1,chargeStrength:10,distanceMax:null,linkStrength:.7,linkIterations:1};var n=["flowGraph_","flowColor_","flowRegionColors_","flowRegionLabels_","flowArrows_","flowArrowScale_","flowMaxWidth_","flowMinWidth_","flowOutlines_","flowOutlineWidth_","flowOutlineColor_","flowColorGradient_","flowStack_","flowNodes_","flowNodeType_","flowLabelOffsets_","flowLineType_","flowNodeSizeScale_","flowOpacity_","flowInternal_","flowTopLocations_","flowTopLocationsType_","flowCurvatureSettings_","flowOrder_","flowWidthGradient_","flowOpacityGradient_","flowWidthGradientSettings_","flowBidirectional_","flowEdgeBundling_","flowBundleSettings_"];return n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.updateStyle=function(){var t;e.flowNodes_&&"donut"===e.flowNodeType_&&0==e.flowTopLocations_&&(e.flowTopLocations_=4),function(t){(function(t){t.flowGraph_.nodes.forEach(function(e){if("number"!=typeof e.x||"number"!=typeof e.y)if(t.Geometries.centroidsFeatures){var n=t.Geometries.centroidsFeatures.find(function(t){return e.id==t.properties.id});if(n){var r=b(n.geometry.coordinates,2),i=r[0],a=r[1];e.x=i,e.y=a}else console.error("could not find coordinates for",e.id)}else{var o,s,l,c=null===(o=(s=t.Geometries).getRegionFeatures)||void 0===o?void 0:o.call(s),u=null==c?void 0:c.find(function(t){return t.properties.id===e.id}),h=b((null==u||null===(l=u.properties)||void 0===l?void 0:l.centroid)||t._pathFunction.centroid(u),2),f=h[0],d=h[1];e.x=f,e.y=d}})})(t),function(t){var e,n=t.flowGraph_.nodes,r=kR(n);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=t._projection([i.x,i.y]);i.x=a[0],i.y=a[1]}}catch(t){r.e(t)}finally{r.f()}}(t),function(t){var e=t.flowGraph_,n=e.nodes,r=e.links,i=new Map;r.forEach(function(t){i.set(t.source,(i.get(t.source)||0)+t.value),i.set(t.target,(i.get(t.target)||0)+t.value)}),n.forEach(function(t){t.value=i.get(t.id)||0})}(t),function(t){var e,n=t.flowGraph_.nodes,r=t.flowGraph_.links,i=function(t){return t.id},a=kR(n.entries());try{for(a.s();!(e=a.n()).done;){var o=b(e.value,2),s=o[0],l=o[1];l.index=s,l.sourceLinks=[],l.targetLinks=[]}}catch(t){a.e(t)}finally{a.f()}var c,u=new Map(n.map(function(t,e){return[i(t,e,n),t]})),h=kR(r.entries());try{for(h.s();!(c=h.n()).done;){var f=b(c.value,2),d=f[0],p=f[1];p.index=d;var g=p.source,v=p.target;"object"!==qE(g)&&(g=p.source=PR(u,g)),"object"!==qE(v)&&(v=p.target=PR(u,v)),g.sourceLinks.push(p),v.targetLinks.push(p)}}catch(t){h.e(t)}finally{h.f()}}(t),t.flowTopLocations_&&function(t){var e=t.flowGraph_.nodes,n=t.flowTopLocations_,r=t.flowTopLocationsType_||"sum";e.forEach(function(t){var e=t.sourceLinks.reduce(function(t,e){return t+e.value},0),n=t.targetLinks.reduce(function(t,e){return t+e.value},0);t.topScore="origin"===r?e:"destination"===r?n:e+n});var i=x(e).sort(function(t,e){return e.topScore-t.topScore}).slice(0,n);t.topLocationKeys=new Set(i.map(function(t){return t.id})),t.topLocationColorScale=wm().domain(i.map(function(t){return t.id})).range(["#00B3E3","#FBBA00","#2BA966","#D23142","#005289","#93397F","#E73E11","#4E4084","#056731","#00667E","#B5B900"])}(t);(function(t){var e=t.flowGraph_.links.map(function(t){return t.value}).filter(function(t){return t>0});t.maxFlowCount=e.length?It(e):0,t.minFlowCount=e.length?zt(e):0})(t),t.nodeNameMap=new Map(t.flowGraph_.nodes.map(function(t){return[t.id,t.name||t.id]}))}(e),function(t){var e=t.flowGraph_.links,n=e.map(function(t){return t.value}).filter(function(t){return t>0}),r=It(n),i=(zt(n),Math.max(0,t.flowMinWidth_||0)),a=t.flowMaxWidth_,o=Qn().domain([0,r]).range([0,a]).clamp(!0),s=function(t){var e=+t;return!Number.isFinite(e)||e<=0?0:Math.max(i,o(e))};s.domain=function(){return arguments.length?(o.domain.apply(o,arguments),s):o.domain()},t.strokeWidthScale=s}(e);var n=Dt("#em-zoom-group-"+e.svgId_),r=n.select("#em-flow-container");r.empty()?r=n.append("g").attr("id","em-flow-container").attr("class","em-flow-container"):r.selectAll("*").remove();var i,a=r.node();a&&a.previousSibling&&(null===(i=a.parentNode)||void 0===i||i.insertBefore(a,a.previousSibling));if(function(t){var e=t.flowGraph_,n=[],r=[],i=t.Geometries.getRegionFeatures();if(!i)return;if(e.nodes.forEach(function(t){var e=t.sourceLinks.reduce(function(t,e){return t+e.value},0),a=t.targetLinks.reduce(function(t,e){return t+e.value},0);i.find(function(e){return e.properties.id===t.id})?a>e?n.push(t.id):e>a&&r.push(t.id):console.log("could not find region geometry for",t.id)}),t.importerRegionIds=n,t.exporterRegionIds=r,0===n.length&&0===r.length)return void console.log("No importer or exporter regions found in the flow graph.");var a=BE(t),o=t.svg_.selectAll(a);o.each(function(){var e=this.__data__.properties.id;Dt(this).style("fill",function(){return n.includes(e)?t.flowRegionColors_[1]:r.includes(e)?t.flowRegionColors_[0]:null}).attr("class",function(){return n.includes(e)?"em-flow-importer":r.includes(e)?"em-flow-exporter":null})})}(e),"curved"===e.flowLineType_||"sankey"===e.flowLineType_?JG(e,r):iR(e,r),e.flowNodes_&&("donut"===e.flowNodeType_?pR(e,r):ER(e,r)),null!==(t=e.labels_)&&void 0!==t&&t.values){var o=e.svg().select("#em-zoom-group-"+e.svgId_);!function(t,e){var n,r=e.select("#em-labels"),i=r.empty()?e.append("g").attr("id","em-labels"):r,a=t.flowGraph_.nodes.filter(function(t){return t.targetLinks&&0===t.sourceLinks.length}),o=PE(i,"em-flow-labels");null!==(n=t.labels_)&&void 0!==n&&n.shadows&&o.append("g").attr("class","em-flow-label-shadow").selectAll("text").data(a).join("text").attr("text-anchor",function(t){return t.x>t.targetLinks[0].source.x?"start":"end"}).attr("x",function(e){return e.x>e.targetLinks[0].source.x?e.x+t.flowLabelOffsets_.x:e.x-t.flowLabelOffsets_.x}).attr("y",function(e){return e.y+t.flowLabelOffsets_.y}).text(function(e){return t._statLabelFormatter(e.value)});var s=o.append("g").attr("class","em-flow-label").selectAll("g").data(a).join("g").attr("transform",function(t){return"translate(".concat(t.x,", ").concat(t.y,")")});s.append("text").attr("class","em-label-text").attr("text-anchor",function(t){return t.x>t.targetLinks[0].source.x?"start":"end"}).attr("x",function(e){return e.x>e.targetLinks[0].source.x?t.flowLabelOffsets_.x:-t.flowLabelOffsets_.x}).attr("y",t.flowLabelOffsets_.y).text(function(e){return t._statLabelFormatter(e.value)}),t.labels_.backgrounds&&s.each(function(){var t=Dt(this).select("text").node().getBBox();Dt(this).insert("rect","text").attr("class","em-label-background").attr("x",t.x-5).attr("y",t.y-2).attr("width",t.width+10).attr("height",t.height+4)})}(e,o)}},e.updateClassification=function(){},e.getLegendConstructor=function(){return zG},e};function PR(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var FR=function(t,e){var n,r,i=[],a=e.statData().unitText()||"",o=null!==(n=t.originId)&&void 0!==n?n:t.source.isMidpoint?null:t.source.id,s=null!==(r=t.destId)&&void 0!==r?r:t.target.isMidpoint?null:t.target.id,l=e._nodeById||new Map,c=l.get(o)||{id:o,name:o},u=l.get(s)||{id:s,name:s},h=c.name||c.id,f=u.name||u.id,d="".concat(h," to ").concat(f);return i.push('\n        <div class="em-tooltip-bar">\n            <b>'.concat(d,"</b>\n        </div>\n    ")),i.push("\n        <div class='em-tooltip-text'>\n            <table class=\"em-tooltip-table\">\n                <tbody>\n                    <tr><td>".concat(zE(t.value)," ").concat(a,"</td></tr>\n                </tbody>\n            </table>\n        </div>\n    ")),i.join("")},NR=function(t,e){var n=II(t);if(n.sizeLegend={title:null,titlePadding:15,values:null},n.colorLegend={title:null,titlePadding:15,marginTop:23,labelOffsets:{x:5,y:5},shapeWidth:25,shapeHeight:20,shapePadding:1,noData:!0,noDataText:"No data"},n.timeLegend={title:null,marginTop:20},n._sizeLegendHeight=0,e)for(var r in e)if("colorLegend"===r||"sizeLegend"===r||"timeLegend"===r)for(var i in n[r])void 0!==e[r][i]&&(n[r][i]=e[r][i]);else n[r]=e[r];function a(t,e){var n=t.svg_.selectAll(".em-coxcomb-chart").selectAll("path[code]");n.style("fill","white"),n.filter("path[code='"+e+"']").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}function o(t){t.svg_.selectAll(".em-coxcomb-chart").selectAll("path[code]").each(function(){Dt(this).style("fill",Dt(this).attr("fill___"))})}return n.update=function(){n.updateConfig(),n.updateContainer();var e=n.lgg;e.selectAll("*").remove(),n.makeBackgroundBox(),n.title&&n.addTitle(),n.subtitle&&n.addSubtitle();var r=n.getBaseY(),i=n.getBaseX();if(t.classifierSize_){var s=e.append("g").attr("class","em-coxcomb-size-legend").attr("transform","translate(".concat(i,", ").concat(r,")"));n._sizeLegendContainer=s,CI(n,s,n.sizeLegend.values,n.map.classifierSize_,n.sizeLegend.title,n.sizeLegend.titlePadding)}!function(t,e,n){var r=t.map,i=t.colorLegend;t._colorLegendContainer=t.lgg.append("g").attr("class","em-coxcomb-color-legend");var s=0;t._sizeLegendContainer?(s=t._sizeLegendContainer.node().getBBox().height,t._colorLegendContainer.attr("transform","translate(".concat(e,",").concat(s+t.colorLegend.marginTop,")"))):t._colorLegendContainer.attr("transform","translate(".concat(e,",").concat(n,")"));i.title&&t._colorLegendContainer.append("text").attr("class","em-color-legend-title").attr("id","em-color-legend-title").attr("x",0).attr("y",t.titleFontSize).text(i.title);var l=0,c=r.catColors(),u=function(e){var n=t.colorLegend.titlePadding+(i.title?t.titleFontSize:0)+l*(i.shapeHeight+i.shapePadding),s=r.catColors()[e]||"lightgray";t._colorLegendContainer.append("rect").attr("class","em-legend-rect").attr("x",0).attr("y",n).attr("width",i.shapeWidth).attr("height",i.shapeHeight).style("fill",s).on("mouseover",function(){a(t.map,e),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,a,e)}).on("mouseout",function(){o(t.map),t.map.insetTemplates_&&GE(t.map.insetTemplates_,t.map.svgId,o,e)}),t._colorLegendContainer.append("text").attr("class","em-legend-label").attr("x",i.shapeWidth+i.labelOffsets.x).attr("y",n+.5*i.shapeHeight).attr("dy","0.35em").text(r.catLabels()[e]||e),l++};for(var h in c)u(h);if(i.noData){var f=s+t.colorLegend.marginTop+t.colorLegend.titlePadding+(i.title?t.titleFontSize+t.boxPadding:0)+l*i.shapeHeight+l*i.shapePadding,d=t.lgg.append("g").attr("class","em-no-data-legend").attr("transform","translate(".concat(t.boxPadding,",").concat(f,")"));t.appendNoDataLegend(d,t.noDataText,a,o)}}(n,i,r),function(e,n,r){var i,a,o=e.map._coxTimes||[],s=40;if(!o.length)return;var l=r,c=n;e._sizeLegendContainer&&(l+=e._sizeLegendContainer.node().getBBox().height);e._colorLegendContainer&&(l+=e._colorLegendContainer.node().getBBox().height,l+=e.colorLegend.marginTop||0);l+=(null===(i=e.timeLegend)||void 0===i?void 0:i.marginTop)||0,l+=s;var u=18,h=2*Math.PI/o.length,f=(null===(a=e._colorLegendContainer)||void 0===a||null===(a=a.node())||void 0===a?void 0:a.getBBox().width)||0,d=c+f/2+u,p=e.lgg.append("g").attr("class","em-coxcomb-time-legend").attr("transform","translate(".concat(d,", ").concat(l+s,")")),g=tS().innerRadius(0).outerRadius(s).startAngle(function(t,e){return e*h}).endAngle(function(t,e){return(e+1)*h});p.selectAll("path").data(o).join("path").attr("d",function(t,e){return g(t,e)}).attr("fill","#ccc").attr("class","em-legend-month-segment");var v=s+u,_=t._coxTimeLabels?t._coxTimeLabels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.selectAll("text.month-label").data(o).join("text").attr("class","em-legend-label em-month-label").attr("x",function(t,e){return Math.sin(e*h+h/2)*v}).attr("y",function(t,e){return-Math.cos(e*h+h/2)*v}).attr("text-anchor","middle").attr("alignment-baseline","middle").text(function(t,e){return _[e]||t}),p.selectAll("path").on("mouseover",function(t,n){var r=n;(e.map.svg_||e.map.svg()).selectAll(".em-coxcomb-chart path").style("opacity",function(t){return t.data.month===r?1:0}),Dt(this).style("stroke-width",3).style("opacity",.8).raise()}).on("mouseout",function(){(e.map.svg_||e.map.svg()).selectAll(".em-coxcomb-chart path").style("opacity",1),Dt(this).style("stroke-width",.5).style("opacity",.4).raise()})}(n,i,r),n.setBoxDimension()},n},LR=function(t){var e=UI(t,!0,"coxcomb");e.coxcombMinRadius_=10,e.coxcombMaxRadius_=80,e.coxcombStrokeFill_="white",e.coxcombStrokeWidth_=.3,e.coxcombRings_=!0,e.hoverColor_="#000",e.catColors_=void 0,e.catLabels_=void 0,e.classifierSize_=null;var n=["catColors_","catLabels_","noDataFillStyle_","coxcombMaxRadius_","coxcombMinRadius_","coxcombRings_","coxcombStrokeFill_","coxcombStrokeWidth_","hoverColor_","classifierSize_"];function r(t){if(!e.statCodes_){e.statCodes_=Object.keys(e.statData_);var n=e.statCodes_.indexOf("default");n>-1&&e.statCodes_.splice(n,1)}var r,i,a,o,s,l,c,u,h,f,d,p;!function(){var t={},n={};e.totalCode_?e._coxTimes.forEach(function(r){var i=e.statData("".concat(r,":").concat(e.totalCode_));if(i&&i._data_)for(var a in i._data_){var o,s=(null===(o=i._data_[a])||void 0===o?void 0:o.value)||0;n[a]=n[a]||{},n[a][r]=s,t[a]=(t[a]||0)+s}}):e._coxTimes.forEach(function(r){var i={};for(var a in e._coxCategoryCodes.forEach(function(t){var n=e.statData("".concat(r,":").concat(t));if(n&&n._data_)for(var a in n._data_){var o,s=(null===(o=n._data_[a])||void 0===o?void 0:o.value)||0;i[a]=(i[a]||0)+s}}),i)n[a]=n[a]||{},n[a][r]=i[a],t[a]=(t[a]||0)+i[a]});e.yearlyTotals=t,e.monthlyTotals=n}(),r=e._coxTimes||[],i=e._coxCategoryCodes||[],a=!!e.totalCode_,o=new Map,s=new Set,l=function(t){var n=e.statData(t);n&&n._data_&&Object.keys(n._data_).forEach(function(t){return s.add(t)})},r.forEach(function(t){a?l("".concat(t,":").concat(e.totalCode_)):i.forEach(function(e){return l("".concat(t,":").concat(e))})}),s.forEach(function(t){var n=!1,s=!1,l=!1;r.forEach(function(r){if(a){var o,c=null===(o=e.statData("".concat(r,":").concat(e.totalCode_)))||void 0===o?void 0:o.get(t);if(!c)return;n=!0,":"===c.value?s=!0:"number"==typeof c.value&&(l=!0)}else i.forEach(function(i){var a,o=null===(a=e.statData("".concat(r,":").concat(i)))||void 0===a?void 0:a.get(t);o&&(n=!0,":"===o.value?s=!0:"number"==typeof o.value&&(l=!0))})}),s?o.set(t,{value:":"}):n||l?o.set(t,{value:0}):o.set(t,null)}),e.coxStatus_=o,c=Object.values(e.yearlyTotals),u=e.coxcombMinRadius_||0,h=e.coxcombMaxRadius_||80,f=zt(c)||0,d=It(c)||0,p=Vm().domain([f,d]).range([u,h]),e.classifierChartSize_=function(t,n){var r=p(e.yearlyTotals[n]||0),i=t/Math.max.apply(Math,x(Object.values(e.monthlyTotals[n]||{0:1})));return Math.sqrt(i)*r},e.classifierSize_=p}function i(t){var n=e.yearlyTotals;return void 0!==n[t]?n[t]:void 0}function a(t){if(e.catLabels_=e.catLabels_||{},e.svg_){var n=t.getCentroidsGroup(t);if(n){var r=n.selectAll("g.em-centroid").data().filter(function(t){return void 0!==i(t.properties.id)});!function(t){var n=BE(t),r=t.svg().selectAll(n),i=e.coxStatus_;"WORLD"!==t.geo_&&("mixed"==t.nutsLevel_&&function(t,n,r){r.style("display",function(t){if(!this.parentNode.classList.contains("em-cntrg"))return null==n.get(t.properties.id)?"none":"block"}),r.style("stroke",function(t){var e=Dt(this),r=e.attr("lvl"),i=n.get(t.properties.id);if(i&&null!=i.value)return"0"!==r?e.style("stroke")||"#777":void 0}).style("stroke-width",function(t){var r=Dt(this),i=r.attr("lvl"),a=n.get(t.properties.id);if(a&&null!=a.value&&"WORLD"!=e.geo_)return"0"!==i?r.style("stroke-width")||1:void 0})}(0,i,r),r.attr("ecl",function(t){var e=i.get(t.properties.id);return null==e?"ni":":"===(null==e?void 0:e.value)?"nd":null}),r.filter(function(t){var e;return":"===(null===(e=i.get(t.properties.id))||void 0===e?void 0:e.value)}).style("fill",e.noDataFillStyle()))}(t),function(t){var n=function(e){var n;return null===(n=t.tooltip_.omitRegions)||void 0===n?void 0:n.includes(e)},r=BE(t),a=(t.svg().selectAll(r),t.svg().selectAll("g.em-centroid"));a.on("mouseover",function(t,r){if(!n(r.properties.id)&&i(r.properties.id)){var a=Dt(this);a.attr("fill___",a.style("fill")),a.style("fill",e.hoverColor_);var o=e._lastZoomK||1;e.coxcombRings_?a.select("circle.em-coxcomb-max-outline").node().style.setProperty("stroke-width","".concat(2/o,"px"),"important"):a.selectAll("g.em-coxcomb-chart").style("stroke",e.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(r,e))}}).on("mousemove",function(t,r){n(r.properties.id)||i(r.properties.id)&&e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(r,e))}).on("mouseout",function(t,r){if(!n(r.properties.id)&&i(r.properties.id)){var a=Dt(this);a.style("fill",a.attr("fill___")||""),a.attr("fill___",null);var o=e._lastZoomK||1;e.coxcombRings_?a.select("circle.em-coxcomb-max-outline").node().style.setProperty("stroke-width","".concat(.3/o,"px"),"important"):a.selectAll("g.em-coxcomb-chart").style("stroke","#ffffff"),e._tooltip&&e._tooltip.mouseout()}})}(t),function(t,n){var r=e._coxTimes,i=e._coxCategoryCodes,a=function(t){return Mm().domain(t).range([0,2*Math.PI]).align(0)}(r);t.forEach(function(t){var o=t.properties.id,s=function(t,n,r){var i=n.map(function(n){var i={month:n},a=0;if(r.forEach(function(r){var o,s=null===(o=e.statData("".concat(n,":").concat(r)))||void 0===o?void 0:o.get(t),l=(null==s?void 0:s.value)||0;i[r]=l,a+=l}),e.totalCode_){var o,s=null===(o=e.statData("".concat(n,":").concat(e.totalCode_)))||void 0===o?void 0:o.get(t),l=(null==s?void 0:s.value)||0,c=l>a?l-a:0;c>0&&(i.other=c)}var u=Object.values(i).some(function(t){return t&&t>0});return u?i:null}).filter(Boolean),a=i.some(function(t){return(t.other||0)>0});if(!a){var o,s;i.forEach(function(t){return delete t.other}),null===(o=e.catColors_)||void 0===o||delete o.other,null===(s=e.catLabels_)||void 0===s||delete s.other}return i}(o,r,i);if(s.length){var l=function(t,e){var n=x(e);t.some(function(t){return(t.other||0)>0})&&n.push("other");return n}(s,i);!function(t,n,r,i,a){var o=a.svg().select("#ps"+t);if(o.empty())return;var s=o.selectAll("g.em-coxcomb").data([t],function(t){return t}).join(function(e){return e.append("g").attr("class","em-coxcomb").attr("id","cox_"+t)},function(t){return t},function(t){return t.remove()});if(s.selectAll("*").remove(),e.coxcombRings_){var l=e.yearlyTotals[t]||0,c=e.classifierSize_(l);s.append("circle").attr("class","em-coxcomb-max-outline").attr("r",0).attr("fill","none").attr("stroke","#000").attr("stroke-width",.3).attr("opacity",.5).attr("pointer-events","none").transition().duration(e.transitionDuration_/2).attr("r",c)}var u=tS().startAngle(function(t){return i(t.data.month)}).endAngle(function(t){return i(t.data.month)+i.bandwidth()}).padAngle(.01).padRadius(0);r.forEach(function(r,i){s.append("g").attr("class","em-coxcomb-chart").attr("stroke","#ffffff").attr("stroke-width",.3).selectAll("path").data(n[i]).join("path").attr("fill",e.catColors_[r]||("other"===r?"#FFCC80":"lightgray")).attr("code",r).attr("month",function(t){return t.data.month}).transition().delay(function(t,e){return 120*e}).duration(e.transitionDuration_).attrTween("d",function(n){var r=xn(0,e.classifierChartSize_(n[0],t)),i=xn(0,e.classifierChartSize_(n[1],t));return function(t){return u.innerRadius(r(t)).outerRadius(i(t))(n)}})})}(o,JC().keys(l)(s),l,a,n)}})}(r,t)}}}return n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.statCodes_=void 0,e.totalCode_=void 0,e.statCoxcomb=function(t){return e._coxTimes=t.times,e._coxCategoryCodes=x(t.categoryCodes),e._coxTimeLabels=t.timeLabels,t.filters=t.filters||{},t.times.forEach(function(n){if(t.categoryCodes.forEach(function(r){t.stat.filters[t.timeParameter]=n,t.stat.filters[t.categoryParameter]=r;var i={};for(var a in t.stat)i[a]=t.stat[a];for(var o in i.filters={},t.stat.filters)i.filters[o]=t.stat.filters[o];var s="".concat(n,":").concat(r);e.stat(s,i),t.categoryColors&&(e.catColors_=e.catColors_||{},e.catColors_[r]=t.categoryColors[t.categoryCodes.indexOf(r)]),t.categoryLabels&&(e.catLabels_=e.catLabels_||{},e.catLabels_[r]=t.categoryLabels[t.categoryCodes.indexOf(r)])}),t.totalCode){t.stat.filters[t.timeParameter]=n,t.stat.filters[t.categoryParameter]=t.totalCode;var r={};for(var i in t.stat)r[i]=t.stat[i];for(var a in r.filters={},t.stat.filters)r.filters[a]=t.stat.filters[a];var o="".concat(n,":").concat(t.totalCode);e.stat(o,r)}}),t.totalCode&&(e.totalCode_=t.totalCode,e.catColors_.other="#FFCC80",e.catLabels_.other="Other"),e},e.updateClassification=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),r(),e},e.updateStyle=function(){if(!e.catColors_){e.catColors({});for(var t=0;t<e.statCodes_.length;t++)e.catColors_[e.statCodes_[t]]=rw[t%10]}try{return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,a),a(e),e.dorling_?hI(e,function(t){var n=i(t.properties.id)||0;return e.classifierSize_(n)||0}):dI(e),e}catch(t){console.error("Error in updateStyle:",t.message),console.error(t)}return e},e.getLegendConstructor=function(){return NR},e.tooltip_.textFunction=function(t,n){var r,i=t.properties.na||t.properties.name,a=t.properties.id,o=e._coxTimes||[],s=x(e._coxCategoryCodes),l=o.some(function(t){var n,r=(null===(n=e.statData("".concat(t,":").concat(e.totalCode_)))||void 0===n||null===(n=n.get(a))||void 0===n?void 0:n.value)||0,i=e._coxCategoryCodes.reduce(function(n,r){var i;return n+((null===(i=e.statData("".concat(t,":").concat(r)))||void 0===i||null===(i=i.get(a))||void 0===i?void 0:i.value)||0)},0);return r>i});l&&s.push("other");var c='<div class="em-tooltip-bar">'.concat(i).concat(a?" (".concat(a,")"):"","</div>"),u=['<th class="em-breakdown-label">Month</th>'];s.forEach(function(t){var n=e.catLabels_[t]||t,r=e.catColors_[t]||("other"===t?"#FFCC80":"#999");u.push('<th class="em-breakdown-label" style="color:'.concat(r,'">').concat(n,"</th>"))}),u.push('<th class="em-breakdown-label">Total</th>');var h="<tr>".concat(u.join(""),"</tr>"),f=e.yearlyTotals||{},d=e.monthlyTotals||{},p=f[a]||0,g=o.map(function(t,n){var r,i=['<td class="em-breakdown-label">'.concat(e._coxTimeLabels?e._coxTimeLabels[n]:t,"</td>")],o=(null===(r=d[a])||void 0===r?void 0:r[t])||0;return s.forEach(function(n){var r=0;if("other"===n){var o,l=(null===(o=e.statData("".concat(t,":").concat(e.totalCode_)))||void 0===o||null===(o=o.get(a))||void 0===o?void 0:o.value)||0,c=s.filter(function(t){return"other"!==t}).reduce(function(n,r){var i;return n+((null===(i=e.statData("".concat(t,":").concat(r)))||void 0===i||null===(i=i.get(a))||void 0===i?void 0:i.value)||0)},0);r=Math.max(l-c,0)}else{var u;r=(null===(u=e.statData("".concat(t,":").concat(n)))||void 0===u||null===(u=u.get(a))||void 0===u?void 0:u.value)||0}i.push(r>0?'<td><span class="em-breakdown-value">'.concat(zE(r),"</span></td>"):"<td></td>")}),i.push(o>0?'<td><span class="em-breakdown-value">'.concat(zE(o),"</span></td>"):"<td></td>"),"<tr>".concat(i.join(""),"</tr>")}),v=(null===(r=e.statData(e.statCodes_[0]))||void 0===r?void 0:r.unitText())||"";return c+='<div class="em-tooltip-breakdown em-tooltip-cx"><table class="em-tooltip-cx-table">',c+=h+g.join(""),p>0&&(c+='\n      <tr class="em-total">\n        <td class="em-breakdown-label">Year total</td>\n        <td colspan="'.concat(s.length,'"></td>\n        <td>\n          <span class="em-breakdown-value">').concat(zE(p)," ").concat(v,"</span>\n        </td>\n      </tr>")),c+="</table></div>"},e};var OR=function(t,e){try{return"choropleth"==t||"ch"==t?nG(e):"categorical"==t||"ct"==t?function(t){var e=UI(t,!1,"ct");e.classToFillStyle_=void 0,e.classToText_=void 0,e.tooltip_.textFunction=sG,e.classifier_=void 0;var n=["classToFillStyle_","classToText_","noDataFillStyle_","tooltipText_","classifier_"];n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.updateClassification=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),r(e),e};var r=function(t){var n=e.statData().getUniqueValues(),r=x(Array(n.length).keys()),i=e.classToFillStyle_?e.classToFillStyle():void 0;if(i){var a=Object.keys(i);e.classifier(wm().domain(a).range(a.map(function(t,e){return e})))}else e.classifier(wm().domain(n).range(r));var o=function(t){t.attr("ecl",function(t){var n=e.statData().get(t.properties.id);if(n){var r=n.value;if(":"===r)return"nd";var i=isNaN(r)?r:+r;if(e.classifier().domain().includes(i))return e.classifier()(i)}})},s=BE(t);o(t.svg().selectAll(s)),"mixed"===t.nutsLevel_&&o(t.svg().selectAll("path.em-nutsrg0"))};function i(t){if(t.svg_){var n=BE(t),r=t.svg().selectAll(n);r.style("pointer-events","none").transition().duration(e.transitionDuration()).style("fill",o).end().then(function(){r.style("pointer-events",null),r.each(function(){var t=Dt(this);t.attr("fill___",t.style("fill"))}),s(t,r),e.gridCartogram_&&t.svg().selectAll(".em-grid-text").each(function(){var t=Dt(this.parentNode).style("fill");Dt(this).attr("fill",jE(t))})}).catch(function(t){}),"mixed"===e.nutsLevel_&&a(t),e.labels_&&e.labels_.values&&e.updateValuesLabels(t),e.patternFill_&&sI(t,e.patternFill_)}}e.updateStyle=function(){if(!e.classToFillStyle()){for(var t={},n=e.classifier().domain(),r=0;r<n.length;r++)t[n[r]]=fw[r%12];e.classToFillStyle(t)}return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,i),i(e),e};var a=function(t){t.svg().selectAll(BE(t)).style("display",function(t){if(!this.parentNode.classList.contains("em-cntrg")){var e=Dt(this),n=e.attr("ecl"),r=e.attr("lvl");return n||"0"===r?"block":"none"}}).style("stroke",function(){var t=Dt(this),e=t.attr("lvl"),n=t.attr("ecl"),r=t.style("stroke");return n&&"0"!==e?r||"#777":null}).style("stroke-width",function(){var t=Dt(this),e=t.attr("lvl"),n=t.attr("ecl"),r=t.style("stroke-width");return n&&"0"!==e?r||.2:null})},o=function(t){var n=Dt(this).attr("ecl");return e.Geometries.userGeometries?n?"nd"===n?e.noDataFillStyle()||"gray":e.classToFillStyle_[e.classifier().domain()[n]]:LE("em-nutsrg","fill"):"WORLD"===e.geo_?n?"nd"===n?e.noDataFillStyle()||"gray":e.classToFillStyle_[e.classifier().domain()[n]]||e.cntrgFillStyle_:e.cntrgFillStyle_:(t.properties.id.slice(0,2),n?"nd"===n?e.noDataFillStyle()||"gray":e.classToFillStyle_[e.classifier().domain()[n]]:LE("em-nutsrg","fill"))},s=function(t,n){var r=function(e){var n;return null===(n=t.tooltip_.omitRegions)||void 0===n?void 0:n.includes(e)};n.on("mouseover",function(n,i){r(i.properties.id)||(Dt(this).style("fill",t.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(i,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,i,this,t))}).on("mousemove",function(n,i){r(i.properties.id)||(e._tooltip&&e._tooltip.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,i,this,t))}).on("mouseout",function(n,i){if(!r(i.properties.id)){var a=Dt(this);a.style("fill",a.attr("fill___")),e._tooltip&&e._tooltip.mouseout(),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,i,this,t)}})};return e.getLegendConstructor=function(){return oG},e}(e):"proportionalSymbol"==t||"proportionalSymbols"==t||"ps"==t?bI(e):"bivariateChoropleth"==t||"chbi"==t?function(t){var e=UI(t,!1,"chbi");e.numberOfClasses_=3,e.startColor_="#e8e8e8",e.color1_="#73ae80",e.color2_="#6c83b5",e.endColor_="#2a5a5b",e.classToFillStyle_=void 0,e.classifier1_=void 0,e.classifier2_=void 0,e.breaks1_=void 0,e.breaks2_=void 0,e.tooltip_.textFunction=uG;var n=["numberOfClasses_","breaks1_","breaks2_","startColor_","color1_","color2_","endColor_","classToFillStyle_","noDataFillStyle_","classifier1_","classifier2_"].forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}});function r(t){var n=function(t){t.attr("ecl1",function(t){var n=e.statData("v1").get(t.properties.id);if(n){var r=n.value;return 0!=r&&!r||":"==r?"nd":+e.classifier1_(+r)}}).attr("ecl2",function(t){var n=e.statData("v2").get(t.properties.id);if(n){var r=n.value;return 0!=r&&!r||":"==r?"nd":+e.classifier2_(+r)}}).attr("nd",function(t){var n=e.statData("v1").get(t.properties.id),r=e.statData("v2").get(t.properties.id);if(n||r){var i=null==n?void 0:n.value;return 0!=i&&!i||":"==i||0!=(i=null==r?void 0:r.value)&&!i||":"==i?"nd":void 0}})};if(function(){var t=e.statData("v1").getArray(),n=e.statData("v2").getArray(),r=x(Array(e.numberOfClasses()).keys());if(e.classifier1_||(e.breaks1_?e.classifier1(er().domain(e.breaks1_).range(r)):e.classifier1(le().domain(t).range(r))),e.classifier2_||(e.breaks2_?e.classifier2(er().domain(e.breaks2_).range(r)):e.classifier2(le().domain(n).range(r))),!e.classToFillStyle_){var i=cG(e.numberOfClasses(),e.startColor(),e.color1(),e.color2(),e.endColor());e.classToFillStyle(i)}}(),t.svg_){var r=BE(t);n(t.svg().selectAll(r)),"mixed"===t.nutsLevel_&&n(t.svg().selectAll("path.em-nutsrg0"))}}function i(t){if(t.svg()){var n=BE(t),r=t.svg().selectAll(n);r.style("pointer-events","none").transition().duration(e.transitionDuration()).style("fill",function(t){if(Dt(this).attr("nd"))return e.noDataFillStyle()||"gray";var n=Dt(this).attr("ecl1"),r=Dt(this).attr("ecl2");return n||r?"nd"===r?e.noDataFillStyle()||"gray":e.classToFillStyle_(+n,+r):LE("em-nutsrg","fill")}).end().then(function(){r.style("pointer-events",null),r.each(function(){var t=Dt(this);t.attr("fill___",t.style("fill"))}),o(t,r),e.gridCartogram_&&t.svg().selectAll(".em-grid-text").each(function(){var t=Dt(this.parentNode).style("fill");Dt(this).attr("fill",jE(t))})},function(t){}),"mixed"==e.nutsLevel_&&a(t)}}t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[n](t[r])}),e.updateClassification=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,r),r(e),e},e.updateStyle=function(){return e.insetTemplates_&&GE(e.insetTemplates_,e.svgId_,i),i(e),e};var a=function(t){t.svg().selectAll(BE(t)).each(function(){if(!this.parentNode.classList.contains("em-cntrg")){var t=Dt(this),e=t.attr("ecl1"),n=t.attr("ecl2"),r=t.attr("lvl"),i=e||n||"0"===r;if(t.style("display",i?"block":"none"),(e||n)&&"0"!==r){var a=t.style("stroke")||"#777",o=t.style("stroke-width")||.2;t.style("stroke",a).style("stroke-width",o)}}})},o=function(t,n){var r=function(e){var n;return null===(n=t.tooltip_.omitRegions)||void 0===n?void 0:n.includes(e)};n.on("mouseover",function(n,i){var a;r(i.properties.id)||(Dt(this).style("fill",t.hoverColor_),null===(a=e._tooltip)||void 0===a||a.mouseover(e.tooltip_.textFunction(i,e)),e.onRegionMouseOver_&&e.onRegionMouseOver_(n,i,this,t))}).on("mousemove",function(n,i){var a;r(i.properties.id)||(null===(a=e._tooltip)||void 0===a||a.mousemove(n),e.onRegionMouseMove_&&e.onRegionMouseMove_(n,i,this,t))}).on("mouseout",function(n,i){if(!r(i.properties.id)){var a,o=Dt(this),s=o.attr("fill___");s&&(o.style("fill",s),null===(a=e._tooltip)||void 0===a||a.mouseout()),e.onRegionMouseOut_&&e.onRegionMouseOut_(n,i,this,t)}})};return e.getLegendConstructor=function(){return lG},e}(e):"trivariateChoropleth"==t||"ternary"==t?xG(e):"stripeComposition"==t||"scomp"==t?function(t){var e=UI(t,!1,"scomp");e.stripeWidth_=50,e.stripeOrientation_=0,e.catColors_=void 0,e.catLabels_=void 0,e.showOnlyWhenComplete_=!1,e.pieChartRadius_=40,e.pieChartInnerRadius_=15;var n=["stripeWidth_","stripeOrientation_","catColors_","catLabels_","showOnlyWhenComplete_","noDataFillStyle_","pieChartRadius_","pieChartInnerRadius_"];n.forEach(function(t){e[t.substring(0,t.length-1)]=function(n){return arguments.length?(e[t]=n,e):e[t]}}),t&&n.forEach(function(n){var r=n.slice(0,-1);null!=t[r]&&e[r](t[r])}),e.statComp=function(t,n,i,a,o){t.filters=t.filters||{};for(var s=0;s<i.length;s++){var l=i[s];t.filters[n]=l;var c={};for(var u in t)c[u]=t[u];for(var h in c.filters={},t.filters)c.filters[h]=t.filters[h];e.stat(l,c),o&&(e.catColors_=e.catColors_||{},e.catColors_[l]=o[s]),a&&(e.catLabels_=e.catLabels_||{},e.catLabels_[l]=a[s])}return r=i,e};var r=void 0,i=function(t){for(var n={},i=0,a=0;a<r.length;a++){var o=r[a],s=e.statData(o).get(t);if(!s||0!=s.value&&!s.value||isNaN(s.value)){if(e.showOnlyWhenComplete())return}else n[o]=s.value,i+=s.value}if(0!=i){for(var l=0;l<r.length;l++)n[r[l]]/=i;return n}};return e.updateClassification=function(){if(!r){var t=(r=Object.keys(e.statData_)).indexOf("default");t>-1&&r.splice(t,1)}return e},e.updateStyle=function(){if(!e.catColors()){e.catColors({});for(var t=0;t<r.length;t++)e.catColors()[r[t]]=rw[t%10]}e.catLabels_=e.catLabels_||{},e.svg().selectAll(BE(e)).style("fill",function(t){if(!this.parentNode.classList.contains("em-cntrg")){var n=t.properties.id,r=i(n);if(!r)return e.noDataFillStyle()||"gray";var a=e.svg().append("pattern").attr("id","pattern_"+n).attr("x","0").attr("y","0").attr("width",e.stripeWidth()).attr("height",1).attr("patternUnits","userSpaceOnUse");e.stripeOrientation()&&a.attr("patternTransform","rotate("+e.stripeOrientation()+")"),a.append("rect").attr("x",0).attr("y",0).attr("width",e.stripeWidth()).attr("height",1).style("stroke","none").style("fill","lightgray");var o=0;for(var s in r){var l=r[s];if(l){l*=e.stripeWidth();var c=e.catColors()[s]||"lightgray";a.append("rect").attr("x",o).attr("y",0).attr("height",1).style("stroke","none").attr("code",s).style("fill",c).style("pointer-events","none").transition().duration(e.transitionDuration()).on("end",function(){Dt(this).style("pointer-events",null)}).attr("width",l),o+=l}}return"url(#pattern_"+n+")"}}).attr("nd",function(t){return i(t.properties.id)?"":"nd"});var n=BE(e);return e.svg().selectAll(n).on("mouseover",function(t,n){var r=Dt(this);r.attr("fill___",r.style("fill")),r.style("fill",e.hoverColor_),e._tooltip&&e._tooltip.mouseover(e.tooltip_.textFunction(n,e))}).on("mousemove",function(t,n){e._tooltip&&e._tooltip.mousemove(t)}).on("mouseout",function(){var t=Dt(this);t.style("fill"),t.attr("fill___")&&(t.style("fill",t.attr("fill___")),e._tooltip&&e._tooltip.mouseout())}),e},e.getLegendConstructor=function(){return MG},e.tooltip_.textFunction=function(t,n){var r=t.properties.na||t.properties.name,a=t.properties.id,o=i(a),s=[];for(var l in o)s.push({code:l,value:o[l]});var c="";if(c+='<div class="em-tooltip-bar">\n        <b>'.concat(r,"</b>").concat(a?" (".concat(a,")"):"","\n    </div>"),!s||0===s.length)return c+"<div>".concat(e.noDataText(),"</div>");var u,h=e.pieChartRadius(),f=e.pieChartInnerRadius(),d=hS().sort(null).value(function(t){return t.value}),p=tS().innerRadius(f).outerRadius(h),g="",v=SG(d(s));try{for(v.s();!(u=v.n()).done;){var _=u.value,m=e.catColors()[_.data.code]||"lightgray",y=p(_);g+='<path d="'.concat(y,'" fill="').concat(m,'" stroke="darkgray"></path>')}}catch(t){v.e(t)}finally{v.f()}return c+'\n        <div style="display: flex; justify-content: center;">\n            <svg viewBox="'.concat(-h," ").concat(-h," ").concat(2*h," ").concat(2*h,'" width="').concat(2*h,'">\n                <g>').concat(g,"</g>\n            </svg>\n        </div>\n    ")},e}(e):"pieChart"==t||"pie"==t?TG(e):"sparkline"==t||"spark"==t||"sparklines"==t?NG(e):"flow"==t||"flowmap"==t?TR(e):"coxcomb"==t||"polar"==t?LR(e):"alpha"==t||"valueByAlpha"==t?function(t){var e=nG(t);e.alphaData_=null,e.opacityScale_=null,e.opacityScale=function(t){return arguments.length?(e.opacityScale_=t,e):e.opacityScale_};var n=e.updateStatValues;e.updateStatValues=function(){var t=e.statData("alpha");if(!t||!t.isReady())return e.alphaData_=null,e;e.alphaData_=t;var r=t.getArray().filter(function(t){return null!=t&&":"!==t&&!isNaN(+t)});if(!e.opacityScale_){var i=zt(r),a=It(r);e.opacityScale_=r.length>0?Qn().domain([i,a]).range([.1,1]):null}return n.call(e),e.updateStyle()};var r=e.updateStyle;return e.updateStyle=function(){if(!e.svg_||!e.opacityScale_)return e;e.svg_.classed("em--alpha",!0);var t=e.statData();if(!t||!t.isReady())return e;var n=e.statData("alpha");if(!n||!n.isReady())return e;var i=BE(e);return e.svg().selectAll(i).each(function(r){var i,a,o=Dt(this),s=null===(i=t.get(r.properties.id))||void 0===i?void 0:i.value,l=null===(a=n.get(r.properties.id))||void 0===a?void 0:a.value;if(null!=s&&":"!==s)if("nd"!==l&&null!=l)o.style("opacity",e.opacityScale_(+l));else{var c=e.noDataFillStyle_||"gray";o.attr("ecl","nd").attr("force-grey","1").style("fill",c).attr("fill","grey").attr("fill___",c).style("opacity",1)}}),r.call(e),e},e.getLegendConstructor=function(){return nI},e.tooltip_.textFunction=function(t,e){var n,r,i=[],a=t.properties.na||t.properties.name,o=t.properties.id;i.push('<div class="em-tooltip-bar"><b>'.concat(a,"</b>").concat(o?" (".concat(o,")"):"","</div>"));var s=e.statData(),l=e.alphaData_||e.statData("alpha"),c=s.get(o),u=null==l?void 0:l.get(o),h=(null===(n=s.unitText)||void 0===n?void 0:n.call(s))||"",f=(null==l||null===(r=l.unitText)||void 0===r?void 0:r.call(l))||"",d=s.label_?s.label_+": ":"",p=null!=l&&l.label_?(null==l?void 0:l.label_)+": ":"";return!c||0!==c.value&&!c.value||":"===c.value?(i.push('\n        <div class="em-tooltip-text no-data">\n            <table class="em-tooltip-table">\n                <tbody>\n                    <tr><td>'.concat(e.noDataText_,"</td></tr>\n                </tbody>\n            </table>\n        </div>\n    ")),i.join("")):(i.push('\n    <div class="em-tooltip-text">\n        <table class="em-tooltip-table">\n            <tbody>\n                <tr>\n                    <td>'.concat(d).concat(zE(c.value)," ").concat(h,"</td>\n                </tr>\n                <tr>\n                    <td>").concat(u&&":"!==u.value&&null!=u.value?"".concat(p).concat(zE(u.value)," ").concat(f):"".concat(p).concat(e.noDataText_),"</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n")),i.join(""))},e}(e):(console.log("Unexpected map type: "+t),UI(e,!0,t))}catch(t){console.error("Error in eurostat-map.map: "+t.message),console.error(t)}},DR=function(t){(t=t||{}).shape=t.shape||"circle";var e=t.patternSize||5,n=t.minSize||1,r=t.maxSize||5.5;return t.bckColor=t.bckColor||"white",t.symbColor=t.symbColor||"black",function(i,a){i.selectAll(".em-fill-pattern").remove();for(var o=0;o<a;o++){var s=n+(r-n)*o/(a-1),l=i.append("pattern").attr("class","em-fill-pattern").attr("id","pattern_"+o).attr("x","0").attr("y","0").attr("width",e).attr("height",e).attr("patternUnits","userSpaceOnUse");l.append("rect").attr("x",0).attr("y",0).attr("width",e).attr("height",e).style("stroke","none").style("fill",t.bckColor),"square"==t.shape?l.append("rect").attr("x",0).attr("y",0).attr("width",s).attr("height",s).style("stroke","none").style("fill",t.symbColor):l.append("circle").attr("cx",.5*e).attr("cy",.5*e).attr("r",.5*s).style("stroke","none").style("fill",t.symbColor)}}},zR=DR,IR=function(){return TF},GR="4.3.33"})(),r})());