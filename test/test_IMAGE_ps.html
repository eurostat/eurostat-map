<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <svg style="width: 100%; height:1000px;">
    <svg id="map" x="2px" y="2px"></svg>
    <svg id="eurostatmap-legend" x="0px" y="620px"></svg>
  </svg>


  <script src="../build/eurostatmap.js"></script>
  <script src="./data/nuts3.js"></script>
  <script>
    let mapWidth = 638;
    let mapHeight = 608;

    basemap = function () {
      return eurostatmap
        .map("ps")
        .pixSize(7400)
        .width(mapWidth)
        .height(mapHeight)
        .nutsLvl("mixed")
        .psFill("#4ac499")
        .psShape('square')
        .psFillOpacity(0.8)
        .psMaxSize(100)
        .psMinSize(5)
        .legend({
          svgId: "eurostatmap-legend",
          ascending: false,
          boxPadding: 5,
          sizeLegend: {
            title: "legeend",
            cellNb: 3,
            // shapePadding: 90,
            // titlePadding: -60,
            // shapeOffset: { x: 0, y: -30 },
            // labelOffset: 70,
          },
          legendSpacing: 0
        })
    };

    let map = basemap();

    map.statData('size').setData({ zz: 0 });
    map.updateClassification();
    map.updateStyle();
    map.build();

    // update data, classification
    setTimeout(() => {
      map.statData('size').setData({ ES: 0, DE: 10000, FR: 5000 })
        map.psShape('square')
        .psFillOpacity(0.8)
        .psMaxSize(30)
        .psMinSize(2)
        .psFill("blue")
      map.updateStatValues();
    }, 2000);

    setTimeout(() => {
      map.statData('size').setData({ ES: 10000, DE: 10000, FR: 5000 });
      map.psMaxSize(80)
      map.updateStatValues();
    }, 4000);

    setTimeout(() => {
      map.statData('size').setData({ ES: 20000, DE: 100000, FR: 50000 });
      map.psMaxSize(30)
      map.updateStatValues();
    }, 6000);

    setTimeout(() => {
      map.statData('size').setData({ ES: 30000, DE: 10000, FR: 5000 });
      map.psMaxSize(50)
      map.updateStatValues();
    }, 8000);

    setTimeout(() => {
      map.statData('size').setData({ ES: 40000, DE: 10000, FR: 50000});
      map.psMaxSize(100)
      map.updateStatValues();
    }, 10000);

    // setTimeout(() => {
    //    map.statData('size').setData({ "HU": 10, "NO": 20, "FI": 30 });
    //   map.psFill("yellow")
    //   map.updateStatValues();
    //   // map.updateClassification();
    //   // map.updateStyle();
    // }, 8000)


  </script>
</body>

</html>