<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <svg id="map"></svg>
        <script src="../../../build/eurostatmap.js"></script>
        <script>
            eurostatmap
                .map('sparkline')
                .gridCartogram(true)
                //.width(800)
                .title('GDP change 2009 - 2021')
                .subtitle('Chain linked volumes, percentage change on previous period 2009-2021')
                .nutsLevel(0)
                .statSpark({
                    eurostatDatasetCode: 'tec00115',
                    filters: { unit: 'CLV_PCH_PRE', freq: 'A' },
                    dates: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                    labels: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                })
                .sparkType('bar')

                .sparkLineWidth(30)
                .sparkLineHeight(80)
                .sparkLineOffsets({ x: 0, y: 5 })
                .sparkLineStrokeWidth(3)
                .sparkLineColor('#c44a4a')

                // Color based on positive/negative values
                .sparkLineColor((itemValue) => {
                    if (itemValue > 0) return 'blue'
                    if (itemValue < 0) return 'red'
                    return '#999'
                })
                .sparkLineOpacity(0.8)
                .sparkLineCircleRadius(0)

                .sparkLineOpacity(0.7)
                .sparkLineCircleRadius(1)
                .tooltip({
                    xOffset: 30,
                    yOffset: 150,
                    fontSize: '12px',
                    maxWidth: Math.min(400, window.innerWidth),
                })
                .sparkTooltipChart({
                    width: 150,
                    height: 50,
                    margin: { left: 60, right: 40, top: 20, bottom: 40 },
                    circleRadius: 1.5,
                })
                .build()
        </script>
    </body>
</html>
