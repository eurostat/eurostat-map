<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>eurostat-map.js</title>
        <style>
            .em-tooltip {
                max-width: 300px !important;
            }
        </style>
    </head>
    <body>
        <label for="dataset">Select a theme:</label>
        <select id="dataset" name="dataset">
            <option value="death" selected>Causes of death</option>
            <option value="tourism">Tourism</option>
        </select>
        <br />
        <div style="display: flex">
            <div><svg id="map"></svg></div>
            <div style="padding-left: 10px"><svg id="legend" height="400"></svg></div>
        </div>

        <svg id="inset1"></svg>
        <svg id="inset2" x="200" y="500"></svg>

        <script src="../../../build/eurostatmap.js"></script>
        <script>
            const map = eurostatmap
                .map('coxcomb')
                .dorling(true)
                .title('Tourism')
                .subtitle('Total nights spent, 2022')
                .scale('60M')
                .nutsLevel(1)
                .statCoxcomb({
                    stat: {
                        //data/tour_occ_nin2m?format=JSON&unit=NR&c_resid=TOTAL&nace_r2=I551-I553&month=M01&lang=EN
                        eurostatDatasetCode: 'tour_occ_nin2m',
                        filters: { unit: 'NR', nace_r2: 'I551-I553', TIME: 2022 }, // shared filters
                        unitText: 'Nights spent',
                    },
                    timeParameter: 'month',
                    times: ['M01', 'M02', 'M03', 'M04', 'M05', 'M06', 'M07', 'M08', 'M09', 'M10', 'M11', 'M12'],
                    timeLabels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    categoryParameter: 'c_resid',
                    categoryCodes: ['DOM', 'FOR'],
                    categoryLabels: ['Domestic', 'Foreign'],
                    categoryColors: ['#1b9e77', '#d95f02'],
                    totalCode: 'TOTAL',
                })
                .coxcombMinRadius(5)
                .coxcombMaxRadius(37)
                .transitionDuration(2000)
                .legend({
                    svgId: 'legend',
                    title: 'Nights spent',
                    x: 50,
                    y: 120,
                    colorLegend: { title: 'Type', marginTop: 50, noData: false },
                    timeLegend: { title: 'Month', marginTop: -30 },
                })
                .insets('default')
                .insetBoxPosition([575, 10])
                .zoomExtent([1, 10])
            map.build()
        </script>
    </body>
</html>
