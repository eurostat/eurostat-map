<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <style>
            .em-grid-rect {
                opacity: 0.5;
            }
        </style>
        <svg id="map"></svg>
        <script src="../../../../build/eurostatmap.js"></script>

        <script>
            eurostatmap
                .map('sparkline')
                .nutsLevel(0)
                //.width(600)
                .gridCartogram(true)
                .gridCartogramShape('hexagon')
                .nutsYear(2016)
                .title('Population change 2009 - 2023')
                .subtitle('Change per thousand inhabitants')
                .transitionDuration(1000)
                .statSpark(
                    {
                        eurostatDatasetCode: 'demo_r_gind3',
                        filters: { indic_de: 'GROWRT' },
                        unitText: 'Population change',
                    },
                    ['2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'], //dates
                    ['2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'] //labels
                )
                .sparkType('bar') //line, area, bar
                .sparkLineWidth(29)
                .sparkLineHeight(100)
                .sparkLineStrokeWidth(3)
                .sparkLineOffsets({ x: -2, y: 90 })
                // Color based on positive/negative values
                .sparkLineColor((itemValue) => {
                    if (itemValue > 0) return 'blue'
                    if (itemValue < 0) return 'red'
                    return '#999'
                })
                .sparkLineOpacity(0.8)
                .sparkLineCircleRadius(0)
                //.sparkLineOffsets({ x: -26, y: -15 })
                //.sparkLineOffsets({ x: 0, y: 10 })
                .tooltip({
                    xOffset: 30,
                    yOffset: 150,
                    fontSize: '12px',
                    maxWidth: Math.min(400, window.innerWidth),
                })
                // .sparkTooltipChart({
                //     width: 150,
                //     height: 50,
                //     margin: { left: 30, right: 20, top: 30, bottom: 40 },
                //     circleRadius: 1.5,
                // })
                .hoverColor('#ffa500')
                .build()
        </script>
    </body>
</html>
