<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <svg id="map"></svg>
        <script src="../../../../build/eurostatmap.js"></script>

        <script>
            const map = eurostatmap
                .map('proportionalSymbol')
                .title('Dorling cartogram')
                .subtitle('test')
                .stat({
                    eurostatDatasetCode: 'nama_10r_3gdp',
                    unitText: 'euro per inhabitant',
                    filters: { TIME: '2021', UNIT: 'MIO_EUR' },
                })
                .position({ x: 3900000, y: 3085423, z: 6000 })
                .dorling(true)
                //.psShape('square')
                .dorlingStrength({ x: 3, y: 3 })
                .backgroundMap(false)
                .circleCodeLabels(true)
                .psFill('#e04a28')
                .psMaxSize(100)
                .psMinSize(8)
                .processCentroids((centroidFeatures) => {
                    return centroidFeatures.map((feature) => {
                        if (feature.properties.id == 'TR') {
                            feature.geometry.coordinates[0] = 6000000
                        } else if (feature.properties.id == 'CY') {
                            feature.geometry.coordinates[0] = 6000000
                        }
                        return feature
                    })
                })
                .labels({ values: true })
                .nutsLevel(0)
                .legend({ x: 10, y: 120, title: 'Test', boxOpacity: 0, barChart: false })
                .build()

            setTimeout(() => {
                map.statData().setData({
                    ES: 22,
                    FR: 23,
                    DE: 21,
                    PT: 22,
                    PL: 23,
                    IT: 24,
                    RO: 25,
                    NL: 26,
                    BE: 27,
                    EL: 28,
                    CZ: 29,
                    HU: 30,
                    SE: 31,
                    AT: 32,
                    BG: 33,
                    DK: 34,
                    FI: 35,
                    SK: 36,
                    IE: 37,
                    HR: 38,
                    LT: 39,
                    SI: 40,
                    LV: 41,
                    EE: 42,
                    CY: 43,
                    LU: 44,
                    MT: 45,
                    TR: 46,
                })

                map.psMaxSize(60).dorlingStrength({ x: 1, y: 1 })
                map.stamp({
                    x: 230,
                    y: 100,
                    size: 60,
                    text: 'Hello~world¶New~Line¶Another~Line',
                    stampColor: '#3792B6',
                    textColor: '#3792B6',
                    strokeWidth: 5,
                })
                map.updateStatValues()
            }, 2000)
        </script>
    </body>
</html>
