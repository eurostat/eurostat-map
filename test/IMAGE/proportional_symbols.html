<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <svg style="width: 100%; height: 1000px">
        <svg id="map" x="2px" y="2px"></svg>
        <svg id="map2" x="700px" y="2px"></svg>
        <svg id="eurostatmap-legend" x="0px" y="620px"></svg>
    </svg>

    <script src="../configs/insetConfig.js"></script>
    <script src="../../build/eurostatmap.js"></script>
    <script src="../data/nuts3.js"></script>
    <script>
        let mapWidth = 638
        let mapHeight = 608
        let maxRadius = 30
        let data = {
            PT300: 5000,
            ES709: 5000,
            PT30: 5000,
            FRY3: 5000,
            LI: 10000,
            MT001: 5000,
            MT002: 5000,
            BE10: 20700,
            BE21: 22900,
            BE22: 22200,
            BE23: 23100,
            BE24: 25400,
            BE25: 23400,
            BE31: 24100,
            BE32: 19900,
            BE33: 20300,
            BE34: 21300,
            BE35: 20700,
            BG31: 3900,
            BG32: 4200,
            BG33: 4000,
            BG34: 4000,
            BG41: 7500,
            BG42: 4100,
            CZ01: 13400,
            CZ02: 10600,
            CZ03: 10100,
            CZ04: 9400,
            CZ05: 10000,
            CZ06: 10300,
            CZ07: 9600,
            CZ08: 9500,
            DK01: 24900,
            DK02: 23600,
            DK03: 22800,
            DK04: 23100,
            DK05: 22900,
            DE11: 25500,
            DE12: 24400,
            DE13: 24900,
            DE14: 25000,
            DE21: 28100,
            DE22: 23600,
            DE23: 23400,
            DE24: 23400,
            DE25: 24400,
            DE26: 23900,
            DE27: 24200,
            DE30: 21200,
            DE40: 21700,
            DE50: 21500,
            DE60: 24800,
            DE71: 24900,
            DE72: 22200,
            DE73: 22300,
            DE80: 20600,
            DE91: 22800,
            DE92: 22400,
            DE93: 23000,
            DE94: 21700,
            DEA1: 22700,
            DEA2: 23100,
            DEA3: 22100,
            DEA4: 23200,
            DEA5: 22300,
            DEB1: 22900,
            DEB2: 22400,
            DEB3: 23200,
            DEC0: 21300,
            DED2: 21100,
            DED4: 21300,
            DED5: 20500,
            DEE0: 20500,
            DEF0: 23700,
            DEG0: 20400,
            EE00: 10900,
            IE04: 18500,
            IE05: 22000,
            IE06: 25100,
            EL30: 11600,
            EL41: 8700,
            EL42: 10000,
            EL43: 9200,
            EL51: 8700,
            EL52: 9600,
            EL53: 10400,
            EL54: 9600,
            EL61: 9200,
            EL62: 11200,
            EL63: 8800,
            EL64: 8800,
            EL65: 9400,
            ES11: 14500,
            ES12: 16100,
            ES13: 15200,
            ES21: 19600,
            ES22: 17200,
            ES23: 15600,
            ES24: 16400,
            ES30: 18700,
            ES41: 15600,
            ES42: 13000,
            ES43: 12400,
            ES51: 16900,
            ES52: 13700,
            ES53: 14000,
            ES61: 12200,
            ES62: 12600,
            ES63: 13500,
            ES64: 12500,
            ES70: 11800,
            FR10: 24400,
            FRB0: 19700,
            FRC1: 20900,
            FRC2: 18700,
            FRD1: 20200,
            FRD2: 20000,
            FRE1: 18200,
            FRE2: 19100,
            FRF1: 19800,
            FRF2: 19600,
            FRF3: 18800,
            FRG0: 20400,
            FRH0: 19800,
            FRI1: 20300,
            FRI2: 20800,
            FRI3: 20000,
            FRJ1: 18900,
            FRJ2: 20800,
            FRK1: 20400,
            FRK2: 21300,
            FRL0: 21100,
            FRM0: 19200,
            FRY1: 16400,
            FRY2: 19100,
            FRY3: 11500,
            FRY4: 16800,
            FRY5: 7000,
            HR02: 6500,
            HR03: 7600,
            HR05: 9800,
            HR06: 7300,
            ITC1: 20000,
            ITC2: 18700,
            ITC3: 19600,
            ITC4: 21600,
            ITH1: 23600,
            ITH2: 19400,
            ITH3: 19100,
            ITH4: 19800,
            ITH5: 21200,
            ITI1: 18600,
            ITI2: 17600,
            ITI3: 17900,
            ITI4: 18600,
            ITF1: 15500,
            ITF2: 14400,
            ITF3: 12900,
            ITF4: 13900,
            ITF5: 14200,
            ITF6: 13000,
            ITG1: 13500,
            ITG2: 15100,
            CY00: 15800,
            LV00: 9100,
            LT01: 13200,
            LT02: 10400,
            LU00: 36500,
            HU11: 11300,
            HU12: 7400,
            HU21: 7400,
            HU22: 7000,
            HU23: 6300,
            HU31: 5900,
            HU32: 6100,
            HU33: 6600,
            MT00: ':',
            NL11: 20500,
            NL12: 20700,
            NL13: 21100,
            NL21: 20800,
            NL22: 21600,
            NL23: 21100,
            NL31: 23900,
            NL32: 23200,
            NL33: 21700,
            NL34: 21200,
            NL41: 22200,
            NL42: 21200,
            AT11: 24400,
            AT12: 24600,
            AT13: 22000,
            AT21: 23000,
            AT22: 23400,
            AT31: 23800,
            AT32: 24000,
            AT33: 23300,
            AT34: 24700,
            PL21: 8000,
            PL22: 9100,
            PL41: 8700,
            PL42: 8200,
            PL43: 7300,
            PL51: 8800,
            PL52: 7500,
            PL61: 7500,
            PL62: 7300,
            PL63: 8200,
            PL71: 8500,
            PL72: 7200,
            PL81: 7200,
            PL82: 6600,
            PL84: 7000,
            PL91: 12700,
            PL92: 8300,
            PT11: 11000,
            PT15: 14700,
            PT16: 11800,
            PT17: 14300,
            PT18: 12200,
            PT20: 12200,
            PT30: 11600,
            RO11: 6400,
            RO12: 6400,
            RO21: 5000,
            RO22: 5300,
            RO31: 5300,
            RO32: 11800,
            RO41: 5400,
            RO42: 6900,
            SI03: 12800,
            SI04: 13200,
            SK01: 16400,
            SK02: 9500,
            SK03: 9600,
            SK04: 8500,
            FI19: 21100,
            FI1B: 24500,
            FI1C: 21700,
            FI1D: 20700,
            FI20: 23900,
            SE11: 25500,
            SE12: 20600,
            SE21: 20100,
            SE22: 21100,
            SE23: 21700,
            SE31: 20100,
            SE32: 20400,
            SE33: 20900,
            NO02: ':',
            NO06: ':',
            NO07: ':',
            NO08: ':',
            NO09: ':',
            NO0A: ':',
            ME00: ':',
        }
        let data2 = {
            ES: 0,
            FR: ':',
            DE: 300,
            IT: 400,
            LI: 500,
            CZ: 600,
            CH: 700,
            UK: 800,
            NO: 900,
            NL: 1000,
            PO: 1100,
            RO: 1200,
            DE11: 1000,
        }
        let test1 = {
            ES: 0,
            FR: ':',
            DE: 2,
            IT: 1,
            RO: 2,
            AT: 3,
            NL: 1,
            UK: 2,
            UA: 3,
            ES30: 3,
            FR30: 3,
            PL: 4,
            FRY3: 5,
            FRY2: 4,
            FRY1: 0,
            RS: ':'
        }
        let test2 = {
            ES: 0,
            FR: ':',
            DE: ':',
            IT: 1,
            RO: 2,
            AT: 3,
            NL: 1,
            UK: 0,
            UA: 3,
            NO: 3,
            LT: ':',
            PL: 4,
            FRY3: 5,
            FRY2: 4,
            FRY1: 0,
            RS: 4
        }

        // Compact number formatter (Intl-based)
        const fmtCompact = new Intl.NumberFormat('en', {
            notation: 'compact',
            compactDisplay: 'short', // "short" → 1.2K, "long" → 1.2 thousand
            maximumFractionDigits: 1
        });
        const map = eurostatmap
            .map('proportionalSymbol').insets('default')

            // .insets(insetsConfig)
            // .insetBoxPosition([400, 10])
            .width(mapWidth)
            .height(mapHeight).psShape('bar')
            .nutsLevel('mixed')
            .psMinSize(1)
            .psMaxSize(60)
            //.psFillOpacity(0.8)
            .legend({
                //svgId: "eurostatmap-legend",
                x: 0,
                y: 60,
                sizeLegend: {
                    title: 'test test test',
                    titlePadding: 10,
                    values: [20000, 10000, 4000],
                    labelFormatter: (value) => {
                        return fmtCompact.format(value)
                    },
                    noData: true,
                },
                //noDataPadding: 0,
                colorLegend: false,
            })
        map.statData().setData(data)
        // map.statData('color').setData(data)
        // map.updateClassification()
        // map.updateStyle()
        map.build()

        // setTimeout(() => {
        //     map.statData('size').setData(test1)
        //     map.updateStatValues()
        //     map.updateClassification()
        //     map.updateStyle()
        // }, 10000)

        // setTimeout(() => {
        //     map.statData('size').setData(test2)
        //     map.updateStatValues()
        //     map.updateClassification()
        //     map.updateStyle()
        // }, 20000)
    </script>
</body>

</html>