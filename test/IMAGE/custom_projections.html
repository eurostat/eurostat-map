<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <div>
            <svg id="map"></svg>
        </div>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.1/d3.min.js" integrity="sha512-VcfmBa1zrzVT5htmBM63lMjDtqe4SAcxAlVLpQmBpUoO9beX5iNTKLGRWDuJ5F37jJZotqq65u00EZSVhJuikw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
        <script src="../../build/eurostatmap.js"></script>
        <script src="../data/nuts3.js"></script>
        <script src="../configs/insetConfig.js"></script>
        <script src="../data/mixed.js"></script>
        <script src="https://d3js.org/d3.v4.js"></script>
        <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
        <script>
            let mapWidth = 790
            let mapHeight = 635

            let proj = {
                rotate: [1.5, -40.55],
                scale: 3900,
            }

            let projection = d3.geoAzimuthalEqualArea().rotate(proj.rotate).scale(proj.scale)

            let map = eurostatmap
                .map('ch')
                .projectionFunction(projection)
                .width(mapWidth)
                .height(mapHeight)
                .proj('4326')
                .stat({
                    eurostatDatasetCode: 'demo_r_d3dens',
                    unitText: 'people/kmÂ²',
                    filters: { time: 2016 },
                })
                .proj('4326')
                .nutsLvl(2)
                .scale('03M')

            // surrounding data or not
            map.countriesToShow(['ES'])
                .bordersToShow(['eu', 'efta', 'cc', 'oth'])
                .filterGeometriesFunction((geom) => {
                    console.log(geom)
                    return geom
                })

            //IMAGE styling
            map.drawCoastalMargin(false)
                .seaFillStyle('#FFFFFF')
                .cntrgFillStyle('#E6E6E6')
                .nutsrgFillStyle('#E6E6E6')
                .nutsbnStroke({
                    0: '#000',
                    1: '#000',
                    2: '#000',
                    3: '#000',
                    co: 'grey',
                })
                .noDataFillStyle('darkgrey')
                .nutsbnStrokeWidth({ 0: 2, 1: 0.4, 2: 0.4, 3: 0.4, oth: 2, co: 0 })
                .cntbnStrokeWidth({ eu: 1, efta: 1, cc: 1, oth: 2, co: 0.2 })
                .showScalebar(true)
                .scalebarPosition([420, 560])
                .nutsrgSelFillSty('#003E8C')
                .zoomExtent([-100, 100])
                .build()
        </script>
    </body>
</html>
