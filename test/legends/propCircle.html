<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <div id="container">
            <svg id="map"></svg>
            <svg id="legend"></svg>
        </div>

        <script src="../../../../build/eurostatmap.js"></script>
        <!-- <script src="https://unpkg.com/eurostat-map@4.1.32"></script> -->

        <script>
            const map = eurostatmap
                .map('ps')
                .title('Proportional circles')
                .subtitle('test')
                .stat('size', {
                    eurostatDatasetCode: 'nama_10r_3gdp',
                    unitText: 'Million EUR',
                    filters: { unit: 'MIO_EUR', time: '2023' },
                })
                .stat('color', { eurostatDatasetCode: 'nama_10r_3gdp', unitText: 'EUR/inhabitant', filters: { unit: 'EUR_HAB', time: '2023' } })
                .psCodeLabels(true)
                .psFill('#e04a28')
                .psMaxSize(50)
                .dorling(true)
                .psMinSize(12)
                // .processCentroids((centroidFeatures) => {
                //     return centroidFeatures.map((feature) => {
                //         if (feature.properties.id == 'TR') {
                //             feature.geometry.coordinates[0] = 6000000
                //         } else if (feature.properties.id == 'CY') {
                //             feature.geometry.coordinates[0] = 6000000
                //         }
                //         return feature
                //     })
                // })
                //.labels({ values: true })
                .nutsLevel('mixed')
                .psClassificationMethod('threshold')
                .psThreshold([10000, 30000, 40000, 50000, 70000])
                .psColors(['#B0DCB0', '#93CD93', '#76C076', '#5CB35C', '#3CA43C', '#177217'])
                .legend({
                    x: 580,
                    y: 10,
                    title: 'Main title',
                    subtitle: 'Subtitle',
                    boxOpacity: 0.95,
                    sizeLegend: {
                        title: 'Size legend title',
                        noData: true,
                        noDataText: 'No data available',
                        labelFormatter: eurostatmap.spaceAsThousandSeparator,
                    },
                    colorLegend: {
                        title: 'color legend title',
                        labelType: 'ranges',
                        noData: true,
                        noDataText: 'No data!',
                        //labelType: 'ranges',
                        //labels: ['my', 'very', 'own', 'custom', 'labels'],
                    },
                })

            map.statData('size').setData({
                DED2C: 20,
                ES: 22,
                FR: 23,
                DE: 21,
                PT: 22,
                PL: 23,
                IT: 24,
                RO: 25,
                NL: 26,
                BE: 27,
                EL: 28,
                CZ: 29,
                HU: 30,
                SE: 31,
                AT: ':',
                BG: 33,
                DK: 34,
                FI: 35,
                SK: 36,
                IE: 37,
                HR: 38,
                LT: 39,
                SI: 40,
                LV: 41,
                EE: 42,
                CY: 43,
                LU: 44,
                MT: 45,
                TR: 46,
            })
            map.statData('color').setData({
                DED2C: ':',
                ES: 22,
                FR: 23,
                DE: 21,
                PT: 22,
                PL: 23,
                IT: 24,
                RO: 25,
                NL: 26,
                BE: 27,
                EL: 28,
                CZ: 29,
                HU: 30,
                SE: 31,
                AT: ':',
                BG: 33,
                DK: 34,
                FI: 35,
                SK: 36,
                IE: 37,
                HR: 38,
                LT: 39,
                SI: 40,
                LV: 41,
                EE: 42,
                CY: 43,
                LU: 44,
                MT: 45,
                TR: 46,
            })

            map.build()
        </script>
    </body>
</html>
