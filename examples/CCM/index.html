<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif !important;
            }
            #tooltip_eurostat {
                z-index: 999999;
                font-family: Arial, Helvetica, sans-serif !important;
                border-radius: 0px !important;
                box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px !important;
            }
            a {
                text-decoration: none;
                cursor: pointer;
            }
            a:hover {
                text-decoration: underline;
            }
            svg a {
                fill: #0e47cb;
            }
            #header {
                padding-left: 10px;
                padding-right: 10px;
            }
            .container {
                max-height: 100vh;
            }
            .titles {
                color: #262b38;
                display: inline-block;
                /* text-align: center; */
                width: 100%;
            }
            #title {
                font-size: 1.2rem;
                font-weight: bold;
            }
            #subtitle {
                font-size: 1.1rem;
            }
            .custom-select-wrapper {
                position: relative;
                width: 100%;
                max-width: 350px;
                margin-top: 10px;
                margin-bottom: 10px;
                /* margin-left: auto;
        margin-right: auto; */
            }
            .custom-select {
                position: relative;
                background-color: white;
                border: 1px solid #ccc;
                border-radius: 4px;
                padding: 8px 12px;
                font-size: 1rem;
                cursor: pointer;
                width: 100%;
                padding-right: 40px; /* Space for the dropdown arrow */
                box-sizing: border-box;
                box-shadow: inset 0px 0px 5px rgba(0, 0, 0, 0.3);
                align-content: center;
                height: 38px;
            }
            .select-trigger {
                display: flex;
                justify-content: space-between;
                align-items: center;
                cursor: pointer;
                white-space: nowrap;
                overflow: hidden;
            }
            .custom-options {
                display: none;
                background-color: white;
                border: 1px solid #ccc;
                border-radius: 4px;
                position: absolute;
                width: 100%;
                top: 100%;
                left: 0;
                list-style: none;
                margin: 0;
                padding: 0;
                box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
                z-index: 99;
            }
            .custom-options.open {
                display: block;
            }
            .custom-option {
                padding: 10px;
                cursor: pointer;
            }
            .custom-option:hover {
                background-color: #f0f0f0;
            }
            .custom-option.selected {
                background-color: #0e47cb;
                color: white;
            }
            #naceSelectWrapper::after {
                content: '▼';
                font-size: 12px;
                color: white;
                background-color: #0e47cb;
                padding: 0; /* Remove padding to ensure it fills the container */
                position: absolute;
                right: 0;
                top: 0;
                bottom: 0;
                width: 40px; /* Define a fixed width for the dropdown arrow container */
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 0 4px 4px 0;
                pointer-events: none;
            }
            #digital-template {
                background-color: rgb(255, 255, 255);
                font-weight: normal;
                max-width: 100%;
                /* totalheight - header (including margin-bottom on custom-select) */
                max-height: calc(100vh - 111px);
                font-family: Arial;
                fill: rgb(76, 75, 75);
            }
            .legend-label {
                font-size: 0.9rem;
                fill: #262b38;
                color: #262b38;
            }
        </style>
    </head>
    <body style="margin: 0; padding: 0">
        <div class="container">
            <div id="header">
                <div class="titles">
                    <span id="title">Change in GHG emissions intensity of the economy, 2012-2022</span>
                    <br />
                    <span id="subtitle">(%-change; grams per euro, chain-linked volumes (2010))</span>
                </div>

                <div id="naceSelectWrapper" class="custom-select-wrapper">
                    <div class="custom-select">
                        <div class="select-trigger" tabindex="0">Select an option</div>
                        <ul class="custom-options">
                            <!-- Options will be dynamically populated here -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- MAP SVG -->
            <svg
                x="0"
                y="0"
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                baseProfile="full"
                width="795px"
                id="digital-template"
                viewBox="0 0 795 700"
            >
                <!-- <text id="title" width="714.5px" x="5px" y="36px" style="font-size: 25px; font-weight: bold; fill: rgb(76, 75, 75)">
          Change in GHG emissions intensity of the economy, EU, 2012-2022
        </text>
        <text id="subtitle" style="font-weight: normal; font-size: 23px; fill: rgb(76, 75, 75)" x="5px" y="64px">
          (%-change; grams per euro, chain-linked volumes (2010))
        </text> -->
                <text text-anchor="end" x="787" y="660" style="font-size: 11px">
                    Administrative boundaries: © EuroGeographics © UN–FAO © Turkstat
                </text>
                <text text-anchor="end" x="787" y="674" style="font-size: 11px">
                    Cartography: Eurostat –
                    <a href="https://gisco-services.ec.europa.eu/image/">IMAGE</a>
                    , 09/2024
                </text>
                <!---->
                <!---->
                <!---->
                <text>
                    <tspan x="10" y="660" style="font-size: 11px; fill: rgb(76, 75, 75)">
                        NACE: Total - all NACE activities, Economic indicator: Value added, gross;
                    </tspan>
                    <tspan x="10" y="674" style="font-size: 11px; fill: rgb(76, 75, 75)">Switzerland: change 2012-2021.</tspan>
                    <tspan x="10" y="688" style="font-size: 11px; fill: rgb(76, 75, 75)">
                        Source: Eurostat (online data code:
                        <a
                            style="fill: #0e47cb; text-decoration: none; cursor: pointer"
                            onmouseover="this.style.textDecoration='underline';"
                            onmouseout="this.style.textDecoration='none';"
                            href="https://ec.europa.eu/eurostat/databrowser/view/env_ac_aeint_r2/default/table?lang=en"
                            target="_blank"
                        >
                            env_ac_aeint_r2
                        </a>
                        )
                    </tspan>
                    <!---->
                </text>
                <!---->
                <svg id="mapBackground" x="0" y="0">
                    <svg id="digital-template-map" width="795" height="625"></svg
                    ><svg class="image-template-logo" x="-10" y="620" height="41" width="150">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink"
                            version="1.1"
                            id="Livello_1"
                            x="0px"
                            y="0px"
                            viewBox="0 0 684.9 222.8"
                            style="enable-background: new 0 0 684.9 222.8"
                            xml:space="preserve"
                        >
                            <style type="text/css">
                                .estat-logo-background {
                                    fill: #ffffff;
                                }
                                .st1 {
                                    fill: #003399;
                                }
                                .st2 {
                                    fill: #ffcc00;
                                }
                                .estat-logo-text {
                                    fill: #7d8088;
                                }
                            </style>

                            <g style="transform: translate(0px, -35px)">
                                <rect x="501" y="74.1" class="st1" width="110.4" height="74.1"></rect>
                                <polygon
                                    class="st2"
                                    points="558.1,85.3 561.8,85.3 558.8,87.7 560,91.4 557,89.1 554,91.4 555.2,87.7 552.2,85.3 555.9,85.3   557,81.7  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="558.2,134.7 561.9,134.7 558.9,136.9 560.1,140.5 557.1,138.3 554.2,140.5 555.3,136.9 552.3,134.7   556,134.7 557.1,131.2  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="570.4,131.4 574,131.4 571.1,133.7 572.2,137.2 569.3,135 566.3,137.2 567.5,133.7 564.5,131.4   568.2,131.4 569.3,128  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="570.4,88.6 574,88.6 571.1,90.9 572.2,94.4 569.3,92.2 566.3,94.4 567.5,90.9 564.5,88.6 568.2,88.6   569.3,85.2  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="579.4,97.7 583.1,97.7 580.1,99.9 581.2,103.5 578.3,101.3 575.3,103.5 576.5,99.9 573.5,97.7   577.2,97.7 578.3,94.2  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="579.4,122.5 583.1,122.5 580.1,124.7 581.2,128.3 578.3,126.1 575.3,128.3 576.5,124.7 573.5,122.5   577.2,122.5 578.3,119  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="582.7,109.9 586.4,109.9 583.5,112.1 584.6,115.7 581.7,113.5 578.7,115.7 579.9,112.1 576.9,109.9   580.5,109.9 581.7,106.4  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="545.7,88.7 549.4,88.7 546.4,90.9 547.6,94.5 544.6,92.3 541.7,94.5 542.8,90.9 539.8,88.7   543.5,88.7 544.6,85.2  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="537,97.7 540.7,97.7 537.7,100 538.8,103.5 535.9,101.3 532.9,103.5 534.1,100 531.1,97.7 534.8,97.7   535.9,94.3  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="533.7,109.9 537.4,109.9 534.4,112.2 535.6,115.7 532.6,113.5 529.7,115.7 530.8,112.2 527.8,109.9   531.5,109.9 532.6,106.5  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="537,122.5 540.7,122.5 537.7,124.8 538.8,128.3 535.9,126.1 532.9,128.3 534.1,124.8 531.1,122.5   534.8,122.5 535.9,119.1  "
                                ></polygon>
                                <polygon
                                    class="st2"
                                    points="545.8,131.5 549.5,131.5 546.6,133.7 547.7,137.3 544.8,135.1 541.8,137.3 543,133.7 540,131.5   543.6,131.5 544.8,128  "
                                ></polygon>
                                <path
                                    class="estat-logo-text"
                                    d="M60.6,112.7c0.1-1.1,0.3-2.4,0.7-3.9c0.4-1.4,1.1-2.8,2.2-4.1c1-1.3,2.4-2.4,4.1-3.2c1.7-0.9,3.9-1.3,6.4-1.3   c3.9,0,6.9,1.1,8.8,3.2s3.3,5.2,4,9.3H60.6z M96.7,98.7c-2.4-3.3-5.4-5.9-9.2-7.8c-3.7-1.9-8-2.9-13-2.9c-4.5,0-8.6,0.8-12.2,2.4   c-3.7,1.6-6.8,3.8-9.5,6.5c-2.7,2.8-4.7,6.1-6.1,9.8c-1.4,3.8-2.2,7.9-2.2,12.3c0,4.6,0.7,8.7,2.1,12.5c1.4,3.8,3.4,7.1,6,9.8   s5.7,4.8,9.4,6.3c3.7,1.5,7.9,2.2,12.5,2.2c6.7,0,12.4-1.5,17.1-4.6c4.7-3,8.2-8.1,10.5-15.1H87.8c-0.5,1.8-2,3.5-4.3,5.2   c-2.4,1.6-5.2,2.4-8.4,2.4c-4.6,0-8-1.2-10.5-3.5c-2.4-2.4-3.8-6.1-4-11.4H103c0.3-4.6-0.1-8.9-1.1-13.1   C100.8,105.7,99.1,102,96.7,98.7"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M485.2,102.1V88.9h-10.5V73.2h-15.8V89h-10.5v13.1h10.5v33.2c0,2.9,0,5.3,1,7.1s1.9,3.2,3.6,4.2s3.6,1.7,5.8,2   c2.2,0.3,4.5,0.5,7,0.5c1.6,0,3,0,4.7-0.1c1.7,0,4.2-0.2,4.2-0.4V136c0,0.2-1.2,0.3-2,0.4c-0.9,0.1-1.3,0.1-2.2,0.1   c-2.7,0-4.4-0.5-5.3-1.4s-1-2.7-1-5.4v-27.6L485.2,102.1z"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M424.8,129.5c-0.2,1.5-0.4,3-1.2,4.5c-0.9,1.5-2.1,2.7-3.8,3.8c-1.7,1.1-4.2,1.6-7.3,1.6   c-1.3,0-2.5-0.1-3.7-0.3c-1.2-0.3-2.2-0.6-3.2-1.2c-0.9-0.6-1.6-1.3-2.1-2.3s-0.8-2.2-0.8-3.6c0-1.5,0.3-2.7,0.8-3.7   c0.6-1,1.2-1.8,2.1-2.4s1.9-1.1,3.1-1.5c1.1-0.4,2.3-0.7,3.5-0.9c1.3-0.3,2.5-0.4,3.8-0.6c1.3-0.1,2.4-0.3,3.6-0.6   c1.1-0.2,2.1-0.5,3.1-0.8c1-0.4,2.2-0.8,2.2-1.4v6C424.7,126.8,425,128,424.8,129.5 M440.5,135.5v-30.4c0-3.5-0.3-6.4-1.9-8.5   s-3.1-3.8-5.6-5s-5.3-2-8.2-2.4c-3-0.4-6-0.6-8.9-0.6c-3.2,0-6.4,0.3-9.6,0.9c-3.2,0.6-6.1,1.6-8.6,3.1c-2.6,1.5-4.6,3.3-6.3,5.8   c-1.7,2.5-2.6,6.4-2.8,9h16.1c0.3-2.6,1.4-5,3.1-6.4c1.8-1.4,4.3-1.7,7.4-1.7c1.4,0,2.8,0.1,4,0.3c1.3,0.2,2.3,0.6,3.3,1.1   c0.9,0.6,1.7,1.4,2.2,2.3c0.6,1,0.8,2.4,0.8,4.1c0.1,1.6-0.4,2.9-1.5,3.8c-1,0.9-2.5,1.5-4.2,2c-1.8,0.5-3.9,0.8-6.2,1   c-2.3,0.3-4.7,0.5-7.1,0.9s-4.8,0.9-7.2,1.5c-2.4,0.6-4.5,1.6-6.3,2.9c-1.9,1.3-3.3,3-4.5,5.1s-1.8,4.9-1.8,8.2   c0,3,0.5,5.6,1.5,7.8s2.4,4,4.2,5.4c1.8,1.4,3.9,2.5,6.3,3.2s5,1,7.8,1c3.6,0,7.1-0.6,10.6-1.6s6.4-2.9,9-5.5c0.1,1,0.2,2,0.4,2.9   c0.2,0.9,0.4,1.9,0.7,2.8l16.2-0.1c-0.8-1.2-1.5-3-1.8-5.4C441.1,140.6,440.5,138.1,440.5,135.5"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M366.9,73.2h-15.8V89h-7.9v13.1h7.9v33.2c0,2.9,0.8,5.3,1.8,7.1c0.9,1.8,2.6,3.2,4.3,4.2c1.7,1,3.7,1.7,5.9,2   c2.2,0.3,4.6,0.5,7.1,0.5c1.6,0,3.3,0,5-0.1c1.7,0,2.1-0.2,4.8-0.4V136c0,0.2-1.9,0.3-2.7,0.4c-0.8,0.1-2.1,0.1-3,0.1   c-2.7,0-4.7-0.5-5.6-1.4s-1.8-2.7-1.8-5.4v-27.6H380V88.9h-13.1V73.2z"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M332.1,118.3c-1.7-1.2-3.7-2.2-5.9-3c-2.2-0.8-4.5-1.4-6.8-1.9s-4.5-1-6.7-1.4s-4.1-1-5.8-1.5   c-1.6-0.6-3.1-1.3-4.1-2.2c-1.1-0.9-1.6-2-1.6-3.5c0-1.2,0.3-2.2,0.9-2.9c0.6-0.7,1.4-1.2,2.2-1.6c0.9-0.4,1.8-0.6,2.9-0.7   s2-0.2,2.9-0.2c2.8,0,5.3,0.6,7.4,1.7s3.2,3.7,3.5,6.3h15.2c-0.3-2.6-1.2-6.7-2.7-9.1c-1.6-2.4-3.5-4.4-5.8-5.8   c-2.4-1.5-5-2.5-8-3.1c-3-0.6-6-0.9-9.2-0.9s-6.3,0.3-9.2,0.8c-3,0.6-5.8,1.6-8.2,3c-2.4,1.4-4.3,3.3-5.8,5.7   c-1.5,2.4-2.2,5.5-2.2,9.2c0,2.6,0.5,4.7,1.6,6.5s2.4,3.2,4.2,4.4c1.8,1.1,3.7,2.1,5.9,2.8c2.2,0.7,4.5,1.3,6.8,1.9   c5.7,1.2,10.2,2.4,13.4,3.6c3.2,1.2,4.8,3,4.8,5.4c0,1.4-0.4,2.6-1,3.6c-0.7,0.9-1.5,1.7-2.5,2.2c-1,0.6-2.1,1-3.4,1.2   c-1.2,0.2-2.4,0.3-3.6,0.3c-1.6,0-3.1-0.2-4.5-0.6c-1.5-0.3-2.8-1.1-3.9-1.9c-1.1-0.8-2.1-2.1-2.8-3.3c-0.7-1.3-1.1-2.4-1.1-5.1   h-15.2c0.2,5.3,1,7.7,2.6,10.4c1.6,2.6,3.7,5.2,6.2,6.8s5.4,2.7,8.7,3.4c3.2,0.7,6.5,1,9.9,1c3.3,0,6.6-0.3,9.8-1   c3.2-0.7,6-1.7,8.5-3.3s4.5-3.7,6.1-6.3c1.5-2.6,2.3-5.8,2.3-9.6c0-2.7-0.5-5-1.6-6.8C335.2,121.1,333.8,119.5,332.1,118.3"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M261.9,126.2c-0.5,2.2-1.2,4.2-2.3,6c-1.1,1.8-2.5,3.2-4.4,4.2c-1.8,1-4.1,1.6-6.8,1.6s-5-0.5-6.8-1.6   s-3.3-2.5-4.4-4.2c-1.1-1.8-1.8-3.8-2.3-6s-0.7-4.5-0.7-6.8s0.2-4.7,0.7-6.9c0.4-2.2,1.2-4.2,2.3-6c1.1-1.7,2.5-3.2,4.4-4.3   c1.8-1.1,4-1.6,6.8-1.6c2.7,0,4.9,0.5,6.8,1.6c1.8,1.1,3.3,2.5,4.4,4.3c1.1,1.7,1.9,3.7,2.3,6s0.6,4.6,0.6,6.9   S262.3,123.9,261.9,126.2 M270.3,96.9c-2.6-2.6-5.8-4.7-9.5-6.2c-3.7-1.4-7.9-2.2-12.5-2.2s-8.7,0.7-12.4,2.2s-6.9,3.6-9.5,6.2   c-2.6,2.7-4.7,5.9-6.1,9.7c-1.4,3.8-2.2,8-2.2,12.8c0,4.6,0.7,8.9,2.2,12.6c1.4,3.8,3.5,7,6.1,9.7s5.8,4.7,9.5,6.1   c3.7,1.4,7.8,2.2,12.4,2.2c4.6,0,8.7-0.7,12.5-2.2c3.7-1.4,6.9-3.5,9.5-6.1c2.6-2.7,4.6-5.9,6.1-9.7c1.4-3.8,2.1-8,2.1-12.6   c0-4.7-0.7-9-2.1-12.8C275,102.8,273,99.6,270.3,96.9"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M214,88.6c-2,0-3.7,0.4-5.5,1c-1.9,0.6-3.7,1.6-5.3,2.7c-1.6,1.1-3.1,2.7-4.4,4.2c-1,1.2-1.9,2.4-2.6,4.2V88.9   h-15.8v60.4h15.8v-27.2c0-2.6,0.3-5.1,0.8-7.3c0.5-2.3,1.5-4.2,2.7-5.9c1.2-1.7,2.8-3,4.8-4c2.1-1,4.5-1.5,7.4-1.5   c1,0,1.8,0.1,2.9,0.1c1,0.2,2.4,0.3,2.4,0.4V89.1C217.2,88.7,215.1,88.6,214,88.6"
                                ></path>
                                <path
                                    class="estat-logo-text"
                                    d="M151.2,120.7c0,5.9-1.2,10.2-3.2,12.8s-5.4,3.9-9.7,3.9c-3.9,0-6.6-1.2-8.2-3.6c-1.5-2.3-2.5-6-2.5-10.8V88.9   h-15.8V126c0,3.6,0.5,6.9,1.1,9.9s1.9,5.5,3.5,7.6s3.7,3.8,6.5,4.9c2.8,1.1,6.3,1.8,10.5,1.8c3.4,0,6.7-0.5,9.9-2s5.8-4.1,7.9-6.7   v7.8H167V88.9h-15.8V120.7z"
                                ></path>
                            </g>
                        </svg>
                    </svg>
                </svg>

                <svg class="IMAGE-legend" y="0" style="display: inherit">
                    <!---->
                    <text id="legendHeadline" x="7" y="130" style="font-size: 1rem">% change</text>
                    <!---->
                    <svg id="legend" encoding="UTF-8" x="5" y="138">
                        <rect x="3px" y="0px" width="26" height="16" fill="#EBF6EB" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <rect x="3px" y="19px" width="26" height="16" fill="#C2E3C2" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <rect x="3px" y="38px" width="26" height="16" fill="#85C685" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <rect x="3px" y="57px" width="26" height="16" fill="#33A033" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <rect x="3px" y="76px" width="26" height="16" fill="#177217" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <rect x="3px" y="95px" width="26" height="16" fill="#053005" style="stroke: rgb(0, 0, 0); stroke-width: 0.4"></rect>
                        <!---->
                        <text x="34px" y="13.5px" class="legend-label">≥ -20</text>
                        <text x="34px" y="32.5px" class="legend-label">-25 – &lt; -20</text>
                        <text x="34px" y="51.5px" class="legend-label">-30 – &lt; -25</text>
                        <text x="34px" y="70.5px" class="legend-label">-35 – &lt; -30</text>
                        <text x="34px" y="89.5px" class="legend-label">-45 – &lt; -35</text>
                        <text x="34px" y="108.5px" class="legend-label">&lt; -45</text>
                        <!---->
                        <rect
                            id="l7"
                            x="3px"
                            width="26"
                            height="14"
                            y="114px"
                            fill="#b2b2b2"
                            style="stroke: rgb(0, 0, 0); stroke-width: 0.4px; display: none"
                        ></rect>
                        <text x="34px" id="l7Label" y="126px" style="font-size: 13px; display: none">undefined – &lt; undefined</text>
                    </svg>
                    <!---->
                </svg>
                <defs>
                    <linearGradient id="gradBottom" x1="100%" y1="0%" x2="100%" y2="100%" gradientUnits="objectBoundingBox">
                        <stop offset="0" stop-color="rgb(255, 255, 255)"></stop>
                        <stop offset="1" stop-opacity="0.1" stop-color="rgb(255, 255, 255)"></stop>
                    </linearGradient>
                    <linearGradient id="gradTop" x1="100%" y1="100%" x2="100%" y2="0%" gradientUnits="objectBoundingBox">
                        <stop offset="0" stop-opacity="0.1" stop-color="rgb(255, 255, 255)"></stop>
                        <stop offset="1" stop-color="rgb(255, 255, 255)"></stop>
                    </linearGradient>
                    <linearGradient id="gradLeft" x1="70%" y1="100%" x2="0%" y2="100%" gradientUnits="objectBoundingBox">
                        <stop offset="0" stop-color="rgb(255, 255, 255)"></stop>
                        <stop offset="1" stop-opacity="0.1" stop-color="rgb(255, 255, 255)"></stop>
                    </linearGradient>
                    <linearGradient id="gradRight" x1="0%" y1="100%" x2="100%" y2="100%" gradientUnits="objectBoundingBox">
                        <stop offset="0" stop-opacity="0.1" stop-color="rgb(255, 255, 255)"></stop>
                        <stop offset="1" stop-color="rgb(255, 255, 255)"></stop>
                    </linearGradient>
                    <linearGradient id="gradAfrica" x1="100%" y1="0%" x2="100%" y2="100%" gradientUnits="objectBoundingBox">
                        <stop offset="0" stop-opacity="0.1" stop-color="rgb(255, 255, 255)"></stop>
                        <stop offset="1" stop-color="rgb(255, 255, 255)"></stop>
                    </linearGradient>
                </defs>
                <rect x="83" height="20" width="258" fill="url(#gradAfrica)" y="607"></rect>
                <rect x="628" height="20" width="179" fill="url(#gradAfrica)" y="607"></rect>
                <svg
                    viewBox="0 0 140 63"
                    width="140"
                    height="63"
                    x="687"
                    y="580"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:bx="https://boxy-svg.com"
                    id="eurostat-ribbon"
                    style="display: inherit"
                >
                    <defs>
                        <linearGradient id="linear-gradient" x1="0.155" y1="1" x2="0.837" y2="0.011" gradientUnits="objectBoundingBox">
                            <stop offset="0" stop-color="#082b7a"></stop>
                            <stop offset="0.5" stop-color="#0e47cb"></stop>
                        </linearGradient>
                        <linearGradient id="linear-gradient-2" x1="0.759" y1="0.991" x2="0.243" y2="0.013" gradientUnits="objectBoundingBox">
                            <stop offset="0" stop-color="#f4f5f5"></stop>
                            <stop offset="1" stop-color="#7d8088"></stop>
                        </linearGradient>
                        <linearGradient id="linear-gradient-3" x1="0.17" y1="0.979" x2="0.843" y2="0.002" gradientUnits="objectBoundingBox">
                            <stop offset="0" stop-color="#fffcf2"></stop>
                            <stop offset="0.5" stop-color="#fc0"></stop>
                        </linearGradient>
                    </defs>
                    <path
                        id="Path_7400"
                        data-name="Path 7400"
                        d="M 106.522 4.981 L 90.628 4.981 L 55.252 47.137 L 71.146 47.137 L 106.522 4.981 Z"
                        class="cls-1"
                        style="fill: url(#linear-gradient)"
                    ></path>
                    <path
                        id="Path_7401"
                        data-name="Path 7401"
                        d="M 37.563 26.06 L 53.459 26.06 L 71.146 47.138 L 55.252 47.138 L 37.563 26.06 Z"
                        class="cls-2"
                        style="fill: url(#linear-gradient-2)"
                    ></path>
                    <path
                        id="Path_7402"
                        data-name="Path 7402"
                        d="M 53.456 26.06 L 37.56 26.06 L 2.184 68.216 L 18.079 68.216 L 53.456 26.06 Z"
                        class="cls-3"
                        style="fill: url(#linear-gradient-3)"
                    ></path>
                    <path
                        d="M 45.491 35.489 L 56.975 49.192 L 34.006 49.192 L 45.491 35.489 Z"
                        bx:shape="triangle 34.006 35.489 22.969 13.703 0.5 0 1@35ebc8e0"
                        class="logo-ribbon-cut-fill"
                        style="fill: rgb(255, 255, 255)"
                    ></path>
                    <path
                        d="M 106.491 4.983 L 142.184 47.529 L 70.797 47.529 L 106.491 4.983 Z"
                        bx:shape="triangle 70.797 4.983 71.387 42.546 0.5 0 1@f96aa82c"
                        style="fill: rgb(255, 255, 255)"
                    ></path>
                </svg>
            </svg>
        </div>
        <script>
            !(function (t, e) {
                'object' == typeof exports && 'object' == typeof module
                    ? (module.exports = e())
                    : 'function' == typeof define && define.amd
                      ? define([], e)
                      : 'object' == typeof exports
                        ? (exports.eurostatmap = e())
                        : (t.eurostatmap = e())
            })(self, function () {
                return (function () {
                    'use strict'
                    var t = {
                            d: function (e, n) {
                                for (var r in n) t.o(n, r) && !t.o(e, r) && Object.defineProperty(e, r, { enumerable: !0, get: n[r] })
                            },
                            o: function (t, e) {
                                return Object.prototype.hasOwnProperty.call(t, e)
                            },
                            r: function (t) {
                                'undefined' != typeof Symbol &&
                                    Symbol.toStringTag &&
                                    Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }),
                                    Object.defineProperty(t, '__esModule', { value: !0 })
                            },
                        },
                        e = {}
                    function n(t, e) {
                        ;(null == e || e > t.length) && (e = t.length)
                        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n]
                        return r
                    }
                    function r(t) {
                        return (
                            (function (t) {
                                if (Array.isArray(t)) return n(t)
                            })(t) ||
                            (function (t) {
                                if (('undefined' != typeof Symbol && null != t[Symbol.iterator]) || null != t['@@iterator']) return Array.from(t)
                            })(t) ||
                            (function (t, e) {
                                if (t) {
                                    if ('string' == typeof t) return n(t, e)
                                    var r = Object.prototype.toString.call(t).slice(8, -1)
                                    return (
                                        'Object' === r && t.constructor && (r = t.constructor.name),
                                        'Map' === r || 'Set' === r
                                            ? Array.from(t)
                                            : 'Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)
                                              ? n(t, e)
                                              : void 0
                                    )
                                }
                            })(t) ||
                            (function () {
                                throw new TypeError(
                                    'Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                                )
                            })()
                        )
                    }
                    function i() {}
                    function a(t) {
                        return null == t
                            ? i
                            : function () {
                                  return this.querySelector(t)
                              }
                    }
                    function o(t) {
                        return null == t ? [] : Array.isArray(t) ? t : Array.from(t)
                    }
                    function s() {
                        return []
                    }
                    function l(t) {
                        return null == t
                            ? s
                            : function () {
                                  return this.querySelectorAll(t)
                              }
                    }
                    function u(t) {
                        return function () {
                            return this.matches(t)
                        }
                    }
                    function c(t) {
                        return function (e) {
                            return e.matches(t)
                        }
                    }
                    t.r(e),
                        t.d(e, {
                            getFillPatternDefinitionFun: function () {
                                return xu
                            },
                            map: function () {
                                return mu
                            },
                        })
                    var f = Array.prototype.find
                    function p() {
                        return this.firstElementChild
                    }
                    var h = Array.prototype.filter
                    function d() {
                        return Array.from(this.children)
                    }
                    function g(t) {
                        return new Array(t.length)
                    }
                    function _(t, e) {
                        ;(this.ownerDocument = t.ownerDocument),
                            (this.namespaceURI = t.namespaceURI),
                            (this._next = null),
                            (this._parent = t),
                            (this.__data__ = e)
                    }
                    function y(t, e, n, r, i, a) {
                        for (var o, s = 0, l = e.length, u = a.length; s < u; ++s)
                            (o = e[s]) ? ((o.__data__ = a[s]), (r[s] = o)) : (n[s] = new _(t, a[s]))
                        for (; s < l; ++s) (o = e[s]) && (i[s] = o)
                    }
                    function v(t, e, n, r, i, a, o) {
                        var s,
                            l,
                            u,
                            c = new Map(),
                            f = e.length,
                            p = a.length,
                            h = new Array(f)
                        for (s = 0; s < f; ++s) (l = e[s]) && ((h[s] = u = o.call(l, l.__data__, s, e) + ''), c.has(u) ? (i[s] = l) : c.set(u, l))
                        for (s = 0; s < p; ++s)
                            (u = o.call(t, a[s], s, a) + ''),
                                (l = c.get(u)) ? ((r[s] = l), (l.__data__ = a[s]), c.delete(u)) : (n[s] = new _(t, a[s]))
                        for (s = 0; s < f; ++s) (l = e[s]) && c.get(h[s]) === l && (i[s] = l)
                    }
                    function m(t) {
                        return t.__data__
                    }
                    function x(t) {
                        return 'object' == typeof t && 'length' in t ? t : Array.from(t)
                    }
                    function b(t, e) {
                        return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
                    }
                    _.prototype = {
                        constructor: _,
                        appendChild: function (t) {
                            return this._parent.insertBefore(t, this._next)
                        },
                        insertBefore: function (t, e) {
                            return this._parent.insertBefore(t, e)
                        },
                        querySelector: function (t) {
                            return this._parent.querySelector(t)
                        },
                        querySelectorAll: function (t) {
                            return this._parent.querySelectorAll(t)
                        },
                    }
                    var S = 'http://www.w3.org/1999/xhtml',
                        w = {
                            svg: 'http://www.w3.org/2000/svg',
                            xhtml: S,
                            xlink: 'http://www.w3.org/1999/xlink',
                            xml: 'http://www.w3.org/XML/1998/namespace',
                            xmlns: 'http://www.w3.org/2000/xmlns/',
                        }
                    function T(t) {
                        var e = (t += ''),
                            n = e.indexOf(':')
                        return n >= 0 && 'xmlns' !== (e = t.slice(0, n)) && (t = t.slice(n + 1)), w.hasOwnProperty(e) ? { space: w[e], local: t } : t
                    }
                    function z(t) {
                        return function () {
                            this.removeAttribute(t)
                        }
                    }
                    function k(t) {
                        return function () {
                            this.removeAttributeNS(t.space, t.local)
                        }
                    }
                    function F(t, e) {
                        return function () {
                            this.setAttribute(t, e)
                        }
                    }
                    function A(t, e) {
                        return function () {
                            this.setAttributeNS(t.space, t.local, e)
                        }
                    }
                    function L(t, e) {
                        return function () {
                            var n = e.apply(this, arguments)
                            null == n ? this.removeAttribute(t) : this.setAttribute(t, n)
                        }
                    }
                    function M(t, e) {
                        return function () {
                            var n = e.apply(this, arguments)
                            null == n ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n)
                        }
                    }
                    function C(t) {
                        return (t.ownerDocument && t.ownerDocument.defaultView) || (t.document && t) || t.defaultView
                    }
                    function E(t) {
                        return function () {
                            this.style.removeProperty(t)
                        }
                    }
                    function D(t, e, n) {
                        return function () {
                            this.style.setProperty(t, e, n)
                        }
                    }
                    function O(t, e, n) {
                        return function () {
                            var r = e.apply(this, arguments)
                            null == r ? this.style.removeProperty(t) : this.style.setProperty(t, r, n)
                        }
                    }
                    function N(t, e) {
                        return t.style.getPropertyValue(e) || C(t).getComputedStyle(t, null).getPropertyValue(e)
                    }
                    function I(t) {
                        return function () {
                            delete this[t]
                        }
                    }
                    function R(t, e) {
                        return function () {
                            this[t] = e
                        }
                    }
                    function P(t, e) {
                        return function () {
                            var n = e.apply(this, arguments)
                            null == n ? delete this[t] : (this[t] = n)
                        }
                    }
                    function W(t) {
                        return t.trim().split(/^|\s+/)
                    }
                    function j(t) {
                        return t.classList || new H(t)
                    }
                    function H(t) {
                        ;(this._node = t), (this._names = W(t.getAttribute('class') || ''))
                    }
                    function B(t, e) {
                        for (var n = j(t), r = -1, i = e.length; ++r < i; ) n.add(e[r])
                    }
                    function U(t, e) {
                        for (var n = j(t), r = -1, i = e.length; ++r < i; ) n.remove(e[r])
                    }
                    function $(t) {
                        return function () {
                            B(this, t)
                        }
                    }
                    function G(t) {
                        return function () {
                            U(this, t)
                        }
                    }
                    function V(t, e) {
                        return function () {
                            ;(e.apply(this, arguments) ? B : U)(this, t)
                        }
                    }
                    function q() {
                        this.textContent = ''
                    }
                    function Y(t) {
                        return function () {
                            this.textContent = t
                        }
                    }
                    function X(t) {
                        return function () {
                            var e = t.apply(this, arguments)
                            this.textContent = null == e ? '' : e
                        }
                    }
                    function K() {
                        this.innerHTML = ''
                    }
                    function J(t) {
                        return function () {
                            this.innerHTML = t
                        }
                    }
                    function Z(t) {
                        return function () {
                            var e = t.apply(this, arguments)
                            this.innerHTML = null == e ? '' : e
                        }
                    }
                    function Q() {
                        this.nextSibling && this.parentNode.appendChild(this)
                    }
                    function tt() {
                        this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild)
                    }
                    function et(t) {
                        return function () {
                            var e = this.ownerDocument,
                                n = this.namespaceURI
                            return n === S && e.documentElement.namespaceURI === S ? e.createElement(t) : e.createElementNS(n, t)
                        }
                    }
                    function nt(t) {
                        return function () {
                            return this.ownerDocument.createElementNS(t.space, t.local)
                        }
                    }
                    function rt(t) {
                        var e = T(t)
                        return (e.local ? nt : et)(e)
                    }
                    function it() {
                        return null
                    }
                    function at() {
                        var t = this.parentNode
                        t && t.removeChild(this)
                    }
                    function ot() {
                        var t = this.cloneNode(!1),
                            e = this.parentNode
                        return e ? e.insertBefore(t, this.nextSibling) : t
                    }
                    function st() {
                        var t = this.cloneNode(!0),
                            e = this.parentNode
                        return e ? e.insertBefore(t, this.nextSibling) : t
                    }
                    function lt(t) {
                        return function () {
                            var e = this.__on
                            if (e) {
                                for (var n, r = 0, i = -1, a = e.length; r < a; ++r)
                                    (n = e[r]),
                                        (t.type && n.type !== t.type) || n.name !== t.name
                                            ? (e[++i] = n)
                                            : this.removeEventListener(n.type, n.listener, n.options)
                                ++i ? (e.length = i) : delete this.__on
                            }
                        }
                    }
                    function ut(t, e, n) {
                        return function () {
                            var r,
                                i = this.__on,
                                a = (function (t) {
                                    return function (e) {
                                        t.call(this, e, this.__data__)
                                    }
                                })(e)
                            if (i)
                                for (var o = 0, s = i.length; o < s; ++o)
                                    if ((r = i[o]).type === t.type && r.name === t.name)
                                        return (
                                            this.removeEventListener(r.type, r.listener, r.options),
                                            this.addEventListener(r.type, (r.listener = a), (r.options = n)),
                                            void (r.value = e)
                                        )
                            this.addEventListener(t.type, a, n),
                                (r = { type: t.type, name: t.name, value: e, listener: a, options: n }),
                                i ? i.push(r) : (this.__on = [r])
                        }
                    }
                    function ct(t, e, n) {
                        var r = C(t),
                            i = r.CustomEvent
                        'function' == typeof i
                            ? (i = new i(e, n))
                            : ((i = r.document.createEvent('Event')),
                              n ? (i.initEvent(e, n.bubbles, n.cancelable), (i.detail = n.detail)) : i.initEvent(e, !1, !1)),
                            t.dispatchEvent(i)
                    }
                    function ft(t, e) {
                        return function () {
                            return ct(this, t, e)
                        }
                    }
                    function pt(t, e) {
                        return function () {
                            return ct(this, t, e.apply(this, arguments))
                        }
                    }
                    H.prototype = {
                        add: function (t) {
                            this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute('class', this._names.join(' ')))
                        },
                        remove: function (t) {
                            var e = this._names.indexOf(t)
                            e >= 0 && (this._names.splice(e, 1), this._node.setAttribute('class', this._names.join(' ')))
                        },
                        contains: function (t) {
                            return this._names.indexOf(t) >= 0
                        },
                    }
                    var ht = [null]
                    function dt(t, e) {
                        ;(this._groups = t), (this._parents = e)
                    }
                    function gt() {
                        return new dt([[document.documentElement]], ht)
                    }
                    dt.prototype = gt.prototype = {
                        constructor: dt,
                        select: function (t) {
                            'function' != typeof t && (t = a(t))
                            for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)
                                for (var o, s, l = e[i], u = l.length, c = (r[i] = new Array(u)), f = 0; f < u; ++f)
                                    (o = l[f]) && (s = t.call(o, o.__data__, f, l)) && ('__data__' in o && (s.__data__ = o.__data__), (c[f] = s))
                            return new dt(r, this._parents)
                        },
                        selectAll: function (t) {
                            t =
                                'function' == typeof t
                                    ? (function (t) {
                                          return function () {
                                              return o(t.apply(this, arguments))
                                          }
                                      })(t)
                                    : l(t)
                            for (var e = this._groups, n = e.length, r = [], i = [], a = 0; a < n; ++a)
                                for (var s, u = e[a], c = u.length, f = 0; f < c; ++f) (s = u[f]) && (r.push(t.call(s, s.__data__, f, u)), i.push(s))
                            return new dt(r, i)
                        },
                        selectChild: function (t) {
                            return this.select(
                                null == t
                                    ? p
                                    : (function (t) {
                                          return function () {
                                              return f.call(this.children, t)
                                          }
                                      })('function' == typeof t ? t : c(t))
                            )
                        },
                        selectChildren: function (t) {
                            return this.selectAll(
                                null == t
                                    ? d
                                    : (function (t) {
                                          return function () {
                                              return h.call(this.children, t)
                                          }
                                      })('function' == typeof t ? t : c(t))
                            )
                        },
                        filter: function (t) {
                            'function' != typeof t && (t = u(t))
                            for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)
                                for (var a, o = e[i], s = o.length, l = (r[i] = []), c = 0; c < s; ++c)
                                    (a = o[c]) && t.call(a, a.__data__, c, o) && l.push(a)
                            return new dt(r, this._parents)
                        },
                        data: function (t, e) {
                            if (!arguments.length) return Array.from(this, m)
                            var n,
                                r = e ? v : y,
                                i = this._parents,
                                a = this._groups
                            'function' != typeof t &&
                                ((n = t),
                                (t = function () {
                                    return n
                                }))
                            for (var o = a.length, s = new Array(o), l = new Array(o), u = new Array(o), c = 0; c < o; ++c) {
                                var f = i[c],
                                    p = a[c],
                                    h = p.length,
                                    d = x(t.call(f, f && f.__data__, c, i)),
                                    g = d.length,
                                    _ = (l[c] = new Array(g)),
                                    b = (s[c] = new Array(g))
                                r(f, p, _, b, (u[c] = new Array(h)), d, e)
                                for (var S, w, T = 0, z = 0; T < g; ++T)
                                    if ((S = _[T])) {
                                        for (T >= z && (z = T + 1); !(w = b[z]) && ++z < g; );
                                        S._next = w || null
                                    }
                            }
                            return ((s = new dt(s, i))._enter = l), (s._exit = u), s
                        },
                        enter: function () {
                            return new dt(this._enter || this._groups.map(g), this._parents)
                        },
                        exit: function () {
                            return new dt(this._exit || this._groups.map(g), this._parents)
                        },
                        join: function (t, e, n) {
                            var r = this.enter(),
                                i = this,
                                a = this.exit()
                            return (
                                'function' == typeof t ? (r = t(r)) && (r = r.selection()) : (r = r.append(t + '')),
                                null != e && (i = e(i)) && (i = i.selection()),
                                null == n ? a.remove() : n(a),
                                r && i ? r.merge(i).order() : i
                            )
                        },
                        merge: function (t) {
                            for (
                                var e = t.selection ? t.selection() : t,
                                    n = this._groups,
                                    r = e._groups,
                                    i = n.length,
                                    a = r.length,
                                    o = Math.min(i, a),
                                    s = new Array(i),
                                    l = 0;
                                l < o;
                                ++l
                            )
                                for (var u, c = n[l], f = r[l], p = c.length, h = (s[l] = new Array(p)), d = 0; d < p; ++d)
                                    (u = c[d] || f[d]) && (h[d] = u)
                            for (; l < i; ++l) s[l] = n[l]
                            return new dt(s, this._parents)
                        },
                        selection: function () {
                            return this
                        },
                        order: function () {
                            for (var t = this._groups, e = -1, n = t.length; ++e < n; )
                                for (var r, i = t[e], a = i.length - 1, o = i[a]; --a >= 0; )
                                    (r = i[a]) && (o && 4 ^ r.compareDocumentPosition(o) && o.parentNode.insertBefore(r, o), (o = r))
                            return this
                        },
                        sort: function (t) {
                            function e(e, n) {
                                return e && n ? t(e.__data__, n.__data__) : !e - !n
                            }
                            t || (t = b)
                            for (var n = this._groups, r = n.length, i = new Array(r), a = 0; a < r; ++a) {
                                for (var o, s = n[a], l = s.length, u = (i[a] = new Array(l)), c = 0; c < l; ++c) (o = s[c]) && (u[c] = o)
                                u.sort(e)
                            }
                            return new dt(i, this._parents).order()
                        },
                        call: function () {
                            var t = arguments[0]
                            return (arguments[0] = this), t.apply(null, arguments), this
                        },
                        nodes: function () {
                            return Array.from(this)
                        },
                        node: function () {
                            for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
                                for (var r = t[e], i = 0, a = r.length; i < a; ++i) {
                                    var o = r[i]
                                    if (o) return o
                                }
                            return null
                        },
                        size: function () {
                            let t = 0
                            for (const e of this) ++t
                            return t
                        },
                        empty: function () {
                            return !this.node()
                        },
                        each: function (t) {
                            for (var e = this._groups, n = 0, r = e.length; n < r; ++n)
                                for (var i, a = e[n], o = 0, s = a.length; o < s; ++o) (i = a[o]) && t.call(i, i.__data__, o, a)
                            return this
                        },
                        attr: function (t, e) {
                            var n = T(t)
                            if (arguments.length < 2) {
                                var r = this.node()
                                return n.local ? r.getAttributeNS(n.space, n.local) : r.getAttribute(n)
                            }
                            return this.each((null == e ? (n.local ? k : z) : 'function' == typeof e ? (n.local ? M : L) : n.local ? A : F)(n, e))
                        },
                        style: function (t, e, n) {
                            return arguments.length > 1
                                ? this.each((null == e ? E : 'function' == typeof e ? O : D)(t, e, null == n ? '' : n))
                                : N(this.node(), t)
                        },
                        property: function (t, e) {
                            return arguments.length > 1 ? this.each((null == e ? I : 'function' == typeof e ? P : R)(t, e)) : this.node()[t]
                        },
                        classed: function (t, e) {
                            var n = W(t + '')
                            if (arguments.length < 2) {
                                for (var r = j(this.node()), i = -1, a = n.length; ++i < a; ) if (!r.contains(n[i])) return !1
                                return !0
                            }
                            return this.each(('function' == typeof e ? V : e ? $ : G)(n, e))
                        },
                        text: function (t) {
                            return arguments.length ? this.each(null == t ? q : ('function' == typeof t ? X : Y)(t)) : this.node().textContent
                        },
                        html: function (t) {
                            return arguments.length ? this.each(null == t ? K : ('function' == typeof t ? Z : J)(t)) : this.node().innerHTML
                        },
                        raise: function () {
                            return this.each(Q)
                        },
                        lower: function () {
                            return this.each(tt)
                        },
                        append: function (t) {
                            var e = 'function' == typeof t ? t : rt(t)
                            return this.select(function () {
                                return this.appendChild(e.apply(this, arguments))
                            })
                        },
                        insert: function (t, e) {
                            var n = 'function' == typeof t ? t : rt(t),
                                r = null == e ? it : 'function' == typeof e ? e : a(e)
                            return this.select(function () {
                                return this.insertBefore(n.apply(this, arguments), r.apply(this, arguments) || null)
                            })
                        },
                        remove: function () {
                            return this.each(at)
                        },
                        clone: function (t) {
                            return this.select(t ? st : ot)
                        },
                        datum: function (t) {
                            return arguments.length ? this.property('__data__', t) : this.node().__data__
                        },
                        on: function (t, e, n) {
                            var r,
                                i,
                                a = (function (t) {
                                    return t
                                        .trim()
                                        .split(/^|\s+/)
                                        .map(function (t) {
                                            var e = '',
                                                n = t.indexOf('.')
                                            return n >= 0 && ((e = t.slice(n + 1)), (t = t.slice(0, n))), { type: t, name: e }
                                        })
                                })(t + ''),
                                o = a.length
                            if (!(arguments.length < 2)) {
                                for (s = e ? ut : lt, r = 0; r < o; ++r) this.each(s(a[r], e, n))
                                return this
                            }
                            var s = this.node().__on
                            if (s)
                                for (var l, u = 0, c = s.length; u < c; ++u)
                                    for (r = 0, l = s[u]; r < o; ++r) if ((i = a[r]).type === l.type && i.name === l.name) return l.value
                        },
                        dispatch: function (t, e) {
                            return this.each(('function' == typeof e ? pt : ft)(t, e))
                        },
                        [Symbol.iterator]: function* () {
                            for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
                                for (var r, i = t[e], a = 0, o = i.length; a < o; ++a) (r = i[a]) && (yield r)
                        },
                    }
                    var _t = gt
                    function yt(t) {
                        return 'string' == typeof t ? new dt([[document.querySelector(t)]], [document.documentElement]) : new dt([[t]], ht)
                    }
                    function vt(t, e) {
                        return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
                    }
                    1 === (mt = vt).length &&
                        ((xt = mt),
                        (mt = function (t, e) {
                            return vt(xt(t), e)
                        }))
                    var mt,
                        xt,
                        bt = Array.prototype
                    function St(t, e) {
                        var n,
                            r,
                            i = t.length,
                            a = -1
                        if (null == e) {
                            for (; ++a < i; ) if (null != (n = t[a]) && n >= n) for (r = n; ++a < i; ) null != (n = t[a]) && n > r && (r = n)
                        } else
                            for (; ++a < i; )
                                if (null != (n = e(t[a], a, t)) && n >= n) for (r = n; ++a < i; ) null != (n = e(t[a], a, t)) && n > r && (r = n)
                        return r
                    }
                    function wt(t) {
                        for (var e, n, r, i = t.length, a = -1, o = 0; ++a < i; ) o += t[a].length
                        for (n = new Array(o); --i >= 0; ) for (e = (r = t[i]).length; --e >= 0; ) n[--o] = r[e]
                        return n
                    }
                    function Tt(t, e) {
                        var n,
                            r,
                            i = t.length,
                            a = -1
                        if (null == e) {
                            for (; ++a < i; ) if (null != (n = t[a]) && n >= n) for (r = n; ++a < i; ) null != (n = t[a]) && r > n && (r = n)
                        } else
                            for (; ++a < i; )
                                if (null != (n = e(t[a], a, t)) && n >= n) for (r = n; ++a < i; ) null != (n = e(t[a], a, t)) && r > n && (r = n)
                        return r
                    }
                    function zt(t, e, n) {
                        ;(t = +t), (e = +e), (n = (i = arguments.length) < 2 ? ((e = t), (t = 0), 1) : i < 3 ? 1 : +n)
                        for (var r = -1, i = 0 | Math.max(0, Math.ceil((e - t) / n)), a = new Array(i); ++r < i; ) a[r] = t + r * n
                        return a
                    }
                    function kt(t) {
                        return null === t ? NaN : +t
                    }
                    function Ft(t, e, n = kt) {
                        if ((r = t.length) && !isNaN((e = +e))) {
                            if (e <= 0 || r < 2) return +n(t[0], 0, t)
                            if (e >= 1) return +n(t[r - 1], r - 1, t)
                            var r,
                                i = (r - 1) * e,
                                a = Math.floor(i),
                                o = +n(t[a], a, t)
                            return o + (+n(t[a + 1], a + 1, t) - o) * (i - a)
                        }
                    }
                    function At(t, e) {
                        return null == t || null == e ? NaN : t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
                    }
                    function Lt(t, e) {
                        return null == t || null == e ? NaN : e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN
                    }
                    function Mt(t) {
                        let e, n, r
                        function i(t, r, i = 0, a = t.length) {
                            if (i < a) {
                                if (0 !== e(r, r)) return a
                                do {
                                    const e = (i + a) >>> 1
                                    n(t[e], r) < 0 ? (i = e + 1) : (a = e)
                                } while (i < a)
                            }
                            return i
                        }
                        return (
                            2 !== t.length
                                ? ((e = At), (n = (e, n) => At(t(e), n)), (r = (e, n) => t(e) - n))
                                : ((e = t === At || t === Lt ? t : Ct), (n = t), (r = t)),
                            {
                                left: i,
                                center: function (t, e, n = 0, a = t.length) {
                                    const o = i(t, e, n, a - 1)
                                    return o > n && r(t[o - 1], e) > -r(t[o], e) ? o - 1 : o
                                },
                                right: function (t, r, i = 0, a = t.length) {
                                    if (i < a) {
                                        if (0 !== e(r, r)) return a
                                        do {
                                            const e = (i + a) >>> 1
                                            n(t[e], r) <= 0 ? (i = e + 1) : (a = e)
                                        } while (i < a)
                                    }
                                    return i
                                },
                            }
                        )
                    }
                    function Ct() {
                        return 0
                    }
                    bt.slice, bt.map, Math.sqrt(50), Math.sqrt(10), Math.sqrt(2)
                    const Et = Mt(At),
                        Dt = Et.right
                    Et.left, Mt(kt).center
                    var Ot = Dt
                    function Nt(t, e) {
                        switch (arguments.length) {
                            case 0:
                                break
                            case 1:
                                this.range(t)
                                break
                            default:
                                this.range(e).domain(t)
                        }
                        return this
                    }
                    function It() {
                        var t,
                            e = [],
                            n = [],
                            r = []
                        function i() {
                            var t = 0,
                                i = Math.max(1, n.length)
                            for (r = new Array(i - 1); ++t < i; ) r[t - 1] = Ft(e, t / i)
                            return a
                        }
                        function a(e) {
                            return null == e || isNaN((e = +e)) ? t : n[Ot(r, e)]
                        }
                        return (
                            (a.invertExtent = function (t) {
                                var i = n.indexOf(t)
                                return i < 0 ? [NaN, NaN] : [i > 0 ? r[i - 1] : e[0], i < r.length ? r[i] : e[e.length - 1]]
                            }),
                            (a.domain = function (t) {
                                if (!arguments.length) return e.slice()
                                e = []
                                for (let n of t) null == n || isNaN((n = +n)) || e.push(n)
                                return e.sort(At), i()
                            }),
                            (a.range = function (t) {
                                return arguments.length ? ((n = Array.from(t)), i()) : n.slice()
                            }),
                            (a.unknown = function (e) {
                                return arguments.length ? ((t = e), a) : t
                            }),
                            (a.quantiles = function () {
                                return r.slice()
                            }),
                            (a.copy = function () {
                                return It().domain(e).range(n).unknown(t)
                            }),
                            Nt.apply(a, arguments)
                        )
                    }
                    const Rt = Math.sqrt(50),
                        Pt = Math.sqrt(10),
                        Wt = Math.sqrt(2)
                    function jt(t, e, n) {
                        const r = (e - t) / Math.max(0, n),
                            i = Math.floor(Math.log10(r)),
                            a = r / Math.pow(10, i),
                            o = a >= Rt ? 10 : a >= Pt ? 5 : a >= Wt ? 2 : 1
                        let s, l, u
                        return (
                            i < 0
                                ? ((u = Math.pow(10, -i) / o),
                                  (s = Math.round(t * u)),
                                  (l = Math.round(e * u)),
                                  s / u < t && ++s,
                                  l / u > e && --l,
                                  (u = -u))
                                : ((u = Math.pow(10, i) * o), (s = Math.round(t / u)), (l = Math.round(e / u)), s * u < t && ++s, l * u > e && --l),
                            l < s && 0.5 <= n && n < 2 ? jt(t, e, 2 * n) : [s, l, u]
                        )
                    }
                    function Ht(t, e, n) {
                        return jt((t = +t), (e = +e), (n = +n))[2]
                    }
                    function Bt(t, e, n) {
                        ;(t.prototype = e.prototype = n), (n.constructor = t)
                    }
                    function Ut(t, e) {
                        var n = Object.create(t.prototype)
                        for (var r in e) n[r] = e[r]
                        return n
                    }
                    function $t() {}
                    var Gt = 0.7,
                        Vt = 1 / Gt,
                        qt = '\\s*([+-]?\\d+)\\s*',
                        Yt = '\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*',
                        Xt = '\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*',
                        Kt = /^#([0-9a-f]{3,8})$/,
                        Jt = new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),
                        Zt = new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),
                        Qt = new RegExp(`^rgba\\(${qt},${qt},${qt},${Yt}\\)$`),
                        te = new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${Yt}\\)$`),
                        ee = new RegExp(`^hsl\\(${Yt},${Xt},${Xt}\\)$`),
                        ne = new RegExp(`^hsla\\(${Yt},${Xt},${Xt},${Yt}\\)$`),
                        re = {
                            aliceblue: 15792383,
                            antiquewhite: 16444375,
                            aqua: 65535,
                            aquamarine: 8388564,
                            azure: 15794175,
                            beige: 16119260,
                            bisque: 16770244,
                            black: 0,
                            blanchedalmond: 16772045,
                            blue: 255,
                            blueviolet: 9055202,
                            brown: 10824234,
                            burlywood: 14596231,
                            cadetblue: 6266528,
                            chartreuse: 8388352,
                            chocolate: 13789470,
                            coral: 16744272,
                            cornflowerblue: 6591981,
                            cornsilk: 16775388,
                            crimson: 14423100,
                            cyan: 65535,
                            darkblue: 139,
                            darkcyan: 35723,
                            darkgoldenrod: 12092939,
                            darkgray: 11119017,
                            darkgreen: 25600,
                            darkgrey: 11119017,
                            darkkhaki: 12433259,
                            darkmagenta: 9109643,
                            darkolivegreen: 5597999,
                            darkorange: 16747520,
                            darkorchid: 10040012,
                            darkred: 9109504,
                            darksalmon: 15308410,
                            darkseagreen: 9419919,
                            darkslateblue: 4734347,
                            darkslategray: 3100495,
                            darkslategrey: 3100495,
                            darkturquoise: 52945,
                            darkviolet: 9699539,
                            deeppink: 16716947,
                            deepskyblue: 49151,
                            dimgray: 6908265,
                            dimgrey: 6908265,
                            dodgerblue: 2003199,
                            firebrick: 11674146,
                            floralwhite: 16775920,
                            forestgreen: 2263842,
                            fuchsia: 16711935,
                            gainsboro: 14474460,
                            ghostwhite: 16316671,
                            gold: 16766720,
                            goldenrod: 14329120,
                            gray: 8421504,
                            green: 32768,
                            greenyellow: 11403055,
                            grey: 8421504,
                            honeydew: 15794160,
                            hotpink: 16738740,
                            indianred: 13458524,
                            indigo: 4915330,
                            ivory: 16777200,
                            khaki: 15787660,
                            lavender: 15132410,
                            lavenderblush: 16773365,
                            lawngreen: 8190976,
                            lemonchiffon: 16775885,
                            lightblue: 11393254,
                            lightcoral: 15761536,
                            lightcyan: 14745599,
                            lightgoldenrodyellow: 16448210,
                            lightgray: 13882323,
                            lightgreen: 9498256,
                            lightgrey: 13882323,
                            lightpink: 16758465,
                            lightsalmon: 16752762,
                            lightseagreen: 2142890,
                            lightskyblue: 8900346,
                            lightslategray: 7833753,
                            lightslategrey: 7833753,
                            lightsteelblue: 11584734,
                            lightyellow: 16777184,
                            lime: 65280,
                            limegreen: 3329330,
                            linen: 16445670,
                            magenta: 16711935,
                            maroon: 8388608,
                            mediumaquamarine: 6737322,
                            mediumblue: 205,
                            mediumorchid: 12211667,
                            mediumpurple: 9662683,
                            mediumseagreen: 3978097,
                            mediumslateblue: 8087790,
                            mediumspringgreen: 64154,
                            mediumturquoise: 4772300,
                            mediumvioletred: 13047173,
                            midnightblue: 1644912,
                            mintcream: 16121850,
                            mistyrose: 16770273,
                            moccasin: 16770229,
                            navajowhite: 16768685,
                            navy: 128,
                            oldlace: 16643558,
                            olive: 8421376,
                            olivedrab: 7048739,
                            orange: 16753920,
                            orangered: 16729344,
                            orchid: 14315734,
                            palegoldenrod: 15657130,
                            palegreen: 10025880,
                            paleturquoise: 11529966,
                            palevioletred: 14381203,
                            papayawhip: 16773077,
                            peachpuff: 16767673,
                            peru: 13468991,
                            pink: 16761035,
                            plum: 14524637,
                            powderblue: 11591910,
                            purple: 8388736,
                            rebeccapurple: 6697881,
                            red: 16711680,
                            rosybrown: 12357519,
                            royalblue: 4286945,
                            saddlebrown: 9127187,
                            salmon: 16416882,
                            sandybrown: 16032864,
                            seagreen: 3050327,
                            seashell: 16774638,
                            sienna: 10506797,
                            silver: 12632256,
                            skyblue: 8900331,
                            slateblue: 6970061,
                            slategray: 7372944,
                            slategrey: 7372944,
                            snow: 16775930,
                            springgreen: 65407,
                            steelblue: 4620980,
                            tan: 13808780,
                            teal: 32896,
                            thistle: 14204888,
                            tomato: 16737095,
                            turquoise: 4251856,
                            violet: 15631086,
                            wheat: 16113331,
                            white: 16777215,
                            whitesmoke: 16119285,
                            yellow: 16776960,
                            yellowgreen: 10145074,
                        }
                    function ie() {
                        return this.rgb().formatHex()
                    }
                    function ae() {
                        return this.rgb().formatRgb()
                    }
                    function oe(t) {
                        var e, n
                        return (
                            (t = (t + '').trim().toLowerCase()),
                            (e = Kt.exec(t))
                                ? ((n = e[1].length),
                                  (e = parseInt(e[1], 16)),
                                  6 === n
                                      ? se(e)
                                      : 3 === n
                                        ? new ce(((e >> 8) & 15) | ((e >> 4) & 240), ((e >> 4) & 15) | (240 & e), ((15 & e) << 4) | (15 & e), 1)
                                        : 8 === n
                                          ? le((e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, (255 & e) / 255)
                                          : 4 === n
                                            ? le(
                                                  ((e >> 12) & 15) | ((e >> 8) & 240),
                                                  ((e >> 8) & 15) | ((e >> 4) & 240),
                                                  ((e >> 4) & 15) | (240 & e),
                                                  (((15 & e) << 4) | (15 & e)) / 255
                                              )
                                            : null)
                                : (e = Jt.exec(t))
                                  ? new ce(e[1], e[2], e[3], 1)
                                  : (e = Zt.exec(t))
                                    ? new ce((255 * e[1]) / 100, (255 * e[2]) / 100, (255 * e[3]) / 100, 1)
                                    : (e = Qt.exec(t))
                                      ? le(e[1], e[2], e[3], e[4])
                                      : (e = te.exec(t))
                                        ? le((255 * e[1]) / 100, (255 * e[2]) / 100, (255 * e[3]) / 100, e[4])
                                        : (e = ee.exec(t))
                                          ? _e(e[1], e[2] / 100, e[3] / 100, 1)
                                          : (e = ne.exec(t))
                                            ? _e(e[1], e[2] / 100, e[3] / 100, e[4])
                                            : re.hasOwnProperty(t)
                                              ? se(re[t])
                                              : 'transparent' === t
                                                ? new ce(NaN, NaN, NaN, 0)
                                                : null
                        )
                    }
                    function se(t) {
                        return new ce((t >> 16) & 255, (t >> 8) & 255, 255 & t, 1)
                    }
                    function le(t, e, n, r) {
                        return r <= 0 && (t = e = n = NaN), new ce(t, e, n, r)
                    }
                    function ue(t, e, n, r) {
                        return 1 === arguments.length
                            ? ((i = t) instanceof $t || (i = oe(i)), i ? new ce((i = i.rgb()).r, i.g, i.b, i.opacity) : new ce())
                            : new ce(t, e, n, null == r ? 1 : r)
                        var i
                    }
                    function ce(t, e, n, r) {
                        ;(this.r = +t), (this.g = +e), (this.b = +n), (this.opacity = +r)
                    }
                    function fe() {
                        return `#${ge(this.r)}${ge(this.g)}${ge(this.b)}`
                    }
                    function pe() {
                        const t = he(this.opacity)
                        return `${1 === t ? 'rgb(' : 'rgba('}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${1 === t ? ')' : `, ${t})`}`
                    }
                    function he(t) {
                        return isNaN(t) ? 1 : Math.max(0, Math.min(1, t))
                    }
                    function de(t) {
                        return Math.max(0, Math.min(255, Math.round(t) || 0))
                    }
                    function ge(t) {
                        return ((t = de(t)) < 16 ? '0' : '') + t.toString(16)
                    }
                    function _e(t, e, n, r) {
                        return r <= 0 ? (t = e = n = NaN) : n <= 0 || n >= 1 ? (t = e = NaN) : e <= 0 && (t = NaN), new ve(t, e, n, r)
                    }
                    function ye(t) {
                        if (t instanceof ve) return new ve(t.h, t.s, t.l, t.opacity)
                        if ((t instanceof $t || (t = oe(t)), !t)) return new ve()
                        if (t instanceof ve) return t
                        var e = (t = t.rgb()).r / 255,
                            n = t.g / 255,
                            r = t.b / 255,
                            i = Math.min(e, n, r),
                            a = Math.max(e, n, r),
                            o = NaN,
                            s = a - i,
                            l = (a + i) / 2
                        return (
                            s
                                ? ((o = e === a ? (n - r) / s + 6 * (n < r) : n === a ? (r - e) / s + 2 : (e - n) / s + 4),
                                  (s /= l < 0.5 ? a + i : 2 - a - i),
                                  (o *= 60))
                                : (s = l > 0 && l < 1 ? 0 : o),
                            new ve(o, s, l, t.opacity)
                        )
                    }
                    function ve(t, e, n, r) {
                        ;(this.h = +t), (this.s = +e), (this.l = +n), (this.opacity = +r)
                    }
                    function me(t) {
                        return (t = (t || 0) % 360) < 0 ? t + 360 : t
                    }
                    function xe(t) {
                        return Math.max(0, Math.min(1, t || 0))
                    }
                    function be(t, e, n) {
                        return 255 * (t < 60 ? e + ((n - e) * t) / 60 : t < 180 ? n : t < 240 ? e + ((n - e) * (240 - t)) / 60 : e)
                    }
                    function Se(t, e, n, r, i) {
                        var a = t * t,
                            o = a * t
                        return ((1 - 3 * t + 3 * a - o) * e + (4 - 6 * a + 3 * o) * n + (1 + 3 * t + 3 * a - 3 * o) * r + o * i) / 6
                    }
                    Bt($t, oe, {
                        copy(t) {
                            return Object.assign(new this.constructor(), this, t)
                        },
                        displayable() {
                            return this.rgb().displayable()
                        },
                        hex: ie,
                        formatHex: ie,
                        formatHex8: function () {
                            return this.rgb().formatHex8()
                        },
                        formatHsl: function () {
                            return ye(this).formatHsl()
                        },
                        formatRgb: ae,
                        toString: ae,
                    }),
                        Bt(
                            ce,
                            ue,
                            Ut($t, {
                                brighter(t) {
                                    return (t = null == t ? Vt : Math.pow(Vt, t)), new ce(this.r * t, this.g * t, this.b * t, this.opacity)
                                },
                                darker(t) {
                                    return (t = null == t ? Gt : Math.pow(Gt, t)), new ce(this.r * t, this.g * t, this.b * t, this.opacity)
                                },
                                rgb() {
                                    return this
                                },
                                clamp() {
                                    return new ce(de(this.r), de(this.g), de(this.b), he(this.opacity))
                                },
                                displayable() {
                                    return (
                                        -0.5 <= this.r &&
                                        this.r < 255.5 &&
                                        -0.5 <= this.g &&
                                        this.g < 255.5 &&
                                        -0.5 <= this.b &&
                                        this.b < 255.5 &&
                                        0 <= this.opacity &&
                                        this.opacity <= 1
                                    )
                                },
                                hex: fe,
                                formatHex: fe,
                                formatHex8: function () {
                                    return `#${ge(this.r)}${ge(this.g)}${ge(this.b)}${ge(255 * (isNaN(this.opacity) ? 1 : this.opacity))}`
                                },
                                formatRgb: pe,
                                toString: pe,
                            })
                        ),
                        Bt(
                            ve,
                            function (t, e, n, r) {
                                return 1 === arguments.length ? ye(t) : new ve(t, e, n, null == r ? 1 : r)
                            },
                            Ut($t, {
                                brighter(t) {
                                    return (t = null == t ? Vt : Math.pow(Vt, t)), new ve(this.h, this.s, this.l * t, this.opacity)
                                },
                                darker(t) {
                                    return (t = null == t ? Gt : Math.pow(Gt, t)), new ve(this.h, this.s, this.l * t, this.opacity)
                                },
                                rgb() {
                                    var t = (this.h % 360) + 360 * (this.h < 0),
                                        e = isNaN(t) || isNaN(this.s) ? 0 : this.s,
                                        n = this.l,
                                        r = n + (n < 0.5 ? n : 1 - n) * e,
                                        i = 2 * n - r
                                    return new ce(
                                        be(t >= 240 ? t - 240 : t + 120, i, r),
                                        be(t, i, r),
                                        be(t < 120 ? t + 240 : t - 120, i, r),
                                        this.opacity
                                    )
                                },
                                clamp() {
                                    return new ve(me(this.h), xe(this.s), xe(this.l), he(this.opacity))
                                },
                                displayable() {
                                    return (
                                        ((0 <= this.s && this.s <= 1) || isNaN(this.s)) &&
                                        0 <= this.l &&
                                        this.l <= 1 &&
                                        0 <= this.opacity &&
                                        this.opacity <= 1
                                    )
                                },
                                formatHsl() {
                                    const t = he(this.opacity)
                                    return `${1 === t ? 'hsl(' : 'hsla('}${me(this.h)}, ${100 * xe(this.s)}%, ${
                                        100 * xe(this.l)
                                    }%${1 === t ? ')' : `, ${t})`}`
                                },
                            })
                        )
                    var we = (t) => () => t
                    function Te(t, e) {
                        var n = e - t
                        return n
                            ? (function (t, e) {
                                  return function (n) {
                                      return t + n * e
                                  }
                              })(t, n)
                            : we(isNaN(t) ? e : t)
                    }
                    var ze = (function t(e) {
                        var n = (function (t) {
                            return 1 == (t = +t)
                                ? Te
                                : function (e, n) {
                                      return n - e
                                          ? (function (t, e, n) {
                                                return (
                                                    (t = Math.pow(t, n)),
                                                    (e = Math.pow(e, n) - t),
                                                    (n = 1 / n),
                                                    function (r) {
                                                        return Math.pow(t + r * e, n)
                                                    }
                                                )
                                            })(e, n, t)
                                          : we(isNaN(e) ? n : e)
                                  }
                        })(e)
                        function r(t, e) {
                            var r = n((t = ue(t)).r, (e = ue(e)).r),
                                i = n(t.g, e.g),
                                a = n(t.b, e.b),
                                o = Te(t.opacity, e.opacity)
                            return function (e) {
                                return (t.r = r(e)), (t.g = i(e)), (t.b = a(e)), (t.opacity = o(e)), t + ''
                            }
                        }
                        return (r.gamma = t), r
                    })(1)
                    function ke(t) {
                        return function (e) {
                            var n,
                                r,
                                i = e.length,
                                a = new Array(i),
                                o = new Array(i),
                                s = new Array(i)
                            for (n = 0; n < i; ++n) (r = ue(e[n])), (a[n] = r.r || 0), (o[n] = r.g || 0), (s[n] = r.b || 0)
                            return (
                                (a = t(a)),
                                (o = t(o)),
                                (s = t(s)),
                                (r.opacity = 1),
                                function (t) {
                                    return (r.r = a(t)), (r.g = o(t)), (r.b = s(t)), r + ''
                                }
                            )
                        }
                    }
                    var Fe = ke(function (t) {
                        var e = t.length - 1
                        return function (n) {
                            var r = n <= 0 ? (n = 0) : n >= 1 ? ((n = 1), e - 1) : Math.floor(n * e),
                                i = t[r],
                                a = t[r + 1],
                                o = r > 0 ? t[r - 1] : 2 * i - a,
                                s = r < e - 1 ? t[r + 2] : 2 * a - i
                            return Se((n - r / e) * e, o, i, a, s)
                        }
                    })
                    function Ae(t, e) {
                        var n,
                            r = e ? e.length : 0,
                            i = t ? Math.min(r, t.length) : 0,
                            a = new Array(i),
                            o = new Array(r)
                        for (n = 0; n < i; ++n) a[n] = Ie(t[n], e[n])
                        for (; n < r; ++n) o[n] = e[n]
                        return function (t) {
                            for (n = 0; n < i; ++n) o[n] = a[n](t)
                            return o
                        }
                    }
                    function Le(t, e) {
                        var n = new Date()
                        return (
                            (t = +t),
                            (e = +e),
                            function (r) {
                                return n.setTime(t * (1 - r) + e * r), n
                            }
                        )
                    }
                    function Me(t, e) {
                        return (
                            (t = +t),
                            (e = +e),
                            function (n) {
                                return t * (1 - n) + e * n
                            }
                        )
                    }
                    function Ce(t, e) {
                        var n,
                            r = {},
                            i = {}
                        for (n in ((null !== t && 'object' == typeof t) || (t = {}), (null !== e && 'object' == typeof e) || (e = {}), e))
                            n in t ? (r[n] = Ie(t[n], e[n])) : (i[n] = e[n])
                        return function (t) {
                            for (n in r) i[n] = r[n](t)
                            return i
                        }
                    }
                    ke(function (t) {
                        var e = t.length
                        return function (n) {
                            var r = Math.floor(((n %= 1) < 0 ? ++n : n) * e),
                                i = t[(r + e - 1) % e],
                                a = t[r % e],
                                o = t[(r + 1) % e],
                                s = t[(r + 2) % e]
                            return Se((n - r / e) * e, i, a, o, s)
                        }
                    })
                    var Ee = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
                        De = new RegExp(Ee.source, 'g')
                    function Oe(t, e) {
                        var n,
                            r,
                            i,
                            a = (Ee.lastIndex = De.lastIndex = 0),
                            o = -1,
                            s = [],
                            l = []
                        for (t += '', e += ''; (n = Ee.exec(t)) && (r = De.exec(e)); )
                            (i = r.index) > a && ((i = e.slice(a, i)), s[o] ? (s[o] += i) : (s[++o] = i)),
                                (n = n[0]) === (r = r[0]) ? (s[o] ? (s[o] += r) : (s[++o] = r)) : ((s[++o] = null), l.push({ i: o, x: Me(n, r) })),
                                (a = De.lastIndex)
                        return (
                            a < e.length && ((i = e.slice(a)), s[o] ? (s[o] += i) : (s[++o] = i)),
                            s.length < 2
                                ? l[0]
                                    ? (function (t) {
                                          return function (e) {
                                              return t(e) + ''
                                          }
                                      })(l[0].x)
                                    : (function (t) {
                                          return function () {
                                              return t
                                          }
                                      })(e)
                                : ((e = l.length),
                                  function (t) {
                                      for (var n, r = 0; r < e; ++r) s[(n = l[r]).i] = n.x(t)
                                      return s.join('')
                                  })
                        )
                    }
                    function Ne(t, e) {
                        e || (e = [])
                        var n,
                            r = t ? Math.min(e.length, t.length) : 0,
                            i = e.slice()
                        return function (a) {
                            for (n = 0; n < r; ++n) i[n] = t[n] * (1 - a) + e[n] * a
                            return i
                        }
                    }
                    function Ie(t, e) {
                        var n,
                            r,
                            i = typeof e
                        return null == e || 'boolean' === i
                            ? we(e)
                            : ('number' === i
                                  ? Me
                                  : 'string' === i
                                    ? (n = oe(e))
                                        ? ((e = n), ze)
                                        : Oe
                                    : e instanceof oe
                                      ? ze
                                      : e instanceof Date
                                        ? Le
                                        : ((r = e),
                                          !ArrayBuffer.isView(r) || r instanceof DataView
                                              ? Array.isArray(e)
                                                  ? Ae
                                                  : ('function' != typeof e.valueOf && 'function' != typeof e.toString) || isNaN(e)
                                                    ? Ce
                                                    : Me
                                              : Ne))(t, e)
                    }
                    function Re(t, e) {
                        return (
                            (t = +t),
                            (e = +e),
                            function (n) {
                                return Math.round(t * (1 - n) + e * n)
                            }
                        )
                    }
                    function Pe(t) {
                        return +t
                    }
                    var We = [0, 1]
                    function je(t) {
                        return t
                    }
                    function He(t, e) {
                        return (e -= t = +t)
                            ? function (n) {
                                  return (n - t) / e
                              }
                            : ((n = isNaN(e) ? NaN : 0.5),
                              function () {
                                  return n
                              })
                        var n
                    }
                    function Be(t, e, n) {
                        var r = t[0],
                            i = t[1],
                            a = e[0],
                            o = e[1]
                        return (
                            i < r ? ((r = He(i, r)), (a = n(o, a))) : ((r = He(r, i)), (a = n(a, o))),
                            function (t) {
                                return a(r(t))
                            }
                        )
                    }
                    function Ue(t, e, n) {
                        var r = Math.min(t.length, e.length) - 1,
                            i = new Array(r),
                            a = new Array(r),
                            o = -1
                        for (t[r] < t[0] && ((t = t.slice().reverse()), (e = e.slice().reverse())); ++o < r; )
                            (i[o] = He(t[o], t[o + 1])), (a[o] = n(e[o], e[o + 1]))
                        return function (e) {
                            var n = Ot(t, e, 1, r) - 1
                            return a[n](i[n](e))
                        }
                    }
                    function $e(t, e) {
                        return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())
                    }
                    function Ge() {
                        var t,
                            e,
                            n,
                            r,
                            i,
                            a,
                            o = We,
                            s = We,
                            l = Ie,
                            u = je
                        function c() {
                            var t = Math.min(o.length, s.length)
                            return (
                                u !== je &&
                                    (u = (function (t, e) {
                                        var n
                                        return (
                                            t > e && ((n = t), (t = e), (e = n)),
                                            function (n) {
                                                return Math.max(t, Math.min(e, n))
                                            }
                                        )
                                    })(o[0], o[t - 1])),
                                (r = t > 2 ? Ue : Be),
                                (i = a = null),
                                f
                            )
                        }
                        function f(e) {
                            return null == e || isNaN((e = +e)) ? n : (i || (i = r(o.map(t), s, l)))(t(u(e)))
                        }
                        return (
                            (f.invert = function (n) {
                                return u(e((a || (a = r(s, o.map(t), Me)))(n)))
                            }),
                            (f.domain = function (t) {
                                return arguments.length ? ((o = Array.from(t, Pe)), c()) : o.slice()
                            }),
                            (f.range = function (t) {
                                return arguments.length ? ((s = Array.from(t)), c()) : s.slice()
                            }),
                            (f.rangeRound = function (t) {
                                return (s = Array.from(t)), (l = Re), c()
                            }),
                            (f.clamp = function (t) {
                                return arguments.length ? ((u = !!t || je), c()) : u !== je
                            }),
                            (f.interpolate = function (t) {
                                return arguments.length ? ((l = t), c()) : l
                            }),
                            (f.unknown = function (t) {
                                return arguments.length ? ((n = t), f) : n
                            }),
                            function (n, r) {
                                return (t = n), (e = r), c()
                            }
                        )
                    }
                    var Ve,
                        qe = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i
                    function Ye(t) {
                        if (!(e = qe.exec(t))) throw new Error('invalid format: ' + t)
                        var e
                        return new Xe({
                            fill: e[1],
                            align: e[2],
                            sign: e[3],
                            symbol: e[4],
                            zero: e[5],
                            width: e[6],
                            comma: e[7],
                            precision: e[8] && e[8].slice(1),
                            trim: e[9],
                            type: e[10],
                        })
                    }
                    function Xe(t) {
                        ;(this.fill = void 0 === t.fill ? ' ' : t.fill + ''),
                            (this.align = void 0 === t.align ? '>' : t.align + ''),
                            (this.sign = void 0 === t.sign ? '-' : t.sign + ''),
                            (this.symbol = void 0 === t.symbol ? '' : t.symbol + ''),
                            (this.zero = !!t.zero),
                            (this.width = void 0 === t.width ? void 0 : +t.width),
                            (this.comma = !!t.comma),
                            (this.precision = void 0 === t.precision ? void 0 : +t.precision),
                            (this.trim = !!t.trim),
                            (this.type = void 0 === t.type ? '' : t.type + '')
                    }
                    function Ke(t, e) {
                        if ((n = (t = e ? t.toExponential(e - 1) : t.toExponential()).indexOf('e')) < 0) return null
                        var n,
                            r = t.slice(0, n)
                        return [r.length > 1 ? r[0] + r.slice(2) : r, +t.slice(n + 1)]
                    }
                    function Je(t) {
                        return (t = Ke(Math.abs(t))) ? t[1] : NaN
                    }
                    function Ze(t, e) {
                        var n = Ke(t, e)
                        if (!n) return t + ''
                        var r = n[0],
                            i = n[1]
                        return i < 0
                            ? '0.' + new Array(-i).join('0') + r
                            : r.length > i + 1
                              ? r.slice(0, i + 1) + '.' + r.slice(i + 1)
                              : r + new Array(i - r.length + 2).join('0')
                    }
                    ;(Ye.prototype = Xe.prototype),
                        (Xe.prototype.toString = function () {
                            return (
                                this.fill +
                                this.align +
                                this.sign +
                                this.symbol +
                                (this.zero ? '0' : '') +
                                (void 0 === this.width ? '' : Math.max(1, 0 | this.width)) +
                                (this.comma ? ',' : '') +
                                (void 0 === this.precision ? '' : '.' + Math.max(0, 0 | this.precision)) +
                                (this.trim ? '~' : '') +
                                this.type
                            )
                        })
                    var Qe = {
                        '%': (t, e) => (100 * t).toFixed(e),
                        b: (t) => Math.round(t).toString(2),
                        c: (t) => t + '',
                        d: function (t) {
                            return Math.abs((t = Math.round(t))) >= 1e21 ? t.toLocaleString('en').replace(/,/g, '') : t.toString(10)
                        },
                        e: (t, e) => t.toExponential(e),
                        f: (t, e) => t.toFixed(e),
                        g: (t, e) => t.toPrecision(e),
                        o: (t) => Math.round(t).toString(8),
                        p: (t, e) => Ze(100 * t, e),
                        r: Ze,
                        s: function (t, e) {
                            var n = Ke(t, e)
                            if (!n) return t + ''
                            var r = n[0],
                                i = n[1],
                                a = i - (Ve = 3 * Math.max(-8, Math.min(8, Math.floor(i / 3)))) + 1,
                                o = r.length
                            return a === o
                                ? r
                                : a > o
                                  ? r + new Array(a - o + 1).join('0')
                                  : a > 0
                                    ? r.slice(0, a) + '.' + r.slice(a)
                                    : '0.' + new Array(1 - a).join('0') + Ke(t, Math.max(0, e + a - 1))[0]
                        },
                        X: (t) => Math.round(t).toString(16).toUpperCase(),
                        x: (t) => Math.round(t).toString(16),
                    }
                    function tn(t) {
                        return t
                    }
                    var en,
                        nn,
                        rn,
                        an = Array.prototype.map,
                        on = ['y', 'z', 'a', 'f', 'p', 'n', 'µ', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y']
                    function sn(t) {
                        return (
                            (en = (function (t) {
                                var e,
                                    n,
                                    r =
                                        void 0 === t.grouping || void 0 === t.thousands
                                            ? tn
                                            : ((e = an.call(t.grouping, Number)),
                                              (n = t.thousands + ''),
                                              function (t, r) {
                                                  for (
                                                      var i = t.length, a = [], o = 0, s = e[0], l = 0;
                                                      i > 0 &&
                                                      s > 0 &&
                                                      (l + s + 1 > r && (s = Math.max(1, r - l)),
                                                      a.push(t.substring((i -= s), i + s)),
                                                      !((l += s + 1) > r));

                                                  )
                                                      s = e[(o = (o + 1) % e.length)]
                                                  return a.reverse().join(n)
                                              }),
                                    i = void 0 === t.currency ? '' : t.currency[0] + '',
                                    a = void 0 === t.currency ? '' : t.currency[1] + '',
                                    o = void 0 === t.decimal ? '.' : t.decimal + '',
                                    s =
                                        void 0 === t.numerals
                                            ? tn
                                            : (function (t) {
                                                  return function (e) {
                                                      return e.replace(/[0-9]/g, function (e) {
                                                          return t[+e]
                                                      })
                                                  }
                                              })(an.call(t.numerals, String)),
                                    l = void 0 === t.percent ? '%' : t.percent + '',
                                    u = void 0 === t.minus ? '−' : t.minus + '',
                                    c = void 0 === t.nan ? 'NaN' : t.nan + ''
                                function f(t) {
                                    var e = (t = Ye(t)).fill,
                                        n = t.align,
                                        f = t.sign,
                                        p = t.symbol,
                                        h = t.zero,
                                        d = t.width,
                                        g = t.comma,
                                        _ = t.precision,
                                        y = t.trim,
                                        v = t.type
                                    'n' === v ? ((g = !0), (v = 'g')) : Qe[v] || (void 0 === _ && (_ = 12), (y = !0), (v = 'g')),
                                        (h || ('0' === e && '=' === n)) && ((h = !0), (e = '0'), (n = '='))
                                    var m = '$' === p ? i : '#' === p && /[boxX]/.test(v) ? '0' + v.toLowerCase() : '',
                                        x = '$' === p ? a : /[%p]/.test(v) ? l : '',
                                        b = Qe[v],
                                        S = /[defgprs%]/.test(v)
                                    function w(t) {
                                        var i,
                                            a,
                                            l,
                                            p = m,
                                            w = x
                                        if ('c' === v) (w = b(t) + w), (t = '')
                                        else {
                                            var T = (t = +t) < 0 || 1 / t < 0
                                            if (
                                                ((t = isNaN(t) ? c : b(Math.abs(t), _)),
                                                y &&
                                                    (t = (function (t) {
                                                        t: for (var e, n = t.length, r = 1, i = -1; r < n; ++r)
                                                            switch (t[r]) {
                                                                case '.':
                                                                    i = e = r
                                                                    break
                                                                case '0':
                                                                    0 === i && (i = r), (e = r)
                                                                    break
                                                                default:
                                                                    if (!+t[r]) break t
                                                                    i > 0 && (i = 0)
                                                            }
                                                        return i > 0 ? t.slice(0, i) + t.slice(e + 1) : t
                                                    })(t)),
                                                T && 0 == +t && '+' !== f && (T = !1),
                                                (p = (T ? ('(' === f ? f : u) : '-' === f || '(' === f ? '' : f) + p),
                                                (w = ('s' === v ? on[8 + Ve / 3] : '') + w + (T && '(' === f ? ')' : '')),
                                                S)
                                            )
                                                for (i = -1, a = t.length; ++i < a; )
                                                    if (48 > (l = t.charCodeAt(i)) || l > 57) {
                                                        ;(w = (46 === l ? o + t.slice(i + 1) : t.slice(i)) + w), (t = t.slice(0, i))
                                                        break
                                                    }
                                        }
                                        g && !h && (t = r(t, 1 / 0))
                                        var z = p.length + t.length + w.length,
                                            k = z < d ? new Array(d - z + 1).join(e) : ''
                                        switch ((g && h && ((t = r(k + t, k.length ? d - w.length : 1 / 0)), (k = '')), n)) {
                                            case '<':
                                                t = p + t + w + k
                                                break
                                            case '=':
                                                t = p + k + t + w
                                                break
                                            case '^':
                                                t = k.slice(0, (z = k.length >> 1)) + p + t + w + k.slice(z)
                                                break
                                            default:
                                                t = k + p + t + w
                                        }
                                        return s(t)
                                    }
                                    return (
                                        (_ = void 0 === _ ? 6 : /[gprs]/.test(v) ? Math.max(1, Math.min(21, _)) : Math.max(0, Math.min(20, _))),
                                        (w.toString = function () {
                                            return t + ''
                                        }),
                                        w
                                    )
                                }
                                return {
                                    format: f,
                                    formatPrefix: function (t, e) {
                                        var n = f((((t = Ye(t)).type = 'f'), t)),
                                            r = 3 * Math.max(-8, Math.min(8, Math.floor(Je(e) / 3))),
                                            i = Math.pow(10, -r),
                                            a = on[8 + r / 3]
                                        return function (t) {
                                            return n(i * t) + a
                                        }
                                    },
                                }
                            })(t)),
                            (nn = en.format),
                            (rn = en.formatPrefix),
                            en
                        )
                    }
                    function ln(t) {
                        var e = t.domain
                        return (
                            (t.ticks = function (t) {
                                var n = e()
                                return (function (t, e, n) {
                                    if (!((n = +n) > 0)) return []
                                    if ((t = +t) == (e = +e)) return [t]
                                    const r = e < t,
                                        [i, a, o] = r ? jt(e, t, n) : jt(t, e, n)
                                    if (!(a >= i)) return []
                                    const s = a - i + 1,
                                        l = new Array(s)
                                    if (r)
                                        if (o < 0) for (let t = 0; t < s; ++t) l[t] = (a - t) / -o
                                        else for (let t = 0; t < s; ++t) l[t] = (a - t) * o
                                    else if (o < 0) for (let t = 0; t < s; ++t) l[t] = (i + t) / -o
                                    else for (let t = 0; t < s; ++t) l[t] = (i + t) * o
                                    return l
                                })(n[0], n[n.length - 1], null == t ? 10 : t)
                            }),
                            (t.tickFormat = function (t, n) {
                                var r = e()
                                return (function (t, e, n, r) {
                                    var i,
                                        a = (function (t, e, n) {
                                            n = +n
                                            const r = (e = +e) < (t = +t),
                                                i = r ? Ht(e, t, n) : Ht(t, e, n)
                                            return (r ? -1 : 1) * (i < 0 ? 1 / -i : i)
                                        })(t, e, n)
                                    switch ((r = Ye(null == r ? ',f' : r)).type) {
                                        case 's':
                                            var o = Math.max(Math.abs(t), Math.abs(e))
                                            return (
                                                null != r.precision ||
                                                    isNaN(
                                                        (i = (function (t, e) {
                                                            return Math.max(0, 3 * Math.max(-8, Math.min(8, Math.floor(Je(e) / 3))) - Je(Math.abs(t)))
                                                        })(a, o))
                                                    ) ||
                                                    (r.precision = i),
                                                rn(r, o)
                                            )
                                        case '':
                                        case 'e':
                                        case 'g':
                                        case 'p':
                                        case 'r':
                                            null != r.precision ||
                                                isNaN(
                                                    (i = (function (t, e) {
                                                        return (t = Math.abs(t)), (e = Math.abs(e) - t), Math.max(0, Je(e) - Je(t)) + 1
                                                    })(a, Math.max(Math.abs(t), Math.abs(e))))
                                                ) ||
                                                (r.precision = i - ('e' === r.type))
                                            break
                                        case 'f':
                                        case '%':
                                            null != r.precision ||
                                                isNaN(
                                                    (i = (function (t) {
                                                        return Math.max(0, -Je(Math.abs(t)))
                                                    })(a))
                                                ) ||
                                                (r.precision = i - 2 * ('%' === r.type))
                                    }
                                    return nn(r)
                                })(r[0], r[r.length - 1], null == t ? 10 : t, n)
                            }),
                            (t.nice = function (n) {
                                null == n && (n = 10)
                                var r,
                                    i,
                                    a = e(),
                                    o = 0,
                                    s = a.length - 1,
                                    l = a[o],
                                    u = a[s],
                                    c = 10
                                for (u < l && ((i = l), (l = u), (u = i), (i = o), (o = s), (s = i)); c-- > 0; ) {
                                    if ((i = Ht(l, u, n)) === r) return (a[o] = l), (a[s] = u), e(a)
                                    if (i > 0) (l = Math.floor(l / i) * i), (u = Math.ceil(u / i) * i)
                                    else {
                                        if (!(i < 0)) break
                                        ;(l = Math.ceil(l * i) / i), (u = Math.floor(u * i) / i)
                                    }
                                    r = i
                                }
                                return t
                            }),
                            t
                        )
                    }
                    function un() {
                        var t = Ge()(je, je)
                        return (
                            (t.copy = function () {
                                return $e(t, un())
                            }),
                            Nt.apply(t, arguments),
                            ln(t)
                        )
                    }
                    function cn() {
                        var t,
                            e = 0,
                            n = 1,
                            r = 1,
                            i = [0.5],
                            a = [0, 1]
                        function o(e) {
                            return null != e && e <= e ? a[Ot(i, e, 0, r)] : t
                        }
                        function s() {
                            var t = -1
                            for (i = new Array(r); ++t < r; ) i[t] = ((t + 1) * n - (t - r) * e) / (r + 1)
                            return o
                        }
                        return (
                            (o.domain = function (t) {
                                return arguments.length ? (([e, n] = t), (e = +e), (n = +n), s()) : [e, n]
                            }),
                            (o.range = function (t) {
                                return arguments.length ? ((r = (a = Array.from(t)).length - 1), s()) : a.slice()
                            }),
                            (o.invertExtent = function (t) {
                                var o = a.indexOf(t)
                                return o < 0 ? [NaN, NaN] : o < 1 ? [e, i[0]] : o >= r ? [i[r - 1], n] : [i[o - 1], i[o]]
                            }),
                            (o.unknown = function (e) {
                                return arguments.length ? ((t = e), o) : o
                            }),
                            (o.thresholds = function () {
                                return i.slice()
                            }),
                            (o.copy = function () {
                                return cn().domain([e, n]).range(a).unknown(t)
                            }),
                            Nt.apply(ln(o), arguments)
                        )
                    }
                    function fn() {
                        var t,
                            e = [0.5],
                            n = [0, 1],
                            r = 1
                        function i(i) {
                            return null != i && i <= i ? n[Ot(e, i, 0, r)] : t
                        }
                        return (
                            (i.domain = function (t) {
                                return arguments.length ? ((e = Array.from(t)), (r = Math.min(e.length, n.length - 1)), i) : e.slice()
                            }),
                            (i.range = function (t) {
                                return arguments.length ? ((n = Array.from(t)), (r = Math.min(e.length, n.length - 1)), i) : n.slice()
                            }),
                            (i.invertExtent = function (t) {
                                var r = n.indexOf(t)
                                return [e[r - 1], e[r]]
                            }),
                            (i.unknown = function (e) {
                                return arguments.length ? ((t = e), i) : t
                            }),
                            (i.copy = function () {
                                return fn().domain(e).range(n).unknown(t)
                            }),
                            Nt.apply(i, arguments)
                        )
                    }
                    function pn(t) {
                        for (var e = (t.length / 6) | 0, n = new Array(e), r = 0; r < e; ) n[r] = '#' + t.slice(6 * r, 6 * ++r)
                        return n
                    }
                    sn({ thousands: ',', grouping: [3], currency: ['$', ''] })
                    var hn = (t) => Fe(t[t.length - 1]),
                        dn = hn(
                            new Array(3)
                                .concat(
                                    'fff7bcfec44fd95f0e',
                                    'ffffd4fed98efe9929cc4c02',
                                    'ffffd4fed98efe9929d95f0e993404',
                                    'ffffd4fee391fec44ffe9929d95f0e993404',
                                    'ffffd4fee391fec44ffe9929ec7014cc4c028c2d04',
                                    'ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04',
                                    'ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506'
                                )
                                .map(pn)
                        ),
                        gn = {
                            b: 'break in time series',
                            c: 'confidential',
                            d: 'definition differs, see metadata',
                            e: 'estimated',
                            f: 'forecast',
                            n: 'not significant',
                            p: 'provisional',
                            r: 'revised',
                            s: 'Eurostat estimate',
                            u: 'low reliability',
                            z: 'not applicable',
                        }
                    function _n(t, e, n) {
                        return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : (t[e] = n), t
                    }
                    function yn(t) {
                        return (
                            (yn =
                                'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                                    ? function (t) {
                                          return typeof t
                                      }
                                    : function (t) {
                                          return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
                                              ? 'symbol'
                                              : typeof t
                                      }),
                            yn(t)
                        )
                    }
                    function vn(t) {
                        if (!t.ok) throw new Error(t.status + ' ' + t.statusText)
                        if (204 !== t.status && 205 !== t.status) return t.json()
                    }
                    function mn(t, e) {
                        return fetch(t, e).then(vn)
                    }
                    var xn = { value: () => {} }
                    function bn() {
                        for (var t, e = 0, n = arguments.length, r = {}; e < n; ++e) {
                            if (!(t = arguments[e] + '') || t in r || /[\s.]/.test(t)) throw new Error('illegal type: ' + t)
                            r[t] = []
                        }
                        return new Sn(r)
                    }
                    function Sn(t) {
                        this._ = t
                    }
                    function wn(t, e) {
                        for (var n, r = 0, i = t.length; r < i; ++r) if ((n = t[r]).name === e) return n.value
                    }
                    function Tn(t, e, n) {
                        for (var r = 0, i = t.length; r < i; ++r)
                            if (t[r].name === e) {
                                ;(t[r] = xn), (t = t.slice(0, r).concat(t.slice(r + 1)))
                                break
                            }
                        return null != n && t.push({ name: e, value: n }), t
                    }
                    Sn.prototype = bn.prototype = {
                        constructor: Sn,
                        on: function (t, e) {
                            var n,
                                r,
                                i = this._,
                                a =
                                    ((r = i),
                                    (t + '')
                                        .trim()
                                        .split(/^|\s+/)
                                        .map(function (t) {
                                            var e = '',
                                                n = t.indexOf('.')
                                            if ((n >= 0 && ((e = t.slice(n + 1)), (t = t.slice(0, n))), t && !r.hasOwnProperty(t)))
                                                throw new Error('unknown type: ' + t)
                                            return { type: t, name: e }
                                        })),
                                o = -1,
                                s = a.length
                            if (!(arguments.length < 2)) {
                                if (null != e && 'function' != typeof e) throw new Error('invalid callback: ' + e)
                                for (; ++o < s; )
                                    if ((n = (t = a[o]).type)) i[n] = Tn(i[n], t.name, e)
                                    else if (null == e) for (n in i) i[n] = Tn(i[n], t.name, null)
                                return this
                            }
                            for (; ++o < s; ) if ((n = (t = a[o]).type) && (n = wn(i[n], t.name))) return n
                        },
                        copy: function () {
                            var t = {},
                                e = this._
                            for (var n in e) t[n] = e[n].slice()
                            return new Sn(t)
                        },
                        call: function (t, e) {
                            if ((n = arguments.length - 2) > 0) for (var n, r, i = new Array(n), a = 0; a < n; ++a) i[a] = arguments[a + 2]
                            if (!this._.hasOwnProperty(t)) throw new Error('unknown type: ' + t)
                            for (a = 0, n = (r = this._[t]).length; a < n; ++a) r[a].value.apply(e, i)
                        },
                        apply: function (t, e, n) {
                            if (!this._.hasOwnProperty(t)) throw new Error('unknown type: ' + t)
                            for (var r = this._[t], i = 0, a = r.length; i < a; ++i) r[i].value.apply(e, n)
                        },
                    }
                    var zn = bn
                    const kn = { capture: !0, passive: !1 }
                    function Fn(t) {
                        t.preventDefault(), t.stopImmediatePropagation()
                    }
                    function An(t) {
                        return ((t = Math.exp(t)) + 1 / t) / 2
                    }
                    var Ln = (function t(e, n, r) {
                        function i(t, i) {
                            var a,
                                o,
                                s = t[0],
                                l = t[1],
                                u = t[2],
                                c = i[0],
                                f = i[1],
                                p = i[2],
                                h = c - s,
                                d = f - l,
                                g = h * h + d * d
                            if (g < 1e-12)
                                (o = Math.log(p / u) / e),
                                    (a = function (t) {
                                        return [s + t * h, l + t * d, u * Math.exp(e * t * o)]
                                    })
                            else {
                                var _ = Math.sqrt(g),
                                    y = (p * p - u * u + r * g) / (2 * u * n * _),
                                    v = (p * p - u * u - r * g) / (2 * p * n * _),
                                    m = Math.log(Math.sqrt(y * y + 1) - y),
                                    x = Math.log(Math.sqrt(v * v + 1) - v)
                                ;(o = (x - m) / e),
                                    (a = function (t) {
                                        var r,
                                            i = t * o,
                                            a = An(m),
                                            c =
                                                (u / (n * _)) *
                                                (a * ((r = e * i + m), ((r = Math.exp(2 * r)) - 1) / (r + 1)) -
                                                    (function (t) {
                                                        return ((t = Math.exp(t)) - 1 / t) / 2
                                                    })(m))
                                        return [s + c * h, l + c * d, (u * a) / An(e * i + m)]
                                    })
                            }
                            return (a.duration = (1e3 * o * e) / Math.SQRT2), a
                        }
                        return (
                            (i.rho = function (e) {
                                var n = Math.max(0.001, +e),
                                    r = n * n
                                return t(n, r, r * r)
                            }),
                            i
                        )
                    })(Math.SQRT2, 2, 4)
                    function Mn(t, e) {
                        if (
                            ((t = (function (t) {
                                let e
                                for (; (e = t.sourceEvent); ) t = e
                                return t
                            })(t)),
                            void 0 === e && (e = t.currentTarget),
                            e)
                        ) {
                            var n = e.ownerSVGElement || e
                            if (n.createSVGPoint) {
                                var r = n.createSVGPoint()
                                return (r.x = t.clientX), (r.y = t.clientY), [(r = r.matrixTransform(e.getScreenCTM().inverse())).x, r.y]
                            }
                            if (e.getBoundingClientRect) {
                                var i = e.getBoundingClientRect()
                                return [t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop]
                            }
                        }
                        return [t.pageX, t.pageY]
                    }
                    var Cn,
                        En,
                        Dn = 0,
                        On = 0,
                        Nn = 0,
                        In = 0,
                        Rn = 0,
                        Pn = 0,
                        Wn = 'object' == typeof performance && performance.now ? performance : Date,
                        jn =
                            'object' == typeof window && window.requestAnimationFrame
                                ? window.requestAnimationFrame.bind(window)
                                : function (t) {
                                      setTimeout(t, 17)
                                  }
                    function Hn() {
                        return Rn || (jn(Bn), (Rn = Wn.now() + Pn))
                    }
                    function Bn() {
                        Rn = 0
                    }
                    function Un() {
                        this._call = this._time = this._next = null
                    }
                    function $n(t, e, n) {
                        var r = new Un()
                        return r.restart(t, e, n), r
                    }
                    function Gn() {
                        ;(Rn = (In = Wn.now()) + Pn), (Dn = On = 0)
                        try {
                            !(function () {
                                Hn(), ++Dn
                                for (var t, e = Cn; e; ) (t = Rn - e._time) >= 0 && e._call.call(void 0, t), (e = e._next)
                                --Dn
                            })()
                        } finally {
                            ;(Dn = 0),
                                (function () {
                                    for (var t, e, n = Cn, r = 1 / 0; n; )
                                        n._call
                                            ? (r > n._time && (r = n._time), (t = n), (n = n._next))
                                            : ((e = n._next), (n._next = null), (n = t ? (t._next = e) : (Cn = e)))
                                    ;(En = t), qn(r)
                                })(),
                                (Rn = 0)
                        }
                    }
                    function Vn() {
                        var t = Wn.now(),
                            e = t - In
                        e > 1e3 && ((Pn -= e), (In = t))
                    }
                    function qn(t) {
                        Dn ||
                            (On && (On = clearTimeout(On)),
                            t - Rn > 24
                                ? (t < 1 / 0 && (On = setTimeout(Gn, t - Wn.now() - Pn)), Nn && (Nn = clearInterval(Nn)))
                                : (Nn || ((In = Wn.now()), (Nn = setInterval(Vn, 1e3))), (Dn = 1), jn(Gn)))
                    }
                    function Yn(t, e, n) {
                        var r = new Un()
                        return (
                            (e = null == e ? 0 : +e),
                            r.restart(
                                (n) => {
                                    r.stop(), t(n + e)
                                },
                                e,
                                n
                            ),
                            r
                        )
                    }
                    Un.prototype = $n.prototype = {
                        constructor: Un,
                        restart: function (t, e, n) {
                            if ('function' != typeof t) throw new TypeError('callback is not a function')
                            ;(n = (null == n ? Hn() : +n) + (null == e ? 0 : +e)),
                                this._next || En === this || (En ? (En._next = this) : (Cn = this), (En = this)),
                                (this._call = t),
                                (this._time = n),
                                qn()
                        },
                        stop: function () {
                            this._call && ((this._call = null), (this._time = 1 / 0), qn())
                        },
                    }
                    var Xn = zn('start', 'end', 'cancel', 'interrupt'),
                        Kn = []
                    function Jn(t, e, n, r, i, a) {
                        var o = t.__transition
                        if (o) {
                            if (n in o) return
                        } else t.__transition = {}
                        !(function (t, e, n) {
                            var r,
                                i = t.__transition
                            function a(l) {
                                var u, c, f, p
                                if (1 !== n.state) return s()
                                for (u in i)
                                    if ((p = i[u]).name === n.name) {
                                        if (3 === p.state) return Yn(a)
                                        4 === p.state
                                            ? ((p.state = 6), p.timer.stop(), p.on.call('interrupt', t, t.__data__, p.index, p.group), delete i[u])
                                            : +u < e &&
                                              ((p.state = 6), p.timer.stop(), p.on.call('cancel', t, t.__data__, p.index, p.group), delete i[u])
                                    }
                                if (
                                    (Yn(function () {
                                        3 === n.state && ((n.state = 4), n.timer.restart(o, n.delay, n.time), o(l))
                                    }),
                                    (n.state = 2),
                                    n.on.call('start', t, t.__data__, n.index, n.group),
                                    2 === n.state)
                                ) {
                                    for (n.state = 3, r = new Array((f = n.tween.length)), u = 0, c = -1; u < f; ++u)
                                        (p = n.tween[u].value.call(t, t.__data__, n.index, n.group)) && (r[++c] = p)
                                    r.length = c + 1
                                }
                            }
                            function o(e) {
                                for (
                                    var i = e < n.duration ? n.ease.call(null, e / n.duration) : (n.timer.restart(s), (n.state = 5), 1),
                                        a = -1,
                                        o = r.length;
                                    ++a < o;

                                )
                                    r[a].call(t, i)
                                5 === n.state && (n.on.call('end', t, t.__data__, n.index, n.group), s())
                            }
                            function s() {
                                for (var r in ((n.state = 6), n.timer.stop(), delete i[e], i)) return
                                delete t.__transition
                            }
                            ;(i[e] = n),
                                (n.timer = $n(
                                    function (t) {
                                        ;(n.state = 1), n.timer.restart(a, n.delay, n.time), n.delay <= t && a(t - n.delay)
                                    },
                                    0,
                                    n.time
                                ))
                        })(t, n, {
                            name: e,
                            index: r,
                            group: i,
                            on: Xn,
                            tween: Kn,
                            time: a.time,
                            delay: a.delay,
                            duration: a.duration,
                            ease: a.ease,
                            timer: null,
                            state: 0,
                        })
                    }
                    function Zn(t, e) {
                        var n = tr(t, e)
                        if (n.state > 0) throw new Error('too late; already scheduled')
                        return n
                    }
                    function Qn(t, e) {
                        var n = tr(t, e)
                        if (n.state > 3) throw new Error('too late; already running')
                        return n
                    }
                    function tr(t, e) {
                        var n = t.__transition
                        if (!n || !(n = n[e])) throw new Error('transition not found')
                        return n
                    }
                    function er(t, e) {
                        var n,
                            r,
                            i,
                            a = t.__transition,
                            o = !0
                        if (a) {
                            for (i in ((e = null == e ? null : e + ''), a))
                                (n = a[i]).name === e
                                    ? ((r = n.state > 2 && n.state < 5),
                                      (n.state = 6),
                                      n.timer.stop(),
                                      n.on.call(r ? 'interrupt' : 'cancel', t, t.__data__, n.index, n.group),
                                      delete a[i])
                                    : (o = !1)
                            o && delete t.__transition
                        }
                    }
                    var nr,
                        rr = 180 / Math.PI,
                        ir = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }
                    function ar(t, e, n, r, i, a) {
                        var o, s, l
                        return (
                            (o = Math.sqrt(t * t + e * e)) && ((t /= o), (e /= o)),
                            (l = t * n + e * r) && ((n -= t * l), (r -= e * l)),
                            (s = Math.sqrt(n * n + r * r)) && ((n /= s), (r /= s), (l /= s)),
                            t * r < e * n && ((t = -t), (e = -e), (l = -l), (o = -o)),
                            {
                                translateX: i,
                                translateY: a,
                                rotate: Math.atan2(e, t) * rr,
                                skewX: Math.atan(l) * rr,
                                scaleX: o,
                                scaleY: s,
                            }
                        )
                    }
                    function or(t, e, n, r) {
                        function i(t) {
                            return t.length ? t.pop() + ' ' : ''
                        }
                        return function (a, o) {
                            var s = [],
                                l = []
                            return (
                                (a = t(a)),
                                (o = t(o)),
                                (function (t, r, i, a, o, s) {
                                    if (t !== i || r !== a) {
                                        var l = o.push('translate(', null, e, null, n)
                                        s.push({ i: l - 4, x: Me(t, i) }, { i: l - 2, x: Me(r, a) })
                                    } else (i || a) && o.push('translate(' + i + e + a + n)
                                })(a.translateX, a.translateY, o.translateX, o.translateY, s, l),
                                (function (t, e, n, a) {
                                    t !== e
                                        ? (t - e > 180 ? (e += 360) : e - t > 180 && (t += 360),
                                          a.push({ i: n.push(i(n) + 'rotate(', null, r) - 2, x: Me(t, e) }))
                                        : e && n.push(i(n) + 'rotate(' + e + r)
                                })(a.rotate, o.rotate, s, l),
                                (function (t, e, n, a) {
                                    t !== e ? a.push({ i: n.push(i(n) + 'skewX(', null, r) - 2, x: Me(t, e) }) : e && n.push(i(n) + 'skewX(' + e + r)
                                })(a.skewX, o.skewX, s, l),
                                (function (t, e, n, r, a, o) {
                                    if (t !== n || e !== r) {
                                        var s = a.push(i(a) + 'scale(', null, ',', null, ')')
                                        o.push({ i: s - 4, x: Me(t, n) }, { i: s - 2, x: Me(e, r) })
                                    } else (1 === n && 1 === r) || a.push(i(a) + 'scale(' + n + ',' + r + ')')
                                })(a.scaleX, a.scaleY, o.scaleX, o.scaleY, s, l),
                                (a = o = null),
                                function (t) {
                                    for (var e, n = -1, r = l.length; ++n < r; ) s[(e = l[n]).i] = e.x(t)
                                    return s.join('')
                                }
                            )
                        }
                    }
                    var sr = or(
                            function (t) {
                                const e = new ('function' == typeof DOMMatrix ? DOMMatrix : WebKitCSSMatrix)(t + '')
                                return e.isIdentity ? ir : ar(e.a, e.b, e.c, e.d, e.e, e.f)
                            },
                            'px, ',
                            'px)',
                            'deg)'
                        ),
                        lr = or(
                            function (t) {
                                return null == t
                                    ? ir
                                    : (nr || (nr = document.createElementNS('http://www.w3.org/2000/svg', 'g')),
                                      nr.setAttribute('transform', t),
                                      (t = nr.transform.baseVal.consolidate()) ? ar((t = t.matrix).a, t.b, t.c, t.d, t.e, t.f) : ir)
                            },
                            ', ',
                            ')',
                            ')'
                        )
                    function ur(t, e) {
                        var n, r
                        return function () {
                            var i = Qn(this, t),
                                a = i.tween
                            if (a !== n)
                                for (var o = 0, s = (r = n = a).length; o < s; ++o)
                                    if (r[o].name === e) {
                                        ;(r = r.slice()).splice(o, 1)
                                        break
                                    }
                            i.tween = r
                        }
                    }
                    function cr(t, e, n) {
                        var r, i
                        if ('function' != typeof n) throw new Error()
                        return function () {
                            var a = Qn(this, t),
                                o = a.tween
                            if (o !== r) {
                                i = (r = o).slice()
                                for (var s = { name: e, value: n }, l = 0, u = i.length; l < u; ++l)
                                    if (i[l].name === e) {
                                        i[l] = s
                                        break
                                    }
                                l === u && i.push(s)
                            }
                            a.tween = i
                        }
                    }
                    function fr(t, e, n) {
                        var r = t._id
                        return (
                            t.each(function () {
                                var t = Qn(this, r)
                                ;(t.value || (t.value = {}))[e] = n.apply(this, arguments)
                            }),
                            function (t) {
                                return tr(t, r).value[e]
                            }
                        )
                    }
                    function pr(t, e) {
                        var n
                        return ('number' == typeof e ? Me : e instanceof oe ? ze : (n = oe(e)) ? ((e = n), ze) : Oe)(t, e)
                    }
                    function hr(t) {
                        return function () {
                            this.removeAttribute(t)
                        }
                    }
                    function dr(t) {
                        return function () {
                            this.removeAttributeNS(t.space, t.local)
                        }
                    }
                    function gr(t, e, n) {
                        var r,
                            i,
                            a = n + ''
                        return function () {
                            var o = this.getAttribute(t)
                            return o === a ? null : o === r ? i : (i = e((r = o), n))
                        }
                    }
                    function _r(t, e, n) {
                        var r,
                            i,
                            a = n + ''
                        return function () {
                            var o = this.getAttributeNS(t.space, t.local)
                            return o === a ? null : o === r ? i : (i = e((r = o), n))
                        }
                    }
                    function yr(t, e, n) {
                        var r, i, a
                        return function () {
                            var o,
                                s,
                                l = n(this)
                            if (null != l)
                                return (o = this.getAttribute(t)) === (s = l + '') ? null : o === r && s === i ? a : ((i = s), (a = e((r = o), l)))
                            this.removeAttribute(t)
                        }
                    }
                    function vr(t, e, n) {
                        var r, i, a
                        return function () {
                            var o,
                                s,
                                l = n(this)
                            if (null != l)
                                return (o = this.getAttributeNS(t.space, t.local)) === (s = l + '')
                                    ? null
                                    : o === r && s === i
                                      ? a
                                      : ((i = s), (a = e((r = o), l)))
                            this.removeAttributeNS(t.space, t.local)
                        }
                    }
                    function mr(t, e) {
                        var n, r
                        function i() {
                            var i = e.apply(this, arguments)
                            return (
                                i !== r &&
                                    (n =
                                        (r = i) &&
                                        (function (t, e) {
                                            return function (n) {
                                                this.setAttributeNS(t.space, t.local, e.call(this, n))
                                            }
                                        })(t, i)),
                                n
                            )
                        }
                        return (i._value = e), i
                    }
                    function xr(t, e) {
                        var n, r
                        function i() {
                            var i = e.apply(this, arguments)
                            return (
                                i !== r &&
                                    (n =
                                        (r = i) &&
                                        (function (t, e) {
                                            return function (n) {
                                                this.setAttribute(t, e.call(this, n))
                                            }
                                        })(t, i)),
                                n
                            )
                        }
                        return (i._value = e), i
                    }
                    function br(t, e) {
                        return function () {
                            Zn(this, t).delay = +e.apply(this, arguments)
                        }
                    }
                    function Sr(t, e) {
                        return (
                            (e = +e),
                            function () {
                                Zn(this, t).delay = e
                            }
                        )
                    }
                    function wr(t, e) {
                        return function () {
                            Qn(this, t).duration = +e.apply(this, arguments)
                        }
                    }
                    function Tr(t, e) {
                        return (
                            (e = +e),
                            function () {
                                Qn(this, t).duration = e
                            }
                        )
                    }
                    var zr = _t.prototype.constructor
                    function kr(t) {
                        return function () {
                            this.style.removeProperty(t)
                        }
                    }
                    var Fr = 0
                    function Ar(t, e, n, r) {
                        ;(this._groups = t), (this._parents = e), (this._name = n), (this._id = r)
                    }
                    function Lr() {
                        return ++Fr
                    }
                    var Mr = _t.prototype
                    Ar.prototype = function (t) {
                        return _t().transition(t)
                    }.prototype = {
                        constructor: Ar,
                        select: function (t) {
                            var e = this._name,
                                n = this._id
                            'function' != typeof t && (t = a(t))
                            for (var r = this._groups, i = r.length, o = new Array(i), s = 0; s < i; ++s)
                                for (var l, u, c = r[s], f = c.length, p = (o[s] = new Array(f)), h = 0; h < f; ++h)
                                    (l = c[h]) &&
                                        (u = t.call(l, l.__data__, h, c)) &&
                                        ('__data__' in l && (u.__data__ = l.__data__), (p[h] = u), Jn(p[h], e, n, h, p, tr(l, n)))
                            return new Ar(o, this._parents, e, n)
                        },
                        selectAll: function (t) {
                            var e = this._name,
                                n = this._id
                            'function' != typeof t && (t = l(t))
                            for (var r = this._groups, i = r.length, a = [], o = [], s = 0; s < i; ++s)
                                for (var u, c = r[s], f = c.length, p = 0; p < f; ++p)
                                    if ((u = c[p])) {
                                        for (var h, d = t.call(u, u.__data__, p, c), g = tr(u, n), _ = 0, y = d.length; _ < y; ++_)
                                            (h = d[_]) && Jn(h, e, n, _, d, g)
                                        a.push(d), o.push(u)
                                    }
                            return new Ar(a, o, e, n)
                        },
                        selectChild: Mr.selectChild,
                        selectChildren: Mr.selectChildren,
                        filter: function (t) {
                            'function' != typeof t && (t = u(t))
                            for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)
                                for (var a, o = e[i], s = o.length, l = (r[i] = []), c = 0; c < s; ++c)
                                    (a = o[c]) && t.call(a, a.__data__, c, o) && l.push(a)
                            return new Ar(r, this._parents, this._name, this._id)
                        },
                        merge: function (t) {
                            if (t._id !== this._id) throw new Error()
                            for (
                                var e = this._groups, n = t._groups, r = e.length, i = n.length, a = Math.min(r, i), o = new Array(r), s = 0;
                                s < a;
                                ++s
                            )
                                for (var l, u = e[s], c = n[s], f = u.length, p = (o[s] = new Array(f)), h = 0; h < f; ++h)
                                    (l = u[h] || c[h]) && (p[h] = l)
                            for (; s < r; ++s) o[s] = e[s]
                            return new Ar(o, this._parents, this._name, this._id)
                        },
                        selection: function () {
                            return new zr(this._groups, this._parents)
                        },
                        transition: function () {
                            for (var t = this._name, e = this._id, n = Lr(), r = this._groups, i = r.length, a = 0; a < i; ++a)
                                for (var o, s = r[a], l = s.length, u = 0; u < l; ++u)
                                    if ((o = s[u])) {
                                        var c = tr(o, e)
                                        Jn(o, t, n, u, s, {
                                            time: c.time + c.delay + c.duration,
                                            delay: 0,
                                            duration: c.duration,
                                            ease: c.ease,
                                        })
                                    }
                            return new Ar(r, this._parents, t, n)
                        },
                        call: Mr.call,
                        nodes: Mr.nodes,
                        node: Mr.node,
                        size: Mr.size,
                        empty: Mr.empty,
                        each: Mr.each,
                        on: function (t, e) {
                            var n = this._id
                            return arguments.length < 2
                                ? tr(this.node(), n).on.on(t)
                                : this.each(
                                      (function (t, e, n) {
                                          var r,
                                              i,
                                              a = (function (t) {
                                                  return (t + '')
                                                      .trim()
                                                      .split(/^|\s+/)
                                                      .every(function (t) {
                                                          var e = t.indexOf('.')
                                                          return e >= 0 && (t = t.slice(0, e)), !t || 'start' === t
                                                      })
                                              })(e)
                                                  ? Zn
                                                  : Qn
                                          return function () {
                                              var o = a(this, t),
                                                  s = o.on
                                              s !== r && (i = (r = s).copy()).on(e, n), (o.on = i)
                                          }
                                      })(n, t, e)
                                  )
                        },
                        attr: function (t, e) {
                            var n = T(t),
                                r = 'transform' === n ? lr : pr
                            return this.attrTween(
                                t,
                                'function' == typeof e
                                    ? (n.local ? vr : yr)(n, r, fr(this, 'attr.' + t, e))
                                    : null == e
                                      ? (n.local ? dr : hr)(n)
                                      : (n.local ? _r : gr)(n, r, e)
                            )
                        },
                        attrTween: function (t, e) {
                            var n = 'attr.' + t
                            if (arguments.length < 2) return (n = this.tween(n)) && n._value
                            if (null == e) return this.tween(n, null)
                            if ('function' != typeof e) throw new Error()
                            var r = T(t)
                            return this.tween(n, (r.local ? mr : xr)(r, e))
                        },
                        style: function (t, e, n) {
                            var r = 'transform' == (t += '') ? sr : pr
                            return null == e
                                ? this.styleTween(
                                      t,
                                      (function (t, e) {
                                          var n, r, i
                                          return function () {
                                              var a = N(this, t),
                                                  o = (this.style.removeProperty(t), N(this, t))
                                              return a === o ? null : a === n && o === r ? i : (i = e((n = a), (r = o)))
                                          }
                                      })(t, r)
                                  ).on('end.style.' + t, kr(t))
                                : 'function' == typeof e
                                  ? this.styleTween(
                                        t,
                                        (function (t, e, n) {
                                            var r, i, a
                                            return function () {
                                                var o = N(this, t),
                                                    s = n(this),
                                                    l = s + ''
                                                return (
                                                    null == s && (this.style.removeProperty(t), (l = s = N(this, t))),
                                                    o === l ? null : o === r && l === i ? a : ((i = l), (a = e((r = o), s)))
                                                )
                                            }
                                        })(t, r, fr(this, 'style.' + t, e))
                                    ).each(
                                        (function (t, e) {
                                            var n,
                                                r,
                                                i,
                                                a,
                                                o = 'style.' + e,
                                                s = 'end.' + o
                                            return function () {
                                                var l = Qn(this, t),
                                                    u = l.on,
                                                    c = null == l.value[o] ? a || (a = kr(e)) : void 0
                                                ;(u === n && i === c) || (r = (n = u).copy()).on(s, (i = c)), (l.on = r)
                                            }
                                        })(this._id, t)
                                    )
                                  : this.styleTween(
                                        t,
                                        (function (t, e, n) {
                                            var r,
                                                i,
                                                a = n + ''
                                            return function () {
                                                var o = N(this, t)
                                                return o === a ? null : o === r ? i : (i = e((r = o), n))
                                            }
                                        })(t, r, e),
                                        n
                                    ).on('end.style.' + t, null)
                        },
                        styleTween: function (t, e, n) {
                            var r = 'style.' + (t += '')
                            if (arguments.length < 2) return (r = this.tween(r)) && r._value
                            if (null == e) return this.tween(r, null)
                            if ('function' != typeof e) throw new Error()
                            return this.tween(
                                r,
                                (function (t, e, n) {
                                    var r, i
                                    function a() {
                                        var a = e.apply(this, arguments)
                                        return (
                                            a !== i &&
                                                (r =
                                                    (i = a) &&
                                                    (function (t, e, n) {
                                                        return function (r) {
                                                            this.style.setProperty(t, e.call(this, r), n)
                                                        }
                                                    })(t, a, n)),
                                            r
                                        )
                                    }
                                    return (a._value = e), a
                                })(t, e, null == n ? '' : n)
                            )
                        },
                        text: function (t) {
                            return this.tween(
                                'text',
                                'function' == typeof t
                                    ? (function (t) {
                                          return function () {
                                              var e = t(this)
                                              this.textContent = null == e ? '' : e
                                          }
                                      })(fr(this, 'text', t))
                                    : (function (t) {
                                          return function () {
                                              this.textContent = t
                                          }
                                      })(null == t ? '' : t + '')
                            )
                        },
                        textTween: function (t) {
                            var e = 'text'
                            if (arguments.length < 1) return (e = this.tween(e)) && e._value
                            if (null == t) return this.tween(e, null)
                            if ('function' != typeof t) throw new Error()
                            return this.tween(
                                e,
                                (function (t) {
                                    var e, n
                                    function r() {
                                        var r = t.apply(this, arguments)
                                        return (
                                            r !== n &&
                                                (e =
                                                    (n = r) &&
                                                    (function (t) {
                                                        return function (e) {
                                                            this.textContent = t.call(this, e)
                                                        }
                                                    })(r)),
                                            e
                                        )
                                    }
                                    return (r._value = t), r
                                })(t)
                            )
                        },
                        remove: function () {
                            return this.on(
                                'end.remove',
                                (function (t) {
                                    return function () {
                                        var e = this.parentNode
                                        for (var n in this.__transition) if (+n !== t) return
                                        e && e.removeChild(this)
                                    }
                                })(this._id)
                            )
                        },
                        tween: function (t, e) {
                            var n = this._id
                            if (((t += ''), arguments.length < 2)) {
                                for (var r, i = tr(this.node(), n).tween, a = 0, o = i.length; a < o; ++a) if ((r = i[a]).name === t) return r.value
                                return null
                            }
                            return this.each((null == e ? ur : cr)(n, t, e))
                        },
                        delay: function (t) {
                            var e = this._id
                            return arguments.length ? this.each(('function' == typeof t ? br : Sr)(e, t)) : tr(this.node(), e).delay
                        },
                        duration: function (t) {
                            var e = this._id
                            return arguments.length ? this.each(('function' == typeof t ? wr : Tr)(e, t)) : tr(this.node(), e).duration
                        },
                        ease: function (t) {
                            var e = this._id
                            return arguments.length
                                ? this.each(
                                      (function (t, e) {
                                          if ('function' != typeof e) throw new Error()
                                          return function () {
                                              Qn(this, t).ease = e
                                          }
                                      })(e, t)
                                  )
                                : tr(this.node(), e).ease
                        },
                        easeVarying: function (t) {
                            if ('function' != typeof t) throw new Error()
                            return this.each(
                                (function (t, e) {
                                    return function () {
                                        var n = e.apply(this, arguments)
                                        if ('function' != typeof n) throw new Error()
                                        Qn(this, t).ease = n
                                    }
                                })(this._id, t)
                            )
                        },
                        end: function () {
                            var t,
                                e,
                                n = this,
                                r = n._id,
                                i = n.size()
                            return new Promise(function (a, o) {
                                var s = { value: o },
                                    l = {
                                        value: function () {
                                            0 == --i && a()
                                        },
                                    }
                                n.each(function () {
                                    var n = Qn(this, r),
                                        i = n.on
                                    i !== t && ((e = (t = i).copy())._.cancel.push(s), e._.interrupt.push(s), e._.end.push(l)), (n.on = e)
                                }),
                                    0 === i && a()
                            })
                        },
                        [Symbol.iterator]: Mr[Symbol.iterator],
                    }
                    var Cr = {
                        time: null,
                        delay: 0,
                        duration: 250,
                        ease: function (t) {
                            return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2
                        },
                    }
                    function Er(t, e) {
                        for (var n; !(n = t.__transition) || !(n = n[e]); ) if (!(t = t.parentNode)) throw new Error(`transition ${e} not found`)
                        return n
                    }
                    ;(_t.prototype.interrupt = function (t) {
                        return this.each(function () {
                            er(this, t)
                        })
                    }),
                        (_t.prototype.transition = function (t) {
                            var e, n
                            t instanceof Ar ? ((e = t._id), (t = t._name)) : ((e = Lr()), ((n = Cr).time = Hn()), (t = null == t ? null : t + ''))
                            for (var r = this._groups, i = r.length, a = 0; a < i; ++a)
                                for (var o, s = r[a], l = s.length, u = 0; u < l; ++u) (o = s[u]) && Jn(o, t, e, u, s, n || Er(o, e))
                            return new Ar(r, this._parents, t, e)
                        })
                    var Dr = (t) => () => t
                    function Or(t, { sourceEvent: e, target: n, transform: r, dispatch: i }) {
                        Object.defineProperties(this, {
                            type: { value: t, enumerable: !0, configurable: !0 },
                            sourceEvent: { value: e, enumerable: !0, configurable: !0 },
                            target: { value: n, enumerable: !0, configurable: !0 },
                            transform: { value: r, enumerable: !0, configurable: !0 },
                            _: { value: i },
                        })
                    }
                    function Nr(t, e, n) {
                        ;(this.k = t), (this.x = e), (this.y = n)
                    }
                    Nr.prototype = {
                        constructor: Nr,
                        scale: function (t) {
                            return 1 === t ? this : new Nr(this.k * t, this.x, this.y)
                        },
                        translate: function (t, e) {
                            return (0 === t) & (0 === e) ? this : new Nr(this.k, this.x + this.k * t, this.y + this.k * e)
                        },
                        apply: function (t) {
                            return [t[0] * this.k + this.x, t[1] * this.k + this.y]
                        },
                        applyX: function (t) {
                            return t * this.k + this.x
                        },
                        applyY: function (t) {
                            return t * this.k + this.y
                        },
                        invert: function (t) {
                            return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k]
                        },
                        invertX: function (t) {
                            return (t - this.x) / this.k
                        },
                        invertY: function (t) {
                            return (t - this.y) / this.k
                        },
                        rescaleX: function (t) {
                            return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t))
                        },
                        rescaleY: function (t) {
                            return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t))
                        },
                        toString: function () {
                            return 'translate(' + this.x + ',' + this.y + ') scale(' + this.k + ')'
                        },
                    }
                    var Ir = new Nr(1, 0, 0)
                    function Rr(t) {
                        t.stopImmediatePropagation()
                    }
                    function Pr(t) {
                        t.preventDefault(), t.stopImmediatePropagation()
                    }
                    function Wr(t) {
                        return !((t.ctrlKey && 'wheel' !== t.type) || t.button)
                    }
                    function jr() {
                        var t = this
                        return t instanceof SVGElement
                            ? (t = t.ownerSVGElement || t).hasAttribute('viewBox')
                                ? [
                                      [(t = t.viewBox.baseVal).x, t.y],
                                      [t.x + t.width, t.y + t.height],
                                  ]
                                : [
                                      [0, 0],
                                      [t.width.baseVal.value, t.height.baseVal.value],
                                  ]
                            : [
                                  [0, 0],
                                  [t.clientWidth, t.clientHeight],
                              ]
                    }
                    function Hr() {
                        return this.__zoom || Ir
                    }
                    function Br(t) {
                        return -t.deltaY * (1 === t.deltaMode ? 0.05 : t.deltaMode ? 1 : 0.002) * (t.ctrlKey ? 10 : 1)
                    }
                    function Ur() {
                        return navigator.maxTouchPoints || 'ontouchstart' in this
                    }
                    function $r(t, e, n) {
                        var r = t.invertX(e[0][0]) - n[0][0],
                            i = t.invertX(e[1][0]) - n[1][0],
                            a = t.invertY(e[0][1]) - n[0][1],
                            o = t.invertY(e[1][1]) - n[1][1]
                        return t.translate(
                            i > r ? (r + i) / 2 : Math.min(0, r) || Math.max(0, i),
                            o > a ? (a + o) / 2 : Math.min(0, a) || Math.max(0, o)
                        )
                    }
                    function Gr(t) {
                        return 'string' == typeof t ? new dt([document.querySelectorAll(t)], [document.documentElement]) : new dt([o(t)], ht)
                    }
                    Nr.prototype
                    var Vr = 1e-6,
                        qr = Math.PI,
                        Yr = qr / 2,
                        Xr = qr / 4,
                        Kr = 2 * qr,
                        Jr = 180 / qr,
                        Zr = qr / 180,
                        Qr = Math.abs,
                        ti = Math.atan,
                        ei = Math.atan2,
                        ni = Math.cos,
                        ri = Math.ceil,
                        ii = (Math.exp, Math.floor, Math.log, Math.pow, Math.sin),
                        ai =
                            Math.sign ||
                            function (t) {
                                return t > 0 ? 1 : t < 0 ? -1 : 0
                            },
                        oi = Math.sqrt
                    function si(t) {
                        return t > 1 ? Yr : t < -1 ? -Yr : Math.asin(t)
                    }
                    function li() {}
                    function ui() {
                        var t,
                            e = []
                        return {
                            point: function (e, n, r) {
                                t.push([e, n, r])
                            },
                            lineStart: function () {
                                e.push((t = []))
                            },
                            lineEnd: li,
                            rejoin: function () {
                                e.length > 1 && e.push(e.pop().concat(e.shift()))
                            },
                            result: function () {
                                var n = e
                                return (e = []), (t = null), n
                            },
                        }
                    }
                    function ci(t, e) {
                        return Qr(t[0] - e[0]) < Vr && Qr(t[1] - e[1]) < Vr
                    }
                    function fi(t, e, n, r) {
                        ;(this.x = t), (this.z = e), (this.o = n), (this.e = r), (this.v = !1), (this.n = this.p = null)
                    }
                    function pi(t, e, n, r, i) {
                        var a,
                            o,
                            s = [],
                            l = []
                        if (
                            (t.forEach(function (t) {
                                if (!((e = t.length - 1) <= 0)) {
                                    var e,
                                        n,
                                        r = t[0],
                                        o = t[e]
                                    if (ci(r, o)) {
                                        if (!r[2] && !o[2]) {
                                            for (i.lineStart(), a = 0; a < e; ++a) i.point((r = t[a])[0], r[1])
                                            return void i.lineEnd()
                                        }
                                        o[0] += 2 * Vr
                                    }
                                    s.push((n = new fi(r, t, null, !0))),
                                        l.push((n.o = new fi(r, null, n, !1))),
                                        s.push((n = new fi(o, t, null, !1))),
                                        l.push((n.o = new fi(o, null, n, !0)))
                                }
                            }),
                            s.length)
                        ) {
                            for (l.sort(e), hi(s), hi(l), a = 0, o = l.length; a < o; ++a) l[a].e = n = !n
                            for (var u, c, f = s[0]; ; ) {
                                for (var p = f, h = !0; p.v; ) if ((p = p.n) === f) return
                                ;(u = p.z), i.lineStart()
                                do {
                                    if (((p.v = p.o.v = !0), p.e)) {
                                        if (h) for (a = 0, o = u.length; a < o; ++a) i.point((c = u[a])[0], c[1])
                                        else r(p.x, p.n.x, 1, i)
                                        p = p.n
                                    } else {
                                        if (h) for (u = p.p.z, a = u.length - 1; a >= 0; --a) i.point((c = u[a])[0], c[1])
                                        else r(p.x, p.p.x, -1, i)
                                        p = p.p
                                    }
                                    ;(u = (p = p.o).z), (h = !h)
                                } while (!p.v)
                                i.lineEnd()
                            }
                        }
                    }
                    function hi(t) {
                        if ((e = t.length)) {
                            for (var e, n, r = 0, i = t[0]; ++r < e; ) (i.n = n = t[r]), (n.p = i), (i = n)
                            ;(i.n = n = t[0]), (n.p = i)
                        }
                    }
                    Math.tan
                    var di = 1e9,
                        gi = -di
                    function _i(t, e, n, r) {
                        function i(i, a) {
                            return t <= i && i <= n && e <= a && a <= r
                        }
                        function a(i, a, s, u) {
                            var c = 0,
                                f = 0
                            if (null == i || (c = o(i, s)) !== (f = o(a, s)) || (l(i, a) < 0) ^ (s > 0))
                                do {
                                    u.point(0 === c || 3 === c ? t : n, c > 1 ? r : e)
                                } while ((c = (c + s + 4) % 4) !== f)
                            else u.point(a[0], a[1])
                        }
                        function o(r, i) {
                            return Qr(r[0] - t) < Vr
                                ? i > 0
                                    ? 0
                                    : 3
                                : Qr(r[0] - n) < Vr
                                  ? i > 0
                                      ? 2
                                      : 1
                                  : Qr(r[1] - e) < Vr
                                    ? i > 0
                                        ? 1
                                        : 0
                                    : i > 0
                                      ? 3
                                      : 2
                        }
                        function s(t, e) {
                            return l(t.x, e.x)
                        }
                        function l(t, e) {
                            var n = o(t, 1),
                                r = o(e, 1)
                            return n !== r ? n - r : 0 === n ? e[1] - t[1] : 1 === n ? t[0] - e[0] : 2 === n ? t[1] - e[1] : e[0] - t[0]
                        }
                        return function (o) {
                            var l,
                                u,
                                c,
                                f,
                                p,
                                h,
                                d,
                                g,
                                _,
                                y,
                                v,
                                m = o,
                                x = ui(),
                                b = {
                                    point: S,
                                    lineStart: function () {
                                        ;(b.point = w), u && u.push((c = [])), (y = !0), (_ = !1), (d = g = NaN)
                                    },
                                    lineEnd: function () {
                                        l && (w(f, p), h && _ && x.rejoin(), l.push(x.result())), (b.point = S), _ && m.lineEnd()
                                    },
                                    polygonStart: function () {
                                        ;(m = x), (l = []), (u = []), (v = !0)
                                    },
                                    polygonEnd: function () {
                                        var e = (function () {
                                                for (var e = 0, n = 0, i = u.length; n < i; ++n)
                                                    for (var a, o, s = u[n], l = 1, c = s.length, f = s[0], p = f[0], h = f[1]; l < c; ++l)
                                                        (a = p),
                                                            (o = h),
                                                            (p = (f = s[l])[0]),
                                                            (h = f[1]),
                                                            o <= r
                                                                ? h > r && (p - a) * (r - o) > (h - o) * (t - a) && ++e
                                                                : h <= r && (p - a) * (r - o) < (h - o) * (t - a) && --e
                                                return e
                                            })(),
                                            n = v && e,
                                            i = (l = wt(l)).length
                                        ;(n || i) &&
                                            (o.polygonStart(),
                                            n && (o.lineStart(), a(null, null, 1, o), o.lineEnd()),
                                            i && pi(l, s, e, a, o),
                                            o.polygonEnd()),
                                            (m = o),
                                            (l = u = c = null)
                                    },
                                }
                            function S(t, e) {
                                i(t, e) && m.point(t, e)
                            }
                            function w(a, o) {
                                var s = i(a, o)
                                if ((u && c.push([a, o]), y)) (f = a), (p = o), (h = s), (y = !1), s && (m.lineStart(), m.point(a, o))
                                else if (s && _) m.point(a, o)
                                else {
                                    var l = [(d = Math.max(gi, Math.min(di, d))), (g = Math.max(gi, Math.min(di, g)))],
                                        x = [(a = Math.max(gi, Math.min(di, a))), (o = Math.max(gi, Math.min(di, o)))]
                                    !(function (t, e, n, r, i, a) {
                                        var o,
                                            s = t[0],
                                            l = t[1],
                                            u = 0,
                                            c = 1,
                                            f = e[0] - s,
                                            p = e[1] - l
                                        if (((o = n - s), f || !(o > 0))) {
                                            if (((o /= f), f < 0)) {
                                                if (o < u) return
                                                o < c && (c = o)
                                            } else if (f > 0) {
                                                if (o > c) return
                                                o > u && (u = o)
                                            }
                                            if (((o = i - s), f || !(o < 0))) {
                                                if (((o /= f), f < 0)) {
                                                    if (o > c) return
                                                    o > u && (u = o)
                                                } else if (f > 0) {
                                                    if (o < u) return
                                                    o < c && (c = o)
                                                }
                                                if (((o = r - l), p || !(o > 0))) {
                                                    if (((o /= p), p < 0)) {
                                                        if (o < u) return
                                                        o < c && (c = o)
                                                    } else if (p > 0) {
                                                        if (o > c) return
                                                        o > u && (u = o)
                                                    }
                                                    if (((o = a - l), p || !(o < 0))) {
                                                        if (((o /= p), p < 0)) {
                                                            if (o > c) return
                                                            o > u && (u = o)
                                                        } else if (p > 0) {
                                                            if (o < u) return
                                                            o < c && (c = o)
                                                        }
                                                        return (
                                                            u > 0 && ((t[0] = s + u * f), (t[1] = l + u * p)),
                                                            c < 1 && ((e[0] = s + c * f), (e[1] = l + c * p)),
                                                            !0
                                                        )
                                                    }
                                                }
                                            }
                                        }
                                    })(l, x, t, e, n, r)
                                        ? s && (m.lineStart(), m.point(a, o), (v = !1))
                                        : (_ || (m.lineStart(), m.point(l[0], l[1])), m.point(x[0], x[1]), s || m.lineEnd(), (v = !1))
                                }
                                ;(d = a), (g = o), (_ = s)
                            }
                            return b
                        }
                    }
                    function yi(t) {
                        return t
                    }
                    function vi(t) {
                        return function (e) {
                            var n = new mi()
                            for (var r in t) n[r] = t[r]
                            return (n.stream = e), n
                        }
                    }
                    function mi() {}
                    function xi(t, e) {
                        t && Si.hasOwnProperty(t.type) && Si[t.type](t, e)
                    }
                    mi.prototype = {
                        constructor: mi,
                        point: function (t, e) {
                            this.stream.point(t, e)
                        },
                        sphere: function () {
                            this.stream.sphere()
                        },
                        lineStart: function () {
                            this.stream.lineStart()
                        },
                        lineEnd: function () {
                            this.stream.lineEnd()
                        },
                        polygonStart: function () {
                            this.stream.polygonStart()
                        },
                        polygonEnd: function () {
                            this.stream.polygonEnd()
                        },
                    }
                    var bi = {
                            Feature: function (t, e) {
                                xi(t.geometry, e)
                            },
                            FeatureCollection: function (t, e) {
                                for (var n = t.features, r = -1, i = n.length; ++r < i; ) xi(n[r].geometry, e)
                            },
                        },
                        Si = {
                            Sphere: function (t, e) {
                                e.sphere()
                            },
                            Point: function (t, e) {
                                ;(t = t.coordinates), e.point(t[0], t[1], t[2])
                            },
                            MultiPoint: function (t, e) {
                                for (var n = t.coordinates, r = -1, i = n.length; ++r < i; ) (t = n[r]), e.point(t[0], t[1], t[2])
                            },
                            LineString: function (t, e) {
                                wi(t.coordinates, e, 0)
                            },
                            MultiLineString: function (t, e) {
                                for (var n = t.coordinates, r = -1, i = n.length; ++r < i; ) wi(n[r], e, 0)
                            },
                            Polygon: function (t, e) {
                                Ti(t.coordinates, e)
                            },
                            MultiPolygon: function (t, e) {
                                for (var n = t.coordinates, r = -1, i = n.length; ++r < i; ) Ti(n[r], e)
                            },
                            GeometryCollection: function (t, e) {
                                for (var n = t.geometries, r = -1, i = n.length; ++r < i; ) xi(n[r], e)
                            },
                        }
                    function wi(t, e, n) {
                        var r,
                            i = -1,
                            a = t.length - n
                        for (e.lineStart(); ++i < a; ) (r = t[i]), e.point(r[0], r[1], r[2])
                        e.lineEnd()
                    }
                    function Ti(t, e) {
                        var n = -1,
                            r = t.length
                        for (e.polygonStart(); ++n < r; ) wi(t[n], e, 1)
                        e.polygonEnd()
                    }
                    function zi(t, e) {
                        t && bi.hasOwnProperty(t.type) ? bi[t.type](t, e) : xi(t, e)
                    }
                    var ki = 1 / 0,
                        Fi = ki,
                        Ai = -ki,
                        Li = Ai,
                        Mi = {
                            point: function (t, e) {
                                t < ki && (ki = t), t > Ai && (Ai = t), e < Fi && (Fi = e), e > Li && (Li = e)
                            },
                            lineStart: li,
                            lineEnd: li,
                            polygonStart: li,
                            polygonEnd: li,
                            result: function () {
                                var t = [
                                    [ki, Fi],
                                    [Ai, Li],
                                ]
                                return (Ai = Li = -(Fi = ki = 1 / 0)), t
                            },
                        },
                        Ci = Mi
                    function Ei(t, e, n) {
                        var r = t.clipExtent && t.clipExtent()
                        return (
                            t.scale(150).translate([0, 0]),
                            null != r && t.clipExtent(null),
                            zi(n, t.stream(Ci)),
                            e(Ci.result()),
                            null != r && t.clipExtent(r),
                            t
                        )
                    }
                    function Di(t, e, n) {
                        return Ei(
                            t,
                            function (n) {
                                var r = e[1][0] - e[0][0],
                                    i = e[1][1] - e[0][1],
                                    a = Math.min(r / (n[1][0] - n[0][0]), i / (n[1][1] - n[0][1])),
                                    o = +e[0][0] + (r - a * (n[1][0] + n[0][0])) / 2,
                                    s = +e[0][1] + (i - a * (n[1][1] + n[0][1])) / 2
                                t.scale(150 * a).translate([o, s])
                            },
                            n
                        )
                    }
                    function Oi(t, e, n) {
                        return Di(t, [[0, 0], e], n)
                    }
                    function Ni(t, e, n) {
                        return Ei(
                            t,
                            function (n) {
                                var r = +e,
                                    i = r / (n[1][0] - n[0][0]),
                                    a = (r - i * (n[1][0] + n[0][0])) / 2,
                                    o = -i * n[0][1]
                                t.scale(150 * i).translate([a, o])
                            },
                            n
                        )
                    }
                    function Ii(t, e, n) {
                        return Ei(
                            t,
                            function (n) {
                                var r = +e,
                                    i = r / (n[1][1] - n[0][1]),
                                    a = -i * n[0][0],
                                    o = (r - i * (n[1][1] + n[0][1])) / 2
                                t.scale(150 * i).translate([a, o])
                            },
                            n
                        )
                    }
                    function Ri() {
                        return new Pi()
                    }
                    function Pi() {
                        this.reset()
                    }
                    Pi.prototype = {
                        constructor: Pi,
                        reset: function () {
                            this.s = this.t = 0
                        },
                        add: function (t) {
                            ji(Wi, t, this.t), ji(this, Wi.s, this.s), this.s ? (this.t += Wi.t) : (this.s = Wi.t)
                        },
                        valueOf: function () {
                            return this.s
                        },
                    }
                    var Wi = new Pi()
                    function ji(t, e, n) {
                        var r = (t.s = e + n),
                            i = r - e,
                            a = r - i
                        t.t = e - a + (n - i)
                    }
                    var Hi,
                        Bi,
                        Ui,
                        $i,
                        Gi = Ri(),
                        Vi = Ri(),
                        qi = {
                            point: li,
                            lineStart: li,
                            lineEnd: li,
                            polygonStart: function () {
                                ;(qi.lineStart = Yi), (qi.lineEnd = Ji)
                            },
                            polygonEnd: function () {
                                ;(qi.lineStart = qi.lineEnd = qi.point = li), Gi.add(Qr(Vi)), Vi.reset()
                            },
                            result: function () {
                                var t = Gi / 2
                                return Gi.reset(), t
                            },
                        }
                    function Yi() {
                        qi.point = Xi
                    }
                    function Xi(t, e) {
                        ;(qi.point = Ki), (Hi = Ui = t), (Bi = $i = e)
                    }
                    function Ki(t, e) {
                        Vi.add($i * t - Ui * e), (Ui = t), ($i = e)
                    }
                    function Ji() {
                        Ki(Hi, Bi)
                    }
                    var Zi,
                        Qi,
                        ta,
                        ea,
                        na = qi,
                        ra = 0,
                        ia = 0,
                        aa = 0,
                        oa = 0,
                        sa = 0,
                        la = 0,
                        ua = 0,
                        ca = 0,
                        fa = 0,
                        pa = {
                            point: ha,
                            lineStart: da,
                            lineEnd: ya,
                            polygonStart: function () {
                                ;(pa.lineStart = va), (pa.lineEnd = ma)
                            },
                            polygonEnd: function () {
                                ;(pa.point = ha), (pa.lineStart = da), (pa.lineEnd = ya)
                            },
                            result: function () {
                                var t = fa ? [ua / fa, ca / fa] : la ? [oa / la, sa / la] : aa ? [ra / aa, ia / aa] : [NaN, NaN]
                                return (ra = ia = aa = oa = sa = la = ua = ca = fa = 0), t
                            },
                        }
                    function ha(t, e) {
                        ;(ra += t), (ia += e), ++aa
                    }
                    function da() {
                        pa.point = ga
                    }
                    function ga(t, e) {
                        ;(pa.point = _a), ha((ta = t), (ea = e))
                    }
                    function _a(t, e) {
                        var n = t - ta,
                            r = e - ea,
                            i = oi(n * n + r * r)
                        ;(oa += (i * (ta + t)) / 2), (sa += (i * (ea + e)) / 2), (la += i), ha((ta = t), (ea = e))
                    }
                    function ya() {
                        pa.point = ha
                    }
                    function va() {
                        pa.point = xa
                    }
                    function ma() {
                        ba(Zi, Qi)
                    }
                    function xa(t, e) {
                        ;(pa.point = ba), ha((Zi = ta = t), (Qi = ea = e))
                    }
                    function ba(t, e) {
                        var n = t - ta,
                            r = e - ea,
                            i = oi(n * n + r * r)
                        ;(oa += (i * (ta + t)) / 2),
                            (sa += (i * (ea + e)) / 2),
                            (la += i),
                            (ua += (i = ea * t - ta * e) * (ta + t)),
                            (ca += i * (ea + e)),
                            (fa += 3 * i),
                            ha((ta = t), (ea = e))
                    }
                    var Sa = pa
                    function wa(t) {
                        this._context = t
                    }
                    wa.prototype = {
                        _radius: 4.5,
                        pointRadius: function (t) {
                            return (this._radius = t), this
                        },
                        polygonStart: function () {
                            this._line = 0
                        },
                        polygonEnd: function () {
                            this._line = NaN
                        },
                        lineStart: function () {
                            this._point = 0
                        },
                        lineEnd: function () {
                            0 === this._line && this._context.closePath(), (this._point = NaN)
                        },
                        point: function (t, e) {
                            switch (this._point) {
                                case 0:
                                    this._context.moveTo(t, e), (this._point = 1)
                                    break
                                case 1:
                                    this._context.lineTo(t, e)
                                    break
                                default:
                                    this._context.moveTo(t + this._radius, e), this._context.arc(t, e, this._radius, 0, Kr)
                            }
                        },
                        result: li,
                    }
                    var Ta,
                        za,
                        ka,
                        Fa,
                        Aa,
                        La = Ri(),
                        Ma = {
                            point: li,
                            lineStart: function () {
                                Ma.point = Ca
                            },
                            lineEnd: function () {
                                Ta && Ea(za, ka), (Ma.point = li)
                            },
                            polygonStart: function () {
                                Ta = !0
                            },
                            polygonEnd: function () {
                                Ta = null
                            },
                            result: function () {
                                var t = +La
                                return La.reset(), t
                            },
                        }
                    function Ca(t, e) {
                        ;(Ma.point = Ea), (za = Fa = t), (ka = Aa = e)
                    }
                    function Ea(t, e) {
                        ;(Fa -= t), (Aa -= e), La.add(oi(Fa * Fa + Aa * Aa)), (Fa = t), (Aa = e)
                    }
                    var Da,
                        Oa,
                        Na,
                        Ia,
                        Ra,
                        Pa,
                        Wa,
                        ja,
                        Ha,
                        Ba,
                        Ua,
                        $a,
                        Ga,
                        Va,
                        qa,
                        Ya,
                        Xa = Ma
                    function Ka() {
                        this._string = []
                    }
                    function Ja(t) {
                        return 'm0,' + t + 'a' + t + ',' + t + ' 0 1,1 0,' + -2 * t + 'a' + t + ',' + t + ' 0 1,1 0,' + 2 * t + 'z'
                    }
                    function Za(t, e, n) {
                        var r = zt(t, e - Vr, n).concat(e)
                        return function (t) {
                            return r.map(function (e) {
                                return [t, e]
                            })
                        }
                    }
                    function Qa(t, e, n) {
                        var r = zt(t, e - Vr, n).concat(e)
                        return function (t) {
                            return r.map(function (e) {
                                return [e, t]
                            })
                        }
                    }
                    function to() {
                        var t,
                            e,
                            n,
                            r,
                            i,
                            a,
                            o,
                            s,
                            l,
                            u,
                            c,
                            f,
                            p = 10,
                            h = p,
                            d = 90,
                            g = 360,
                            _ = 2.5
                        function y() {
                            return { type: 'MultiLineString', coordinates: v() }
                        }
                        function v() {
                            return zt(ri(r / d) * d, n, d)
                                .map(c)
                                .concat(zt(ri(s / g) * g, o, g).map(f))
                                .concat(
                                    zt(ri(e / p) * p, t, p)
                                        .filter(function (t) {
                                            return Qr(t % d) > Vr
                                        })
                                        .map(l)
                                )
                                .concat(
                                    zt(ri(a / h) * h, i, h)
                                        .filter(function (t) {
                                            return Qr(t % g) > Vr
                                        })
                                        .map(u)
                                )
                        }
                        return (
                            (y.lines = function () {
                                return v().map(function (t) {
                                    return { type: 'LineString', coordinates: t }
                                })
                            }),
                            (y.outline = function () {
                                return {
                                    type: 'Polygon',
                                    coordinates: [c(r).concat(f(o).slice(1), c(n).reverse().slice(1), f(s).reverse().slice(1))],
                                }
                            }),
                            (y.extent = function (t) {
                                return arguments.length ? y.extentMajor(t).extentMinor(t) : y.extentMinor()
                            }),
                            (y.extentMajor = function (t) {
                                return arguments.length
                                    ? ((r = +t[0][0]),
                                      (n = +t[1][0]),
                                      (s = +t[0][1]),
                                      (o = +t[1][1]),
                                      r > n && ((t = r), (r = n), (n = t)),
                                      s > o && ((t = s), (s = o), (o = t)),
                                      y.precision(_))
                                    : [
                                          [r, s],
                                          [n, o],
                                      ]
                            }),
                            (y.extentMinor = function (n) {
                                return arguments.length
                                    ? ((e = +n[0][0]),
                                      (t = +n[1][0]),
                                      (a = +n[0][1]),
                                      (i = +n[1][1]),
                                      e > t && ((n = e), (e = t), (t = n)),
                                      a > i && ((n = a), (a = i), (i = n)),
                                      y.precision(_))
                                    : [
                                          [e, a],
                                          [t, i],
                                      ]
                            }),
                            (y.step = function (t) {
                                return arguments.length ? y.stepMajor(t).stepMinor(t) : y.stepMinor()
                            }),
                            (y.stepMajor = function (t) {
                                return arguments.length ? ((d = +t[0]), (g = +t[1]), y) : [d, g]
                            }),
                            (y.stepMinor = function (t) {
                                return arguments.length ? ((p = +t[0]), (h = +t[1]), y) : [p, h]
                            }),
                            (y.precision = function (p) {
                                return arguments.length
                                    ? ((_ = +p), (l = Za(a, i, 90)), (u = Qa(e, t, _)), (c = Za(s, o, 90)), (f = Qa(r, n, _)), y)
                                    : _
                            }),
                            y
                                .extentMajor([
                                    [-180, -90 + Vr],
                                    [180, 90 - Vr],
                                ])
                                .extentMinor([
                                    [-180, -80 - Vr],
                                    [180, 80 + Vr],
                                ])
                        )
                    }
                    Ka.prototype = {
                        _radius: 4.5,
                        _circle: Ja(4.5),
                        pointRadius: function (t) {
                            return (t = +t) !== this._radius && ((this._radius = t), (this._circle = null)), this
                        },
                        polygonStart: function () {
                            this._line = 0
                        },
                        polygonEnd: function () {
                            this._line = NaN
                        },
                        lineStart: function () {
                            this._point = 0
                        },
                        lineEnd: function () {
                            0 === this._line && this._string.push('Z'), (this._point = NaN)
                        },
                        point: function (t, e) {
                            switch (this._point) {
                                case 0:
                                    this._string.push('M', t, ',', e), (this._point = 1)
                                    break
                                case 1:
                                    this._string.push('L', t, ',', e)
                                    break
                                default:
                                    null == this._circle && (this._circle = Ja(this._radius)), this._string.push('M', t, ',', e, this._circle)
                            }
                        },
                        result: function () {
                            if (this._string.length) {
                                var t = this._string.join('')
                                return (this._string = []), t
                            }
                            return null
                        },
                    }
                    var eo = {
                        sphere: li,
                        point: no,
                        lineStart: io,
                        lineEnd: so,
                        polygonStart: function () {
                            ;(eo.lineStart = lo), (eo.lineEnd = uo)
                        },
                        polygonEnd: function () {
                            ;(eo.lineStart = io), (eo.lineEnd = so)
                        },
                    }
                    function no(t, e) {
                        t *= Zr
                        var n = ni((e *= Zr))
                        ro(n * ni(t), n * ii(t), ii(e))
                    }
                    function ro(t, e, n) {
                        ++Da, (Na += (t - Na) / Da), (Ia += (e - Ia) / Da), (Ra += (n - Ra) / Da)
                    }
                    function io() {
                        eo.point = ao
                    }
                    function ao(t, e) {
                        t *= Zr
                        var n = ni((e *= Zr))
                        ;(Va = n * ni(t)), (qa = n * ii(t)), (Ya = ii(e)), (eo.point = oo), ro(Va, qa, Ya)
                    }
                    function oo(t, e) {
                        t *= Zr
                        var n = ni((e *= Zr)),
                            r = n * ni(t),
                            i = n * ii(t),
                            a = ii(e),
                            o = ei(oi((o = qa * a - Ya * i) * o + (o = Ya * r - Va * a) * o + (o = Va * i - qa * r) * o), Va * r + qa * i + Ya * a)
                        ;(Oa += o), (Pa += o * (Va + (Va = r))), (Wa += o * (qa + (qa = i))), (ja += o * (Ya + (Ya = a))), ro(Va, qa, Ya)
                    }
                    function so() {
                        eo.point = no
                    }
                    function lo() {
                        eo.point = co
                    }
                    function uo() {
                        fo($a, Ga), (eo.point = no)
                    }
                    function co(t, e) {
                        ;($a = t), (Ga = e), (t *= Zr), (e *= Zr), (eo.point = fo)
                        var n = ni(e)
                        ;(Va = n * ni(t)), (qa = n * ii(t)), (Ya = ii(e)), ro(Va, qa, Ya)
                    }
                    function fo(t, e) {
                        t *= Zr
                        var n = ni((e *= Zr)),
                            r = n * ni(t),
                            i = n * ii(t),
                            a = ii(e),
                            o = qa * a - Ya * i,
                            s = Ya * r - Va * a,
                            l = Va * i - qa * r,
                            u = oi(o * o + s * s + l * l),
                            c = si(u),
                            f = u && -c / u
                        ;(Ha += f * o),
                            (Ba += f * s),
                            (Ua += f * l),
                            (Oa += c),
                            (Pa += c * (Va + (Va = r))),
                            (Wa += c * (qa + (qa = i))),
                            (ja += c * (Ya + (Ya = a))),
                            ro(Va, qa, Ya)
                    }
                    function po(t) {
                        ;(Da = Oa = Na = Ia = Ra = Pa = Wa = ja = Ha = Ba = Ua = 0), zi(t, eo)
                        var e = Ha,
                            n = Ba,
                            r = Ua,
                            i = e * e + n * n + r * r
                        return i < 1e-12 &&
                            ((e = Pa), (n = Wa), (r = ja), Oa < Vr && ((e = Na), (n = Ia), (r = Ra)), (i = e * e + n * n + r * r) < 1e-12)
                            ? [NaN, NaN]
                            : [ei(n, e) * Jr, si(r / oi(i)) * Jr]
                    }
                    function ho(t) {
                        return [ei(t[1], t[0]), si(t[2])]
                    }
                    function go(t) {
                        var e = t[0],
                            n = t[1],
                            r = ni(n)
                        return [r * ni(e), r * ii(e), ii(n)]
                    }
                    function _o(t, e) {
                        return t[0] * e[0] + t[1] * e[1] + t[2] * e[2]
                    }
                    function yo(t, e) {
                        return [t[1] * e[2] - t[2] * e[1], t[2] * e[0] - t[0] * e[2], t[0] * e[1] - t[1] * e[0]]
                    }
                    function vo(t, e) {
                        ;(t[0] += e[0]), (t[1] += e[1]), (t[2] += e[2])
                    }
                    function mo(t, e) {
                        return [t[0] * e, t[1] * e, t[2] * e]
                    }
                    function xo(t) {
                        var e = oi(t[0] * t[0] + t[1] * t[1] + t[2] * t[2])
                        ;(t[0] /= e), (t[1] /= e), (t[2] /= e)
                    }
                    var bo = Ri()
                    function So(t) {
                        return Qr(t[0]) <= qr ? t[0] : ai(t[0]) * (((Qr(t[0]) + qr) % Kr) - qr)
                    }
                    function wo(t, e, n, r) {
                        return function (i) {
                            var a,
                                o,
                                s,
                                l = e(i),
                                u = ui(),
                                c = e(u),
                                f = !1,
                                p = {
                                    point: h,
                                    lineStart: g,
                                    lineEnd: _,
                                    polygonStart: function () {
                                        ;(p.point = y), (p.lineStart = v), (p.lineEnd = m), (o = []), (a = [])
                                    },
                                    polygonEnd: function () {
                                        ;(p.point = h), (p.lineStart = g), (p.lineEnd = _), (o = wt(o))
                                        var t = (function (t, e) {
                                            var n = So(e),
                                                r = e[1],
                                                i = ii(r),
                                                a = [ii(n), -ni(n), 0],
                                                o = 0,
                                                s = 0
                                            bo.reset(), 1 === i ? (r = Yr + Vr) : -1 === i && (r = -Yr - Vr)
                                            for (var l = 0, u = t.length; l < u; ++l)
                                                if ((f = (c = t[l]).length))
                                                    for (
                                                        var c, f, p = c[f - 1], h = So(p), d = p[1] / 2 + Xr, g = ii(d), _ = ni(d), y = 0;
                                                        y < f;
                                                        ++y, h = m, g = b, _ = S, p = v
                                                    ) {
                                                        var v = c[y],
                                                            m = So(v),
                                                            x = v[1] / 2 + Xr,
                                                            b = ii(x),
                                                            S = ni(x),
                                                            w = m - h,
                                                            T = w >= 0 ? 1 : -1,
                                                            z = T * w,
                                                            k = z > qr,
                                                            F = g * b
                                                        if (
                                                            (bo.add(ei(F * T * ii(z), _ * S + F * ni(z))),
                                                            (o += k ? w + T * Kr : w),
                                                            k ^ (h >= n) ^ (m >= n))
                                                        ) {
                                                            var A = yo(go(p), go(v))
                                                            xo(A)
                                                            var L = yo(a, A)
                                                            xo(L)
                                                            var M = (k ^ (w >= 0) ? -1 : 1) * si(L[2])
                                                            ;(r > M || (r === M && (A[0] || A[1]))) && (s += k ^ (w >= 0) ? 1 : -1)
                                                        }
                                                    }
                                            return (o < -Vr || (o < Vr && bo < -Vr)) ^ (1 & s)
                                        })(a, r)
                                        o.length
                                            ? (f || (i.polygonStart(), (f = !0)), pi(o, zo, t, n, i))
                                            : t && (f || (i.polygonStart(), (f = !0)), i.lineStart(), n(null, null, 1, i), i.lineEnd()),
                                            f && (i.polygonEnd(), (f = !1)),
                                            (o = a = null)
                                    },
                                    sphere: function () {
                                        i.polygonStart(), i.lineStart(), n(null, null, 1, i), i.lineEnd(), i.polygonEnd()
                                    },
                                }
                            function h(e, n) {
                                t(e, n) && i.point(e, n)
                            }
                            function d(t, e) {
                                l.point(t, e)
                            }
                            function g() {
                                ;(p.point = d), l.lineStart()
                            }
                            function _() {
                                ;(p.point = h), l.lineEnd()
                            }
                            function y(t, e) {
                                s.push([t, e]), c.point(t, e)
                            }
                            function v() {
                                c.lineStart(), (s = [])
                            }
                            function m() {
                                y(s[0][0], s[0][1]), c.lineEnd()
                                var t,
                                    e,
                                    n,
                                    r,
                                    l = c.clean(),
                                    p = u.result(),
                                    h = p.length
                                if ((s.pop(), a.push(s), (s = null), h))
                                    if (1 & l) {
                                        if ((e = (n = p[0]).length - 1) > 0) {
                                            for (f || (i.polygonStart(), (f = !0)), i.lineStart(), t = 0; t < e; ++t) i.point((r = n[t])[0], r[1])
                                            i.lineEnd()
                                        }
                                    } else h > 1 && 2 & l && p.push(p.pop().concat(p.shift())), o.push(p.filter(To))
                            }
                            return p
                        }
                    }
                    function To(t) {
                        return t.length > 1
                    }
                    function zo(t, e) {
                        return ((t = t.x)[0] < 0 ? t[1] - Yr - Vr : Yr - t[1]) - ((e = e.x)[0] < 0 ? e[1] - Yr - Vr : Yr - e[1])
                    }
                    var ko = wo(
                        function () {
                            return !0
                        },
                        function (t) {
                            var e,
                                n = NaN,
                                r = NaN,
                                i = NaN
                            return {
                                lineStart: function () {
                                    t.lineStart(), (e = 1)
                                },
                                point: function (a, o) {
                                    var s = a > 0 ? qr : -qr,
                                        l = Qr(a - n)
                                    Qr(l - qr) < Vr
                                        ? (t.point(n, (r = (r + o) / 2 > 0 ? Yr : -Yr)),
                                          t.point(i, r),
                                          t.lineEnd(),
                                          t.lineStart(),
                                          t.point(s, r),
                                          t.point(a, r),
                                          (e = 0))
                                        : i !== s &&
                                          l >= qr &&
                                          (Qr(n - i) < Vr && (n -= i * Vr),
                                          Qr(a - s) < Vr && (a -= s * Vr),
                                          (r = (function (t, e, n, r) {
                                              var i,
                                                  a,
                                                  o = ii(t - n)
                                              return Qr(o) > Vr
                                                  ? ti((ii(e) * (a = ni(r)) * ii(n) - ii(r) * (i = ni(e)) * ii(t)) / (i * a * o))
                                                  : (e + r) / 2
                                          })(n, r, a, o)),
                                          t.point(i, r),
                                          t.lineEnd(),
                                          t.lineStart(),
                                          t.point(s, r),
                                          (e = 0)),
                                        t.point((n = a), (r = o)),
                                        (i = s)
                                },
                                lineEnd: function () {
                                    t.lineEnd(), (n = r = NaN)
                                },
                                clean: function () {
                                    return 2 - e
                                },
                            }
                        },
                        function (t, e, n, r) {
                            var i
                            if (null == t)
                                (i = n * Yr),
                                    r.point(-qr, i),
                                    r.point(0, i),
                                    r.point(qr, i),
                                    r.point(qr, 0),
                                    r.point(qr, -i),
                                    r.point(0, -i),
                                    r.point(-qr, -i),
                                    r.point(-qr, 0),
                                    r.point(-qr, i)
                            else if (Qr(t[0] - e[0]) > Vr) {
                                var a = t[0] < e[0] ? qr : -qr
                                ;(i = (n * a) / 2), r.point(-a, i), r.point(0, i), r.point(a, i)
                            } else r.point(e[0], e[1])
                        },
                        [-qr, -Yr]
                    )
                    function Fo(t, e) {
                        ;((e = go(e))[0] -= t), xo(e)
                        var n,
                            r = (n = -e[1]) > 1 ? 0 : n < -1 ? qr : Math.acos(n)
                        return ((-e[2] < 0 ? -r : r) + Kr - Vr) % Kr
                    }
                    function Ao(t, e) {
                        function n(n, r) {
                            return (n = t(n, r)), e(n[0], n[1])
                        }
                        return (
                            t.invert &&
                                e.invert &&
                                (n.invert = function (n, r) {
                                    return (n = e.invert(n, r)) && t.invert(n[0], n[1])
                                }),
                            n
                        )
                    }
                    function Lo(t, e) {
                        return [Qr(t) > qr ? t + Math.round(-t / Kr) * Kr : t, e]
                    }
                    function Mo(t) {
                        return function (e, n) {
                            return [(e += t) > qr ? e - Kr : e < -qr ? e + Kr : e, n]
                        }
                    }
                    function Co(t) {
                        var e = Mo(t)
                        return (e.invert = Mo(-t)), e
                    }
                    function Eo(t, e) {
                        var n = ni(t),
                            r = ii(t),
                            i = ni(e),
                            a = ii(e)
                        function o(t, e) {
                            var o = ni(e),
                                s = ni(t) * o,
                                l = ii(t) * o,
                                u = ii(e),
                                c = u * n + s * r
                            return [ei(l * i - c * a, s * n - u * r), si(c * i + l * a)]
                        }
                        return (
                            (o.invert = function (t, e) {
                                var o = ni(e),
                                    s = ni(t) * o,
                                    l = ii(t) * o,
                                    u = ii(e),
                                    c = u * i - l * a
                                return [ei(l * i + u * a, s * n + c * r), si(c * n - s * r)]
                            }),
                            o
                        )
                    }
                    Lo.invert = Lo
                    var Do = ni(30 * Zr)
                    function Oo(t, e) {
                        return +e
                            ? (function (t, e) {
                                  function n(r, i, a, o, s, l, u, c, f, p, h, d, g, _) {
                                      var y = u - r,
                                          v = c - i,
                                          m = y * y + v * v
                                      if (m > 4 * e && g--) {
                                          var x = o + p,
                                              b = s + h,
                                              S = l + d,
                                              w = oi(x * x + b * b + S * S),
                                              T = si((S /= w)),
                                              z = Qr(Qr(S) - 1) < Vr || Qr(a - f) < Vr ? (a + f) / 2 : ei(b, x),
                                              k = t(z, T),
                                              F = k[0],
                                              A = k[1],
                                              L = F - r,
                                              M = A - i,
                                              C = v * L - y * M
                                          ;((C * C) / m > e || Qr((y * L + v * M) / m - 0.5) > 0.3 || o * p + s * h + l * d < Do) &&
                                              (n(r, i, a, o, s, l, F, A, z, (x /= w), (b /= w), S, g, _),
                                              _.point(F, A),
                                              n(F, A, z, x, b, S, u, c, f, p, h, d, g, _))
                                      }
                                  }
                                  return function (e) {
                                      var r,
                                          i,
                                          a,
                                          o,
                                          s,
                                          l,
                                          u,
                                          c,
                                          f,
                                          p,
                                          h,
                                          d,
                                          g = {
                                              point: _,
                                              lineStart: y,
                                              lineEnd: m,
                                              polygonStart: function () {
                                                  e.polygonStart(), (g.lineStart = x)
                                              },
                                              polygonEnd: function () {
                                                  e.polygonEnd(), (g.lineStart = y)
                                              },
                                          }
                                      function _(n, r) {
                                          ;(n = t(n, r)), e.point(n[0], n[1])
                                      }
                                      function y() {
                                          ;(c = NaN), (g.point = v), e.lineStart()
                                      }
                                      function v(r, i) {
                                          var a = go([r, i]),
                                              o = t(r, i)
                                          n(c, f, u, p, h, d, (c = o[0]), (f = o[1]), (u = r), (p = a[0]), (h = a[1]), (d = a[2]), 16, e),
                                              e.point(c, f)
                                      }
                                      function m() {
                                          ;(g.point = _), e.lineEnd()
                                      }
                                      function x() {
                                          y(), (g.point = b), (g.lineEnd = S)
                                      }
                                      function b(t, e) {
                                          v((r = t), e), (i = c), (a = f), (o = p), (s = h), (l = d), (g.point = v)
                                      }
                                      function S() {
                                          n(c, f, u, p, h, d, i, a, r, o, s, l, 16, e), (g.lineEnd = m), m()
                                      }
                                      return g
                                  }
                              })(t, e)
                            : (function (t) {
                                  return vi({
                                      point: function (e, n) {
                                          ;(e = t(e, n)), this.stream.point(e[0], e[1])
                                      },
                                  })
                              })(t)
                    }
                    var No = vi({
                        point: function (t, e) {
                            this.stream.point(t * Zr, e * Zr)
                        },
                    })
                    function Io(t, e, n, r, i) {
                        function a(a, o) {
                            return [e + t * (a *= r), n - t * (o *= i)]
                        }
                        return (
                            (a.invert = function (a, o) {
                                return [((a - e) / t) * r, ((n - o) / t) * i]
                            }),
                            a
                        )
                    }
                    function Ro(t, e, n, r, i, a) {
                        var o = ni(a),
                            s = ii(a),
                            l = o * t,
                            u = s * t,
                            c = o / t,
                            f = s / t,
                            p = (s * n - o * e) / t,
                            h = (s * e + o * n) / t
                        function d(t, a) {
                            return [l * (t *= r) - u * (a *= i) + e, n - u * t - l * a]
                        }
                        return (
                            (d.invert = function (t, e) {
                                return [r * (c * t - f * e + p), i * (h - f * t - c * e)]
                            }),
                            d
                        )
                    }
                    var Po = Math.abs,
                        Wo = (Math.atan, Math.atan2, Math.ceil, Math.cos, Math.exp, Math.floor),
                        jo = (Math.log, Math.max),
                        Ho = Math.min,
                        Bo = (Math.pow, Math.round, Math.sign, Math.sin, Math.tan, Math.PI),
                        Uo = Bo / 2,
                        $o = (Math.SQRT1_2, Vo(2), Vo(Bo), 180 / Bo),
                        Go = Bo / 180
                    function Vo(t) {
                        return t > 0 ? Math.sqrt(t) : 0
                    }
                    var qo = [
                        [0.9986, -0.062],
                        [1, 0],
                        [0.9986, 0.062],
                        [0.9954, 0.124],
                        [0.99, 0.186],
                        [0.9822, 0.248],
                        [0.973, 0.31],
                        [0.96, 0.372],
                        [0.9427, 0.434],
                        [0.9216, 0.4958],
                        [0.8962, 0.5571],
                        [0.8679, 0.6176],
                        [0.835, 0.6769],
                        [0.7986, 0.7346],
                        [0.7597, 0.7903],
                        [0.7186, 0.8435],
                        [0.6732, 0.8936],
                        [0.6213, 0.9394],
                        [0.5722, 0.9761],
                        [0.5322, 1],
                    ]
                    function Yo(t, e) {
                        var n,
                            r = Ho(18, (36 * Po(e)) / Bo),
                            i = Wo(r),
                            a = r - i,
                            o = (n = qo[i])[0],
                            s = n[1],
                            l = (n = qo[++i])[0],
                            u = n[1],
                            c = (n = qo[Ho(19, ++i)])[0],
                            f = n[1]
                        return [
                            t * (l + (a * (c - o)) / 2 + (a * a * (c - 2 * l + o)) / 2),
                            (e > 0 ? Uo : -Uo) * (u + (a * (f - s)) / 2 + (a * a * (f - 2 * u + s)) / 2),
                        ]
                    }
                    function Xo(t) {
                        return t
                    }
                    function Ko(t, e) {
                        return (
                            'string' == typeof e && (e = t.objects[e]),
                            'GeometryCollection' === e.type
                                ? {
                                      type: 'FeatureCollection',
                                      features: e.geometries.map(function (e) {
                                          return Jo(t, e)
                                      }),
                                  }
                                : Jo(t, e)
                        )
                    }
                    function Jo(t, e) {
                        var n = e.id,
                            r = e.bbox,
                            i = null == e.properties ? {} : e.properties,
                            a = (function (t, e) {
                                var n = (function (t) {
                                        if (null == t) return Xo
                                        var e,
                                            n,
                                            r = t.scale[0],
                                            i = t.scale[1],
                                            a = t.translate[0],
                                            o = t.translate[1]
                                        return function (t, s) {
                                            s || (e = n = 0)
                                            var l = 2,
                                                u = t.length,
                                                c = new Array(u)
                                            for (c[0] = (e += t[0]) * r + a, c[1] = (n += t[1]) * i + o; l < u; ) (c[l] = t[l]), ++l
                                            return c
                                        }
                                    })(t.transform),
                                    r = t.arcs
                                function i(t, e) {
                                    e.length && e.pop()
                                    for (var i = r[t < 0 ? ~t : t], a = 0, o = i.length; a < o; ++a) e.push(n(i[a], a))
                                    t < 0 &&
                                        (function (t, e) {
                                            for (var n, r = t.length, i = r - e; i < --r; ) (n = t[i]), (t[i++] = t[r]), (t[r] = n)
                                        })(e, o)
                                }
                                function a(t) {
                                    return n(t)
                                }
                                function o(t) {
                                    for (var e = [], n = 0, r = t.length; n < r; ++n) i(t[n], e)
                                    return e.length < 2 && e.push(e[0]), e
                                }
                                function s(t) {
                                    for (var e = o(t); e.length < 4; ) e.push(e[0])
                                    return e
                                }
                                function l(t) {
                                    return t.map(s)
                                }
                                return (function t(e) {
                                    var n,
                                        r = e.type
                                    switch (r) {
                                        case 'GeometryCollection':
                                            return { type: r, geometries: e.geometries.map(t) }
                                        case 'Point':
                                            n = a(e.coordinates)
                                            break
                                        case 'MultiPoint':
                                            n = e.coordinates.map(a)
                                            break
                                        case 'LineString':
                                            n = o(e.arcs)
                                            break
                                        case 'MultiLineString':
                                            n = e.arcs.map(o)
                                            break
                                        case 'Polygon':
                                            n = l(e.arcs)
                                            break
                                        case 'MultiPolygon':
                                            n = e.arcs.map(l)
                                            break
                                        default:
                                            return null
                                    }
                                    return { type: r, coordinates: n }
                                })(e)
                            })(t, e)
                        return null == n && null == r
                            ? { type: 'Feature', properties: i, geometry: a }
                            : null == r
                              ? { type: 'Feature', id: n, properties: i, geometry: a }
                              : { type: 'Feature', id: n, bbox: r, properties: i, geometry: a }
                    }
                    qo.forEach(function (t) {
                        t[1] *= 1.0144
                    }),
                        (Yo.invert = function (t, e) {
                            var n = e / Uo,
                                r = 90 * n,
                                i = Ho(18, Po(r / 5)),
                                a = jo(0, Wo(i))
                            do {
                                var o = qo[a][1],
                                    s = qo[a + 1][1],
                                    l = qo[Ho(19, a + 2)][1],
                                    u = l - o,
                                    c = l - 2 * s + o,
                                    f = (2 * (Po(n) - s)) / u,
                                    p = c / u,
                                    h = f * (1 - p * f * (1 - 2 * p * f))
                                if (h >= 0 || 1 === a) {
                                    r = (e >= 0 ? 5 : -5) * (h + i)
                                    var d,
                                        g = 50
                                    do {
                                        ;(h = (i = Ho(18, Po(r) / 5)) - (a = Wo(i))),
                                            (o = qo[a][1]),
                                            (s = qo[a + 1][1]),
                                            (l = qo[Ho(19, a + 2)][1]),
                                            (r -= (d = (e >= 0 ? Uo : -Uo) * (s + (h * (l - o)) / 2 + (h * h * (l - 2 * s + o)) / 2) - e) * $o)
                                    } while (Po(d) > 1e-12 && --g > 0)
                                    break
                                }
                            } while (--a >= 0)
                            var _ = qo[a][0],
                                y = qo[a + 1][0],
                                v = qo[Ho(19, a + 2)][0]
                            return [t / (y + (h * (v - _)) / 2 + (h * h * (v - 2 * y + _)) / 2), r * Go]
                        })
                    var Zo = function (t) {
                            return t.toLocaleString('en').replace(/,/gi, ' ')
                        },
                        Qo = function (t) {
                            var e
                            function n() {
                                ;(e = yt('#' + t.div)).empty() && (e = yt('body').append('div').attr('id', t.div)),
                                    e.style('max-width', t.maxWidth),
                                    e.style('overflow', 'hidden'),
                                    e.style('font-size', t.fontSize),
                                    e.style('background', t.background),
                                    e.style('padding', t.padding),
                                    e.style('border', t.border),
                                    e.style('border-radius', t.borderRadius),
                                    e.style('box-shadow', t.boxShadow),
                                    e.style('position', 'absolute'),
                                    e.style('font-family', t.fontFamily),
                                    e.style('pointer-events', 'none'),
                                    e.style('opacity', '0')
                            }
                            return (
                                ((t = t || {}).containerId = t.containerId || 'map'),
                                (t.div = t.div || 'tooltip_eurostat'),
                                (t.maxWidth = t.maxWidth || '200px'),
                                (t.fontSize = t.fontSize || '14px'),
                                (t.background = t.background || 'white'),
                                (t.padding = t.padding || '0px'),
                                (t.border = t.border || '0px'),
                                (t.borderRadius = t.borderRadius || '0px'),
                                (t.boxShadow = t.boxShadow || '0px 0px 0px grey'),
                                (t.fontFamily = t.fontFamily || 'Helvetica, Arial, sans-serif'),
                                (t.transitionDuration = t.transitionDuration || 0),
                                (t.xOffset = t.xOffset || 30),
                                (t.yOffset = t.yOffset || 20),
                                (n.mouseover = function (t) {
                                    t && e.html(t)
                                    var r = event.pageX,
                                        i = event.pageY
                                    n.ensureTooltipOnScreen(r, i)
                                }),
                                (n.mousemove = function (t) {
                                    var e = t.pageX,
                                        n = t.pageY
                                    this.ensureTooltipOnScreen(e, n)
                                }),
                                (n.mouseout = function () {
                                    e.style('opacity', 0)
                                }),
                                (n.style = function (t, r) {
                                    return 1 == arguments.length ? e.style(t) : (e.style(t, r), n)
                                }),
                                (n.attr = function (t, r) {
                                    return 1 == arguments.length ? e.attr(t) : (e.attr(t, r), n)
                                }),
                                (n.ensureTooltipOnScreen = function (n, r) {
                                    e.style('opacity', 1)
                                    var i = e.node()
                                    ;(i.style.left = n + t.xOffset + 'px'), (i.style.top = r - t.yOffset + 'px')
                                    var a = document.getElementById(t.containerId).getBoundingClientRect(),
                                        o = a.width,
                                        s = a.height
                                    if (i.offsetLeft > a.left + o - i.clientWidth) {
                                        var l = n - i.clientWidth - t.xOffset
                                        if (((i.style.left = l + 'px'), i.offsetLeft + i.clientWidth > n)) {
                                            var u = n - i.clientWidth - t.xOffset
                                            i.style.left = u + 'px'
                                        }
                                    }
                                    i.offsetTop + i.clientHeight > a.top + s && (i.style.top = i.offsetTop - i.clientHeight + 'px')
                                }),
                                n(),
                                n
                            )
                        },
                        ts = {
                            EUR_3035: {
                                cc: [
                                    { text: 'AL', x: 51e5, y: 206e4, class: 'cc', size: 7 },
                                    { text: 'AT', x: 467e4, y: 2629e3, class: 'cc', size: 18 },
                                    { text: 'BE', x: 393e4, y: 301e4, class: 'cc', size: 17 },
                                    { text: 'BG', x: 5567e3, y: 22e5, class: 'cc', size: 22 },
                                    { text: 'HR', x: 4876e3, y: 2455e3, class: 'cc', size: 10 },
                                    { text: 'CY', x: 6426e3, y: 148e4, class: 'cc', size: 10 },
                                    { text: 'CZ', x: 4707e3, y: 2885e3, class: 'cc', size: 18 },
                                    { text: 'DK', x: 4316e3, y: 3621e3, class: 'cc', size: 20 },
                                    { text: 'EE', x: 522e4, y: 399e4, class: 'cc', size: 12 },
                                    { text: 'FI', x: 515e4, y: 4424e3, class: 'cc', size: 20 },
                                    { text: 'FR', x: 3767740, y: 2662817, class: 'cc', size: 22 },
                                    { text: 'DE', x: 4347284, y: 3093276, class: 'cc', size: 22 },
                                    { text: 'EL', x: 537e4, y: 175e4, class: 'cc', size: 22 },
                                    { text: 'HU', x: 502e4, y: 263e4, class: 'cc', size: 17 },
                                    { text: 'IS', x: 304e4, y: 4833e3, class: 'cc', size: 10 },
                                    { text: 'IE', x: 3136e3, y: 3394e3, class: 'cc', size: 17 },
                                    { text: 'IT', x: 4469967, y: 2181963, class: 'cc', size: 22 },
                                    { text: 'LV', x: 529e4, y: 38e5, class: 'cc', size: 12 },
                                    { text: 'LT', x: 519e4, y: 363e4, class: 'cc', size: 12 },
                                    { text: 'LU', x: 412e4, y: 294e4, class: 'cc', size: 12 },
                                    { text: 'MT', x: 4731e3, y: 13e5, class: 'cc', size: 10 },
                                    { text: 'ME', x: 5073e3, y: 2185e3, class: 'cc', size: 7 },
                                    { text: 'MK', x: 53e5, y: 208e4, class: 'cc', size: 10 },
                                    { text: 'NL', x: 402e4, y: 3208e3, class: 'cc', size: 17 },
                                    { text: 'NO', x: 43e5, y: 4147e3, class: 'cc', size: 20 },
                                    { text: 'PL', x: 4964e3, y: 32e5, class: 'cc', size: 22 },
                                    { text: 'PT', x: 28e5, y: 199e4, class: 'cc', size: 18 },
                                    { text: 'RO', x: 5451e3, y: 26e5, class: 'cc', size: 22 },
                                    { text: 'RS', x: 52e5, y: 23e5, class: 'cc', size: 10 },
                                    { text: 'SK', x: 504e4, y: 2835e3, class: 'cc', size: 12 },
                                    { text: 'SI', x: 4655e3, y: 248e4, class: 'cc', size: 10 },
                                    { text: 'ES', x: 3160096, y: 19e5, class: 'cc', size: 22 },
                                    { text: 'SE', x: 463e4, y: 4e6, class: 'cc', size: 20 },
                                    { text: 'CH', x: 42e5, y: 2564e3, class: 'cc', size: 16 },
                                    { text: 'TR', x: 651e4, y: 21e5, class: 'cc', size: 22 },
                                    { text: 'UK', x: 3558e3, y: 325e4, class: 'cc', size: 17 },
                                ],
                                en: [
                                    { text: 'MEDITERRANEAN SEA', x: 5472e3, y: 12e5, class: 'seas', size: 12, letterSpacing: 7 },
                                    { text: 'ATLANTIC OCEAN', x: 282e4, y: 254e4, class: 'seas', size: 12, letterSpacing: 2 },
                                    { text: 'NORTH SEA', x: 3915e3, y: 37e5, class: 'seas', size: 12 },
                                    { text: 'BALTIC SEA', x: 49e5, y: 3672e3, class: 'seas', size: 10, rotate: -50 },
                                    { text: 'NORWEGIAN SEA', x: 385e4, y: 48e5, class: 'seas', size: 12, letterSpacing: 1 },
                                    { text: 'BLACK SEA', x: 63e5, y: 25e5, class: 'seas', size: 12, letterSpacing: 4 },
                                    { text: 'ALBANIA', cc: 'AL', x: 51e5, y: 206e4, class: 'countries', size: 7, rotate: 80 },
                                    { text: 'AUSTRIA', cc: 'AT', x: 467e4, y: 2629e3, class: 'countries', size: 10 },
                                    { text: 'BELGIUM', cc: 'BE', x: 39e5, y: 303e4, class: 'countries', size: 7, rotate: 30 },
                                    { text: 'BULGARIA', cc: 'BG', x: 5567e3, y: 2256e3, class: 'countries', size: 12 },
                                    { text: 'CROATIA', cc: 'HR', x: 4876e3, y: 2455e3, class: 'countries', size: 7 },
                                    { text: 'CYPRUS', cc: 'CY', x: 6426e3, y: 148e4, class: 'countries', size: 10 },
                                    { text: 'CZECHIA', cc: 'CZ', x: 4707e3, y: 2885e3, class: 'countries', size: 12 },
                                    { text: 'DENMARK', cc: 'DK', x: 4316e3, y: 3621e3, class: 'countries', size: 10 },
                                    { text: 'ESTONIA', cc: 'EE', x: 522e4, y: 399e4, class: 'countries', size: 7 },
                                    { text: 'FINLAND', cc: 'FI', x: 515e4, y: 4424e3, class: 'countries', size: 12 },
                                    { text: 'FRANCE', cc: 'FR', x: 3767740, y: 2662817, class: 'countries', size: 12 },
                                    { text: 'GERMANY', cc: 'DE', x: 4347284, y: 3093276, class: 'countries', size: 12 },
                                    { text: 'GREECE', cc: 'EL', x: 547e4, y: 186e4, class: 'countries', size: 12 },
                                    { text: 'HUNGARY', cc: 'HU', x: 502e4, y: 263e4, class: 'countries', size: 10 },
                                    { text: 'ICELAND', cc: 'IS', x: 304e4, y: 4833e3, class: 'countries', size: 10 },
                                    { text: 'IRELAND', cc: 'IE', x: 3136e3, y: 3394e3, class: 'countries', size: 10 },
                                    { text: 'ITALY', cc: 'IT', x: 4469967, y: 2181963, class: 'countries', size: 12 },
                                    { text: 'LATVIA', cc: 'LV', x: 529e4, y: 38e5, class: 'countries', size: 7 },
                                    { text: 'LITHUANIA', cc: 'LT', x: 519e4, y: 363e4, class: 'countries', size: 7 },
                                    { text: 'LUX.', cc: 'LU', x: 412e4, y: 294e4, class: 'countries', size: 7 },
                                    { text: 'MALTA', cc: 'MT', x: 4731e3, y: 133e4, class: 'countries', size: 7 },
                                    { text: 'MONT.', cc: 'ME', x: 5073e3, y: 2185e3, class: 'countries', size: 7 },
                                    { text: 'N. MACEDONIA', cc: 'MK', x: 53e5, y: 2082e3, class: 'countries', size: 7 },
                                    { text: 'NETHERLANDS', cc: 'NL', x: 3977e3, y: 3208e3, class: 'countries', size: 7 },
                                    { text: 'NORWAY', cc: 'NO', x: 433e4, y: 4147e3, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'POLAND', cc: 'PL', x: 4964e3, y: 3269e3, class: 'countries', size: 12 },
                                    { text: 'PORTUGAL', cc: 'PT', x: 283e4, y: 199e4, class: 'countries', size: 10, rotate: -75 },
                                    { text: 'ROMANIA', cc: 'RO', x: 5451e3, y: 26e5, class: 'countries', size: 12 },
                                    { text: 'SERBIA', cc: 'RS', x: 52e5, y: 23e5, class: 'countries', size: 7 },
                                    { text: 'SLOVAKIA', cc: 'SK', x: 504e4, y: 2835e3, class: 'countries', size: 7, rotate: -30 },
                                    {
                                        text: 'SLOVENIA',
                                        cc: 'SI',
                                        x: 4735e3,
                                        y: 2522e3,
                                        class: 'countries',
                                        size: 7,
                                        rotate: -30,
                                    },
                                    { text: 'SPAIN', cc: 'ES', x: 3160096, y: 185e4, class: 'countries', size: 12 },
                                    { text: 'SWEDEN', cc: 'SE', x: 463e4, y: 41e5, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'SWITZERLAND', cc: 'CH', x: 42e5, y: 2564e3, class: 'countries', size: 7 },
                                    { text: 'TÜRKIYE', cc: 'TR', x: 651e4, y: 21e5, class: 'countries', size: 12 },
                                    { text: 'U.K.', cc: 'UK', x: 3558e3, y: 325e4, class: 'countries', size: 12 },
                                ],
                                fr: [
                                    { text: 'MER MÉDITERRANÉE', x: 5472e3, y: 1242e3, class: 'seas', size: 12 },
                                    { text: 'OCÈAN ATLANTIQUE', x: 282e4, y: 254e4, class: 'seas', size: 12 },
                                    { text: 'MER DU NORD', x: 3915e3, y: 37e5, class: 'seas', size: 12 },
                                    { text: 'MER BALTIQUE', x: 49e5, y: 3672e3, class: 'seas', size: 10, rotate: -50 },
                                    { text: 'MER DE NORVÈGE', x: 385e4, y: 48e5, class: 'seas', size: 12 },
                                    { text: 'MER NOIRE', x: 6265e3, y: 2472e3, class: 'seas', size: 12 },
                                    { text: 'ALBANIE', x: 51e5, y: 206e4, class: 'countries', size: 7, rotate: 80 },
                                    { text: 'AUTRICHE', x: 467e4, y: 2629e3, class: 'countries', size: 10 },
                                    { text: 'BELGIQUE', x: 39e5, y: 303e4, class: 'countries', size: 7, rotate: 30 },
                                    { text: 'BULGARIE', x: 5567e3, y: 2256e3, class: 'countries', size: 12 },
                                    { text: 'CROATIE', x: 4876e3, y: 2455e3, class: 'countries', size: 7 },
                                    { text: 'CHYPRE', x: 6426e3, y: 148e4, class: 'countries', size: 10 },
                                    { text: 'TCHÉQUIE', x: 4707e3, y: 2885e3, class: 'countries', size: 12 },
                                    { text: 'DANEMARK', x: 4316e3, y: 3621e3, class: 'countries', size: 10 },
                                    { text: 'ESTONIE', x: 522e4, y: 399e4, class: 'countries', size: 10 },
                                    { text: 'FINLANDE', x: 5125e3, y: 4424e3, class: 'countries', size: 12 },
                                    { text: 'FRANCE', x: 3767740, y: 2662817, class: 'countries', size: 12 },
                                    { text: 'ALLEMAGNE', x: 4347284, y: 3093276, class: 'countries', size: 12 },
                                    { text: 'GRÈCE', x: 542e4, y: 186e4, class: 'countries', size: 12 },
                                    { text: 'HONGRIE', x: 502e4, y: 2654e3, class: 'countries', size: 10 },
                                    { text: 'ISLANDE', x: 304e4, y: 4833e3, class: 'countries', size: 10 },
                                    { text: 'IRLANDE', x: 3136e3, y: 3394e3, class: 'countries', size: 10 },
                                    { text: 'ITALIE', x: 45e5, y: 2181963, class: 'countries', size: 12 },
                                    { text: 'LETTONIE', x: 529e4, y: 3776e3, class: 'countries', size: 10 },
                                    { text: 'LITUANIE', x: 519e4, y: 363e4, class: 'countries', size: 10 },
                                    { text: 'LUX.', x: 412e4, y: 294e4, class: 'countries', size: 7 },
                                    { text: 'MALTE', x: 4731e3, y: 1335e3, class: 'countries', size: 7 },
                                    { text: 'MONT.', x: 5073e3, y: 2185e3, class: 'countries', size: 7 },
                                    { text: 'MAC. DU NORD', x: 53e5, y: 2082e3, class: 'countries', size: 7 },
                                    { text: 'PAYS-BAS', x: 3977e3, y: 3208e3, class: 'countries', size: 7 },
                                    { text: 'NORVEGE', x: 433e4, y: 4147e3, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'POLOGNE', x: 4964e3, y: 3269e3, class: 'countries', size: 12 },
                                    { text: 'PORTUGAL', x: 2836136, y: 1956179, class: 'countries', size: 10, rotate: -75 },
                                    { text: 'ROUMANIE', x: 5451e3, y: 26e5, class: 'countries', size: 12 },
                                    { text: 'SERBIE', x: 52e5, y: 23e5, class: 'countries', size: 7 },
                                    { text: 'SLOVAQUIE', x: 504e4, y: 2835e3, class: 'countries', size: 7, rotate: -30 },
                                    { text: 'SLOVÉNIE', x: 4735e3, y: 2522e3, class: 'countries', size: 7, rotate: -35 },
                                    { text: 'ESPAGNE', x: 3160096, y: 185e4, class: 'countries', size: 12 },
                                    { text: 'SUÈDE', x: 47e5, y: 4401e3, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'SUISSE', x: 42e5, y: 2564e3, class: 'countries', size: 7 },
                                    { text: 'TURQUIE', x: 651e4, y: 21e5, class: 'countries', size: 12 },
                                    { text: 'ROYAUME-UNI', x: 3558e3, y: 325e4, class: 'countries', size: 10 },
                                ],
                                de: [
                                    { text: 'MITTELMEER', x: 5472e3, y: 12e5, class: 'seas', size: 12, letterSpacing: 7 },
                                    { text: 'ATLANTISCHER OZEAN', x: 282e4, y: 254e4, class: 'seas', size: 12 },
                                    { text: 'NORDSEE', x: 3915e3, y: 37e5, class: 'seas', size: 12 },
                                    { text: 'OSTSEE', x: 49e5, y: 3672e3, class: 'seas', size: 10, rotate: -50 },
                                    { text: 'NORWEGISCHE MEER', x: 385e4, y: 48e5, class: 'seas', size: 12 },
                                    { text: 'SCHWARZE MEER', x: 63e5, y: 25e5, class: 'seas', size: 12, letterSpacing: 1 },
                                    { text: 'ALBANIEN', x: 51e5, y: 206e4, class: 'countries', size: 7, rotate: 80 },
                                    { text: 'ÖSTERREICH', x: 465e4, y: 2629e3, class: 'countries', size: 7 },
                                    { text: 'BELGIEN', x: 39e5, y: 303e4, class: 'countries', size: 7, rotate: 30 },
                                    { text: 'BULGARIEN', x: 5567e3, y: 2256e3, class: 'countries', size: 10 },
                                    { text: 'KROATIEN', x: 4876e3, y: 2455e3, class: 'countries', size: 7 },
                                    { text: 'ZYPERN', x: 6426e3, y: 148e4, class: 'countries', size: 10 },
                                    { text: 'TSCHECHIEN', x: 4707e3, y: 2885e3, class: 'countries', size: 7 },
                                    { text: 'DÄNEMARK', x: 4316e3, y: 3621e3, class: 'countries', size: 10 },
                                    { text: 'ESTLAND', x: 522e4, y: 399e4, class: 'countries', size: 7 },
                                    { text: 'FINNLAND', x: 515e4, y: 4424e3, class: 'countries', size: 12 },
                                    { text: 'FRANKREICH', x: 3767740, y: 2662817, class: 'countries', size: 12 },
                                    { text: 'DEUTSCHLAND', x: 4347284, y: 3093276, class: 'countries', size: 10 },
                                    { text: 'GRIECHENLAND', x: 555e4, y: 15e5, class: 'countries', size: 10 },
                                    { text: 'UNGARN', x: 502e4, y: 263e4, class: 'countries', size: 10 },
                                    { text: 'ISLAND', x: 304e4, y: 4833e3, class: 'countries', size: 10 },
                                    { text: 'IRLAND', x: 3136e3, y: 3394e3, class: 'countries', size: 10 },
                                    { text: 'ITALIEN', x: 4469967, y: 2181963, class: 'countries', size: 12, rotate: 35 },
                                    { text: 'LETTLAND', x: 529e4, y: 38e5, class: 'countries', size: 7 },
                                    { text: 'LITAUEN', x: 519e4, y: 363e4, class: 'countries', size: 7 },
                                    { text: 'LUX.', x: 412e4, y: 294e4, class: 'countries', size: 7 },
                                    { text: 'MALTA', x: 4731e3, y: 133e4, class: 'countries', size: 7 },
                                    { text: 'MONT.', x: 5073e3, y: 2185e3, class: 'countries', size: 7 },
                                    { text: 'NORDMAZEDONIEN', x: 535e4, y: 2082e3, class: 'countries', size: 7 },
                                    { text: 'NIEDERLANDE', x: 3977e3, y: 3208e3, class: 'countries', size: 7 },
                                    { text: 'NORWEGEN', x: 433e4, y: 4147e3, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'POLEN', x: 4964e3, y: 3269e3, class: 'countries', size: 12 },
                                    { text: 'PORTUGAL', x: 2836136, y: 1956179, class: 'countries', size: 10, rotate: -75 },
                                    { text: 'RUMÄNIEN', x: 5451e3, y: 26e5, class: 'countries', size: 12 },
                                    { text: 'SERBIEN', x: 52e5, y: 23e5, class: 'countries', size: 7 },
                                    { text: 'SLOWAKEI', x: 504e4, y: 2835e3, class: 'countries', size: 7, rotate: -30 },
                                    { text: 'SLOWENIEN', x: 4735e3, y: 2522e3, class: 'countries', size: 7, rotate: -30 },
                                    { text: 'SPANIEN', x: 3160096, y: 185e4, class: 'countries', size: 12 },
                                    { text: 'SCHWEDEN', x: 467e4, y: 418e4, class: 'countries', size: 12, rotate: -75 },
                                    { text: 'SCHWEIZ', x: 42e5, y: 2564e3, class: 'countries', size: 7 },
                                    { text: 'TRUTHAHN', x: 651e4, y: 21e5, class: 'countries', size: 12 },
                                    { text: 'VEREINIGTES', x: 355e4, y: 352e4, class: 'countries', size: 10 },
                                    { text: 'KÖNIGREICH', x: 355e4, y: 342e4, class: 'countries', size: 10 },
                                ],
                            },
                            IC_32628: {
                                cc: [{ text: 'ES', x: 420468, y: 3180647, class: 'cc', size: 12 }],
                                en: [{ text: 'Canary Islands', x: 420468, y: 3180647, class: 'countries', size: 12 }],
                                fr: [{ text: 'Les îles Canaries', x: 420468, y: 3180647, class: 'countries', size: 12 }],
                                de: [{ text: 'Kanarische Inseln', x: 41e4, y: 3180647, class: 'countries', size: 12 }],
                            },
                            GP_32620: {
                                cc: [{ text: 'FR', x: 667e3, y: 174e4, class: 'cc', size: 12 }],
                                en: [{ text: 'Guadeloupe', x: 7e5, y: 181e4, class: 'countries', size: 12 }],
                            },
                            MQ_32620: {
                                cc: [{ text: 'FR', x: 716521, y: 1621322, class: 'cc', size: 12 }],
                                en: [{ text: 'Martinique', x: 716521, y: 1621322, class: 'countries', size: 12 }],
                            },
                            GF_32622: {
                                cc: [{ text: 'FR', x: 266852, y: 444074, class: 'cc', size: 12 }],
                                en: [{ text: 'Guyane', x: 266852, y: 444074, class: 'countries', size: 12 }],
                                de: [{ text: 'Guayana', x: 266852, y: 444074, class: 'countries', size: 12 }],
                            },
                            RE_32740: {
                                cc: [{ text: 'FR', x: 348011, y: 768e4, class: 'cc', size: 10 }],
                                en: [{ text: 'Réunion', x: 348011, y: 768e4, class: 'countries', size: 10 }],
                            },
                            YT_32738: {
                                cc: [{ text: 'FR', x: 516549, y: 8593920, class: 'cc', size: 10 }],
                                en: [{ text: 'Mayotte', x: 516549, y: 8593920, class: 'countries', size: 10 }],
                            },
                            MT_3035: {
                                cc: [{ text: 'MT', x: 4719755, y: 1410701, class: 'cc', size: 10 }],
                                en: [{ text: 'Malta', x: 4719755, y: 1410701, class: 'countries', size: 10 }],
                            },
                            PT20_32626: {
                                cc: [{ text: 'PT', x: 397418, y: 432e4, class: 'cc', size: 10 }],
                                en: [{ text: 'Azores', x: 397418, y: 432e4, class: 'countries', size: 10 }],
                                fr: [{ text: 'Açores', x: 397418, y: 4271471, class: 'countries', size: 10 }],
                                de: [{ text: 'Azoren', x: 397418, y: 4271471, class: 'countries', size: 10 }],
                            },
                            PT30_32628: {
                                cc: [{ text: 'PT', x: 333586, y: 3624e3, class: 'cc', size: 10, rotate: 30 }],
                                en: [{ text: 'Madeira', x: 333586, y: 3624e3, class: 'countries', size: 10, rotate: 30 }],
                                fr: [{ text: 'Madère', x: 333586, y: 3624e3, class: 'countries', size: 10, rotate: 30 }],
                            },
                            LI_3035: {
                                cc: [{ text: 'LI', x: 4287060, y: 266e4, class: 'cc', size: 12 }],
                                en: [{ text: 'Liechtenstein', x: 4287060, y: 2679e3, class: 'countries', size: 7 }],
                            },
                            IS_3035: {
                                cc: [{ text: 'IS', x: 3011804, y: 496e4, class: 'cc', size: 12 }],
                                en: [{ text: 'Iceland', x: 3011804, y: 496e4, class: 'countries', size: 12 }],
                                fr: [{ text: 'Islande', x: 3011804, y: 496e4, class: 'countries', size: 12 }],
                                de: [{ text: 'Island', x: 3011804, y: 496e4, class: 'countries', size: 12 }],
                            },
                            SJ_SV_3035: {
                                cc: [{ text: 'NO', x: 457e4, y: 626e4, class: 'cc', size: 10 }],
                                en: [{ text: 'Svalbard', x: 457e4, y: 626e4, class: 'countries', size: 10 }],
                                de: [{ text: 'Spitzbergen', x: 457e4, y: 626e4, class: 'countries', size: 7 }],
                            },
                            SJ_JM_3035: {
                                cc: [{ text: 'NO', x: 3647762, y: 5420300, class: 'cc', size: 10 }],
                                en: [{ text: 'Jan Mayen', x: 3647762, y: 5420300, class: 'countries', size: 7 }],
                            },
                            CARIB_32620: {
                                cc: [
                                    { text: 'FR', x: 7e5, y: 181e4, class: 'cc', size: 10 },
                                    { text: 'FR', x: 64e4, y: 159e4, class: 'cc', size: 10 },
                                    { text: 'FR', x: 54e4, y: 1962e3, class: 'cc', size: 7 },
                                ],
                                en: [
                                    { text: 'Guadeloupe', x: 7e5, y: 181e4, class: 'countries', size: 10 },
                                    { text: 'Martinique', x: 57e4, y: 159e4, class: 'countries', size: 10 },
                                    { text: 'Saint Martin', x: 597e3, y: 1962e3, class: 'countries', size: 7 },
                                ],
                            },
                            WORLD_54030: {
                                en: [
                                    { text: 'NORTH ATLANTIC', x: -45, y: 25, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'SOUTH ATLANTIC', x: -15, y: -25, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'SOUTH PACIFIC', x: -126, y: -25, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'NORTH', x: -136, y: 25, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'PACIFIC', x: -134, y: 20, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'INDIAN OCEAN', x: 80, y: -25, class: 'seas', size: 10, letterSpacing: 1 },
                                    { text: 'SOUTHERN OCEAN', x: -5, y: -67, class: 'seas', size: 10, letterSpacing: 6 },
                                ],
                            },
                        },
                        es = {
                            AL: { x: 51e5, y: 206e4 },
                            AT: { x: 467e4, y: 2629e3 },
                            BE: { x: 393e4, y: 301e4 },
                            BG: { x: 5567e3, y: 22e5 },
                            HR: { x: 4876e3, y: 2455e3 },
                            CY: { x: 6426e3, y: 148e4 },
                            CZ: { x: 4707e3, y: 2885e3 },
                            DK: { x: 4316e3, y: 3621e3 },
                            EE: { x: 522e4, y: 399e4 },
                            FI: { x: 515e4, y: 4424e3 },
                            FR: { x: 3767740, y: 2662817 },
                            DE: { x: 4347284, y: 3093276 },
                            EL: { x: 537e4, y: 175e4 },
                            HU: { x: 502e4, y: 263e4 },
                            IS: { x: 304e4, y: 4833e3 },
                            IE: { x: 3136e3, y: 3394e3 },
                            IT: { x: 4469967, y: 2181963 },
                            LV: { x: 529e4, y: 38e5 },
                            LT: { x: 519e4, y: 363e4 },
                            LU: { x: 412e4, y: 294e4 },
                            MT: { x: 4726014, y: 1437506 },
                            ME: { x: 5073e3, y: 2185e3 },
                            MK: { x: 53e5, y: 208e4 },
                            NL: { x: 402e4, y: 3208e3 },
                            NO: { x: 43e5, y: 4147e3 },
                            PL: { x: 4964e3, y: 32e5 },
                            PT: { x: 28e5, y: 199e4 },
                            RO: { x: 5451e3, y: 26e5 },
                            RS: { x: 52e5, y: 23e5 },
                            SK: { x: 504e4, y: 2835e3 },
                            SI: { x: 4655e3, y: 248e4 },
                            ES: { x: 3160096, y: 19e5 },
                            SE: { x: 463e4, y: 4e6 },
                            CH: { x: 42e5, y: 2564e3 },
                            TR: { x: 651e4, y: 21e5 },
                            UK: { x: 3558e3, y: 325e4 },
                        },
                        ns = {
                            '03M': {
                                type: 'Topology',
                                arcs: [
                                    [
                                        [3061, 1303],
                                        [-152, -59],
                                        [-32, -66],
                                        [-65, 72],
                                        [-96, 7],
                                        [-16, 59],
                                        [-64, 19],
                                        [-56, -39],
                                        [-120, 39],
                                        [-184, -19],
                                        [-16, 26],
                                        [32, 52],
                                        [-16, 72],
                                        [24, 40],
                                        [8, 183],
                                    ],
                                    [
                                        [2885, 0],
                                        [-8, 46],
                                        [-65, 85],
                                        [-40, -7],
                                        [-40, 40],
                                        [0, 111],
                                        [80, 13],
                                        [25, 46],
                                        [72, 13],
                                        [40, 98],
                                        [-56, 118],
                                        [144, 196],
                                        [-24, 79],
                                        [88, 59],
                                        [-24, 98],
                                        [-8, 20],
                                        [24, 39],
                                        [8, 52],
                                        [48, 72],
                                        [-88, 125],
                                    ],
                                    [
                                        [825, 2638],
                                        [-112, -98],
                                        [-72, -7],
                                        [-88, -118],
                                        [-176, -39],
                                        [56, -91],
                                        [88, -33],
                                        [24, -53],
                                        [56, -39],
                                        [24, -91],
                                        [-56, -46],
                                        [24, -105],
                                        [-56, -92],
                                        [-104, 0],
                                        [-48, -104],
                                        [-16, -40],
                                        [-57, 7],
                                        [-40, -53],
                                        [-16, -78],
                                        [113, -118],
                                        [-97, -65],
                                        [-88, -99],
                                        [-80, 20],
                                        [-80, -39],
                                        [-24, -13],
                                    ],
                                    [
                                        [1098, 2304],
                                        [-193, 66],
                                        [24, 39],
                                        [-16, 39],
                                        [65, 13],
                                        [0, 33],
                                        [-65, 79],
                                        [-88, 65],
                                    ],
                                    [
                                        [2308, 1689],
                                        [-153, -20],
                                        [-64, 59],
                                        [-40, 7],
                                        [-96, -27],
                                        [-104, 138],
                                        [-8, 92],
                                        [-32, 78],
                                        [-64, 26],
                                        [-32, -59],
                                        [-24, 0],
                                        [-56, 86],
                                        [-40, 137],
                                        [-25, 65],
                                        [-56, 0],
                                        [-56, 46],
                                        [-64, -72],
                                        [-120, 53],
                                        [-88, -40],
                                        [-88, 46],
                                    ],
                                ],
                                transform: {
                                    scale: [37.761044752777565, 38.54734205626113],
                                    translate: [5167020.037451873, 2202278.5103255166],
                                },
                                objects: {
                                    nutsbn_1: {
                                        type: 'GeometryCollection',
                                        geometries: [
                                            {
                                                type: 'LineString',
                                                arcs: [0],
                                                properties: {
                                                    id: 1000004,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'F',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [1],
                                                properties: {
                                                    id: 1000005,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'F',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [2],
                                                properties: {
                                                    id: 1000001,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'F',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [3],
                                                properties: {
                                                    id: 1000002,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'F',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [4],
                                                properties: {
                                                    id: 1000003,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'F',
                                                    co: 'F',
                                                },
                                            },
                                        ],
                                    },
                                },
                            },
                            '10M': {
                                type: 'Topology',
                                arcs: [
                                    [
                                        [962, 0],
                                        [-29, 75],
                                        [48, 131],
                                        [21, 35],
                                        [11, 38],
                                        [32, 117],
                                        [-24, 44],
                                    ],
                                    [
                                        [1021, 440],
                                        [-64, -29],
                                        [-70, 36],
                                        [-120, 2],
                                        [3, 121],
                                    ],
                                    [
                                        [770, 570],
                                        [-126, 16],
                                        [-40, 91],
                                        [-45, 4],
                                        [-51, 93],
                                        [-142, 4],
                                    ],
                                    [
                                        [275, 891],
                                        [-131, -99],
                                        [30, -36],
                                        [24, -31],
                                        [-6, -86],
                                        [-98, -86],
                                        [13, -64],
                                        [-27, -38],
                                        [-80, -31],
                                    ],
                                    [
                                        [366, 778],
                                        [-37, 22],
                                        [-54, 91],
                                    ],
                                ],
                                transform: {
                                    scale: [113.2099448513097, 114.12782081303801],
                                    translate: [5167020.037451873, 2202278.5103255166],
                                },
                                objects: {
                                    nutsbn_1: {
                                        type: 'GeometryCollection',
                                        geometries: [
                                            {
                                                type: 'LineString',
                                                arcs: [0],
                                                properties: {
                                                    id: 1000005,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [1],
                                                properties: {
                                                    id: 1000004,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [2],
                                                properties: {
                                                    id: 1000003,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [3],
                                                properties: {
                                                    id: 1000001,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [4],
                                                properties: {
                                                    id: 1000002,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                        ],
                                    },
                                },
                            },
                            '20M': {
                                type: 'Topology',
                                arcs: [
                                    [
                                        [536, 0],
                                        [-24, 45],
                                        [15, 30],
                                        [45, 92],
                                        [-1, 44],
                                        [-2, 37],
                                    ],
                                    [
                                        [569, 248],
                                        [-130, 9],
                                        [-10, 64],
                                    ],
                                    [
                                        [429, 321],
                                        [-64, 10],
                                        [-78, 94],
                                        [-83, 13],
                                    ],
                                    [
                                        [153, 502],
                                        [-73, -51],
                                        [26, -84],
                                        [-48, -53],
                                        [-3, -52],
                                        [-55, -25],
                                    ],
                                    [
                                        [204, 438],
                                        [-51, 64],
                                    ],
                                ],
                                transform: {
                                    scale: [203.12309601494124, 202.56551463031246],
                                    translate: [5167020.037451873, 2202278.5103255166],
                                },
                                objects: {
                                    nutsbn_1: {
                                        type: 'GeometryCollection',
                                        geometries: [
                                            {
                                                type: 'LineString',
                                                arcs: [0],
                                                properties: {
                                                    id: 1000005,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [1],
                                                properties: {
                                                    id: 1000004,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [2],
                                                properties: {
                                                    id: 1000003,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [3],
                                                properties: {
                                                    id: 1000001,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [4],
                                                properties: {
                                                    id: 1000002,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                        ],
                                    },
                                },
                            },
                            '60M': {
                                type: 'Topology',
                                arcs: [
                                    [
                                        [310, 138],
                                        [-36, -2],
                                        [-40, 42],
                                    ],
                                    [
                                        [234, 178],
                                        [-123, 65],
                                    ],
                                    [
                                        [84, 278],
                                        [-84, -147],
                                    ],
                                    [
                                        [111, 243],
                                        [-27, 35],
                                    ],
                                    [
                                        [292, 0],
                                        [18, 138],
                                    ],
                                ],
                                transform: {
                                    scale: [372.84281730215633, 364.87611898580536],
                                    translate: [5167020.037451873, 2202278.5103255166],
                                },
                                objects: {
                                    nutsbn_1: {
                                        type: 'GeometryCollection',
                                        geometries: [
                                            {
                                                type: 'LineString',
                                                arcs: [0],
                                                properties: {
                                                    id: 1000004,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [1],
                                                properties: {
                                                    id: 1000003,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [2],
                                                properties: {
                                                    id: 1000001,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [3],
                                                properties: {
                                                    id: 1000002,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                            {
                                                type: 'LineString',
                                                arcs: [4],
                                                properties: {
                                                    id: 1000005,
                                                    lvl: 1,
                                                    eu: 'F',
                                                    efta: 'F',
                                                    cc: 'T',
                                                    oth: 'T',
                                                    co: 'F',
                                                },
                                            },
                                        ],
                                    },
                                },
                            },
                        }
                    function rs(t, e) {
                        var n = Object.keys(t)
                        if (Object.getOwnPropertySymbols) {
                            var r = Object.getOwnPropertySymbols(t)
                            e &&
                                (r = r.filter(function (e) {
                                    return Object.getOwnPropertyDescriptor(t, e).enumerable
                                })),
                                n.push.apply(n, r)
                        }
                        return n
                    }
                    sn({ decimal: '.', thousands: ' ', grouping: [3], currency: ['', '€'] })
                    var is = function t(e, n) {
                            var i = { svgId_: 'map', svg_: void 0 }
                            ;(i.width_ = Math.min(800, window.innerWidth)),
                                (i.height_ = 0),
                                (i.containerId_ = void 0),
                                (i.nutsLevel_ = 3),
                                (i.nutsYear_ = 2021),
                                (i.geo_ = 'EUR'),
                                (i.proj_ = '3035'),
                                (i.projectionFunction_ = void 0),
                                (i.filterGeometriesFunction_ = void 0),
                                (i.scale_ = '20M'),
                                (i.geoCenter_ = void 0),
                                (i.pixSize_ = void 0),
                                (i.zoomExtent_ = void 0),
                                (i.fontFamily_ = 'Helvetica, Arial, sans-serif'),
                                (i.title_ = ''),
                                (i.titleFontSize_ = 20),
                                (i.titleFill_ = 'black'),
                                (i.titlePosition_ = void 0),
                                (i.titleFontWeight_ = 'bold'),
                                (i.titleStroke_ = 'none'),
                                (i.titleStrokeWidth_ = 'none'),
                                (i.subtitle_ = ''),
                                (i.subtitleFontSize_ = 12),
                                (i.subtitleFill_ = 'grey'),
                                (i.subtitlePosition_ = void 0),
                                (i.subtitleFontWeight_ = 100),
                                (i.subtitleStroke_ = 'none'),
                                (i.subtitleStrokeWidth_ = 'none'),
                                (i.frameStroke_ = 'none'),
                                (i.frameStrokeWidth_ = 0.5),
                                (i.showScalebar_ = !1),
                                (i.scalebarPosition_ = []),
                                (i.scalebarFontSize_ = 9),
                                (i.scalebarUnits_ = ' km'),
                                (i.scalebarTextOffset_ = [0, 12]),
                                (i.scalebarMaxWidth_ = 150),
                                (i.scalebarHeight_ = 90),
                                (i.scalebarStrokeWidth_ = 1),
                                (i.scalebarSegmentHeight_ = 6),
                                (i.scalebarTickHeight_ = 8),
                                (i.tooltip_ = {
                                    maxWidth: '200px',
                                    fontSize: '14px',
                                    background: 'white',
                                    padding: '0px',
                                    border: '0px',
                                    borderRadius: '0px',
                                    zIndex: '999999',
                                    boxShadow: 'rgba(100, 100, 111, 0.2) 0px 7px 29px 0px',
                                    transitionDuration: 200,
                                    xOffset: 0,
                                    yOffset: 0,
                                    textFunction: null,
                                    showFlags: !1,
                                }),
                                (i.tooltipText_ = function (t) {
                                    return t.properties.na
                                }),
                                (i.tooltipShowFlags_ = !1),
                                (i.bordersToShow_ = ['eu', 'efta', 'cc', 'oth', 'co']),
                                (i.countriesToShow_ = [
                                    'AL',
                                    'AT',
                                    'BE',
                                    'BG',
                                    'CH',
                                    'CY',
                                    'CZ',
                                    'DE',
                                    'DK',
                                    'EE',
                                    'EL',
                                    'ES',
                                    'FI',
                                    'FR',
                                    'HR',
                                    'HU',
                                    'IE',
                                    'IS',
                                    'IT',
                                    'LI',
                                    'LT',
                                    'LU',
                                    'LV',
                                    'ME',
                                    'MK',
                                    'MT',
                                    'NL',
                                    'NO',
                                    'PL',
                                    'PT',
                                    'RO',
                                    'RS',
                                    'SE',
                                    'SI',
                                    'SK',
                                    'TR',
                                    'UK',
                                ]),
                                (i.nutsrgFillStyle_ = '#EfEfEf'),
                                (i.nutsrgSelFillSty_ = 'cyan'),
                                (i.nutsbnStroke_ = { 0: 'none', 1: 'grey', 2: 'grey', 3: 'grey', oth: 'grey', co: '#7f7f7f' }),
                                (i.nutsbnStrokeWidth_ = { 0: 0, 1: 0.4, 2: 0.4, 3: 0.4, oth: 0, co: 0 }),
                                (i.cntrgFillStyle_ = '#EfEfEf'),
                                (i.cntbnStroke_ = { eu: 'black', efta: 'black', cc: 'black', oth: 'black', co: '#7f7f7f' }),
                                (i.cntbnStrokeWidth_ = { eu: 0.5, efta: 0.5, cc: 0.5, oth: 0.5, co: 0.5 }),
                                (i.worldFillStyle_ = '#EfEfEf'),
                                (i.worldStroke_ = 'black'),
                                (i.worldStrokeWidth_ = 1),
                                (i.worldCoastStroke_ = 'none'),
                                (i.worldCoastStrokeWidth_ = 0.3),
                                (i.seaFillStyle_ = 'white'),
                                (i.drawCoastalMargin_ = !1),
                                (i.coastalMarginColor_ = '#c2daed'),
                                (i.coastalMarginWidth_ = 5),
                                (i.coastalMarginStdDev_ = 2),
                                (i.drawGraticule_ = !1),
                                (i.graticuleStroke_ = 'lightgray'),
                                (i.graticuleStrokeWidth_ = 1),
                                (i.labelling_ = !1),
                                (i.labelsConfig_ = ts),
                                (i.statLabelsPositions_ = es),
                                (i.labelsToShow_ = ['countries', 'seas']),
                                (i.labelFill_ = { seas: '#003399', countries: 'black', cc: 'black', values: 'black' }),
                                (i.labelStroke_ = { seas: 'none', countries: 'none', cc: 'none', values: 'none' }),
                                (i.labelStrokeWidth_ = { seas: 0.5, countries: 0.5, cc: 0.5, values: 0.5 }),
                                (i.labelOpacity_ = { seas: 1, countries: 1, cc: 1, values: 1 }),
                                (i.labelValuesFontSize_ = 10),
                                (i.labelShadow_ = !0),
                                (i.labelShadowsToShow_ = ['countries', 'seas', 'cc', 'values']),
                                (i.labelShadowWidth_ = { countries: 1, cc: 1, values: 1, seas: 0.2 }),
                                (i.labelShadowColor_ = { seas: 'white', countries: 'white', cc: 'white', values: 'white' }),
                                (i.labelFilterFunction_ = function (t, e) {
                                    return t.properties.id[0] + t.properties.id[1] == e.geo_[0] + e.geo_[1] || 'SJ_SV' == e.geo_
                                }),
                                (i.showSourceLink_ = !0),
                                (i.bottomText_ = 'Administrative boundaries: ©EuroGeographics ©UN-FAO ©OSM'),
                                (i.botTxtFontSize_ = 10),
                                (i.botTxtFill_ = 'black'),
                                (i.botTxtPadding_ = 10),
                                (i.botTxtTooltipTxt_ =
                                    'The designations employed and the presentation of material on this map do not imply the expression of any opinion whatsoever on the part of the European Union concerning the legal status of any country, territory, city or area or of its authorities, or concerning the delimitation of its frontiers or boundaries. Kosovo*: This designation is without prejudice to positions on status, and is in line with UNSCR 1244/1999 and the ICJ Opinion on the Kosovo declaration of independence.'),
                                (i.nuts2jsonBaseURL_ = window.location.hostname.includes('ec.europa.eu')
                                    ? 'https://ec.europa.eu/assets/estat/E/E4/gisco/pub/nuts2json/v2/'
                                    : 'https://raw.githubusercontent.com/eurostat/Nuts2json/master/pub/v2/'),
                                (i.noDataFillStyle_ = '#bcbcbc'),
                                (i.insets_ = []),
                                (i.insetTemplates_ = {}),
                                (i.insetBoxPosition_ = void 0),
                                (i.insetBoxPadding_ = 5),
                                (i.insetBoxWidth_ = 210),
                                (i.insetZoomExtent_ = null),
                                (i.insetScale_ = '03M'),
                                (i._geom = {
                                    mixed: { rg0: void 0, rg1: void 0, rg2: void 0, rg3: void 0 },
                                    cntbn: void 0,
                                    cntrg: void 0,
                                    nutsbn: void 0,
                                    nutsrg: void 0,
                                    gra: void 0,
                                    worldrg: void 0,
                                    worldbn: void 0,
                                    kosovo: void 0,
                                    path: void 0,
                                })
                            var a = function (t) {
                                i[t.substring(0, t.length - 1)] = function (e) {
                                    return arguments.length ? ((i[t] = e), i) : i[t]
                                }
                            }
                            for (var o in i) a(o)
                            ;['tooltip_', 'nuts2jsonBaseURL_'].forEach(function (t) {
                                i[t.substring(0, t.length - 1)] = function (e) {
                                    if (!arguments.length) return i[t]
                                    if ('object' !== yn(e) || null === e || Array.isArray(e)) i[t] = e
                                    else for (var n in e) i[t][n] = e[n]
                                    return s(t, e), i
                                }
                            })
                            var s = function (t, e) {
                                var n = t.substring(0, t.length - 1)
                                if (i.insetTemplates_)
                                    for (var r in i.insetTemplates_)
                                        if (Array.isArray(i.insetTemplates_[r]))
                                            for (var a = 0; a < i.insetTemplates_[r].length; a++)
                                                if (Array.isArray(i.insetTemplates_[r][a]))
                                                    for (var o = 0; o < i.insetTemplates_[r][a].length; o++) i.insetTemplates_[r][a][o][n](e)
                                                else i.insetTemplates_[r][a][n](e)
                                        else i.insetTemplates_[r][n](e)
                            }
                            ;(i.tooltipText = function (t) {
                                return (i.tooltip_.textFunction = t), i
                            }),
                                (i.title = function (t) {
                                    return arguments.length
                                        ? ((i.title_ = t),
                                          i.svg() &&
                                              i
                                                  .svg()
                                                  .select('#title' + i.geo())
                                                  .text(t),
                                          i)
                                        : i.title_
                                }),
                                (i.subtitle = function (t) {
                                    return arguments.length
                                        ? ((i.subtitle_ = t),
                                          i.svg() &&
                                              i
                                                  .svg()
                                                  .select('#subtitle' + i.geo())
                                                  .text(t),
                                          i)
                                        : i.subtitle_
                                }),
                                (i.insets = function () {
                                    return arguments.length
                                        ? (1 == arguments.length && 'default' === arguments[0]
                                              ? (i.insets_ = 'default')
                                              : 1 == arguments.length && !1 === arguments[0]
                                                ? (i.insets_ = !1)
                                                : 1 == arguments.length && Array.isArray(arguments[0])
                                                  ? (i.insets_ = arguments[0])
                                                  : (i.insets_ = arguments),
                                          i)
                                        : i.insets_
                                }),
                                (i.drawGraticule = function (t) {
                                    if (!arguments.length) return i.drawGraticule_
                                    i.drawGraticule_ = t
                                    var e = i.svg_ ? i.svg().select('#g_gra') : null,
                                        n = i.svg_ ? i.svg_.select('#zoomgroup' + i.svgId_) : null
                                    return (
                                        e &&
                                            (e._groups[0][0] && 0 == t
                                                ? e.remove()
                                                : i._geom.gra &&
                                                  i._geom.path &&
                                                  n &&
                                                  1 == t &&
                                                  (e.remove(),
                                                  n
                                                      .append('g')
                                                      .attr('id', 'g_gra')
                                                      .style('fill', 'none')
                                                      .style('stroke', i.graticuleStroke())
                                                      .style('stroke-width', i.graticuleStrokeWidth())
                                                      .selectAll('path')
                                                      .data(i._geom.gra)
                                                      .enter()
                                                      .append('path')
                                                      .attr('d', i._geom.path)
                                                      .attr('class', 'gra'),
                                                  i
                                                      .svg()
                                                      .select('#g_gra')
                                                      .each(function () {
                                                          'WORLD' == i.geo_
                                                              ? this.parentNode.insertBefore(this, this.parentNode.childNodes[3])
                                                              : this.parentNode.insertBefore(this, this.parentNode.childNodes[1])
                                                      }))),
                                        i
                                    )
                                }),
                                (i.seaFillStyle = function (t) {
                                    if (!arguments.length) return i.seaFillStyle_
                                    if (((i.seaFillStyle_ = t), 'WORLD' == i.geo_)) {
                                        if (i.svg_) {
                                            var e = i.svg_.select('#sphere')
                                            e && e.style('fill', i.seaFillStyle_)
                                        }
                                    } else if (i.svg_) {
                                        var n = i.svg_.selectAll('#sea')
                                        n && n.style('fill', i.seaFillStyle_)
                                    }
                                    for (var r in i.insetTemplates_)
                                        if (Array.isArray(i.insetTemplates_[r]))
                                            for (var a = 0; a < i.insetTemplates_[r].length; a++)
                                                if (Array.isArray(i.insetTemplates_[r][a]))
                                                    for (var o = 0; o < i.insetTemplates_[r][a].length; o++)
                                                        i.insetTemplates_[r][a][o].seaFillStyle_ = i.seaFillStyle_
                                                else i.insetTemplates_[r][a].seaFillStyle_ = i.seaFillStyle_
                                        else i.insetTemplates_[r].seaFillStyle_ = i.seaFillStyle_
                                    return i
                                }),
                                (i.cntrgFillStyle = function (t) {
                                    if (!arguments.length) return i.cntrgFillStyle_
                                    if (((i.cntrgFillStyle_ = t), i.svg_)) {
                                        if ('WORLD' == i.geo_) {
                                            var e = i.svg().selectAll('.worldrg')
                                            e &&
                                                e.attr('fill', function (t, e, n) {
                                                    var r = yt(n[e])
                                                    return r.attr('ecl') ? r.attr('fill') : i.cntrgFillStyle_
                                                })
                                        } else {
                                            var n = i.svg().selectAll('.cntrg')
                                            n && n.attr('fill', i.cntrgFillStyle_)
                                        }
                                        for (var r in i.insetTemplates_)
                                            if (Array.isArray(i.insetTemplates_[r]))
                                                for (var a = 0; a < i.insetTemplates_[r].length; a++)
                                                    if (Array.isArray(i.insetTemplates_[r][a]))
                                                        for (var o = 0; o < i.insetTemplates_[r][a].length; o++)
                                                            i.insetTemplates_[r][a][o].cntrgFillStyle_ = i.cntrgFillStyle_
                                                    else i.insetTemplates_[r][a].cntrgFillStyle_ = i.cntrgFillStyle_
                                            else i.insetTemplates_[r].cntrgFillStyle_ = i.cntrgFillStyle_
                                    }
                                    return i
                                }),
                                (i.nutsrgFillStyle = function (t) {
                                    if (!arguments.length) return i.nutsrgFillStyle_
                                    for (var e in ((i.nutsrgFillStyle_ = t), i.svg_ && i.updateStyle(), i.insetTemplates_))
                                        if (Array.isArray(i.insetTemplates_[e]))
                                            for (var n = 0; n < i.insetTemplates_[e].length; n++)
                                                if (Array.isArray(i.insetTemplates_[e][n]))
                                                    for (var r = 0; r < i.insetTemplates_[e][n].length; r++)
                                                        i.insetTemplates_[e][n][r].nutsrgFillStyle_ = i.nutsrgFillStyle_
                                                else i.insetTemplates_[e][n].nutsrgFillStyle_ = i.nutsrgFillStyle_
                                        else i.insetTemplates_[e].nutsrgFillStyle_ = i.nutsrgFillStyle_
                                    return i
                                }),
                                (i.drawCoastalMargin = function (t) {
                                    if (!arguments.length) return i.drawCoastalMargin_
                                    if (((i.drawCoastalMargin_ = t), i.svg_)) {
                                        var e = Gr('#g_coast_margin'),
                                            n = yt('#coastal_blur'),
                                            r = yt('#zoomgroup' + i.svgId_) || null
                                        if (e._groups[0][0] && 0 == t) e.remove()
                                        else if (1 == t && i._geom.path && r) {
                                            e.remove(),
                                                n.remove(),
                                                i.svg_
                                                    .append('filter')
                                                    .attr('id', 'coastal_blur')
                                                    .attr('x', '-200%')
                                                    .attr('y', '-200%')
                                                    .attr('width', '400%')
                                                    .attr('height', '400%')
                                                    .append('feGaussianBlur')
                                                    .attr('in', 'SourceGraphic')
                                                    .attr('stdDeviation', i.coastalMarginStdDev_)
                                            var a = function (t) {
                                                var e = yt('#zoomgroup' + t.svgId_)
                                                    .append('g')
                                                    .attr('id', 'g_coast_margin')
                                                    .style('fill', 'none')
                                                    .style('stroke-width', t.coastalMarginWidth_)
                                                    .style('stroke', t.coastalMarginColor_)
                                                    .style('filter', 'url(#coastal_blur)')
                                                    .style('stroke-linejoin', 'round')
                                                    .style('stroke-linecap', 'round')
                                                t._geom.cntbn &&
                                                    e
                                                        .append('g')
                                                        .attr('id', 'g_coast_margin_cnt')
                                                        .selectAll('path')
                                                        .data(t._geom.cntbn)
                                                        .enter()
                                                        .filter(function (t) {
                                                            return 'T' === t.properties.co
                                                        })
                                                        .append('path')
                                                        .attr('d', t._geom.path),
                                                    t._geom.nutsbn &&
                                                        e
                                                            .append('g')
                                                            .attr('id', 'g_coast_margin_nuts')
                                                            .selectAll('path')
                                                            .data(t._geom.nutsbn)
                                                            .enter()
                                                            .filter(function (t) {
                                                                return 'T' === t.properties.co
                                                            })
                                                            .append('path')
                                                            .attr('d', t._geom.path),
                                                    t._geom.worldbn &&
                                                        e
                                                            .append('g')
                                                            .attr('id', 'g_coast_margin_nuts')
                                                            .selectAll('path')
                                                            .data(t._geom.worldbn)
                                                            .enter()
                                                            .filter(function (t) {
                                                                return 'T' === t.properties.COAS_FLAG
                                                            })
                                                            .append('path')
                                                            .attr('d', t._geom.path)
                                            }
                                            for (var o in i.insetTemplates_)
                                                if (Array.isArray(i.insetTemplates_[o]))
                                                    for (var s = 0; s < i.insetTemplates_[o].length; s++)
                                                        if (Array.isArray(i.insetTemplates_[o][s]))
                                                            for (var l = 0; l < i.insetTemplates_[o][s].length; l++) {
                                                                var u = i.insetTemplates_[o][s][l]
                                                                ;(u.drawCoastalMargin_ = i.drawCoastalMargin_), i.drawCoastalMargin_ && a(u)
                                                            }
                                                        else {
                                                            var c = i.insetTemplates_[o][s]
                                                            ;(c.drawCoastalMargin_ = i.drawCoastalMargin_), i.drawCoastalMargin_ && a(c)
                                                        }
                                                else {
                                                    var f = i.insetTemplates_[o]
                                                    ;(f.drawCoastalMargin_ = i.drawCoastalMargin_), i.drawCoastalMargin_ && a(f)
                                                }
                                            i.drawCoastalMargin_ && a(i),
                                                Gr('#g_coast_margin').each(function () {
                                                    'WORLD' == i.geo_
                                                        ? this.parentNode.insertBefore(this, this.parentNode.childNodes[3])
                                                        : this.parentNode.insertBefore(this, this.parentNode.childNodes[1])
                                                })
                                        }
                                    }
                                    return i
                                }),
                                (i.coastalMarginWidth = function (t) {
                                    if (!arguments.length) return i.coastalMarginWidth_
                                    for (var e in ((i.coastalMarginWidth_ = t), i.insetTemplates_))
                                        if (Array.isArray(i.insetTemplates_[e]))
                                            for (var n = 0; n < i.insetTemplates_[e].length; n++)
                                                if (Array.isArray(i.insetTemplates_[e][n]))
                                                    for (var r = 0; r < i.insetTemplates_[e][n].length; r++) {
                                                        var a = i.insetTemplates_[e][n][r]
                                                        ;(a.coastalMarginWidth_ = i.coastalMarginWidth_), a.drawCoastalMargin(!0)
                                                    }
                                                else {
                                                    var o = i.insetTemplates_[e][n]
                                                    ;(o.coastalMarginWidth_ = i.coastalMarginWidth_), o.drawCoastalMargin(!0)
                                                }
                                        else {
                                            var s = i.insetTemplates_[e]
                                            ;(s.coastalMarginWidth_ = i.coastalMarginWidth_), s.drawCoastalMargin(!0)
                                        }
                                    return i.drawCoastalMargin(!0), i
                                }),
                                (i.coastalMarginColor = function (t) {
                                    if (!arguments.length) return i.coastalMarginColor_
                                    for (var e in ((i.coastalMarginColor_ = t), i.insetTemplates_))
                                        if (Array.isArray(i.insetTemplates_[e]))
                                            for (var n = 0; n < i.insetTemplates_[e].length; n++)
                                                if (Array.isArray(i.insetTemplates_[e][n]))
                                                    for (var r = 0; r < i.insetTemplates_[e][n].length; r++) {
                                                        var a = i.insetTemplates_[e][n][r]
                                                        ;(a.coastalMarginColor_ = i.coastalMarginColor_), a.drawCoastalMargin(!0)
                                                    }
                                                else {
                                                    var o = i.insetTemplates_[e][n]
                                                    ;(o.coastalMarginColor_ = i.coastalMarginColor_), o.drawCoastalMargin(!0)
                                                }
                                        else {
                                            var s = i.insetTemplates_[e]
                                            ;(s.coastalMarginColor_ = i.coastalMarginColor_), s.drawCoastalMargin(!0)
                                        }
                                    return i.drawCoastalMargin(!0), i
                                })
                            var l = void 0,
                                u = void 0,
                                c = void 0
                            function f(t, e) {
                                var n,
                                    r = t.labelsConfig_,
                                    a = t.lg_,
                                    o = [],
                                    s = e.select('.labels-container'),
                                    l = s.empty() ? e.append('g').attr('class', 'labels-container') : s
                                if (
                                    ((t.labelsToShow_.includes('countries') || t.labelsToShow_.includes('seas')) &&
                                        (o =
                                            r[t.geo_ + '_' + t.proj_] && r[t.geo_ + '_' + t.proj_][a]
                                                ? r[t.geo_ + '_' + t.proj_][a] || []
                                                : (null === (n = r[t.geo_ + '_' + t.proj_]) || void 0 === n ? void 0 : n.en) || []),
                                    t.labelsToShow_.includes('cc') && (o = o.concat(r[t.geo_ + '_' + t.proj_].cc)),
                                    t.labelsToShow_.includes('values') && t._geom.nutsrg)
                                ) {
                                    var c,
                                        f = l
                                            .append('g')
                                            .attr('class', 'g_stat_label_shadows')
                                            .style('font-size', t.labelValuesFontSize_ + 'px')
                                            .attr('text-anchor', 'middle')
                                            .style('opacity', function (e) {
                                                return t.labelOpacity_.values
                                            })
                                            .style('fill', function (e) {
                                                return t.labelShadowColor_.values
                                            })
                                            .attr('stroke', function (e) {
                                                return t.labelShadowColor_.values
                                            })
                                            .attr('stroke-width', function (e) {
                                                return t.labelStrokeWidth_.values + t.labelShadowWidth_.values
                                            })
                                            .style('font-family', t.fontFamily_),
                                        p = l
                                            .append('g')
                                            .attr('class', 'g_stat_labels')
                                            .style('font-size', t.labelValuesFontSize_ + 'px')
                                            .attr('text-anchor', 'middle')
                                            .style('opacity', function (e) {
                                                return t.labelOpacity_.values
                                            })
                                            .style('fill', function (e) {
                                                return t.labelFill_.values
                                            })
                                            .attr('stroke', function (e) {
                                                return t.labelStroke_.values
                                            })
                                            .attr('stroke-width', function (e) {
                                                return t.labelStrokeWidth_.values
                                            })
                                            .style('font-family', t.fontFamily_)
                                    'mixed' == t.nutsLevel_
                                        ? ((t._geom.mixed.rg0 = t._geom.nutsrg),
                                          (t._geom.mixed.rg1 = Ko(u[1], u[1].objects.nutsrg).features),
                                          (t._geom.mixed.rg2 = Ko(u[2], u[2].objects.nutsrg).features),
                                          (t._geom.mixed.rg3 = Ko(u[3], u[3].objects.nutsrg).features),
                                          (c = t._geom.mixed.rg0.concat(t._geom.mixed.rg1, t._geom.mixed.rg2, t._geom.mixed.rg3)))
                                        : (c = t._geom.nutsrg),
                                        'EUR' !== t.geo_ &&
                                            i.labelFilterFunction_ &&
                                            (c = c.filter(function (e) {
                                                return i.labelFilterFunction_(e, t)
                                            })),
                                        p
                                            .selectAll('g')
                                            .data(c)
                                            .enter()
                                            .append('g')
                                            .attr('transform', function (e) {
                                                if (t.statLabelsPositions_[e.properties.id]) {
                                                    var n = t._projection([
                                                            t.statLabelsPositions_[e.properties.id].x,
                                                            t.statLabelsPositions_[e.properties.id].y,
                                                        ]),
                                                        r = n[0].toFixed(3),
                                                        i = n[1].toFixed(3)
                                                    return 'translate('.concat(r, ',').concat(i, ')')
                                                }
                                                return 'translate(' + t._geom.path.centroid(e) + ')'
                                            })
                                            .style('pointer-events', 'none')
                                            .attr('class', 'stat-label'),
                                        t.labelShadow_ &&
                                            f
                                                .selectAll('g')
                                                .data(c)
                                                .enter()
                                                .filter(function (e) {
                                                    return t.labelShadowsToShow_.includes('values')
                                                })
                                                .append('g')
                                                .attr('transform', function (e) {
                                                    if (t.statLabelsPositions_[e.properties.id]) {
                                                        var n = t._projection([
                                                                t.statLabelsPositions_[e.properties.id].x,
                                                                t.statLabelsPositions_[e.properties.id].y,
                                                            ]),
                                                            r = n[0].toFixed(3),
                                                            i = n[1].toFixed(3)
                                                        return 'translate('.concat(r, ',').concat(i, ')')
                                                    }
                                                    return 'translate(' + t._geom.path.centroid(e) + ')'
                                                })
                                                .style('pointer-events', 'none')
                                                .attr('class', 'stat-label-shadow')
                                }
                                if (o) {
                                    var h = o.filter(function (e) {
                                            return ('countries' == e.class && t.labelsToShow_.includes('countries')) ||
                                                ('seas' == e.class && t.labelsToShow_.includes('seas')) ||
                                                ('cc' == e.class && t.labelsToShow_.includes('cc'))
                                                ? e
                                                : void 0
                                        }),
                                        d = l
                                            .append('g')
                                            .attr('class', 'g_labelShadows')
                                            .style('pointer-events', 'none')
                                            .style('font-family', t.fontFamily_)
                                            .attr('text-anchor', 'middle'),
                                        g = l
                                            .append('g')
                                            .attr('class', 'g_geolabels')
                                            .style('pointer-events', 'none')
                                            .style('font-family', t.fontFamily_)
                                            .attr('text-anchor', 'middle')
                                    t.labelShadow_ &&
                                        d
                                            .selectAll('text')
                                            .data(h)
                                            .enter()
                                            .append('text')
                                            .filter(function (e) {
                                                return t.labelShadowsToShow_.includes(e.class)
                                            })
                                            .attr('class', function (t) {
                                                return 'labelShadow_' + t.class
                                            })
                                            .attr('x', function (e) {
                                                return e.rotate ? 0 : t._projection([e.x, e.y])[0]
                                            })
                                            .attr('y', function (e) {
                                                return e.rotate ? 0 : t._projection([e.x, e.y])[1]
                                            })
                                            .attr('dy', -7)
                                            .style('opacity', function (e) {
                                                return t.labelOpacity_[e.class]
                                            })
                                            .style('letter-spacing', function (t) {
                                                return t.letterSpacing ? t.letterSpacing : 0
                                            })
                                            .style('fill', function (e) {
                                                return t.labelShadowColor_[e.class]
                                            })
                                            .attr('stroke', function (e) {
                                                return t.labelShadowColor_[e.class]
                                            })
                                            .attr('stroke-width', function (e) {
                                                return t.labelStrokeWidth_[e.class] + t.labelShadowWidth_[e.class]
                                            })
                                            .style('font-size', function (t) {
                                                return t.size + 'px'
                                            })
                                            .style('font-style', function (t) {
                                                return 'seas' == t.class ? 'italic' : 'normal'
                                            })
                                            .attr('transform', function (e) {
                                                if (e.rotate) {
                                                    var n = t._projection([e.x, e.y]),
                                                        r = n[0],
                                                        i = n[1]
                                                    return 'translate('.concat(r, ',').concat(i, ') rotate(').concat(e.rotate, ')')
                                                }
                                                return 'rotate(0)'
                                            })
                                            .text(function (t) {
                                                return t.text
                                            }),
                                        g
                                            .selectAll('text')
                                            .data(h)
                                            .enter()
                                            .append('text')
                                            .attr('class', function (t) {
                                                return 'geolabel_' + t.class
                                            })
                                            .attr('x', function (e) {
                                                return e.rotate ? 0 : t._projection([e.x, e.y])[0]
                                            })
                                            .attr('y', function (e) {
                                                return e.rotate ? 0 : t._projection([e.x, e.y])[1]
                                            })
                                            .attr('dy', -7)
                                            .style('opacity', function (e) {
                                                return t.labelOpacity_[e.class]
                                            })
                                            .style('letter-spacing', function (t) {
                                                return t.letterSpacing ? t.letterSpacing : 0
                                            })
                                            .style('fill', function (e) {
                                                return t.labelFill_[e.class]
                                            })
                                            .attr('stroke', function (e) {
                                                return t.labelStroke_[e.class]
                                            })
                                            .attr('stroke-width', function (e) {
                                                return t.labelStrokeWidth_[e.class]
                                            })
                                            .style('font-size', function (t) {
                                                return t.size + 'px'
                                            })
                                            .attr('transform', function (e) {
                                                if (e.rotate) {
                                                    var n = t._projection([e.x, e.y]),
                                                        r = n[0],
                                                        i = n[1]
                                                    return 'translate('.concat(r, ',').concat(i, ') rotate(').concat(e.rotate, ')')
                                                }
                                                return 'rotate(0)'
                                            })
                                            .text(function (t) {
                                                return t.text
                                            })
                                }
                            }
                            function p(t) {
                                return t < 0.01 ? 1e3 * t + 'mm' : t < 1 ? 100 * t + 'cm' : t < 1e3 ? 1 * t + 'm' : t / 1e3
                            }
                            ;(i.isGeoReady = function () {
                                if (!l) return !1
                                for (var t in i.insetTemplates_)
                                    if (Array.isArray(i.insetTemplates_[t])) {
                                        for (var e = 0; e < i.insetTemplates_[t].length; e++)
                                            if (Array.isArray(i.insetTemplates_[t][e])) {
                                                for (var n = 0; n < i.insetTemplates_[t][e].length; n++)
                                                    if (!i.insetTemplates_[t][e][n].isGeoReady()) return !1
                                            } else if (!i.insetTemplates_[t][e].isGeoReady()) return !1
                                    } else if (!i.insetTemplates_[t].isGeoReady()) return !1
                                return !0
                            }),
                                (i.getGeoDataPromise = function () {
                                    var t = this
                                    if ('mixed' == i.nutsLevel_ && 'WORLD' !== i.geo_) {
                                        var e = []
                                        return (
                                            [0, 1, 2, 3].forEach(function (n) {
                                                var r = []
                                                r.push(i.nuts2jsonBaseURL_),
                                                    r.push(i.nutsYear_),
                                                    'EUR' != i.geo_ && r.push('/' + t.geo_),
                                                    r.push('/'),
                                                    r.push(i.proj_),
                                                    r.push('/'),
                                                    r.push(i.scale_),
                                                    r.push('/'),
                                                    r.push(n),
                                                    r.push('.json'),
                                                    e.push(mn(r.join('')))
                                            }),
                                            n &&
                                                [0, 1, 2, 3].forEach(function (n) {
                                                    var r = []
                                                    r.push(i.nuts2jsonBaseURL_),
                                                        r.push(i.nutsYear_),
                                                        'EUR' != i.geo_ && r.push('/' + t.geo_),
                                                        r.push('/'),
                                                        r.push(i.proj_),
                                                        r.push('/nutspt_'),
                                                        r.push(n),
                                                        r.push('.json'),
                                                        e.push(mn(r.join('')))
                                                }),
                                            e
                                        )
                                    }
                                    if ('WORLD' == i.geo_)
                                        return [
                                            mn('https://raw.githubusercontent.com/eurostat/eurostat-map/master/src/assets/topojson/WORLD_4326.json'),
                                        ]
                                    var r = [],
                                        a = []
                                    if (
                                        (a.push(i.nuts2jsonBaseURL_),
                                        a.push(i.nutsYear_),
                                        'EUR' != i.geo_ && a.push('/' + this.geo_),
                                        a.push('/'),
                                        a.push(i.proj_),
                                        a.push('/'),
                                        a.push(i.scale_),
                                        a.push('/'),
                                        a.push(i.nutsLevel_),
                                        a.push('.json'),
                                        r.push(mn(a.join(''))),
                                        n)
                                    ) {
                                        var o = []
                                        o.push(i.nuts2jsonBaseURL_),
                                            o.push(i.nutsYear_),
                                            'EUR' != i.geo_ && o.push('/' + this.geo_),
                                            o.push('/'),
                                            o.push(i.proj_),
                                            o.push('/nutspt_'),
                                            o.push(i.nutsLevel_),
                                            o.push('.json'),
                                            r.push(mn(o.join('')))
                                    }
                                    return r
                                }),
                                (i.updateGeoMapTemplate = function (t) {
                                    if (((l = null), (u = null), (c = null), 'mixed' == i.nutsLevel_ && 'WORLD' !== i.geo_)) {
                                        var e = i.getGeoDataPromise()
                                        Promise.all(e).then(
                                            function (e) {
                                                i.filterGeometriesFunction_ && (e = i.filterGeometriesFunction_(e)),
                                                    (u = e),
                                                    (l = e[0]),
                                                    n && (c = [e[4], e[5], e[6], e[7]]),
                                                    i.buildMapTemplate(),
                                                    t && t()
                                            },
                                            function (t) {}
                                        )
                                    } else {
                                        var r = i.getGeoDataPromise()
                                        Promise.all(r).then(
                                            function (e) {
                                                i.filterGeometriesFunction_ && (e = i.filterGeometriesFunction_(e)),
                                                    (l = e[0]),
                                                    n && (c = e[1]),
                                                    i.buildMapTemplate(),
                                                    t && t()
                                            },
                                            function (t) {}
                                        )
                                    }
                                    for (var a in i.insetTemplates_)
                                        if (Array.isArray(i.insetTemplates_[a]))
                                            for (var o = 0; o < i.insetTemplates_[a].length; o++)
                                                if (Array.isArray(i.insetTemplates_[a][o]))
                                                    for (var s = 0; s < i.insetTemplates_[a][o].length; s++)
                                                        i.insetTemplates_[a][o][s].updateGeoMapTemplate(t)
                                                else i.insetTemplates_[a][o].updateGeoMapTemplate(t)
                                        else i.insetTemplates_[a].updateGeoMapTemplate(t)
                                    return i
                                }),
                                (i.buildMapTemplateBase = function () {
                                    var t,
                                        e,
                                        n,
                                        r,
                                        a = yt('#' + i.svgId())
                                    0 == a.size() && (a = yt('body').append('svg').attr('id', i.svgId())),
                                        i.svg(a),
                                        i.containerId_ || (i.containerId_ = i.svgId_),
                                        i.tooltip_.containerId || (i.tooltip_.containerId = i.containerId_),
                                        Gr('#' + i.svgId() + ' > *').remove(),
                                        'WORLD' == i.geo_.toUpperCase() &&
                                            (i.height() || i.height(0.55 * i.width()),
                                            a.attr('width', i.width()).attr('height', i.height()),
                                            (i.proj_ = 54030)),
                                        i.height() || i.height(0.85 * i.width()),
                                        a.attr('width', i.width()).attr('height', i.height()),
                                        a
                                            .append('defs')
                                            .append('clipPath')
                                            .attr('id', i.svgId_ + '_clipP')
                                            .append('path')
                                            .attr(
                                                'd',
                                                ((t = 0),
                                                (e = 0),
                                                (n = i.width_),
                                                (r = i.height_),
                                                (t = parseFloat(t, 10)),
                                                (e = parseFloat(e, 10)),
                                                (n = parseFloat(n, 10)),
                                                (r = parseFloat(r, 10)),
                                                t < 0 || e < 0 || n < 0 || r < 0
                                                    ? ''
                                                    : 'M' +
                                                      t +
                                                      ',' +
                                                      e +
                                                      'L' +
                                                      (t + n) +
                                                      ',' +
                                                      e +
                                                      ' ' +
                                                      (t + n) +
                                                      ',' +
                                                      (e + r) +
                                                      ' ' +
                                                      t +
                                                      ',' +
                                                      (e + r) +
                                                      'z')
                                            ),
                                        i.drawCoastalMargin_ &&
                                            a
                                                .append('filter')
                                                .attr('id', 'coastal_blur')
                                                .attr('x', '-200%')
                                                .attr('y', '-200%')
                                                .attr('width', '400%')
                                                .attr('height', '400%')
                                                .append('feGaussianBlur')
                                                .attr('in', 'SourceGraphic')
                                                .attr('stdDeviation', i.coastalMarginStdDev_)
                                    var o = a
                                            .insert('g', ':first-child')
                                            .attr('id', 'drawing' + i.svgId_)
                                            .attr('class', 'estatmap-drawing-group')
                                            .attr('clip-path', 'url(#' + i.svgId_ + '_clipP)'),
                                        s = o.append('g').attr('id', 'zoomgroup' + i.svgId_)
                                    if (
                                        (i.removeInsets(),
                                        i.buildInsets(),
                                        o
                                            .append('rect')
                                            .attr('id', 'frame' + i.geo_)
                                            .attr('x', 0)
                                            .attr('y', 0)
                                            .attr('width', i.width_)
                                            .attr('height', i.height_)
                                            .style('stroke-width', i.frameStrokeWidth_)
                                            .style('stroke', i.frameStroke_)
                                            .style('fill', 'none'),
                                        i.zoomExtent())
                                    ) {
                                        var l = (function () {
                                            var t,
                                                e,
                                                n,
                                                r = Wr,
                                                i = jr,
                                                a = $r,
                                                o = Br,
                                                s = Ur,
                                                l = [0, 1 / 0],
                                                u = [
                                                    [-1 / 0, -1 / 0],
                                                    [1 / 0, 1 / 0],
                                                ],
                                                c = 250,
                                                f = Ln,
                                                p = zn('start', 'zoom', 'end'),
                                                h = 500,
                                                d = 0,
                                                g = 10
                                            function _(t) {
                                                t.property('__zoom', Hr)
                                                    .on('wheel.zoom', w, { passive: !1 })
                                                    .on('mousedown.zoom', T)
                                                    .on('dblclick.zoom', z)
                                                    .filter(s)
                                                    .on('touchstart.zoom', k)
                                                    .on('touchmove.zoom', F)
                                                    .on('touchend.zoom touchcancel.zoom', A)
                                                    .style('-webkit-tap-highlight-color', 'rgba(0,0,0,0)')
                                            }
                                            function y(t, e) {
                                                return (e = Math.max(l[0], Math.min(l[1], e))) === t.k ? t : new Nr(e, t.x, t.y)
                                            }
                                            function v(t, e, n) {
                                                var r = e[0] - n[0] * t.k,
                                                    i = e[1] - n[1] * t.k
                                                return r === t.x && i === t.y ? t : new Nr(t.k, r, i)
                                            }
                                            function m(t) {
                                                return [(+t[0][0] + +t[1][0]) / 2, (+t[0][1] + +t[1][1]) / 2]
                                            }
                                            function x(t, e, n, r) {
                                                t.on('start.zoom', function () {
                                                    b(this, arguments).event(r).start()
                                                })
                                                    .on('interrupt.zoom end.zoom', function () {
                                                        b(this, arguments).event(r).end()
                                                    })
                                                    .tween('zoom', function () {
                                                        var t = this,
                                                            a = arguments,
                                                            o = b(t, a).event(r),
                                                            s = i.apply(t, a),
                                                            l = null == n ? m(s) : 'function' == typeof n ? n.apply(t, a) : n,
                                                            u = Math.max(s[1][0] - s[0][0], s[1][1] - s[0][1]),
                                                            c = t.__zoom,
                                                            p = 'function' == typeof e ? e.apply(t, a) : e,
                                                            h = f(c.invert(l).concat(u / c.k), p.invert(l).concat(u / p.k))
                                                        return function (t) {
                                                            if (1 === t) t = p
                                                            else {
                                                                var e = h(t),
                                                                    n = u / e[2]
                                                                t = new Nr(n, l[0] - e[0] * n, l[1] - e[1] * n)
                                                            }
                                                            o.zoom(null, t)
                                                        }
                                                    })
                                            }
                                            function b(t, e, n) {
                                                return (!n && t.__zooming) || new S(t, e)
                                            }
                                            function S(t, e) {
                                                ;(this.that = t),
                                                    (this.args = e),
                                                    (this.active = 0),
                                                    (this.sourceEvent = null),
                                                    (this.extent = i.apply(t, e)),
                                                    (this.taps = 0)
                                            }
                                            function w(t, ...e) {
                                                if (r.apply(this, arguments)) {
                                                    var n = b(this, e).event(t),
                                                        i = this.__zoom,
                                                        s = Math.max(l[0], Math.min(l[1], i.k * Math.pow(2, o.apply(this, arguments)))),
                                                        c = Mn(t)
                                                    if (n.wheel)
                                                        (n.mouse[0][0] === c[0] && n.mouse[0][1] === c[1]) ||
                                                            (n.mouse[1] = i.invert((n.mouse[0] = c))),
                                                            clearTimeout(n.wheel)
                                                    else {
                                                        if (i.k === s) return
                                                        ;(n.mouse = [c, i.invert(c)]), er(this), n.start()
                                                    }
                                                    Pr(t),
                                                        (n.wheel = setTimeout(function () {
                                                            ;(n.wheel = null), n.end()
                                                        }, 150)),
                                                        n.zoom('mouse', a(v(y(i, s), n.mouse[0], n.mouse[1]), n.extent, u))
                                                }
                                            }
                                            function T(t, ...e) {
                                                if (!n && r.apply(this, arguments)) {
                                                    var i = t.currentTarget,
                                                        o = b(this, e, !0).event(t),
                                                        s = yt(t.view)
                                                            .on(
                                                                'mousemove.zoom',
                                                                function (t) {
                                                                    if ((Pr(t), !o.moved)) {
                                                                        var e = t.clientX - c,
                                                                            n = t.clientY - f
                                                                        o.moved = e * e + n * n > d
                                                                    }
                                                                    o.event(t).zoom(
                                                                        'mouse',
                                                                        a(v(o.that.__zoom, (o.mouse[0] = Mn(t, i)), o.mouse[1]), o.extent, u)
                                                                    )
                                                                },
                                                                !0
                                                            )
                                                            .on(
                                                                'mouseup.zoom',
                                                                function (t) {
                                                                    s.on('mousemove.zoom mouseup.zoom', null),
                                                                        (function (t, e) {
                                                                            var n = t.document.documentElement,
                                                                                r = yt(t).on('dragstart.drag', null)
                                                                            e &&
                                                                                (r.on('click.drag', Fn, kn),
                                                                                setTimeout(function () {
                                                                                    r.on('click.drag', null)
                                                                                }, 0)),
                                                                                'onselectstart' in n
                                                                                    ? r.on('selectstart.drag', null)
                                                                                    : ((n.style.MozUserSelect = n.__noselect), delete n.__noselect)
                                                                        })(t.view, o.moved),
                                                                        Pr(t),
                                                                        o.event(t).end()
                                                                },
                                                                !0
                                                            ),
                                                        l = Mn(t, i),
                                                        c = t.clientX,
                                                        f = t.clientY
                                                    !(function (t) {
                                                        var e = t.document.documentElement,
                                                            n = yt(t).on('dragstart.drag', Fn, kn)
                                                        'onselectstart' in e
                                                            ? n.on('selectstart.drag', Fn, kn)
                                                            : ((e.__noselect = e.style.MozUserSelect), (e.style.MozUserSelect = 'none'))
                                                    })(t.view),
                                                        Rr(t),
                                                        (o.mouse = [l, this.__zoom.invert(l)]),
                                                        er(this),
                                                        o.start()
                                                }
                                            }
                                            function z(t, ...e) {
                                                if (r.apply(this, arguments)) {
                                                    var n = this.__zoom,
                                                        o = Mn(t.changedTouches ? t.changedTouches[0] : t, this),
                                                        s = n.invert(o),
                                                        l = n.k * (t.shiftKey ? 0.5 : 2),
                                                        f = a(v(y(n, l), o, s), i.apply(this, e), u)
                                                    Pr(t),
                                                        c > 0
                                                            ? yt(this).transition().duration(c).call(x, f, o, t)
                                                            : yt(this).call(_.transform, f, o, t)
                                                }
                                            }
                                            function k(n, ...i) {
                                                if (r.apply(this, arguments)) {
                                                    var a,
                                                        o,
                                                        s,
                                                        l,
                                                        u = n.touches,
                                                        c = u.length,
                                                        f = b(this, i, n.changedTouches.length === c).event(n)
                                                    for (Rr(n), o = 0; o < c; ++o)
                                                        (l = [(l = Mn((s = u[o]), this)), this.__zoom.invert(l), s.identifier]),
                                                            f.touch0
                                                                ? f.touch1 || f.touch0[2] === l[2] || ((f.touch1 = l), (f.taps = 0))
                                                                : ((f.touch0 = l), (a = !0), (f.taps = 1 + !!t))
                                                    t && (t = clearTimeout(t)),
                                                        a &&
                                                            (f.taps < 2 &&
                                                                ((e = l[0]),
                                                                (t = setTimeout(function () {
                                                                    t = null
                                                                }, h))),
                                                            er(this),
                                                            f.start())
                                                }
                                            }
                                            function F(t, ...e) {
                                                if (this.__zooming) {
                                                    var n,
                                                        r,
                                                        i,
                                                        o,
                                                        s = b(this, e).event(t),
                                                        l = t.changedTouches,
                                                        c = l.length
                                                    for (Pr(t), n = 0; n < c; ++n)
                                                        (i = Mn((r = l[n]), this)),
                                                            s.touch0 && s.touch0[2] === r.identifier
                                                                ? (s.touch0[0] = i)
                                                                : s.touch1 && s.touch1[2] === r.identifier && (s.touch1[0] = i)
                                                    if (((r = s.that.__zoom), s.touch1)) {
                                                        var f = s.touch0[0],
                                                            p = s.touch0[1],
                                                            h = s.touch1[0],
                                                            d = s.touch1[1],
                                                            g = (g = h[0] - f[0]) * g + (g = h[1] - f[1]) * g,
                                                            _ = (_ = d[0] - p[0]) * _ + (_ = d[1] - p[1]) * _
                                                        ;(r = y(r, Math.sqrt(g / _))),
                                                            (i = [(f[0] + h[0]) / 2, (f[1] + h[1]) / 2]),
                                                            (o = [(p[0] + d[0]) / 2, (p[1] + d[1]) / 2])
                                                    } else {
                                                        if (!s.touch0) return
                                                        ;(i = s.touch0[0]), (o = s.touch0[1])
                                                    }
                                                    s.zoom('touch', a(v(r, i, o), s.extent, u))
                                                }
                                            }
                                            function A(t, ...r) {
                                                if (this.__zooming) {
                                                    var i,
                                                        a,
                                                        o = b(this, r).event(t),
                                                        s = t.changedTouches,
                                                        l = s.length
                                                    for (
                                                        Rr(t),
                                                            n && clearTimeout(n),
                                                            n = setTimeout(function () {
                                                                n = null
                                                            }, h),
                                                            i = 0;
                                                        i < l;
                                                        ++i
                                                    )
                                                        (a = s[i]),
                                                            o.touch0 && o.touch0[2] === a.identifier
                                                                ? delete o.touch0
                                                                : o.touch1 && o.touch1[2] === a.identifier && delete o.touch1
                                                    if ((o.touch1 && !o.touch0 && ((o.touch0 = o.touch1), delete o.touch1), o.touch0))
                                                        o.touch0[1] = this.__zoom.invert(o.touch0[0])
                                                    else if (
                                                        (o.end(), 2 === o.taps && ((a = Mn(a, this)), Math.hypot(e[0] - a[0], e[1] - a[1]) < g))
                                                    ) {
                                                        var u = yt(this).on('dblclick.zoom')
                                                        u && u.apply(this, arguments)
                                                    }
                                                }
                                            }
                                            return (
                                                (_.transform = function (t, e, n, r) {
                                                    var i = t.selection ? t.selection() : t
                                                    i.property('__zoom', Hr),
                                                        t !== i
                                                            ? x(t, e, n, r)
                                                            : i.interrupt().each(function () {
                                                                  b(this, arguments)
                                                                      .event(r)
                                                                      .start()
                                                                      .zoom(null, 'function' == typeof e ? e.apply(this, arguments) : e)
                                                                      .end()
                                                              })
                                                }),
                                                (_.scaleBy = function (t, e, n, r) {
                                                    _.scaleTo(
                                                        t,
                                                        function () {
                                                            return this.__zoom.k * ('function' == typeof e ? e.apply(this, arguments) : e)
                                                        },
                                                        n,
                                                        r
                                                    )
                                                }),
                                                (_.scaleTo = function (t, e, n, r) {
                                                    _.transform(
                                                        t,
                                                        function () {
                                                            var t = i.apply(this, arguments),
                                                                r = this.__zoom,
                                                                o = null == n ? m(t) : 'function' == typeof n ? n.apply(this, arguments) : n,
                                                                s = r.invert(o),
                                                                l = 'function' == typeof e ? e.apply(this, arguments) : e
                                                            return a(v(y(r, l), o, s), t, u)
                                                        },
                                                        n,
                                                        r
                                                    )
                                                }),
                                                (_.translateBy = function (t, e, n, r) {
                                                    _.transform(
                                                        t,
                                                        function () {
                                                            return a(
                                                                this.__zoom.translate(
                                                                    'function' == typeof e ? e.apply(this, arguments) : e,
                                                                    'function' == typeof n ? n.apply(this, arguments) : n
                                                                ),
                                                                i.apply(this, arguments),
                                                                u
                                                            )
                                                        },
                                                        null,
                                                        r
                                                    )
                                                }),
                                                (_.translateTo = function (t, e, n, r, o) {
                                                    _.transform(
                                                        t,
                                                        function () {
                                                            var t = i.apply(this, arguments),
                                                                o = this.__zoom,
                                                                s = null == r ? m(t) : 'function' == typeof r ? r.apply(this, arguments) : r
                                                            return a(
                                                                Ir.translate(s[0], s[1])
                                                                    .scale(o.k)
                                                                    .translate(
                                                                        'function' == typeof e ? -e.apply(this, arguments) : -e,
                                                                        'function' == typeof n ? -n.apply(this, arguments) : -n
                                                                    ),
                                                                t,
                                                                u
                                                            )
                                                        },
                                                        r,
                                                        o
                                                    )
                                                }),
                                                (S.prototype = {
                                                    event: function (t) {
                                                        return t && (this.sourceEvent = t), this
                                                    },
                                                    start: function () {
                                                        return 1 == ++this.active && ((this.that.__zooming = this), this.emit('start')), this
                                                    },
                                                    zoom: function (t, e) {
                                                        return (
                                                            this.mouse && 'mouse' !== t && (this.mouse[1] = e.invert(this.mouse[0])),
                                                            this.touch0 && 'touch' !== t && (this.touch0[1] = e.invert(this.touch0[0])),
                                                            this.touch1 && 'touch' !== t && (this.touch1[1] = e.invert(this.touch1[0])),
                                                            (this.that.__zoom = e),
                                                            this.emit('zoom'),
                                                            this
                                                        )
                                                    },
                                                    end: function () {
                                                        return 0 == --this.active && (delete this.that.__zooming, this.emit('end')), this
                                                    },
                                                    emit: function (t) {
                                                        var e = yt(this.that).datum()
                                                        p.call(
                                                            t,
                                                            this.that,
                                                            new Or(t, {
                                                                sourceEvent: this.sourceEvent,
                                                                target: _,
                                                                type: t,
                                                                transform: this.that.__zoom,
                                                                dispatch: p,
                                                            }),
                                                            e
                                                        )
                                                    },
                                                }),
                                                (_.wheelDelta = function (t) {
                                                    return arguments.length ? ((o = 'function' == typeof t ? t : Dr(+t)), _) : o
                                                }),
                                                (_.filter = function (t) {
                                                    return arguments.length ? ((r = 'function' == typeof t ? t : Dr(!!t)), _) : r
                                                }),
                                                (_.touchable = function (t) {
                                                    return arguments.length ? ((s = 'function' == typeof t ? t : Dr(!!t)), _) : s
                                                }),
                                                (_.extent = function (t) {
                                                    return arguments.length
                                                        ? ((i =
                                                              'function' == typeof t
                                                                  ? t
                                                                  : Dr([
                                                                        [+t[0][0], +t[0][1]],
                                                                        [+t[1][0], +t[1][1]],
                                                                    ])),
                                                          _)
                                                        : i
                                                }),
                                                (_.scaleExtent = function (t) {
                                                    return arguments.length ? ((l[0] = +t[0]), (l[1] = +t[1]), _) : [l[0], l[1]]
                                                }),
                                                (_.translateExtent = function (t) {
                                                    return arguments.length
                                                        ? ((u[0][0] = +t[0][0]), (u[1][0] = +t[1][0]), (u[0][1] = +t[0][1]), (u[1][1] = +t[1][1]), _)
                                                        : [
                                                              [u[0][0], u[0][1]],
                                                              [u[1][0], u[1][1]],
                                                          ]
                                                }),
                                                (_.constrain = function (t) {
                                                    return arguments.length ? ((a = t), _) : a
                                                }),
                                                (_.duration = function (t) {
                                                    return arguments.length ? ((c = +t), _) : c
                                                }),
                                                (_.interpolate = function (t) {
                                                    return arguments.length ? ((f = t), _) : f
                                                }),
                                                (_.on = function () {
                                                    var t = p.on.apply(p, arguments)
                                                    return t === p ? _ : t
                                                }),
                                                (_.clickDistance = function (t) {
                                                    return arguments.length ? ((d = (t = +t) * t), _) : Math.sqrt(d)
                                                }),
                                                (_.tapDistance = function (t) {
                                                    return arguments.length ? ((g = +t), _) : g
                                                }),
                                                _
                                            )
                                        })()
                                            .scaleExtent(i.zoomExtent())
                                            .on('zoom', function (t) {
                                                t.transform.k, s.attr('transform', t.transform)
                                            })
                                        a.call(l)
                                    }
                                    return i
                                }),
                                (i.removeInsets = function () {
                                    if (i.insetTemplates_) {
                                        for (var t in i.insetTemplates_) {
                                            var e = yt('#' + i.insetTemplates_[t].svgId_)
                                            e && e.html('')
                                        }
                                        i.insetTemplates_ = {}
                                    }
                                }),
                                (i.buildInsets = function () {
                                    i.insetBoxPosition_ ||
                                        (i.insetBoxPosition_ = [i.width_ - i.insetBoxWidth_ - 2 * i.insetBoxPadding_, 2 * i.insetBoxPadding_])
                                    var t = yt('#' + i.svgId_)
                                        .select('#drawing' + i.svgId_)
                                        .append('g')
                                        .attr('id', 'insetsgroup')
                                        .attr('transform', 'translate(' + i.insetBoxPosition_[0] + ',' + i.insetBoxPosition_[1] + ')')
                                    'default' === i.insets_ && (i.insets_ = os(i.insetBoxWidth_, i.insetBoxPadding_))
                                    for (var e = 0; e < i.insets_.length; e++) {
                                        var n = i.insets_[e]
                                        if (
                                            ((n.svgId = n.svgId || 'inset' + n.geo + Math.random().toString(36).substring(7)),
                                            0 == yt('#' + n.svgId).size())
                                        ) {
                                            var r = null == n.x ? i.insetBoxPadding_ : n.x,
                                                a = null == n.y ? i.insetBoxPadding_ + e * (i.insetBoxPadding_ + i.insetBoxWidth_) : n.y
                                            t.append('g')
                                                .attr('id', 'insetzg' + n.svgId)
                                                .attr('transform', 'translate(' + r + ',' + a + ')')
                                                .append('svg')
                                                .attr('id', n.svgId)
                                        }
                                        if (i.insetTemplates_[n.geo]) {
                                            var o = h(n, i)
                                            o.buildMapTemplateBase(), (i.insetTemplates_[n.geo] = [i.insetTemplates_[n.geo], o])
                                        } else {
                                            var s = h(n, i).buildMapTemplateBase()
                                            i.insetTemplates_[n.geo] = s
                                        }
                                    }
                                    return i
                                }),
                                (i.buildMapTemplate = function () {
                                    i.tooltip_ ? (i._tooltip = Qo(i.tooltip_)) : (i._tooltip = Qo())
                                    var t = as[i.geo_ + '_' + i.proj_]
                                    i.geoCenter() ||
                                        (t ? i.geoCenter(t.geoCenter) : i.geoCenter([0.5 * (l.bbox[0] + l.bbox[2]), 0.5 * (l.bbox[1] + l.bbox[3])])),
                                        i.pixSize_ ||
                                            (t
                                                ? i.pixSize((800 * t.pixSize) / i.width_)
                                                : i.pixSize(Math.min((l.bbox[2] - l.bbox[0]) / i.width_, (l.bbox[3] - l.bbox[1]) / i.height_)))
                                    var e,
                                        a = [
                                            i.geoCenter_[0] - 0.5 * i.pixSize_ * i.width_,
                                            i.geoCenter_[1] - 0.5 * i.pixSize_ * i.height_,
                                            i.geoCenter_[0] + 0.5 * i.pixSize_ * i.width_,
                                            i.geoCenter_[1] + 0.5 * i.pixSize_ * i.height_,
                                        ]
                                    'WORLD' == i.geo_
                                        ? (i._projection = i.projectionFunction_
                                              ? i.projectionFunction_
                                              : (function (t) {
                                                    return (function (t) {
                                                        var e,
                                                            n,
                                                            r,
                                                            i,
                                                            a,
                                                            o,
                                                            s,
                                                            l,
                                                            u,
                                                            c,
                                                            f = 150,
                                                            p = 480,
                                                            h = 250,
                                                            d = 0,
                                                            g = 0,
                                                            _ = 0,
                                                            y = 0,
                                                            v = 0,
                                                            m = 0,
                                                            x = 1,
                                                            b = 1,
                                                            S = null,
                                                            w = ko,
                                                            T = null,
                                                            z = yi,
                                                            k = 0.5
                                                        function F(t) {
                                                            return l(t[0] * Zr, t[1] * Zr)
                                                        }
                                                        function A(t) {
                                                            return (t = l.invert(t[0], t[1])) && [t[0] * Jr, t[1] * Jr]
                                                        }
                                                        function L() {
                                                            var t = Ro(f, 0, 0, x, b, m).apply(null, e(d, g)),
                                                                r = (m ? Ro : Io)(f, p - t[0], h - t[1], x, b, m)
                                                            return (
                                                                (n = (function (t, e, n) {
                                                                    return (t %= Kr) ? (e || n ? Ao(Co(t), Eo(e, n)) : Co(t)) : e || n ? Eo(e, n) : Lo
                                                                })(_, y, v)),
                                                                (s = Ao(e, r)),
                                                                (l = Ao(n, s)),
                                                                (o = Oo(s, k)),
                                                                M()
                                                            )
                                                        }
                                                        function M() {
                                                            return (u = c = null), F
                                                        }
                                                        return (
                                                            (F.stream = function (t) {
                                                                return u && c === t
                                                                    ? u
                                                                    : (u = No(
                                                                          (function (t) {
                                                                              return vi({
                                                                                  point: function (e, n) {
                                                                                      var r = t(e, n)
                                                                                      return this.stream.point(r[0], r[1])
                                                                                  },
                                                                              })
                                                                          })(n)(w(o(z((c = t)))))
                                                                      ))
                                                            }),
                                                            (F.preclip = function (t) {
                                                                return arguments.length ? ((w = t), (S = void 0), M()) : w
                                                            }),
                                                            (F.postclip = function (t) {
                                                                return arguments.length ? ((z = t), (T = r = i = a = null), M()) : z
                                                            }),
                                                            (F.clipAngle = function (t) {
                                                                return arguments.length
                                                                    ? ((w = +t
                                                                          ? (function (t) {
                                                                                var e = ni(t),
                                                                                    n = 6 * Zr,
                                                                                    r = e > 0,
                                                                                    i = Qr(e) > Vr
                                                                                function a(t, n) {
                                                                                    return ni(t) * ni(n) > e
                                                                                }
                                                                                function o(t, n, r) {
                                                                                    var i = [1, 0, 0],
                                                                                        a = yo(go(t), go(n)),
                                                                                        o = _o(a, a),
                                                                                        s = a[0],
                                                                                        l = o - s * s
                                                                                    if (!l) return !r && t
                                                                                    var u = (e * o) / l,
                                                                                        c = (-e * s) / l,
                                                                                        f = yo(i, a),
                                                                                        p = mo(i, u)
                                                                                    vo(p, mo(a, c))
                                                                                    var h = f,
                                                                                        d = _o(p, h),
                                                                                        g = _o(h, h),
                                                                                        _ = d * d - g * (_o(p, p) - 1)
                                                                                    if (!(_ < 0)) {
                                                                                        var y = oi(_),
                                                                                            v = mo(h, (-d - y) / g)
                                                                                        if ((vo(v, p), (v = ho(v)), !r)) return v
                                                                                        var m,
                                                                                            x = t[0],
                                                                                            b = n[0],
                                                                                            S = t[1],
                                                                                            w = n[1]
                                                                                        b < x && ((m = x), (x = b), (b = m))
                                                                                        var T = b - x,
                                                                                            z = Qr(T - qr) < Vr
                                                                                        if (
                                                                                            (!z && w < S && ((m = S), (S = w), (w = m)),
                                                                                            z || T < Vr
                                                                                                ? z
                                                                                                    ? (S + w > 0) ^
                                                                                                      (v[1] < (Qr(v[0] - x) < Vr ? S : w))
                                                                                                    : S <= v[1] && v[1] <= w
                                                                                                : (T > qr) ^ (x <= v[0] && v[0] <= b))
                                                                                        ) {
                                                                                            var k = mo(h, (-d + y) / g)
                                                                                            return vo(k, p), [v, ho(k)]
                                                                                        }
                                                                                    }
                                                                                }
                                                                                function s(e, n) {
                                                                                    var i = r ? t : qr - t,
                                                                                        a = 0
                                                                                    return (
                                                                                        e < -i ? (a |= 1) : e > i && (a |= 2),
                                                                                        n < -i ? (a |= 4) : n > i && (a |= 8),
                                                                                        a
                                                                                    )
                                                                                }
                                                                                return wo(
                                                                                    a,
                                                                                    function (t) {
                                                                                        var e, n, l, u, c
                                                                                        return {
                                                                                            lineStart: function () {
                                                                                                ;(u = l = !1), (c = 1)
                                                                                            },
                                                                                            point: function (f, p) {
                                                                                                var h,
                                                                                                    d = [f, p],
                                                                                                    g = a(f, p),
                                                                                                    _ = r
                                                                                                        ? g
                                                                                                            ? 0
                                                                                                            : s(f, p)
                                                                                                        : g
                                                                                                          ? s(f + (f < 0 ? qr : -qr), p)
                                                                                                          : 0
                                                                                                if (
                                                                                                    (!e && (u = l = g) && t.lineStart(),
                                                                                                    g !== l &&
                                                                                                        (!(h = o(e, d)) || ci(e, h) || ci(d, h)) &&
                                                                                                        (d[2] = 1),
                                                                                                    g !== l)
                                                                                                )
                                                                                                    (c = 0),
                                                                                                        g
                                                                                                            ? (t.lineStart(),
                                                                                                              (h = o(d, e)),
                                                                                                              t.point(h[0], h[1]))
                                                                                                            : ((h = o(e, d)),
                                                                                                              t.point(h[0], h[1], 2),
                                                                                                              t.lineEnd()),
                                                                                                        (e = h)
                                                                                                else if (i && e && r ^ g) {
                                                                                                    var y
                                                                                                    _ & n ||
                                                                                                        !(y = o(d, e, !0)) ||
                                                                                                        ((c = 0),
                                                                                                        r
                                                                                                            ? (t.lineStart(),
                                                                                                              t.point(y[0][0], y[0][1]),
                                                                                                              t.point(y[1][0], y[1][1]),
                                                                                                              t.lineEnd())
                                                                                                            : (t.point(y[1][0], y[1][1]),
                                                                                                              t.lineEnd(),
                                                                                                              t.lineStart(),
                                                                                                              t.point(y[0][0], y[0][1], 3)))
                                                                                                }
                                                                                                !g || (e && ci(e, d)) || t.point(d[0], d[1]),
                                                                                                    (e = d),
                                                                                                    (l = g),
                                                                                                    (n = _)
                                                                                            },
                                                                                            lineEnd: function () {
                                                                                                l && t.lineEnd(), (e = null)
                                                                                            },
                                                                                            clean: function () {
                                                                                                return c | ((u && l) << 1)
                                                                                            },
                                                                                        }
                                                                                    },
                                                                                    function (e, r, i, a) {
                                                                                        !(function (t, e, n, r, i, a) {
                                                                                            if (n) {
                                                                                                var o = ni(e),
                                                                                                    s = ii(e),
                                                                                                    l = r * n
                                                                                                null == i
                                                                                                    ? ((i = e + r * Kr), (a = e - l / 2))
                                                                                                    : ((i = Fo(o, i)),
                                                                                                      (a = Fo(o, a)),
                                                                                                      (r > 0 ? i < a : i > a) && (i += r * Kr))
                                                                                                for (var u, c = i; r > 0 ? c > a : c < a; c -= l)
                                                                                                    (u = ho([o, -s * ni(c), -s * ii(c)])),
                                                                                                        t.point(u[0], u[1])
                                                                                            }
                                                                                        })(a, t, n, i, e, r)
                                                                                    },
                                                                                    r ? [0, -t] : [-qr, t - qr]
                                                                                )
                                                                            })((S = t * Zr))
                                                                          : ((S = null), ko)),
                                                                      M())
                                                                    : S * Jr
                                                            }),
                                                            (F.clipExtent = function (t) {
                                                                return arguments.length
                                                                    ? ((z =
                                                                          null == t
                                                                              ? ((T = r = i = a = null), yi)
                                                                              : _i((T = +t[0][0]), (r = +t[0][1]), (i = +t[1][0]), (a = +t[1][1]))),
                                                                      M())
                                                                    : null == T
                                                                      ? null
                                                                      : [
                                                                            [T, r],
                                                                            [i, a],
                                                                        ]
                                                            }),
                                                            (F.scale = function (t) {
                                                                return arguments.length ? ((f = +t), L()) : f
                                                            }),
                                                            (F.translate = function (t) {
                                                                return arguments.length ? ((p = +t[0]), (h = +t[1]), L()) : [p, h]
                                                            }),
                                                            (F.center = function (t) {
                                                                return arguments.length
                                                                    ? ((d = (t[0] % 360) * Zr), (g = (t[1] % 360) * Zr), L())
                                                                    : [d * Jr, g * Jr]
                                                            }),
                                                            (F.rotate = function (t) {
                                                                return arguments.length
                                                                    ? ((_ = (t[0] % 360) * Zr),
                                                                      (y = (t[1] % 360) * Zr),
                                                                      (v = t.length > 2 ? (t[2] % 360) * Zr : 0),
                                                                      L())
                                                                    : [_ * Jr, y * Jr, v * Jr]
                                                            }),
                                                            (F.angle = function (t) {
                                                                return arguments.length ? ((m = (t % 360) * Zr), L()) : m * Jr
                                                            }),
                                                            (F.reflectX = function (t) {
                                                                return arguments.length ? ((x = t ? -1 : 1), L()) : x < 0
                                                            }),
                                                            (F.reflectY = function (t) {
                                                                return arguments.length ? ((b = t ? -1 : 1), L()) : b < 0
                                                            }),
                                                            (F.precision = function (t) {
                                                                return arguments.length ? ((o = Oo(s, (k = t * t))), M()) : oi(k)
                                                            }),
                                                            (F.fitExtent = function (t, e) {
                                                                return Di(F, t, e)
                                                            }),
                                                            (F.fitSize = function (t, e) {
                                                                return Oi(F, t, e)
                                                            }),
                                                            (F.fitWidth = function (t, e) {
                                                                return Ni(F, t, e)
                                                            }),
                                                            (F.fitHeight = function (t, e) {
                                                                return Ii(F, t, e)
                                                            }),
                                                            function () {
                                                                return (e = t.apply(this, arguments)), (F.invert = e.invert && A), L()
                                                            }
                                                        )
                                                    })(function () {
                                                        return t
                                                    })()
                                                })(Yo)
                                                    .scale(152.63)
                                                    .translate([i.width_ / 2, i.height_ / 2])
                                                    .scale((i.width_ - 20) / 2 / Math.PI))
                                        : (i._projection = i.projectionFunction_
                                              ? i.projectionFunction_
                                              : (function () {
                                                    var t,
                                                        e,
                                                        n,
                                                        r,
                                                        i,
                                                        a,
                                                        o,
                                                        s = 1,
                                                        l = 0,
                                                        u = 0,
                                                        c = 1,
                                                        f = 1,
                                                        p = 0,
                                                        h = null,
                                                        d = 1,
                                                        g = 1,
                                                        _ = vi({
                                                            point: function (t, e) {
                                                                var n = m([t, e])
                                                                this.stream.point(n[0], n[1])
                                                            },
                                                        }),
                                                        y = yi
                                                    function v() {
                                                        return (d = s * c), (g = s * f), (a = o = null), m
                                                    }
                                                    function m(n) {
                                                        var r = n[0] * d,
                                                            i = n[1] * g
                                                        if (p) {
                                                            var a = i * t - r * e
                                                            ;(r = r * t + i * e), (i = a)
                                                        }
                                                        return [r + l, i + u]
                                                    }
                                                    return (
                                                        (m.invert = function (n) {
                                                            var r = n[0] - l,
                                                                i = n[1] - u
                                                            if (p) {
                                                                var a = i * t + r * e
                                                                ;(r = r * t - i * e), (i = a)
                                                            }
                                                            return [r / d, i / g]
                                                        }),
                                                        (m.stream = function (t) {
                                                            return a && o === t ? a : (a = _(y((o = t))))
                                                        }),
                                                        (m.postclip = function (t) {
                                                            return arguments.length ? ((y = t), (h = n = r = i = null), v()) : y
                                                        }),
                                                        (m.clipExtent = function (t) {
                                                            return arguments.length
                                                                ? ((y =
                                                                      null == t
                                                                          ? ((h = n = r = i = null), yi)
                                                                          : _i((h = +t[0][0]), (n = +t[0][1]), (r = +t[1][0]), (i = +t[1][1]))),
                                                                  v())
                                                                : null == h
                                                                  ? null
                                                                  : [
                                                                        [h, n],
                                                                        [r, i],
                                                                    ]
                                                        }),
                                                        (m.scale = function (t) {
                                                            return arguments.length ? ((s = +t), v()) : s
                                                        }),
                                                        (m.translate = function (t) {
                                                            return arguments.length ? ((l = +t[0]), (u = +t[1]), v()) : [l, u]
                                                        }),
                                                        (m.angle = function (n) {
                                                            return arguments.length ? ((e = ii((p = (n % 360) * Zr))), (t = ni(p)), v()) : p * Jr
                                                        }),
                                                        (m.reflectX = function (t) {
                                                            return arguments.length ? ((c = t ? -1 : 1), v()) : c < 0
                                                        }),
                                                        (m.reflectY = function (t) {
                                                            return arguments.length ? ((f = t ? -1 : 1), v()) : f < 0
                                                        }),
                                                        (m.fitExtent = function (t, e) {
                                                            return Di(m, t, e)
                                                        }),
                                                        (m.fitSize = function (t, e) {
                                                            return Oi(m, t, e)
                                                        }),
                                                        (m.fitWidth = function (t, e) {
                                                            return Ni(m, t, e)
                                                        }),
                                                        (m.fitHeight = function (t, e) {
                                                            return Ii(m, t, e)
                                                        }),
                                                        m
                                                    )
                                                })()
                                                    .reflectY(!0)
                                                    .fitSize([i.width_, i.height_], {
                                                        type: 'Feature',
                                                        geometry: {
                                                            type: 'MultiPoint',
                                                            coordinates: [
                                                                [(e = a)[0], e[1]],
                                                                [e[2], e[3]],
                                                            ],
                                                        },
                                                    })),
                                        (i._geom.path = (function (t, e) {
                                            var n,
                                                r,
                                                i = 4.5
                                            function a(t) {
                                                return (
                                                    t && ('function' == typeof i && r.pointRadius(+i.apply(this, arguments)), zi(t, n(r))), r.result()
                                                )
                                            }
                                            return (
                                                (a.area = function (t) {
                                                    return zi(t, n(na)), na.result()
                                                }),
                                                (a.measure = function (t) {
                                                    return zi(t, n(Xa)), Xa.result()
                                                }),
                                                (a.bounds = function (t) {
                                                    return zi(t, n(Ci)), Ci.result()
                                                }),
                                                (a.centroid = function (t) {
                                                    return zi(t, n(Sa)), Sa.result()
                                                }),
                                                (a.projection = function (e) {
                                                    return arguments.length ? ((n = null == e ? ((t = null), yi) : (t = e).stream), a) : t
                                                }),
                                                (a.context = function (t) {
                                                    return arguments.length
                                                        ? ((r = null == t ? ((e = null), new Ka()) : new wa((e = t))),
                                                          'function' != typeof i && r.pointRadius(i),
                                                          a)
                                                        : e
                                                }),
                                                (a.pointRadius = function (t) {
                                                    return arguments.length ? ((i = 'function' == typeof t ? t : (r.pointRadius(+t), +t)), a) : i
                                                }),
                                                a.projection(t).context(e)
                                            )
                                        })().projection(i._projection)),
                                        'WORLD' == i.geo_
                                            ? ((i._geom.worldrg = Ko(l, l.objects.CNTR_RG_20M_2020_4326).features),
                                              (i._geom.worldbn = Ko(l, l.objects.CNTR_BN_20M_2020_4326).features),
                                              (i._geom.kosovo = Ko(l, l.objects.NUTS_BN_20M_2021_RS_XK_border).features),
                                              (i._geom.gra = [to().step([30, 30])()]))
                                            : ((i._geom.gra = Ko(l, l.objects.gra).features),
                                              (i._geom.nutsrg = Ko(l, l.objects.nutsrg).features),
                                              (i._geom.nutsbn = Ko(l, l.objects.nutsbn).features),
                                              (i._geom.cntrg = Ko(l, l.objects.cntrg).features),
                                              (i._geom.cntbn = Ko(l, l.objects.cntbn).features))
                                    var o,
                                        s = i.svg().select('#zoomgroup' + i.svgId_)
                                    if (
                                        (s.selectAll('*').remove(),
                                        s
                                            .append('rect')
                                            .attr('id', 'sea')
                                            .attr('x', -5 * i.width_)
                                            .attr('y', -5 * i.height_)
                                            .attr('width', 11 * i.width_)
                                            .attr('height', 11 * i.height_)
                                            .style('fill', function () {
                                                return 'WORLD' == i.geo_ ? 'white' : i.seaFillStyle_
                                            }),
                                        'WORLD' == i.geo_ &&
                                            s
                                                .append('path')
                                                .datum({ type: 'Sphere' })
                                                .attr('id', 'sphere')
                                                .attr('d', i._geom.path)
                                                .attr('stroke', i.graticuleStroke())
                                                .attr('stroke-width', i.graticuleStrokeWidth())
                                                .style('fill', i.seaFillStyle_),
                                        i.drawCoastalMargin_)
                                    ) {
                                        var h = s
                                            .append('g')
                                            .attr('id', 'g_coast_margin')
                                            .style('fill', 'none')
                                            .style('stroke-width', i.coastalMarginWidth_)
                                            .style('stroke', i.coastalMarginColor_)
                                            .style('filter', 'url(#coastal_blur)')
                                            .style('stroke-linejoin', 'round')
                                            .style('stroke-linecap', 'round')
                                        i._geom.cntbn &&
                                            h
                                                .append('g')
                                                .attr('id', 'g_coast_margin_cnt')
                                                .selectAll('path')
                                                .data(i._geom.cntbn)
                                                .enter()
                                                .filter(function (t) {
                                                    return 'T' === t.properties.co
                                                })
                                                .append('path')
                                                .attr('d', i._geom.path),
                                            i._geom.nutsbn &&
                                                h
                                                    .append('g')
                                                    .attr('id', 'g_coast_margin_nuts')
                                                    .selectAll('path')
                                                    .data(i._geom.nutsbn)
                                                    .enter()
                                                    .filter(function (t) {
                                                        return 'T' === t.properties.co
                                                    })
                                                    .append('path')
                                                    .attr('d', i._geom.path),
                                            i._geom.worldbn &&
                                                h
                                                    .append('g')
                                                    .attr('id', 'g_coast_margin_nuts')
                                                    .selectAll('path')
                                                    .data(i._geom.worldbn)
                                                    .enter()
                                                    .filter(function (t) {
                                                        return 'T' === t.properties.COAS_FLAG
                                                    })
                                                    .append('path')
                                                    .attr('d', i._geom.path)
                                    }
                                    if (
                                        (i._geom.gra &&
                                            i.drawGraticule_ &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_gra')
                                                .style('fill', 'none')
                                                .style('stroke', i.graticuleStroke())
                                                .style('stroke-width', i.graticuleStrokeWidth())
                                                .selectAll('path')
                                                .data(i._geom.gra)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .attr('class', 'gra'),
                                        i._geom.cntrg &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_cntrg')
                                                .selectAll('path')
                                                .data(i._geom.cntrg)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .attr('class', 'cntrg')
                                                .attr('fill', i.cntrgFillStyle()),
                                        i._geom.worldrg &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_worldrg')
                                                .selectAll('path')
                                                .data(i._geom.worldrg)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .attr('class', 'worldrg')
                                                .attr('fill', i.worldFillStyle_),
                                        i._geom.nutsrg)
                                    )
                                        if ('mixed' == i.nutsLevel_) {
                                            if (
                                                ((i._geom.mixed.rg0 = i._geom.nutsrg),
                                                (i._geom.mixed.rg1 = Ko(u[1], u[1].objects.nutsrg).features),
                                                (i._geom.mixed.rg2 = Ko(u[2], u[2].objects.nutsrg).features),
                                                (i._geom.mixed.rg3 = Ko(u[3], u[3].objects.nutsrg).features),
                                                [i._geom.mixed.rg0, i._geom.mixed.rg1, i._geom.mixed.rg2, i._geom.mixed.rg3].forEach(function (t, e) {
                                                    s.append('g')
                                                        .attr('id', 'g_nutsrg')
                                                        .selectAll('path')
                                                        .data(t)
                                                        .enter()
                                                        .append('path')
                                                        .attr('d', i._geom.path)
                                                        .attr('class', 'nutsrg')
                                                        .attr('lvl', e)
                                                        .attr('fill', i.nutsrgFillStyle_)
                                                }),
                                                'EUR' == i.geo_ && '3035' == i.proj)
                                            ) {
                                                var d = Ko(ns[i.scale_], 'nutsbn_1').features
                                                i.bordersToShow_.includes('cc') &&
                                                    s
                                                        .append('g')
                                                        .attr('id', 'g_kosovo')
                                                        .style('fill', 'none')
                                                        .selectAll('path')
                                                        .data(d)
                                                        .enter()
                                                        .append('path')
                                                        .attr('d', i._geom.path)
                                                        .style('stroke', 'grey')
                                                        .style('stroke-width', 0.3)
                                            }
                                        } else
                                            s.append('g')
                                                .attr('id', 'g_nutsrg')
                                                .selectAll('path')
                                                .data(i._geom.nutsrg)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .attr('class', 'nutsrg')
                                                .attr('fill', i.nutsrgFillStyle_)
                                    if (
                                        (i._geom.cntbn &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_cntbn')
                                                .style('fill', 'none')
                                                .selectAll('path')
                                                .data(i._geom.cntbn)
                                                .enter()
                                                .append('path')
                                                .filter(function (t) {
                                                    return (i.bordersToShow_.includes('eu') && 'T' == t.properties.eu) ||
                                                        (i.bordersToShow_.includes('efta') && 'T' == t.properties.efta) ||
                                                        (i.bordersToShow_.includes('cc') && 'T' == t.properties.cc) ||
                                                        (i.bordersToShow_.includes('oth') && 'T' == t.properties.oth) ||
                                                        (i.bordersToShow_.includes('co') && 'T' == t.properties.co)
                                                        ? t
                                                        : void 0
                                                })
                                                .attr('d', i._geom.path)
                                                .attr('class', function (t) {
                                                    return 'T' === t.properties.co ? 'bn_co' : 'cntbn'
                                                })
                                                .style('stroke', function (t) {
                                                    return 'T' === t.properties.co
                                                        ? i.cntbnStroke_.co
                                                        : 'T' === t.properties.eu
                                                          ? i.cntbnStroke_.eu
                                                          : 'T' === t.properties.efta
                                                            ? i.cntbnStroke_.efta
                                                            : 'T' === t.properties.cc
                                                              ? i.cntbnStroke_.cc
                                                              : 'T' === t.properties.oth
                                                                ? i.cntbnStroke_.oth
                                                                : void 0
                                                })
                                                .style('stroke-width', function (t) {
                                                    return 'T' === t.properties.co
                                                        ? i.cntbnStrokeWidth_.co + 'px'
                                                        : 'T' === t.properties.eu
                                                          ? i.cntbnStrokeWidth_.eu + 'px'
                                                          : 'T' === t.properties.efta
                                                            ? i.cntbnStrokeWidth_.efta + 'px'
                                                            : 'T' === t.properties.cc
                                                              ? i.cntbnStrokeWidth_.cc + 'px'
                                                              : 'T' === t.properties.oth
                                                                ? i.cntbnStrokeWidth_.oth + 'px'
                                                                : void 0
                                                }),
                                        i._geom.nutsbn &&
                                            (i._geom.nutsbn.sort(function (t, e) {
                                                return e.properties.lvl - t.properties.lvl
                                            }),
                                            s
                                                .append('g')
                                                .attr('id', 'g_nutsbn')
                                                .style('fill', 'none')
                                                .selectAll('path')
                                                .data(i._geom.nutsbn)
                                                .enter()
                                                .filter(function (t) {
                                                    return (i.bordersToShow_.includes('eu') && 'T' == t.properties.eu) ||
                                                        (i.bordersToShow_.includes('efta') && 'T' == t.properties.efta) ||
                                                        (i.bordersToShow_.includes('cc') && 'T' == t.properties.cc) ||
                                                        (i.bordersToShow_.includes('oth') && 'T' == t.properties.oth) ||
                                                        (i.bordersToShow_.includes('co') && 'T' == t.properties.co)
                                                        ? t
                                                        : void 0
                                                })
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .attr('class', function (t) {
                                                    return 'T' === (t = t.properties).co ? 'bn_co' : ['bn_' + t.lvl].join(' ')
                                                })
                                                .style('stroke', function (t) {
                                                    return 'T' === (t = t.properties).co
                                                        ? i.nutsbnStroke_.co || '#1f78b4'
                                                        : t.id > 1e5
                                                          ? '#4f4f4f'
                                                          : i.nutsbnStroke_[t.lvl] || '#777'
                                                })
                                                .style('stroke-width', function (t) {
                                                    return 'T' === (t = t.properties).co
                                                        ? i.nutsbnStrokeWidth_.co
                                                        : t.id > 1e5
                                                          ? 0.2
                                                          : (t.lvl, i.nutsbnStrokeWidth_[t.lvl])
                                                }),
                                            'EUR' == i.geo_ && '3035' == i.proj))
                                    ) {
                                        var g = Ko(ns[i.scale_], 'nutsbn_1').features
                                        i.bordersToShow_.includes('cc') &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_kosovo')
                                                .style('fill', 'none')
                                                .selectAll('path')
                                                .data(g)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .style('stroke', 'grey')
                                                .style('stroke-width', 0.3)
                                    }
                                    if (
                                        (i._geom.worldbn &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_worldbn')
                                                .style('fill', 'none')
                                                .selectAll('path')
                                                .data(i._geom.worldbn)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .style('stroke', function (t) {
                                                    return t.properties.POL_STAT > 0
                                                        ? '#b2b2b2'
                                                        : 'F' == t.properties.COAS_FLAG
                                                          ? i.worldStroke_
                                                          : 'T' == t.properties.COAS_FLAG
                                                            ? i.worldCoastStroke_
                                                            : void 0
                                                })
                                                .style('stroke-width', function (t) {
                                                    return 'F' == t.properties.COAS_FLAG
                                                        ? i.worldStrokeWidth_
                                                        : 'T' == t.properties.COAS_FLAG
                                                          ? i.worldCoastStrokeWidth_
                                                          : void 0
                                                }),
                                        i._geom.kosovo &&
                                            s
                                                .append('g')
                                                .attr('id', 'g_worldbn')
                                                .style('fill', 'none')
                                                .selectAll('path')
                                                .data(i._geom.kosovo)
                                                .enter()
                                                .append('path')
                                                .attr('d', i._geom.path)
                                                .style('stroke', '#4f4f4f')
                                                .style('stroke-width', function (t) {
                                                    return '0.3px'
                                                }),
                                        n &&
                                            (c
                                                ? (o =
                                                      'mixed' == i.nutsLevel_
                                                          ? [].concat(r(c[0].features), r(c[1].features), r(c[2].features), r(c[3].features))
                                                          : c.features)
                                                : 'WORLD' == i.geo_ &&
                                                  ((o = []),
                                                  i._geom.worldrg.forEach(function (t) {
                                                      var e = (function (t) {
                                                          for (var e = 1; e < arguments.length; e++) {
                                                              var n = null != arguments[e] ? arguments[e] : {}
                                                              e % 2
                                                                  ? rs(Object(n), !0).forEach(function (e) {
                                                                        _n(t, e, n[e])
                                                                    })
                                                                  : Object.getOwnPropertyDescriptors
                                                                    ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
                                                                    : rs(Object(n)).forEach(function (e) {
                                                                          Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e))
                                                                      })
                                                          }
                                                          return t
                                                      })({}, t)
                                                      'FR' == t.properties.id
                                                          ? (e.geometry = { coordinates: [2.2, 46.2], type: 'Point' })
                                                          : (e.geometry = { coordinates: po(t), type: 'Point' }),
                                                          o.push(e)
                                                  })),
                                            (i._centroidFeatures = o),
                                            s
                                                .append('g')
                                                .attr('id', 'g_ps')
                                                .selectAll('g')
                                                .data(i._centroidFeatures)
                                                .enter()
                                                .append('g')
                                                .attr('transform', function (t) {
                                                    var e = i._projection(t.geometry.coordinates)
                                                    return 'translate(' + e[0].toFixed(3) + ',' + e[1].toFixed(3) + ')'
                                                })
                                                .attr('class', 'symbol')
                                                .attr('id', function (t) {
                                                    return 'ps' + t.properties.id
                                                })
                                                .on('mouseover', function (t, e) {
                                                    if (i.countriesToShow_ && 'WORLD' !== i.geo_) {
                                                        if (i.countriesToShow_.includes(e.properties.id[0] + e.properties.id[1])) {
                                                            var n = yt(this.childNodes[0])
                                                            n.attr('fill___', n.attr('fill')),
                                                                n.attr('fill', i.nutsrgSelFillSty_),
                                                                i._tooltip && i._tooltip.mouseover(i.tooltip_.textFunction(e, i))
                                                        }
                                                    } else {
                                                        var r = yt(this.childNodes[0])
                                                        r.attr('fill___', r.attr('fill')),
                                                            r.attr('fill', i.nutsrgSelFillSty_),
                                                            i._tooltip && i._tooltip.mouseover(i.tooltip_.textFunction(e, i))
                                                    }
                                                })
                                                .on('mousemove', function (t, e) {
                                                    i.countriesToShow_ && 'WORLD' !== i.geo_
                                                        ? i.countriesToShow_.includes(e.properties.id[0] + e.properties.id[1]) &&
                                                          i._tooltip &&
                                                          i._tooltip.mousemove(t)
                                                        : i._tooltip && i._tooltip.mousemove(t)
                                                })
                                                .on('mouseout', function (t) {
                                                    var e = yt(this.childNodes[0]),
                                                        n = e.attr('fill___')
                                                    n && (e.attr('fill', n), i._tooltip && i._tooltip.mouseout())
                                                })),
                                        i.labelling_ && f(i, s),
                                        i.title() &&
                                            (i.titlePosition() || i.titlePosition([10, 5 + i.titleFontSize()]),
                                            i
                                                .svg()
                                                .append('text')
                                                .attr('id', 'title' + i.geo_)
                                                .attr('class', 'eurostat-map-title')
                                                .style('pointer-events', 'none')
                                                .attr('x', i.titlePosition()[0])
                                                .attr('y', i.titlePosition()[1])
                                                .text(i.title())
                                                .style('font-family', i.fontFamily_)
                                                .style('font-size', i.titleFontSize() + 'px')
                                                .style('font-weight', i.titleFontWeight())
                                                .style('fill', i.titleFill())
                                                .style('stroke', i.titleStroke())
                                                .style('stroke-width', i.titleStrokeWidth())
                                                .style('stroke-linejoin', 'round')
                                                .style('paint-order', 'stroke')),
                                        i.subtitle() &&
                                            (i.subtitlePosition() || i.subtitlePosition([10, 8 + i.titleFontSize() + 5 + i.subtitleFontSize()]),
                                            i
                                                .svg()
                                                .append('text')
                                                .attr('id', 'subtitle' + i.geo_)
                                                .attr('class', 'eurostat-map-subtitle')
                                                .style('pointer-events', 'none')
                                                .attr('x', i.subtitlePosition()[0])
                                                .attr('y', i.subtitlePosition()[1])
                                                .text(i.subtitle())
                                                .style('font-family', i.fontFamily_)
                                                .style('font-size', i.subtitleFontSize() + 'px')
                                                .style('font-weight', i.subtitleFontWeight())
                                                .style('fill', i.subtitleFill())
                                                .style('stroke', i.subtitleStroke())
                                                .style('stroke-width', i.subtitleStrokeWidth())
                                                .style('stroke-linejoin', 'round')
                                                .style('paint-order', 'stroke')),
                                        i.bottomText() &&
                                            i
                                                .svg()
                                                .append('text')
                                                .attr('id', 'bottomtext')
                                                .attr('x', i.botTxtPadding_)
                                                .attr('y', i.height_ - i.botTxtPadding_)
                                                .text(i.bottomText())
                                                .style('font-family', i.fontFamily_)
                                                .style('font-size', i.botTxtFontSize_ + 'px')
                                                .style('fill', i.botTxtFill_)
                                                .on('mouseover', function () {
                                                    ;(i._tooltip.mw___ = i._tooltip.style('max-width')),
                                                        i._tooltip.style('max-width', '400px'),
                                                        i._tooltip.style('font-size', i.botTxtFontSize_),
                                                        i.botTxtTooltipTxt_ && i._tooltip.mouseover(i.botTxtTooltipTxt_)
                                                })
                                                .on('mousemove', function (t) {
                                                    i.botTxtTooltipTxt_ && i._tooltip.mousemove(t)
                                                })
                                                .on('mouseout', function (t) {
                                                    i.botTxtTooltipTxt_ && i._tooltip.mouseout(t), i._tooltip.style('max-width', i._tooltip.mw___)
                                                }),
                                        i.showSourceLink_ && i.stat() && i.stat().eurostatDatasetCode)
                                    ) {
                                        var _ = i.stat().eurostatDatasetCode,
                                            y = 'https://ec.europa.eu/eurostat/databrowser/view/'.concat(_, '/default/table?lang=en'),
                                            v = i
                                                .svg()
                                                .append('a')
                                                .attr('href', y)
                                                .attr('target', '_blank')
                                                .append('text')
                                                .attr('id', 'source-dataset-link')
                                                .attr('x', i.width_ - i.botTxtPadding_)
                                                .attr('y', i.height_ - i.botTxtPadding_)
                                                .text('EUROSTAT')
                                                .style('font-family', i.fontFamily_)
                                                .style('font-size', i.botTxtFontSize_ + 'px')
                                                .style('font-weight', 'bold')
                                                .attr('text-anchor', 'end')
                                                .on('mouseover', function () {
                                                    var t = yt(this)
                                                    t.attr('fill', 'lightblue'), t.style('cursor', 'pointer'), t.style('text-decoration', 'underline')
                                                })
                                                .on('mouseout', function () {
                                                    var t = yt(this)
                                                    t.attr('fill', 'black'), t.style('cursor', 'default'), t.style('text-decoration', 'none')
                                                })
                                                .node()
                                                .getComputedTextLength()
                                        i.svg()
                                            .append('text')
                                            .attr('x', i.width_ - i.botTxtPadding_ - v - 2)
                                            .attr('y', i.height_ - i.botTxtPadding_)
                                            .text('Source:')
                                            .style('font-family', i.fontFamily_)
                                            .style('font-size', i.botTxtFontSize_ + 'px')
                                            .style('stroke-width', '0.3px')
                                            .attr('text-anchor', 'end')
                                    }
                                    return (
                                        i.showScalebar_ &&
                                            (2 !== i.scalebarPosition_.length &&
                                                ((i.scalebarPosition_[0] = 15), (i.scalebarPosition_[1] = i.height_ - 50)),
                                            (function () {
                                                var t,
                                                    e,
                                                    n = i
                                                        .svg()
                                                        .append('svg')
                                                        .attr('id', 'scalebar')
                                                        .attr('x', i.scalebarPosition_[0])
                                                        .attr('y', i.scalebarPosition_[1]),
                                                    r = (i.scalebarSegmentHeight_, 5),
                                                    a = i.scalebarMaxWidth_,
                                                    o = i.scalebarTextOffset_[0],
                                                    s = i.scalebarTextOffset_[1],
                                                    l = i.pixSize_,
                                                    u =
                                                        ((t = a * l),
                                                        5 * (e = Math.pow(10, Math.floor(Math.log(t) / Math.log(10)))) <= t
                                                            ? [5 * e, 5]
                                                            : 2 * e <= t
                                                              ? [2 * e, 2]
                                                              : [e, 1]),
                                                    c = u[0] / l,
                                                    f = u[1],
                                                    h = i
                                                        .svg()
                                                        .append('svg')
                                                        .attr('class', 'scalebar')
                                                        .attr('x', i.scalebarPosition_[0])
                                                        .attr('y', i.scalebarPosition_[1])
                                                        .attr('width', a + 20)
                                                        .attr('height', i.scalebarHeight_)
                                                h
                                                    .append('line')
                                                    .attr('class', 'eurostat-map-scalebar-line')
                                                    .attr('x1', r)
                                                    .attr('y1', 1)
                                                    .attr('x2', c + r)
                                                    .attr('y2', 1)
                                                    .style('stroke', '#000')
                                                    .style('stroke-width', '0.8px'),
                                                    h
                                                        .append('line')
                                                        .attr('class', 'eurostat-map-scalebar-line')
                                                        .attr('x1', r)
                                                        .attr('y1', i.scalebarSegmentHeight_)
                                                        .attr('x2', c + r)
                                                        .attr('y2', i.scalebarSegmentHeight_)
                                                        .style('stroke', '#000')
                                                        .style('stroke-width', '0.8px'),
                                                    h
                                                        .append('line')
                                                        .attr('class', 'eurostat-map-scalebar-line')
                                                        .attr('x1', r)
                                                        .attr('y1', 1)
                                                        .attr('x2', r)
                                                        .attr('y2', i.scalebarTickHeight_)
                                                        .style('stroke', '#000')
                                                        .style('stroke-width', i.scalebarStrokeWidth_ + 'px'),
                                                    h
                                                        .append('text')
                                                        .attr('class', 'eurostat-map-scalebar-label')
                                                        .attr('x', r + o)
                                                        .attr('y', i.scalebarTickHeight_ + s)
                                                        .text('0')
                                                        .style('font-size', i.scalebarFontSize_ + 'px')
                                                        .style('font-family', i.fontFamily_)
                                                        .attr('text-anchor', 'middle')
                                                var d = { 1: 4, 2: 2, 5: 5 }[f],
                                                    g = c / d
                                                if (g >= 15) {
                                                    for (var _ = 1; _ < d; _++)
                                                        h
                                                            .append('line')
                                                            .attr('class', 'eurostat-map-scalebar-line')
                                                            .attr('x1', r + i.scalebarStrokeWidth_ / 2 + _ * g)
                                                            .attr('y1', 1)
                                                            .attr('x2', r + i.scalebarStrokeWidth_ / 2 + _ * g)
                                                            .attr('y2', i.scalebarTickHeight_)
                                                            .style('stroke', '#000')
                                                            .style('stroke-width', '0.8px')
                                                            .style('stroke', 'black')
                                                            .style('stroke-width', i.scalebarStrokeWidth_),
                                                            h
                                                                .append('text')
                                                                .attr('class', 'eurostat-map-scalebar-label')
                                                                .attr('x', r + o + _ * g)
                                                                .attr('y', i.scalebarTickHeight_ + s)
                                                                .text(p((u[0] / d) * _))
                                                                .style('font-size', i.scalebarFontSize_ + 'px')
                                                                .style('font-family', i.fontFamily_)
                                                                .attr('text-anchor', 'middle')
                                                    for (var y = -1; y < d; y += 2)
                                                        if (1 == y)
                                                            n.append('line')
                                                                .attr('class', 'eurostat-map-scalebar-line')
                                                                .attr('x1', r + i.scalebarStrokeWidth_ - 1)
                                                                .attr('y1', i.scalebarSegmentHeight_ / 2)
                                                                .attr('x2', r + i.scalebarStrokeWidth_ / 2 + y * g)
                                                                .attr('y2', i.scalebarSegmentHeight_ / 2)
                                                                .style('stroke', '#000')
                                                                .style('stroke-width', i.scalebarStrokeWidth_ + 'px')
                                                        else {
                                                            var v = r + i.scalebarStrokeWidth_ / 2 + (y - 1) * g
                                                            v > 0 &&
                                                                n
                                                                    .append('line')
                                                                    .attr('class', 'eurostat-map-scalebar-line')
                                                                    .attr('x1', v)
                                                                    .attr('y1', i.scalebarSegmentHeight_ / 2)
                                                                    .attr('x2', r + i.scalebarStrokeWidth_ / 2 + y * g)
                                                                    .attr('y2', i.scalebarSegmentHeight_ / 2)
                                                                    .style('stroke', '#000')
                                                                    .style('stroke-width', '0.8px')
                                                        }
                                                } else
                                                    n.append('line')
                                                        .attr('class', 'eurostat-map-scalebar-line')
                                                        .attr('x1', r + i.scalebarStrokeWidth_ - 1)
                                                        .attr('y1', i.scalebarSegmentHeight_ / 2)
                                                        .attr('x2', r + i.scalebarStrokeWidth_ / 2 + g * d)
                                                        .attr('y2', i.scalebarSegmentHeight_ / 2)
                                                        .style('stroke', '#000')
                                                        .style('stroke-width', i.scalebarStrokeWidth_ + 'px')
                                                h
                                                    .append('line')
                                                    .attr('class', 'eurostat-map-scalebar-line')
                                                    .attr('x1', c + r)
                                                    .attr('y1', 1)
                                                    .attr('x2', c + r)
                                                    .attr('y2', i.scalebarTickHeight_)
                                                    .style('stroke', '#000')
                                                    .style('stroke-width', i.scalebarStrokeWidth_ + 'px'),
                                                    h
                                                        .append('text')
                                                        .attr('class', 'eurostat-map-scalebar-label')
                                                        .attr('x', c + r + o)
                                                        .attr('y', i.scalebarTickHeight_ + s)
                                                        .text(p(u[0]) + i.scalebarUnits_)
                                                        .style('text-anchor', 'middle')
                                                        .style('font-size', i.scalebarFontSize_ + 'px')
                                                        .style('font-family', i.fontFamily_)
                                            })()),
                                        i
                                    )
                                }),
                                (i.updateLabels = function () {
                                    var t = i.svg_.selectAll('g.labels-container > *')
                                    if ((t && t.remove(), i.labelling_)) {
                                        var e = i.svg_.select('#zoomgroup' + i.svgId_)
                                        f(i, e), i.labelsToShow_.includes('values') && i.updateValuesLabels && i.updateValuesLabels(i)
                                    }
                                    if (i.insetTemplates_)
                                        for (var n in i.insetTemplates_)
                                            if (Array.isArray(i.insetTemplates_[n])) {
                                                for (var r = 0; r < i.insetTemplates_[n].length; r++)
                                                    if (Array.isArray(i.insetTemplates_[n][r])) {
                                                        for (var a = 0; a < i.insetTemplates_[n][r].length; a++)
                                                            if (i.insetTemplates_[n][r][a].svgId_ !== i.svgId_) {
                                                                var o = i.insetTemplates_[n][r][a]
                                                                if (o.labelling_) {
                                                                    var s = o.svg_.select('#zoomgroup' + o.svgId_)
                                                                    f(o, s), o.labelsToShow_.includes('values') && i.updateValuesLabels(o)
                                                                }
                                                            }
                                                    } else if (i.insetTemplates_[n][r].svgId_ !== i.svgId_) {
                                                        var l = i.insetTemplates_[n][r]
                                                        if (l.labelling_) {
                                                            var u = l.svg_.select('#zoomgroup' + l.svgId_)
                                                            f(l, u), l.labelsToShow_.includes('values') && i.updateValuesLabels(l)
                                                        }
                                                    }
                                            } else if (i.insetTemplates_[n].svgId_ !== i.svgId_) {
                                                var c = i.insetTemplates_[n]
                                                if (c.labelling_) {
                                                    var p = c.svg_.select('#zoomgroup' + c.svgId_)
                                                    f(c, p), c.labelsToShow_.includes('values') && i.updateValuesLabels(c)
                                                }
                                            }
                                }),
                                (i.updateValuesLabels = function (t) {
                                    return (
                                        t.svg_.selectAll('g.stat-label > *').remove(),
                                        t.svg_.selectAll('g.stat-label-shadow > *').remove(),
                                        t.svg_
                                            .selectAll('g.stat-label')
                                            .filter(i.statLabelsFilterFunction)
                                            .append('text')
                                            .text(i.statLabelsTextFunction),
                                        i.labelShadow_ &&
                                            t.svg_
                                                .selectAll('g.stat-label-shadow')
                                                .filter(i.statLabelsFilterFunction)
                                                .append('text')
                                                .text(i.statLabelsTextFunction),
                                        i
                                    )
                                }),
                                (i.statLabelsTextFunction = function (t) {
                                    if (i.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) || 'WORLD' == i.geo_) {
                                        var e = i.statData().get(t.properties.id)
                                        if (!e || (!e.value && 0 !== e && 0 !== e.value)) return ''
                                        if (':' !== e.value) return Zo(e.value)
                                    }
                                }),
                                (i.statLabelsFilterFunction = function (t) {
                                    if (i.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) || 'WORLD' == i.geo_) {
                                        var e = i.statData().get(t.properties.id)
                                        return !(!e || (!e.value && 0 !== e && 0 !== e.value))
                                    }
                                    return !1
                                })
                            var h = function (e, r) {
                                var a = t(0, n)
                                for (var o in (((e = e || {}).proj = e.proj || ss[e.geo]),
                                (e.scale = e.scale || i.insetScale_),
                                (e.bottomText = e.bottomText || ''),
                                (e.showSourceLink = e.showSourceLink || !1),
                                (e.botTxtTooltipTxt = e.botTxtTooltipTxt || ''),
                                (e.zoomExtent = e.zoomExtent || i.insetZoomExtent_),
                                (e.width = e.width || i.insetBoxWidth_),
                                (e.height = e.height || i.insetBoxWidth_),
                                (e.insets = e.insets || []),
                                (e.insetTemplates = e.insetTemplates || {}),
                                (e.callback = e.callback || void 0),
                                [
                                    'nutsLevel_',
                                    'nutsYear_',
                                    'nutsrgFillStyle_',
                                    'nutsrgSelFillSty_',
                                    'nutsbnStroke_',
                                    'nutsbnStrokeWidth_',
                                    'cntrgFillStyle_',
                                    'cntbnStroke_',
                                    'cntbnStrokeWidth_',
                                    'seaFillStyle_',
                                    'drawCoastalMargin_',
                                    'coastalMarginColor_',
                                    'coastalMarginWidth_',
                                    'coastalMarginStdDev_',
                                    'graticuleStroke_',
                                    'graticuleStrokeWidth_',
                                    'labelling_',
                                    'labelFill_',
                                    'labelValuesFontSize_',
                                    'labelOpacity_',
                                    'labelStroke_',
                                    'labelStrokeWidth_',
                                    'labelShadowWidth_',
                                    'labelShadow_',
                                    'labelShadowColor_',
                                    'labelShadowsToShow_',
                                    'labelsToShow_',
                                    'fontFamily_',
                                    'lg_',
                                    'projectionFunction_',
                                    'filterGeometriesFunction_',
                                ].forEach(function (t) {
                                    a[t] = i[t]
                                }),
                                [
                                    'stat',
                                    'statData',
                                    'legend',
                                    'legendObj',
                                    'noDataText',
                                    'lg',
                                    'transitionDuration',
                                    'tooltip_',
                                    'classToText_',
                                ].forEach(function (t) {
                                    a[t] = i[t]
                                }),
                                e))
                                    a[o + '_'] = e[o]
                                return a
                            }
                            return i
                        },
                        as = {
                            EUR_3035: { geoCenter: [497e4, 335e4], pixSize: 6800 },
                            IC_32628: { geoCenter: [443468, 3145647], pixSize: 1e3 },
                            GP_32620: { geoCenter: [669498, 1784552], pixSize: 130 },
                            MQ_32620: { geoCenter: [716521, 1621322], pixSize: 130 },
                            GF_32622: { geoCenter: [266852, 444074], pixSize: 500 },
                            RE_32740: { geoCenter: [348011, 7661627], pixSize: 130 },
                            YT_32738: { geoCenter: [516549, 8583920], pixSize: 70 },
                            MT_3035: { geoCenter: [4719755, 1441701], pixSize: 70 },
                            PT20_32626: { geoCenter: [397418, 4271471], pixSize: 1500 },
                            PT30_32628: { geoCenter: [333586, 3622706], pixSize: 150 },
                            LI_3035: { geoCenter: [4287060, 2672e3], pixSize: 40 },
                            IS_3035: { geoCenter: [3011804, 496e4], pixSize: 700 },
                            SJ_SV_3035: { geoCenter: [457e4, 6160156], pixSize: 800 },
                            SJ_JM_3035: { geoCenter: [3647762, 5408300], pixSize: 100 },
                            CARIB_32620: { geoCenter: [636345, 1669439], pixSize: 500 },
                            WORLD_54030: { geoCenter: [14, 17], pixSize: 9e3 },
                        },
                        os = function (t, e) {
                            for (
                                var n = [
                                        { geo: 'IC', x: 0, y: 0, width: t, height: 0.3 * t, frameStroke: 'lightgrey' },
                                        {
                                            geo: 'CARIB',
                                            x: 0,
                                            y: 0.3 * t + e,
                                            width: 0.5 * t,
                                            height: t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'GF',
                                            x: 0.5 * t,
                                            y: 0.3 * t + e,
                                            width: 0.5 * t,
                                            height: 0.75 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'YT',
                                            x: 0.5 * t,
                                            y: 1.05 * t + e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'RE',
                                            x: 0.75 * t,
                                            y: 1.05 * t + e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'PT20',
                                            x: 0,
                                            y: 1.3 * t + 2 * e,
                                            width: 0.75 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'PT30',
                                            x: 0.75 * t,
                                            y: 1.3 * t + 2 * e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'MT',
                                            x: 0,
                                            y: 1.55 * t + 3 * e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'LI',
                                            x: 0.25 * t,
                                            y: 1.55 * t + 3 * e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'SJ_SV',
                                            x: 0.5 * t,
                                            y: 1.55 * t + 3 * e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                        {
                                            geo: 'SJ_JM',
                                            x: 0.75 * t,
                                            y: 1.55 * t + 3 * e,
                                            width: 0.25 * t,
                                            height: 0.25 * t,
                                            frameStroke: 'lightgrey',
                                        },
                                    ],
                                    r = 0;
                                r < n.length;
                                r++
                            )
                                n[r].drawGraticule = !1
                            return n
                        },
                        ss = {
                            EUR: '3035',
                            IC: '32628',
                            GP: '32620',
                            MQ: '32620',
                            GF: '32622',
                            RE: '32740',
                            YT: '32738',
                            MT: '3035',
                            PT20: '32626',
                            PT30: '32628',
                            LI: '3035',
                            IS: '3035',
                            SJ_SV: '3035',
                            SJ_JM: '3035',
                            CARIB: '32620',
                            WORLD: '54030',
                        },
                        ls = {},
                        us = {}
                    function cs(t) {
                        return new Function(
                            'd',
                            'return {' +
                                t
                                    .map(function (t, e) {
                                        return JSON.stringify(t) + ': d[' + e + '] || ""'
                                    })
                                    .join(',') +
                                '}'
                        )
                    }
                    function fs(t) {
                        var e = Object.create(null),
                            n = []
                        return (
                            t.forEach(function (t) {
                                for (var r in t) r in e || n.push((e[r] = r))
                            }),
                            n
                        )
                    }
                    function ps(t, e) {
                        var n = t + '',
                            r = n.length
                        return r < e ? new Array(e - r + 1).join(0) + n : n
                    }
                    function hs(t) {
                        var e = new RegExp('["' + t + '\n\r]'),
                            n = t.charCodeAt(0)
                        function r(t, e) {
                            var r,
                                i = [],
                                a = t.length,
                                o = 0,
                                s = 0,
                                l = a <= 0,
                                u = !1
                            function c() {
                                if (l) return us
                                if (u) return (u = !1), ls
                                var e,
                                    r,
                                    i = o
                                if (34 === t.charCodeAt(i)) {
                                    for (; (o++ < a && 34 !== t.charCodeAt(o)) || 34 === t.charCodeAt(++o); );
                                    return (
                                        (e = o) >= a
                                            ? (l = !0)
                                            : 10 === (r = t.charCodeAt(o++))
                                              ? (u = !0)
                                              : 13 === r && ((u = !0), 10 === t.charCodeAt(o) && ++o),
                                        t.slice(i + 1, e - 1).replace(/""/g, '"')
                                    )
                                }
                                for (; o < a; ) {
                                    if (10 === (r = t.charCodeAt((e = o++)))) u = !0
                                    else if (13 === r) (u = !0), 10 === t.charCodeAt(o) && ++o
                                    else if (r !== n) continue
                                    return t.slice(i, e)
                                }
                                return (l = !0), t.slice(i, a)
                            }
                            for (10 === t.charCodeAt(a - 1) && --a, 13 === t.charCodeAt(a - 1) && --a; (r = c()) !== us; ) {
                                for (var f = []; r !== ls && r !== us; ) f.push(r), (r = c())
                                ;(e && null == (f = e(f, s++))) || i.push(f)
                            }
                            return i
                        }
                        function i(e, n) {
                            return e.map(function (e) {
                                return n
                                    .map(function (t) {
                                        return o(e[t])
                                    })
                                    .join(t)
                            })
                        }
                        function a(e) {
                            return e.map(o).join(t)
                        }
                        function o(t) {
                            return null == t
                                ? ''
                                : t instanceof Date
                                  ? (function (t) {
                                        var e,
                                            n = t.getUTCHours(),
                                            r = t.getUTCMinutes(),
                                            i = t.getUTCSeconds(),
                                            a = t.getUTCMilliseconds()
                                        return isNaN(t)
                                            ? 'Invalid Date'
                                            : ((e = t.getUTCFullYear()) < 0 ? '-' + ps(-e, 6) : e > 9999 ? '+' + ps(e, 6) : ps(e, 4)) +
                                                  '-' +
                                                  ps(t.getUTCMonth() + 1, 2) +
                                                  '-' +
                                                  ps(t.getUTCDate(), 2) +
                                                  (a
                                                      ? 'T' + ps(n, 2) + ':' + ps(r, 2) + ':' + ps(i, 2) + '.' + ps(a, 3) + 'Z'
                                                      : i
                                                        ? 'T' + ps(n, 2) + ':' + ps(r, 2) + ':' + ps(i, 2) + 'Z'
                                                        : r || n
                                                          ? 'T' + ps(n, 2) + ':' + ps(r, 2) + 'Z'
                                                          : '')
                                    })(t)
                                  : e.test((t += ''))
                                    ? '"' + t.replace(/"/g, '""') + '"'
                                    : t
                        }
                        return {
                            parse: function (t, e) {
                                var n,
                                    i,
                                    a = r(t, function (t, r) {
                                        if (n) return n(t, r - 1)
                                        ;(i = t),
                                            (n = e
                                                ? (function (t, e) {
                                                      var n = cs(t)
                                                      return function (r, i) {
                                                          return e(n(r), i, t)
                                                      }
                                                  })(t, e)
                                                : cs(t))
                                    })
                                return (a.columns = i || []), a
                            },
                            parseRows: r,
                            format: function (e, n) {
                                return null == n && (n = fs(e)), [n.map(o).join(t)].concat(i(e, n)).join('\n')
                            },
                            formatBody: function (t, e) {
                                return null == e && (e = fs(t)), i(t, e).join('\n')
                            },
                            formatRows: function (t) {
                                return t.map(a).join('\n')
                            },
                            formatRow: a,
                            formatValue: o,
                        }
                    }
                    var ds = hs(','),
                        gs = ds.parse,
                        _s = (ds.parseRows, ds.format, ds.formatBody, ds.formatRows, ds.formatRow, ds.formatValue, hs('\t')),
                        ys = _s.parse
                    function vs(t) {
                        if (!t.ok) throw new Error(t.status + ' ' + t.statusText)
                        return t.text()
                    }
                    function ms(t) {
                        return function (e, n, r) {
                            return (
                                2 === arguments.length && 'function' == typeof n && ((r = n), (n = void 0)),
                                (function (t, e) {
                                    return fetch(t, e).then(vs)
                                })(e, n).then(function (e) {
                                    return t(e, r)
                                })
                            )
                        }
                    }
                    _s.parseRows, _s.format, _s.formatBody, _s.formatRows, _s.formatRow, _s.formatValue
                    var xs = ms(gs)
                    function bs(t, e) {
                        var n,
                            r,
                            i,
                            a,
                            o = function (t, e, n) {
                                var r,
                                    i = []
                                if ((n && !ws(n.name) && (n = null), 'string' == typeof t && (t = [t]), Array.isArray(t) || Ss(t))) {
                                    if (t.length === e)
                                        return n &&
                                            -1 ===
                                                t.findIndex(function (t) {
                                                    return null == t
                                                })
                                            ? n.from(t)
                                            : t
                                    if (1 === t.length) {
                                        for (r = 0; r < e; r++) i.push(t[0])
                                        return i
                                    }
                                }
                                for (r = 0; r < e; r++) {
                                    var a = void 0 === t[r] ? null : t[r]
                                    i.push(a)
                                }
                                return i
                            }
                        if (((this.length = 0), (this.id = []), null != t))
                            switch (((this.class = t.class || 'bundle'), this.class)) {
                                case 'bundle':
                                    var s = [],
                                        l = 0
                                    if (((this.error = null), (this.length = 0), null === t || 'object' != typeof t)) return void (this.class = null)
                                    if (t.hasOwnProperty('error')) return void (this.error = t.error)
                                    if ('dataset' === t.class || 'collection' === t.class || 'dimension' === t.class) return new bs(t)
                                    for (r in t) l++, s.push(r)
                                    ;(this.__tree__ = t), (this.length = l), (this.id = s)
                                    break
                                case 'dataset':
                                    t.hasOwnProperty('__tree__') ? (this.__tree__ = n = t.__tree__) : (this.__tree__ = n = t),
                                        (this.label = n.label || null),
                                        (this.note = n.note || null),
                                        (this.link = n.link || null),
                                        (this.href = n.href || null),
                                        (this.updated = n.updated || null),
                                        (this.source = n.source || null),
                                        (this.extension = n.extension || null)
                                    var u,
                                        c = 0,
                                        f = n.size || (n.dimension && n.dimension.size)
                                    if (
                                        ((this.size = f),
                                        (this.value = n.hasOwnProperty('value') && null !== n.value && 0 !== n.value.length ? n.value : {}),
                                        Array.isArray(this.value) || Ss(this.value))
                                    )
                                        c = this.value.length
                                    else {
                                        var p = 1
                                        for (u = f.length; u--; ) p *= f[u]
                                        c = p
                                    }
                                    if (
                                        ((this.value = o(this.value, c, e)),
                                        (this.status = n.hasOwnProperty('status') ? o(n.status, c) : null),
                                        n.hasOwnProperty('dimension'))
                                    ) {
                                        var h = n.dimension,
                                            d = n.role || (!n.version && h.role) || null,
                                            g = n.id || h.id,
                                            _ = f.length,
                                            y = function (t) {
                                                d.hasOwnProperty(t) || (d[t] = null)
                                            }
                                        if (!Array.isArray(g) || !Array.isArray(f) || g.length != _) return
                                        if (
                                            ((this.length = _),
                                            (this.id = g),
                                            d && (y('time'), y('geo'), y('metric'), y('classification')),
                                            d && null === d.classification)
                                        ) {
                                            var v = [],
                                                m = ['time', 'geo', 'metric'],
                                                x = function (t, e) {
                                                    for (var n = e.length; n--; ) if (t === e[n]) return !0
                                                    return !1
                                                }
                                            for (u = 0; u < 3; u++) {
                                                var b = d[m[u]]
                                                null !== b && (v = v.concat(b))
                                            }
                                            for (d.classification = [], u = 0; u < _; u++) x(g[u], v) || d.classification.push(g[u])
                                            0 === d.classification.length && (d.classification = null)
                                        }
                                        ;(this.role = d), (this.n = c)
                                        for (var S = 0, w = this.length; S < w; S++)
                                            if (h[g[S]].category.hasOwnProperty('index')) {
                                                if (Array.isArray(h[g[S]].category.index)) {
                                                    var T = {},
                                                        z = h[g[S]].category.index
                                                    for (i = z.length, a = 0; a < i; a++) T[z[a]] = a
                                                    h[g[S]].category.index = T
                                                }
                                            } else {
                                                var k = 0
                                                for (r in ((h[g[S]].category.index = {}), h[g[S]].category.label)) h[g[S]].category.index[r] = k++
                                            }
                                    } else this.length = 0
                                    break
                                case 'dimension':
                                    if (!t.hasOwnProperty('__tree__'))
                                        return new bs({
                                            version: '2.0',
                                            class: 'dataset',
                                            dimension: { d: t },
                                            id: ['d'],
                                            size: [
                                                (function (t) {
                                                    var e = void 0 === t.index ? t.label : t.index
                                                    return Array.isArray(e) ? e.length : Object.keys(e).length
                                                })(t.category),
                                            ],
                                            value: [null],
                                        }).Dimension(0)
                                    var F = [],
                                        A = (n = t.__tree__).category
                                    if (!n.hasOwnProperty('category')) return
                                    if (!A.hasOwnProperty('label')) for (r in ((A.label = {}), A.index)) A.label[r] = r
                                    for (r in A.index) F[A.index[r]] = r
                                    ;(this.__tree__ = n),
                                        (this.label = n.label || null),
                                        (this.note = n.note || null),
                                        (this.link = n.link || null),
                                        (this.href = n.href || null),
                                        (this.id = F),
                                        (this.length = F.length),
                                        (this.role = t.role),
                                        (this.hierarchy = A.hasOwnProperty('child')),
                                        (this.extension = n.extension || null)
                                    break
                                case 'category':
                                    var L = t.child
                                    ;(this.id = L),
                                        (this.length = null === L ? 0 : L.length),
                                        (this.index = t.index),
                                        (this.label = t.label),
                                        (this.note = t.note || null),
                                        (this.unit = t.unit),
                                        (this.coordinates = t.coord)
                                    break
                                case 'collection':
                                    if (
                                        ((this.length = 0),
                                        (this.label = t.label || null),
                                        (this.note = t.note || null),
                                        (this.link = t.link || null),
                                        (this.href = t.href || null),
                                        (this.updated = t.updated || null),
                                        (this.source = t.source || null),
                                        (this.extension = t.extension || null),
                                        null !== this.link && t.link.item)
                                    ) {
                                        var M = t.link.item
                                        if (((this.length = Array.isArray(M) ? M.length : 0), this.length))
                                            for (a = 0; a < this.length; a++) this.id[a] = M[a].href
                                    }
                            }
                    }
                    function Ss(t) {
                        return '[object ArrayBuffer]' === Object.prototype.toString.call(t.buffer)
                    }
                    function ws(t) {
                        return (
                            -1 !==
                            [
                                'Int8Array',
                                'Uint8Array',
                                'Uint8ClampedArray',
                                'Int16Array',
                                'Uint16Array',
                                'Int32Array',
                                'Uint32Array',
                                'Float32Array',
                                'Float64Array',
                                'BigInt64Array',
                                'BigUint64Array',
                            ].indexOf(t)
                        )
                    }
                    function Ts(t) {
                        if (!t.ok) throw new Error(t.status + ' ' + t.statusText)
                        return t.json()
                    }
                    ms(ys),
                        (bs.prototype.Item = function (t) {
                            if (null === this || 'collection' !== this.class || !this.length) return null
                            if ('number' == typeof t) return t > this.length || t < 0 ? null : this.link.item[t]
                            var e,
                                n = []
                            if ('object' == typeof t) {
                                if (!t.class && !t.follow) return null
                                t.class &&
                                    (e =
                                        'dataset' === t.class && 'boolean' == typeof t.embedded
                                            ? !0 === t.embedded
                                                ? function (t, e, r) {
                                                      var i = t.link.item[e]
                                                      r.class === i.class && i.id && i.size && i.dimension && n.push(i)
                                                  }
                                                : function (t, e, r) {
                                                      var i = t.link.item[e]
                                                      r.class !== i.class || (i.id && i.size && i.dimension) || n.push(i)
                                                  }
                                            : function (t, e, r) {
                                                  r.class === t.link.item[e].class && n.push(t.link.item[e])
                                              })
                            } else
                                e = function (t, e) {
                                    n.push(t.link.item[e])
                                }
                            for (var r = 0; r < this.length; r++) e(this, r, t)
                            return n
                        }),
                        (bs.prototype.Dataset = function (t) {
                            if (null === this) return null
                            if ('dataset' === this.class) return void 0 !== t ? this : [this]
                            var e,
                                n = [],
                                r = 0
                            if ('collection' === this.class) {
                                var i = this.Item({ class: 'dataset', embedded: !0 })
                                if (void 0 === t) {
                                    for (e = i.length; r < e; r++) n.push(new bs(i[r]))
                                    return n
                                }
                                if ('number' == typeof t && t >= 0 && t < i.length) return new bs(i[t])
                                if ('string' == typeof t) for (e = i.length; r < e; r++) if (i[r].href === t) return new bs(i[r])
                                return null
                            }
                            if ('bundle' !== this.class) return null
                            if (void 0 === t) {
                                for (e = this.id.length; r < e; r++) n.push(this.Dataset(this.id[r]))
                                return n
                            }
                            if ('number' == typeof t) {
                                var a = this.id[t]
                                return void 0 !== a ? this.Dataset(a) : null
                            }
                            var o = this.__tree__[t]
                            return void 0 === o ? null : new bs({ class: 'dataset', __tree__: o })
                        }),
                        (bs.prototype.Dimension = function (t, e) {
                            e = 'boolean' != typeof e || e
                            var n,
                                r = [],
                                i = this.id.length,
                                a = function (t, e) {
                                    if (null !== t) for (var n in t) for (var r = null !== t[n] ? t[n].length : 0; r--; ) if (t[n][r] === e) return n
                                    return null
                                }
                            if (null === this || 'dataset' !== this.class) return null
                            if (void 0 === t) {
                                for (n = 0; n < i; n++) r.push(this.Dimension(this.id[n]))
                                return r
                            }
                            if ('number' == typeof t) {
                                var o = this.id[t]
                                return void 0 !== o ? this.Dimension(o, e) : null
                            }
                            var s = this.role
                            if ('object' == typeof t) {
                                if (t.hasOwnProperty('role')) {
                                    for (n = 0; n < i; n++) {
                                        var l = this.id[n]
                                        a(s, l) === t.role && r.push(this.Dimension(l, e))
                                    }
                                    return void 0 === r[0] ? null : r
                                }
                                return null
                            }
                            var u = this.__tree__.dimension
                            if (void 0 === u) return null
                            var c = u[t]
                            return void 0 === c
                                ? null
                                : e
                                  ? new bs({ class: 'dimension', __tree__: c, role: a(s, t) })
                                  : (function (t, e) {
                                        var n = []
                                        for (var r in t) n[t[r]] = e[r]
                                        return n
                                    })(c.category.index, c.category.label)
                        }),
                        (bs.prototype.Category = function (t) {
                            if (null === this || 'dimension' !== this.class) return null
                            if (void 0 === t) {
                                for (var e = [], n = 0, r = this.id.length; n < r; n++) e.push(this.Category(this.id[n]))
                                return e
                            }
                            if ('number' == typeof t) {
                                var i = this.id[t]
                                return void 0 !== i ? this.Category(i) : null
                            }
                            var a = this.__tree__.category
                            if (void 0 === a) return null
                            var o = a.index[t]
                            if (void 0 === o) return null
                            var s = (a.unit && a.unit[t]) || null,
                                l = (a.coordinates && a.coordinates[t]) || null,
                                u = (a.child && a.child[t]) || null,
                                c = (a.note && a.note[t]) || null
                            return new bs({
                                class: 'category',
                                index: o,
                                label: a.label[t],
                                note: c,
                                child: u,
                                unit: s,
                                coord: l,
                            })
                        }),
                        (bs.prototype.Dice = function (t, e, n) {
                            var r,
                                i,
                                a,
                                o,
                                s = function (t, e) {
                                    return t.hasOwnProperty(e) && !!t[e]
                                }
                            if (null === this || 'dataset' !== this.class) return null
                            if ('object' != typeof t) return this
                            'object' != typeof e
                                ? ('boolean' == typeof e && !0 === e && (r = !0), ('boolean' == typeof n && !0 === n) || (n = !1))
                                : ((r = s(e, 'clone')), (n = s(e, 'drop')), (i = s(e, 'stringify')), (a = s(e, 'ovalue')), (o = s(e, 'ostatus')))
                            var l,
                                u = this.value,
                                c = r ? new bs(JSON.parse(JSON.stringify(this))) : this,
                                f = c.status,
                                p = [],
                                h = [],
                                d = function (t, e) {
                                    var n,
                                        r,
                                        i,
                                        a =
                                            ((n = t),
                                            (r = e),
                                            (i = {}),
                                            Array.isArray(n[r])
                                                ? (n[r].forEach(function (t, e) {
                                                      null !== t && (i[String(e)] = t)
                                                  }),
                                                  i)
                                                : n[r])
                                    delete t[e], (t[e] = a)
                                }
                            Array.isArray(t) &&
                                (t = (function (t) {
                                    var e = {}
                                    return (
                                        t.forEach(function (t) {
                                            e[t[0]] = t[1]
                                        }),
                                        e
                                    )
                                })(t)),
                                null === t && (t = {})
                            var g = Object.keys(t)
                            return (
                                g.length > 0 &&
                                    (g.forEach(function (e) {
                                        var n = t[e]
                                        Array.isArray(n) || (t[e] = [n]), 0 === t[e].length && delete t[e]
                                    }),
                                    n &&
                                        (t = (function (t) {
                                            var e = {}
                                            return (
                                                Object.keys(t).forEach(function (n) {
                                                    e[n] = c.Dimension(n).id.filter(function (e) {
                                                        return -1 === t[n].indexOf(e)
                                                    })
                                                }),
                                                e
                                            )
                                        })(t)),
                                    c.toTable({ type: 'arrobj', content: 'id', status: !0 }).forEach(function (e, n) {
                                        var r = []
                                        g.forEach(function (n) {
                                            var i = t[n],
                                                a = []
                                            i.forEach(function (t) {
                                                a.push(e[n] === t)
                                            }),
                                                r.push(-1 !== a.indexOf(!0))
                                        }),
                                            -1 === r.indexOf(!1) && (p.push(e.value), h.push(e.status))
                                    }),
                                    g.forEach(function (e) {
                                        var n = c.Dimension(e).id,
                                            r = 0,
                                            i = {}
                                        ;(c.size[c.id.indexOf(e)] = t[e].length),
                                            n.forEach(function (n) {
                                                ;-1 !== t[e].indexOf(n) && ((i[n] = r), r++)
                                            }),
                                            (c.__tree__.dimension[e].category.index = i)
                                    }),
                                    (c.n = p.length),
                                    (c.value = c.__tree__.value =
                                        Ss(u)
                                            ? (function (t, e) {
                                                  return e.from(t)
                                              })(p, u.constructor)
                                            : p),
                                    (c.status = c.__tree__.status = null !== f ? h : null)),
                                i
                                    ? ((l = c.__tree__).hasOwnProperty('id') ||
                                          ((l.version = '2.0'),
                                          l.hasOwnProperty('class') || (l.class = 'dataset'),
                                          (l.id = l.dimension.id),
                                          (l.size = l.dimension.size),
                                          delete l.dimension.id,
                                          delete l.dimension.size,
                                          l.dimension.hasOwnProperty('role') && ((l.role = l.dimension.role), delete l.dimension.role)),
                                      l.hasOwnProperty('status') && -1 !== ['null', '{}', '[]'].indexOf(JSON.stringify(l.status)) && delete l.status,
                                      l.hasOwnProperty('role') &&
                                          (delete l.role.classification,
                                          ['geo', 'time', 'metric'].forEach(function (t) {
                                              null === l.role[t] && delete l.role[t]
                                          })),
                                      a && d(l, 'value'),
                                      o && l.hasOwnProperty('status') && d(l, 'status'),
                                      JSON.stringify(l))
                                    : c
                            )
                        }),
                        (bs.prototype.Slice = function (t) {
                            if (null === this || 'dataset' !== this.class) return null
                            if (void 0 === t) return this
                            if (!Array.isArray(t)) {
                                var e,
                                    n = []
                                for (e in t) n.push([e, t[e]])
                                t = n
                            }
                            return this.Dice(
                                t.map(function (t) {
                                    return [t[0], [t[1]]]
                                })
                            )
                        }),
                        (bs.prototype.Data = function (t, e) {
                            var n,
                                r,
                                i = [],
                                a = function (t) {
                                    for (var e in t) if (t.hasOwnProperty(e)) return e
                                }
                            if (null === this || 'dataset' !== this.class) return null
                            if (void 0 === t) {
                                for (r = this.value.length, n = 0; n < r; n++) i.push(this.Data(n))
                                return i
                            }
                            if (('boolean' != typeof e && (e = !0), 'number' == typeof t)) {
                                var o = this.value[t]
                                return void 0 === o ? null : e ? { value: o, status: this.status ? this.status[t] : null } : o
                            }
                            var s = 'object',
                                l = this.__tree__,
                                u = l.size || (l.dimension && l.dimension.size),
                                c = u.length
                            if (Array.isArray(t)) {
                                if (!Array.isArray(t[0])) {
                                    if (this.length !== t.length) return null
                                    var f = 1,
                                        p = 0,
                                        h = [],
                                        d = []
                                    for (n = 0; n < c; n++)
                                        if (void 0 !== t[n]) {
                                            if ('number' != typeof t[n] || t[n] >= u[n]) return null
                                            p += (f *= n > 0 ? u[c - n] : 1) * t[c - n - 1]
                                        } else h.push(n), d.push(u[n])
                                    if (h.length > 1) return null
                                    if (1 === h.length) {
                                        for (var g = 0, _ = d[0]; g < _; g++) {
                                            var y = []
                                            for (n = 0; n < c; n++) n !== h[0] ? y.push(t[n]) : y.push(g)
                                            i.push(this.Data(y, e))
                                        }
                                        return i
                                    }
                                    return e ? { value: this.value[p], status: this.status ? this.status[p] : null } : this.value[p]
                                }
                                s = 'array'
                            }
                            var v = (function (t, e, n) {
                                    var r,
                                        i = [],
                                        o = {},
                                        s = t.dimension,
                                        l = t.id || s.id,
                                        u = t.size || (s && s.size)
                                    if ('array' === n) {
                                        for (r = e.length; r--; ) o[e[r][0]] = e[r][1]
                                        e = o
                                    }
                                    for (var c = 0, f = l.length; c < f; c++) {
                                        var p = l[c],
                                            h = e[p]
                                        i.push('string' == typeof h ? h : 1 === u[c] ? a(s[p].category.index) : null)
                                    }
                                    return i
                                })(l, t, s),
                                m = [],
                                x = l.dimension,
                                b = l.id || x.id
                            for (n = 0, r = v.length; n < r; n++) m.push(x[b[n]].category.index[v[n]])
                            return this.Data(m, e)
                        }),
                        (bs.prototype.toTable = function (t, e) {
                            if (null === this || 'dataset' !== this.class) return null
                            1 == arguments.length && 'function' == typeof t && ((e = t), (t = null)),
                                ('arrobj' !==
                                    (t = t || {
                                        field: 'label',
                                        content: 'label',
                                        vlabel: 'Value',
                                        slabel: 'Status',
                                        type: 'array',
                                        status: !1,
                                        unit: !1,
                                        by: null,
                                        prefix: '',
                                        drop: [],
                                        meta: !1,
                                        comma: !1,
                                        bylabel: !1,
                                    }).type &&
                                    'objarr' !== t.type) ||
                                    void 0 !== t.field ||
                                    (t.field = 'id')
                            var n,
                                r,
                                i,
                                a,
                                o,
                                s,
                                l,
                                u,
                                c,
                                f = 'id' === t.field,
                                p = function (t) {
                                    return (f ? 'value' : t) || 'Value'
                                },
                                h = function (t) {
                                    return (f ? 'status' : t) || 'Status'
                                },
                                d = this.__tree__,
                                g = !0 === t.status
                            if ('function' == typeof e) {
                                n = this.toTable(t)
                                var _ = [],
                                    y = 'array' !== t.type ? 0 : 1
                                for (o = (W = 'object' !== t.type ? n.slice(y) : n.rows.slice(0)).length, r = 0; r < o; r++) {
                                    var v = e.call(this, W[r], r)
                                    void 0 !== v && _.push(v)
                                }
                                return 'object' === t.type ? { cols: n.cols, rows: _ } : ('array' === t.type && _.unshift(n[0]), _)
                            }
                            if ('arrobj' === t.type || 'objarr' === t.type) {
                                var m = [],
                                    x = d.role && d.role.metric,
                                    b = function () {},
                                    S = {},
                                    w = this,
                                    T = w.id,
                                    z = t.by && -1 !== T.indexOf(t.by) ? t.by : null,
                                    k = !0 === t.meta,
                                    F = void 0 !== t.drop && Array.isArray(t.drop) ? t.drop : [],
                                    A = !0 === t.comma,
                                    L = !0 === t.bylabel,
                                    M = w.value.constructor,
                                    C = function (e) {
                                        var n,
                                            r = {},
                                            i = p(t.vlabel)
                                        return (
                                            'objarr' === t.type &&
                                                ((n =
                                                    null === z && ws(M.name)
                                                        ? function (t) {
                                                              r[t] =
                                                                  t === i
                                                                      ? M.from(e, function (e) {
                                                                            return e[t]
                                                                        })
                                                                      : e.map(function (e) {
                                                                            return e[t]
                                                                        })
                                                          }
                                                        : function (t) {
                                                              r[t] = e.map(function (e) {
                                                                  return e[t]
                                                              })
                                                          }),
                                                Object.keys(e[0]).forEach(n),
                                                (e = r)),
                                            k
                                                ? ((r = {}),
                                                  T.forEach(function (t) {
                                                      var e = w.Dimension(t)
                                                      r[t] = {
                                                          label: e.label,
                                                          role: e.role,
                                                          categories: { id: e.id, label: w.Dimension(t, !1) },
                                                      }
                                                  }),
                                                  {
                                                      meta: {
                                                          label: w.label,
                                                          source: w.source,
                                                          updated: w.updated,
                                                          id: T,
                                                          status: g,
                                                          unit: t.unit,
                                                          by: z,
                                                          bylabel: L,
                                                          drop: null !== z && F.length > 0 ? F : null,
                                                          prefix: null !== z ? H || '' : null,
                                                          comma: A,
                                                          dimensions: r,
                                                      },
                                                      data: e,
                                                  })
                                                : e
                                        )
                                    }
                                z && (t.field = 'id')
                                var E = (n = this.toTable({
                                    field: t.field,
                                    vlabel: t.vlabel,
                                    slabel: t.slabel,
                                    content: t.content,
                                    status: g,
                                })).shift()
                                if (null === z && t.unit && x) {
                                    if ('id' !== t.content)
                                        for (var D = x.length; D--; ) {
                                            var O = this.Dimension(x[D])
                                            S[x[D]] = {}
                                            for (var N = O.length; N--; ) S[x[D]][O.Category(N).label] = O.id[N]
                                        }
                                    ;(b = function (e, n) {
                                        if (-1 !== x.indexOf(e)) {
                                            var r = d.dimension[e].category
                                            r.unit ? (I.unit = r.unit['id' !== t.content ? S[e][n] : n]) : (I.unit = null)
                                        }
                                    }),
                                        (t.unit = !0)
                                } else t.unit = !1
                                for (o = n.length, r = 0; r < o; r++) {
                                    var I = {}
                                    for (i = n[r].length; i--; ) (I[E[i]] = n[r][i]), b(E[i], n[r][i])
                                    m.push(I)
                                }
                                if (
                                    (A &&
                                        m.forEach(function (t) {
                                            null !== t.value && (t.value = ('' + t.value).replace('.', ','))
                                        }),
                                    null !== z)
                                ) {
                                    var R,
                                        P = {},
                                        W = [],
                                        j = {},
                                        H = void 0 !== t.prefix ? t.prefix : ''
                                    F.forEach(function (t, e) {
                                        ;(!w.Dimension(t) || w.Dimension(t).length > 1) && (F[e] = '')
                                    })
                                    var B = T.filter(function (t) {
                                            return t !== z && -1 === F.indexOf(t)
                                        }),
                                        U = w.Dimension(z)
                                    for (var $ in ('id' !== t.content
                                        ? L
                                            ? (R = function (t, e, n) {
                                                  t[e][H + n[z]] = n.value
                                              })
                                            : (U.Category().forEach(function (t, e) {
                                                  j[t.label] = U.id[e]
                                              }),
                                              (R = function (t, e, n) {
                                                  t[e][H + j[n[z]]] = n.value
                                              }))
                                        : (R = function (t, e, n) {
                                              t[e][H + n[z]] = n.value
                                          }),
                                    m.forEach(function (t) {
                                        var e = (function (t, e) {
                                            var n = []
                                            return (
                                                e.forEach(function (e) {
                                                    n.push(t[e])
                                                }),
                                                n.join('\t')
                                            )
                                        })(t, B)
                                        void 0 === P[e] &&
                                            (P[e] = (function (t, e) {
                                                var n = {}
                                                return (
                                                    e.forEach(function (e) {
                                                        n[e] = t[e]
                                                    }),
                                                    n
                                                )
                                            })(t, B)),
                                            R(P, e, t, z)
                                    }),
                                    P))
                                        W.push(P[$])
                                    return (g = !1), C(W)
                                }
                                return C(m)
                            }
                            if ('object' === t.type) {
                                var G = 'number' == typeof this.value[0] || null === this.value[0] ? 'number' : 'string'
                                ;(s = function (t, e) {
                                    var n = (f && t) || e || t
                                    nt.push({ id: t, label: n, type: 'string' })
                                }),
                                    (l = function (t, e, n) {
                                        var r = p(t),
                                            i = h(e)
                                        n && nt.push({ id: 'status', label: i, type: 'string' }), nt.push({ id: 'value', label: r, type: G })
                                    }),
                                    (u = function (t) {
                                        dt.push({ v: t })
                                    }),
                                    (c = function (t) {
                                        dt.push({ v: t }), rt.push({ c: dt })
                                    })
                            } else
                                (s = function (t, e) {
                                    var n = (f && t) || e || t
                                    nt.push(n)
                                }),
                                    (l = function (t, e, n) {
                                        var r = p(t),
                                            i = h(e)
                                        n && nt.push(i), nt.push(r), et.push(nt)
                                    }),
                                    (u = function (t) {
                                        dt.push(t)
                                    }),
                                    (c = function (t) {
                                        dt.push(t), et.push(dt)
                                    })
                            var V = d.dimension,
                                q = d.id || V.id,
                                Y = d.size || V.size,
                                X = q.length
                            if (X != Y.length) return !1
                            var K = [],
                                J = 1,
                                Z = ((D = 1), []),
                                Q = [],
                                tt = [],
                                et = [],
                                nt = [],
                                rt = []
                            for (r = 0; r < X; r++) {
                                var it = q[r]
                                s(it, V[it].label), (J *= Y[r]), (D *= Y[r])
                                var at = []
                                for (i = 0; i < Y[r]; i++)
                                    for (var ot in V[q[r]].category.index)
                                        if (V[q[r]].category.index[ot] === i) {
                                            var st = 'id' !== t.content && V[q[r]].category.label ? V[q[r]].category.label[ot] : ot
                                            at.push(st)
                                        }
                                K.push(at), Z.push(D)
                            }
                            for (l(t.vlabel, t.slabel, g), o = K.length, r = 0; r < o; r++) {
                                for (var lt = [], ut = 0, ct = K[r].length; ut < ct; ut++) for (var ft = 0; ft < J / Z[r]; ft++) lt.push(K[r][ut])
                                Q.push(lt)
                            }
                            for (o = Q.length, r = 0; r < o; r++) {
                                var pt = [],
                                    ht = 0
                                for (a = 0; a < J; a++) pt.push(Q[r][ht]), ++ht === Q[r].length && (ht = 0)
                                tt.push(pt)
                            }
                            for (a = 0; a < J; a++) {
                                var dt = []
                                o = Q.length
                                for (var gt = 0; gt < o; gt++) u(tt[gt][a])
                                g && u(this.status ? this.status[a] : null), c(this.value[a])
                            }
                            return 'object' === t.type ? { cols: nt, rows: rt } : et
                        }),
                        (bs.prototype.node = function () {
                            return this.__tree__
                        }),
                        (bs.prototype.toString = function () {
                            return this.class
                        })
                    var zs = function (t) {
                            var e = {
                                    __data: void 0,
                                    _data_: void 0,
                                    get: function (t) {
                                        return t ? (e._data_ ? e._data_[t] : void 0) : e._data_
                                    },
                                    getValue: function (t) {
                                        var n = e.get(t)
                                        return n ? n.value : void 0
                                    },
                                    set: function (t, n) {
                                        e._data_ = e._data_ || {}
                                        var r = e._data_[t]
                                        return (
                                            r
                                                ? n.value
                                                    ? ((r.value = n.value), (r.status = n.status))
                                                    : (r.value = n)
                                                : (e._data_[t] = n.value ? n : { value: n }),
                                            e
                                        )
                                    },
                                    setData: function (t) {
                                        return (
                                            (e.__data = t),
                                            (e._data_ = {}),
                                            Object.keys(t).forEach(function (n) {
                                                return e.set(n, t[n])
                                            }),
                                            e
                                        )
                                    },
                                    getArray: function () {
                                        if (e._data_)
                                            return Object.values(e._data_)
                                                .map(function (t) {
                                                    return t.value
                                                })
                                                .filter(function (t) {
                                                    return 0 == t || t
                                                })
                                    },
                                    getUniqueValues: function () {
                                        return Object.values(e._data_)
                                            .map(function (t) {
                                                return t.value
                                            })
                                            .filter(function (t, e, n) {
                                                return n.indexOf(t) === e
                                            })
                                    },
                                    getMin: function () {
                                        if (e._data_)
                                            return Object.values(e._data_)
                                                .map(function (t) {
                                                    return t.value
                                                })
                                                .filter(function (t) {
                                                    return 0 == t || (t && ':' !== t)
                                                })
                                                .reduce(function (t, e) {
                                                    return Math.min(t, e)
                                                })
                                    },
                                    getMax: function () {
                                        if (e._data_)
                                            return Object.values(e._data_)
                                                .map(function (t) {
                                                    return t.value
                                                })
                                                .filter(function (t) {
                                                    return 0 == t || (t && ':' !== t)
                                                })
                                                .reduce(function (t, e) {
                                                    return Math.max(t, e)
                                                })
                                    },
                                    isReady: function () {
                                        return null != e._data_
                                    },
                                    metadata: void 0,
                                    unitText_: void 0,
                                    retrieveFromRemote: function (t, i, a) {
                                        return e.eurostatDatasetCode_ ? n(t, i, a) : e.csvURL_ && r(a), e
                                    },
                                    eurostatDatasetCode_: void 0,
                                    filters_: { lastTimePeriod: 1 },
                                    precision_: 2,
                                },
                                n = function (t, n, r) {
                                    ;(e._data_ = null),
                                        (function (t, n) {
                                            return (
                                                e.filters_.geo || (e.filters_.geoLevel = t + '' == '0' ? 'country' : 'nuts' + t),
                                                mn(
                                                    (function (t, e, n, r) {
                                                        ;(n = n || 'en'), (r = r || 'json')
                                                        var i = []
                                                        if (
                                                            (i.push(
                                                                'https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/',
                                                                t,
                                                                '?',
                                                                'format=',
                                                                r,
                                                                '&lang=',
                                                                n
                                                            ),
                                                            e)
                                                        )
                                                            for (var a in e) {
                                                                var o = e[a]
                                                                if (Array.isArray(o)) for (var s = 0; s < o.length; s++) i.push('&', a, '=', o[s])
                                                                else i.push('&', a, '=', o)
                                                            }
                                                        return i.join('')
                                                    })(e.eurostatDatasetCode_, e.filters_, n)
                                                )
                                            )
                                        })(t, n).then(function (t) {
                                            var n = (function (t, e, n) {
                                                return (
                                                    'function' != typeof n && (n = null),
                                                    'object' == typeof t
                                                        ? new bs(t, n)
                                                        : 'version' === t
                                                          ? '1.4.1'
                                                          : fetch
                                                            ? fetch(t, null)
                                                                  .then(Ts)
                                                                  .then(function (t) {
                                                                      return new bs(t, n)
                                                                  })
                                                            : void 0
                                                )
                                            })(t)
                                            ;(e.metadata = {
                                                label: n.label,
                                                href: n.href,
                                                source: n.source,
                                                updated: n.updated,
                                                extension: n.extension,
                                            }),
                                                (e.metadata.time = n.Dimension('time').id[0]),
                                                (e._data_ = (function (t) {
                                                    for (var e = {}, n = t.Dimension('geo').id, r = 0; r < n.length; r++) e[n[r]] = t.Data(r)
                                                    return e
                                                })(n)),
                                                r && r()
                                        })
                                }
                            ;(e.getTime = function () {
                                return e.filters_.time || (e._data_ ? e.metadata.time : void 0)
                            }),
                                (e.csvURL_ = void 0),
                                (e.geoCol_ = 'geo'),
                                (e.valueCol_ = 'value')
                            var r = function (t) {
                                ;(e._data_ = null),
                                    xs(e.csvURL_).then(function (n) {
                                        ;(e._data_ = (function (t, e, n) {
                                            for (var r = {}, i = 0; i < t.length; i++) {
                                                var a = t[i],
                                                    o = a[n]
                                                r[a[e]] = o ? { value: isNaN(+o) ? o : +o, status: '' } : { value: ':', status: '' }
                                            }
                                            return r
                                        })(n, e.geoCol_, e.valueCol_)),
                                            (e.metadata = { href: e.csvURL_ }),
                                            t && t()
                                    })
                            }
                            if (
                                (['unitText_'].forEach(function (t) {
                                    e[t.substring(0, t.length - 1)] = function (n) {
                                        return arguments.length ? ((e[t] = n), e) : e[t]
                                    }
                                }),
                                t)
                            )
                                for (var i in t) e[i + '_'] = t[i]
                            return e
                        },
                        ks = function (t) {
                            var e = {}
                            return (
                                (e.map = t),
                                (e.svgId = 'legend_' + Math.round(1e16 * Math.random())),
                                (e.svg = void 0),
                                (e.lgg = void 0),
                                (e.x = void 0),
                                (e.y = void 0),
                                (e.boxMargin = 10),
                                (e.boxPadding = 7),
                                (e.boxCornerRad = 0),
                                (e.boxFill = 'white'),
                                (e.boxOpacity = 0.7),
                                (e.fontFill = 'black'),
                                (e.title = ''),
                                (e.titleFontSize = 15),
                                (e.titleFontWeight = 'normal'),
                                (e.build = function () {
                                    ;(e.svg = yt('#' + e.svgId)),
                                        e.svg.selectAll('#g_' + e.svgId).remove(),
                                        (e.lgg = e.svg.append('g').attr('id', 'g_' + e.svgId))
                                }),
                                (e.update = function () {
                                    return e
                                }),
                                (e.makeBackgroundBox = function () {
                                    e.lgg
                                        .append('rect')
                                        .attr('id', 'legendBR')
                                        .attr('rx', e.boxCornerRad)
                                        .attr('ry', e.boxCornerRad)
                                        .style('fill', e.boxFill)
                                        .style('opacity', e.boxOpacity)
                                }),
                                (e.setBoxDimension = function () {
                                    var t = e.lgg.node().getBBox({ stroke: !0 }),
                                        n = e.boxPadding
                                    e.svg
                                        .select('#legendBR')
                                        .attr('x', t.x - n)
                                        .attr('y', t.y - n)
                                        .attr('width', t.width + 2 * n)
                                        .attr('height', t.height + 2 * n)
                                }),
                                e
                            )
                        }
                    function Fs(t, e) {
                        let n, r
                        if (void 0 === e)
                            for (const e of t) null != e && (void 0 === n ? e >= e && (n = r = e) : (n > e && (n = e), r < e && (r = e)))
                        else {
                            let i = -1
                            for (let a of t)
                                null != (a = e(a, ++i, t)) && (void 0 === n ? a >= a && (n = r = a) : (n > a && (n = a), r < a && (r = a)))
                        }
                        return [n, r]
                    }
                    function As(t) {
                        return t
                    }
                    var Ls = 1e-6
                    function Ms(t) {
                        return 'translate(' + t + ',0)'
                    }
                    function Cs(t) {
                        return 'translate(0,' + t + ')'
                    }
                    function Es(t) {
                        return (e) => +t(e)
                    }
                    function Ds(t, e) {
                        return (e = Math.max(0, t.bandwidth() - 2 * e) / 2), t.round() && (e = Math.round(e)), (n) => +t(n) + e
                    }
                    function Os() {
                        return !this.__axis
                    }
                    function Ns(t, e) {
                        var n = [],
                            r = null,
                            i = null,
                            a = 6,
                            o = 6,
                            s = 3,
                            l = 'undefined' != typeof window && window.devicePixelRatio > 1 ? 0 : 0.5,
                            u = 1 === t || 4 === t ? -1 : 1,
                            c = 4 === t || 2 === t ? 'x' : 'y',
                            f = 1 === t || 3 === t ? Ms : Cs
                        function p(p) {
                            var h = null == r ? (e.ticks ? e.ticks.apply(e, n) : e.domain()) : r,
                                d = null == i ? (e.tickFormat ? e.tickFormat.apply(e, n) : As) : i,
                                g = Math.max(a, 0) + s,
                                _ = e.range(),
                                y = +_[0] + l,
                                v = +_[_.length - 1] + l,
                                m = (e.bandwidth ? Ds : Es)(e.copy(), l),
                                x = p.selection ? p.selection() : p,
                                b = x.selectAll('.domain').data([null]),
                                S = x.selectAll('.tick').data(h, e).order(),
                                w = S.exit(),
                                T = S.enter().append('g').attr('class', 'tick'),
                                z = S.select('line'),
                                k = S.select('text')
                            ;(b = b.merge(b.enter().insert('path', '.tick').attr('class', 'domain').attr('stroke', 'currentColor'))),
                                (S = S.merge(T)),
                                (z = z.merge(
                                    T.append('line')
                                        .attr('stroke', 'currentColor')
                                        .attr(c + '2', u * a)
                                )),
                                (k = k.merge(
                                    T.append('text')
                                        .attr('fill', 'currentColor')
                                        .attr(c, u * g)
                                        .attr('dy', 1 === t ? '0em' : 3 === t ? '0.71em' : '0.32em')
                                )),
                                p !== x &&
                                    ((b = b.transition(p)),
                                    (S = S.transition(p)),
                                    (z = z.transition(p)),
                                    (k = k.transition(p)),
                                    (w = w
                                        .transition(p)
                                        .attr('opacity', Ls)
                                        .attr('transform', function (t) {
                                            return isFinite((t = m(t))) ? f(t + l) : this.getAttribute('transform')
                                        })),
                                    T.attr('opacity', Ls).attr('transform', function (t) {
                                        var e = this.parentNode.__axis
                                        return f((e && isFinite((e = e(t))) ? e : m(t)) + l)
                                    })),
                                w.remove(),
                                b.attr(
                                    'd',
                                    4 === t || 2 === t
                                        ? o
                                            ? 'M' + u * o + ',' + y + 'H' + l + 'V' + v + 'H' + u * o
                                            : 'M' + l + ',' + y + 'V' + v
                                        : o
                                          ? 'M' + y + ',' + u * o + 'V' + l + 'H' + v + 'V' + u * o
                                          : 'M' + y + ',' + l + 'H' + v
                                ),
                                S.attr('opacity', 1).attr('transform', function (t) {
                                    return f(m(t) + l)
                                }),
                                z.attr(c + '2', u * a),
                                k.attr(c, u * g).text(d),
                                x
                                    .filter(Os)
                                    .attr('fill', 'none')
                                    .attr('font-size', 10)
                                    .attr('font-family', 'sans-serif')
                                    .attr('text-anchor', 2 === t ? 'start' : 4 === t ? 'end' : 'middle'),
                                x.each(function () {
                                    this.__axis = m
                                })
                        }
                        return (
                            (p.scale = function (t) {
                                return arguments.length ? ((e = t), p) : e
                            }),
                            (p.ticks = function () {
                                return (n = Array.from(arguments)), p
                            }),
                            (p.tickArguments = function (t) {
                                return arguments.length ? ((n = null == t ? [] : Array.from(t)), p) : n.slice()
                            }),
                            (p.tickValues = function (t) {
                                return arguments.length ? ((r = null == t ? null : Array.from(t)), p) : r && r.slice()
                            }),
                            (p.tickFormat = function (t) {
                                return arguments.length ? ((i = t), p) : i
                            }),
                            (p.tickSize = function (t) {
                                return arguments.length ? ((a = o = +t), p) : a
                            }),
                            (p.tickSizeInner = function (t) {
                                return arguments.length ? ((a = +t), p) : a
                            }),
                            (p.tickSizeOuter = function (t) {
                                return arguments.length ? ((o = +t), p) : o
                            }),
                            (p.tickPadding = function (t) {
                                return arguments.length ? ((s = +t), p) : s
                            }),
                            (p.offset = function (t) {
                                return arguments.length ? ((l = +t), p) : l
                            }),
                            p
                        )
                    }
                    const { abs: Is, max: Rs, min: Ps } = Math
                    function Ws(t) {
                        return { type: t }
                    }
                    function js(t) {
                        return function (e) {
                            return e < 0 ? -Math.pow(-e, t) : Math.pow(e, t)
                        }
                    }
                    function Hs(t) {
                        return t < 0 ? -Math.sqrt(-t) : Math.sqrt(t)
                    }
                    function Bs(t) {
                        return t < 0 ? -t * t : t * t
                    }
                    function Us() {
                        var t = (function (t) {
                            var e = t(je, je),
                                n = 1
                            return (
                                (e.exponent = function (e) {
                                    return arguments.length ? (1 == (n = +e) ? t(je, je) : 0.5 === n ? t(Hs, Bs) : t(js(n), js(1 / n))) : n
                                }),
                                ln(e)
                            )
                        })(Ge())
                        return (
                            (t.copy = function () {
                                return $e(t, Us()).exponent(t.exponent())
                            }),
                            Nt.apply(t, arguments),
                            t
                        )
                    }
                    function $s() {
                        return Us.apply(null, arguments).exponent(0.5)
                    }
                    function Gs(t) {
                        return function () {
                            return t
                        }
                    }
                    ;['w', 'e'].map(Ws), ['n', 's'].map(Ws), ['n', 'w', 'e', 's', 'nw', 'ne', 'sw', 'se'].map(Ws)
                    const Vs = Math.abs,
                        qs = Math.atan2,
                        Ys = Math.cos,
                        Xs = Math.max,
                        Ks = Math.min,
                        Js = Math.sin,
                        Zs = Math.sqrt,
                        Qs = 1e-12,
                        tl = Math.PI,
                        el = tl / 2,
                        nl = 2 * tl
                    function rl(t) {
                        return t >= 1 ? el : t <= -1 ? -el : Math.asin(t)
                    }
                    const il = Math.PI,
                        al = 2 * il,
                        ol = 1e-6,
                        sl = al - ol
                    function ll(t) {
                        this._ += t[0]
                        for (let e = 1, n = t.length; e < n; ++e) this._ += arguments[e] + t[e]
                    }
                    class ul {
                        constructor(t) {
                            ;(this._x0 = this._y0 = this._x1 = this._y1 = null),
                                (this._ = ''),
                                (this._append =
                                    null == t
                                        ? ll
                                        : (function (t) {
                                              let e = Math.floor(t)
                                              if (!(e >= 0)) throw new Error(`invalid digits: ${t}`)
                                              if (e > 15) return ll
                                              const n = 10 ** e
                                              return function (t) {
                                                  this._ += t[0]
                                                  for (let e = 1, r = t.length; e < r; ++e) this._ += Math.round(arguments[e] * n) / n + t[e]
                                              }
                                          })(t))
                        }
                        moveTo(t, e) {
                            this._append`M${(this._x0 = this._x1 = +t)},${(this._y0 = this._y1 = +e)}`
                        }
                        closePath() {
                            null !== this._x1 && ((this._x1 = this._x0), (this._y1 = this._y0), this._append`Z`)
                        }
                        lineTo(t, e) {
                            this._append`L${(this._x1 = +t)},${(this._y1 = +e)}`
                        }
                        quadraticCurveTo(t, e, n, r) {
                            this._append`Q${+t},${+e},${(this._x1 = +n)},${(this._y1 = +r)}`
                        }
                        bezierCurveTo(t, e, n, r, i, a) {
                            this._append`C${+t},${+e},${+n},${+r},${(this._x1 = +i)},${(this._y1 = +a)}`
                        }
                        arcTo(t, e, n, r, i) {
                            if (((t = +t), (e = +e), (n = +n), (r = +r), (i = +i) < 0)) throw new Error(`negative radius: ${i}`)
                            let a = this._x1,
                                o = this._y1,
                                s = n - t,
                                l = r - e,
                                u = a - t,
                                c = o - e,
                                f = u * u + c * c
                            if (null === this._x1) this._append`M${(this._x1 = t)},${(this._y1 = e)}`
                            else if (f > ol)
                                if (Math.abs(c * s - l * u) > ol && i) {
                                    let p = n - a,
                                        h = r - o,
                                        d = s * s + l * l,
                                        g = p * p + h * h,
                                        _ = Math.sqrt(d),
                                        y = Math.sqrt(f),
                                        v = i * Math.tan((il - Math.acos((d + f - g) / (2 * _ * y))) / 2),
                                        m = v / y,
                                        x = v / _
                                    Math.abs(m - 1) > ol && this._append`L${t + m * u},${e + m * c}`,
                                        this._append`A${i},${i},0,0,${+(c * p > u * h)},${(this._x1 = t + x * s)},${(this._y1 = e + x * l)}`
                                } else this._append`L${(this._x1 = t)},${(this._y1 = e)}`
                        }
                        arc(t, e, n, r, i, a) {
                            if (((t = +t), (e = +e), (a = !!a), (n = +n) < 0)) throw new Error(`negative radius: ${n}`)
                            let o = n * Math.cos(r),
                                s = n * Math.sin(r),
                                l = t + o,
                                u = e + s,
                                c = 1 ^ a,
                                f = a ? r - i : i - r
                            null === this._x1
                                ? this._append`M${l},${u}`
                                : (Math.abs(this._x1 - l) > ol || Math.abs(this._y1 - u) > ol) && this._append`L${l},${u}`,
                                n &&
                                    (f < 0 && (f = (f % al) + al),
                                    f > sl
                                        ? this._append`A${n},${n},0,1,${c},${t - o},${e - s}A${n},${n},0,1,${c},${(this._x1 = l)},${(this._y1 = u)}`
                                        : f > ol &&
                                          this._append`A${n},${n},0,${+(f >= il)},${c},${(this._x1 =
                                              t + n * Math.cos(i))},${(this._y1 = e + n * Math.sin(i))}`)
                        }
                        rect(t, e, n, r) {
                            this._append`M${(this._x0 = this._x1 = +t)},${(this._y0 = this._y1 = +e)}h${(n = +n)}v${+r}h${-n}Z`
                        }
                        toString() {
                            return this._
                        }
                    }
                    function cl(t) {
                        let e = 3
                        return (
                            (t.digits = function (n) {
                                if (!arguments.length) return e
                                if (null == n) e = null
                                else {
                                    const t = Math.floor(n)
                                    if (!(t >= 0)) throw new RangeError(`invalid digits: ${n}`)
                                    e = t
                                }
                                return t
                            }),
                            () => new ul(e)
                        )
                    }
                    function fl(t) {
                        return t.innerRadius
                    }
                    function pl(t) {
                        return t.outerRadius
                    }
                    function hl(t) {
                        return t.startAngle
                    }
                    function dl(t) {
                        return t.endAngle
                    }
                    function gl(t) {
                        return t && t.padAngle
                    }
                    function _l(t, e, n, r, i, a, o) {
                        var s = t - n,
                            l = e - r,
                            u = (o ? a : -a) / Zs(s * s + l * l),
                            c = u * l,
                            f = -u * s,
                            p = t + c,
                            h = e + f,
                            d = n + c,
                            g = r + f,
                            _ = (p + d) / 2,
                            y = (h + g) / 2,
                            v = d - p,
                            m = g - h,
                            x = v * v + m * m,
                            b = i - a,
                            S = p * g - d * h,
                            w = (m < 0 ? -1 : 1) * Zs(Xs(0, b * b * x - S * S)),
                            T = (S * m - v * w) / x,
                            z = (-S * v - m * w) / x,
                            k = (S * m + v * w) / x,
                            F = (-S * v + m * w) / x,
                            A = T - _,
                            L = z - y,
                            M = k - _,
                            C = F - y
                        return (
                            A * A + L * L > M * M + C * C && ((T = k), (z = F)),
                            { cx: T, cy: z, x01: -c, y01: -f, x11: T * (i / b - 1), y11: z * (i / b - 1) }
                        )
                    }
                    function yl() {
                        var t = fl,
                            e = pl,
                            n = Gs(0),
                            r = null,
                            i = hl,
                            a = dl,
                            o = gl,
                            s = null,
                            l = cl(u)
                        function u() {
                            var u,
                                c,
                                f,
                                p = +t.apply(this, arguments),
                                h = +e.apply(this, arguments),
                                d = i.apply(this, arguments) - el,
                                g = a.apply(this, arguments) - el,
                                _ = Vs(g - d),
                                y = g > d
                            if ((s || (s = u = l()), h < p && ((c = h), (h = p), (p = c)), h > Qs))
                                if (_ > nl - Qs)
                                    s.moveTo(h * Ys(d), h * Js(d)),
                                        s.arc(0, 0, h, d, g, !y),
                                        p > Qs && (s.moveTo(p * Ys(g), p * Js(g)), s.arc(0, 0, p, g, d, y))
                                else {
                                    var v,
                                        m,
                                        x = d,
                                        b = g,
                                        S = d,
                                        w = g,
                                        T = _,
                                        z = _,
                                        k = o.apply(this, arguments) / 2,
                                        F = k > Qs && (r ? +r.apply(this, arguments) : Zs(p * p + h * h)),
                                        A = Ks(Vs(h - p) / 2, +n.apply(this, arguments)),
                                        L = A,
                                        M = A
                                    if (F > Qs) {
                                        var C = rl((F / p) * Js(k)),
                                            E = rl((F / h) * Js(k))
                                        ;(T -= 2 * C) > Qs ? ((S += C *= y ? 1 : -1), (w -= C)) : ((T = 0), (S = w = (d + g) / 2)),
                                            (z -= 2 * E) > Qs ? ((x += E *= y ? 1 : -1), (b -= E)) : ((z = 0), (x = b = (d + g) / 2))
                                    }
                                    var D = h * Ys(x),
                                        O = h * Js(x),
                                        N = p * Ys(w),
                                        I = p * Js(w)
                                    if (A > Qs) {
                                        var R,
                                            P = h * Ys(b),
                                            W = h * Js(b),
                                            j = p * Ys(S),
                                            H = p * Js(S)
                                        if (_ < tl)
                                            if (
                                                (R = (function (t, e, n, r, i, a, o, s) {
                                                    var l = n - t,
                                                        u = r - e,
                                                        c = o - i,
                                                        f = s - a,
                                                        p = f * l - c * u
                                                    if (!(p * p < Qs)) return [t + (p = (c * (e - a) - f * (t - i)) / p) * l, e + p * u]
                                                })(D, O, j, H, P, W, N, I))
                                            ) {
                                                var B = D - R[0],
                                                    U = O - R[1],
                                                    $ = P - R[0],
                                                    G = W - R[1],
                                                    V =
                                                        1 /
                                                        Js(
                                                            ((f = (B * $ + U * G) / (Zs(B * B + U * U) * Zs($ * $ + G * G))) > 1
                                                                ? 0
                                                                : f < -1
                                                                  ? tl
                                                                  : Math.acos(f)) / 2
                                                        ),
                                                    q = Zs(R[0] * R[0] + R[1] * R[1])
                                                ;(L = Ks(A, (p - q) / (V - 1))), (M = Ks(A, (h - q) / (V + 1)))
                                            } else L = M = 0
                                    }
                                    z > Qs
                                        ? M > Qs
                                            ? ((v = _l(j, H, D, O, h, M, y)),
                                              (m = _l(P, W, N, I, h, M, y)),
                                              s.moveTo(v.cx + v.x01, v.cy + v.y01),
                                              M < A
                                                  ? s.arc(v.cx, v.cy, M, qs(v.y01, v.x01), qs(m.y01, m.x01), !y)
                                                  : (s.arc(v.cx, v.cy, M, qs(v.y01, v.x01), qs(v.y11, v.x11), !y),
                                                    s.arc(0, 0, h, qs(v.cy + v.y11, v.cx + v.x11), qs(m.cy + m.y11, m.cx + m.x11), !y),
                                                    s.arc(m.cx, m.cy, M, qs(m.y11, m.x11), qs(m.y01, m.x01), !y)))
                                            : (s.moveTo(D, O), s.arc(0, 0, h, x, b, !y))
                                        : s.moveTo(D, O),
                                        p > Qs && T > Qs
                                            ? L > Qs
                                                ? ((v = _l(N, I, P, W, p, -L, y)),
                                                  (m = _l(D, O, j, H, p, -L, y)),
                                                  s.lineTo(v.cx + v.x01, v.cy + v.y01),
                                                  L < A
                                                      ? s.arc(v.cx, v.cy, L, qs(v.y01, v.x01), qs(m.y01, m.x01), !y)
                                                      : (s.arc(v.cx, v.cy, L, qs(v.y01, v.x01), qs(v.y11, v.x11), !y),
                                                        s.arc(0, 0, p, qs(v.cy + v.y11, v.cx + v.x11), qs(m.cy + m.y11, m.cx + m.x11), y),
                                                        s.arc(m.cx, m.cy, L, qs(m.y11, m.x11), qs(m.y01, m.x01), !y)))
                                                : s.arc(0, 0, p, w, S, y)
                                            : s.lineTo(N, I)
                                }
                            else s.moveTo(0, 0)
                            if ((s.closePath(), u)) return (s = null), u + '' || null
                        }
                        return (
                            (u.centroid = function () {
                                var n = (+t.apply(this, arguments) + +e.apply(this, arguments)) / 2,
                                    r = (+i.apply(this, arguments) + +a.apply(this, arguments)) / 2 - tl / 2
                                return [Ys(r) * n, Js(r) * n]
                            }),
                            (u.innerRadius = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(+e)), u) : t
                            }),
                            (u.outerRadius = function (t) {
                                return arguments.length ? ((e = 'function' == typeof t ? t : Gs(+t)), u) : e
                            }),
                            (u.cornerRadius = function (t) {
                                return arguments.length ? ((n = 'function' == typeof t ? t : Gs(+t)), u) : n
                            }),
                            (u.padRadius = function (t) {
                                return arguments.length ? ((r = null == t ? null : 'function' == typeof t ? t : Gs(+t)), u) : r
                            }),
                            (u.startAngle = function (t) {
                                return arguments.length ? ((i = 'function' == typeof t ? t : Gs(+t)), u) : i
                            }),
                            (u.endAngle = function (t) {
                                return arguments.length ? ((a = 'function' == typeof t ? t : Gs(+t)), u) : a
                            }),
                            (u.padAngle = function (t) {
                                return arguments.length ? ((o = 'function' == typeof t ? t : Gs(+t)), u) : o
                            }),
                            (u.context = function (t) {
                                return arguments.length ? ((s = null == t ? null : t), u) : s
                            }),
                            u
                        )
                    }
                    function vl(t) {
                        return 'object' == typeof t && 'length' in t ? t : Array.from(t)
                    }
                    function ml(t) {
                        this._context = t
                    }
                    function xl(t) {
                        return new ml(t)
                    }
                    function bl(t) {
                        return t[0]
                    }
                    function Sl(t) {
                        return t[1]
                    }
                    function wl(t, e) {
                        var n = Gs(!0),
                            r = null,
                            i = xl,
                            a = null,
                            o = cl(s)
                        function s(s) {
                            var l,
                                u,
                                c,
                                f = (s = vl(s)).length,
                                p = !1
                            for (null == r && (a = i((c = o()))), l = 0; l <= f; ++l)
                                !(l < f && n((u = s[l]), l, s)) === p && ((p = !p) ? a.lineStart() : a.lineEnd()),
                                    p && a.point(+t(u, l, s), +e(u, l, s))
                            if (c) return (a = null), c + '' || null
                        }
                        return (
                            (t = 'function' == typeof t ? t : void 0 === t ? bl : Gs(t)),
                            (e = 'function' == typeof e ? e : void 0 === e ? Sl : Gs(e)),
                            (s.x = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(+e)), s) : t
                            }),
                            (s.y = function (t) {
                                return arguments.length ? ((e = 'function' == typeof t ? t : Gs(+t)), s) : e
                            }),
                            (s.defined = function (t) {
                                return arguments.length ? ((n = 'function' == typeof t ? t : Gs(!!t)), s) : n
                            }),
                            (s.curve = function (t) {
                                return arguments.length ? ((i = t), null != r && (a = i(r)), s) : i
                            }),
                            (s.context = function (t) {
                                return arguments.length ? (null == t ? (r = a = null) : (a = i((r = t))), s) : r
                            }),
                            s
                        )
                    }
                    function Tl(t, e, n) {
                        var r = null,
                            i = Gs(!0),
                            a = null,
                            o = xl,
                            s = null,
                            l = cl(u)
                        function u(u) {
                            var c,
                                f,
                                p,
                                h,
                                d,
                                g = (u = vl(u)).length,
                                _ = !1,
                                y = new Array(g),
                                v = new Array(g)
                            for (null == a && (s = o((d = l()))), c = 0; c <= g; ++c) {
                                if (!(c < g && i((h = u[c]), c, u)) === _)
                                    if ((_ = !_)) (f = c), s.areaStart(), s.lineStart()
                                    else {
                                        for (s.lineEnd(), s.lineStart(), p = c - 1; p >= f; --p) s.point(y[p], v[p])
                                        s.lineEnd(), s.areaEnd()
                                    }
                                _ && ((y[c] = +t(h, c, u)), (v[c] = +e(h, c, u)), s.point(r ? +r(h, c, u) : y[c], n ? +n(h, c, u) : v[c]))
                            }
                            if (d) return (s = null), d + '' || null
                        }
                        function c() {
                            return wl().defined(i).curve(o).context(a)
                        }
                        return (
                            (t = 'function' == typeof t ? t : void 0 === t ? bl : Gs(+t)),
                            (e = 'function' == typeof e ? e : Gs(void 0 === e ? 0 : +e)),
                            (n = 'function' == typeof n ? n : void 0 === n ? Sl : Gs(+n)),
                            (u.x = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(+e)), (r = null), u) : t
                            }),
                            (u.x0 = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(+e)), u) : t
                            }),
                            (u.x1 = function (t) {
                                return arguments.length ? ((r = null == t ? null : 'function' == typeof t ? t : Gs(+t)), u) : r
                            }),
                            (u.y = function (t) {
                                return arguments.length ? ((e = 'function' == typeof t ? t : Gs(+t)), (n = null), u) : e
                            }),
                            (u.y0 = function (t) {
                                return arguments.length ? ((e = 'function' == typeof t ? t : Gs(+t)), u) : e
                            }),
                            (u.y1 = function (t) {
                                return arguments.length ? ((n = null == t ? null : 'function' == typeof t ? t : Gs(+t)), u) : n
                            }),
                            (u.lineX0 = u.lineY0 =
                                function () {
                                    return c().x(t).y(e)
                                }),
                            (u.lineY1 = function () {
                                return c().x(t).y(n)
                            }),
                            (u.lineX1 = function () {
                                return c().x(r).y(e)
                            }),
                            (u.defined = function (t) {
                                return arguments.length ? ((i = 'function' == typeof t ? t : Gs(!!t)), u) : i
                            }),
                            (u.curve = function (t) {
                                return arguments.length ? ((o = t), null != a && (s = o(a)), u) : o
                            }),
                            (u.context = function (t) {
                                return arguments.length ? (null == t ? (a = s = null) : (s = o((a = t))), u) : a
                            }),
                            u
                        )
                    }
                    function zl(t, e) {
                        return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN
                    }
                    function kl(t) {
                        return t
                    }
                    function Fl() {
                        var t = kl,
                            e = zl,
                            n = null,
                            r = Gs(0),
                            i = Gs(nl),
                            a = Gs(0)
                        function o(o) {
                            var s,
                                l,
                                u,
                                c,
                                f,
                                p = (o = vl(o)).length,
                                h = 0,
                                d = new Array(p),
                                g = new Array(p),
                                _ = +r.apply(this, arguments),
                                y = Math.min(nl, Math.max(-nl, i.apply(this, arguments) - _)),
                                v = Math.min(Math.abs(y) / p, a.apply(this, arguments)),
                                m = v * (y < 0 ? -1 : 1)
                            for (s = 0; s < p; ++s) (f = g[(d[s] = s)] = +t(o[s], s, o)) > 0 && (h += f)
                            for (
                                null != e
                                    ? d.sort(function (t, n) {
                                          return e(g[t], g[n])
                                      })
                                    : null != n &&
                                      d.sort(function (t, e) {
                                          return n(o[t], o[e])
                                      }),
                                    s = 0,
                                    u = h ? (y - p * m) / h : 0;
                                s < p;
                                ++s, _ = c
                            )
                                (l = d[s]),
                                    (c = _ + ((f = g[l]) > 0 ? f * u : 0) + m),
                                    (g[l] = { data: o[l], index: s, value: f, startAngle: _, endAngle: c, padAngle: v })
                            return g
                        }
                        return (
                            (o.value = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(+e)), o) : t
                            }),
                            (o.sortValues = function (t) {
                                return arguments.length ? ((e = t), (n = null), o) : e
                            }),
                            (o.sort = function (t) {
                                return arguments.length ? ((n = t), (e = null), o) : n
                            }),
                            (o.startAngle = function (t) {
                                return arguments.length ? ((r = 'function' == typeof t ? t : Gs(+t)), o) : r
                            }),
                            (o.endAngle = function (t) {
                                return arguments.length ? ((i = 'function' == typeof t ? t : Gs(+t)), o) : i
                            }),
                            (o.padAngle = function (t) {
                                return arguments.length ? ((a = 'function' == typeof t ? t : Gs(+t)), o) : a
                            }),
                            o
                        )
                    }
                    function Al(t, e) {
                        var n = ('undefined' != typeof Symbol && t[Symbol.iterator]) || t['@@iterator']
                        if (!n) {
                            if (
                                Array.isArray(t) ||
                                (n = (function (t, e) {
                                    if (t) {
                                        if ('string' == typeof t) return Ll(t, e)
                                        var n = Object.prototype.toString.call(t).slice(8, -1)
                                        return (
                                            'Object' === n && t.constructor && (n = t.constructor.name),
                                            'Map' === n || 'Set' === n
                                                ? Array.from(t)
                                                : 'Arguments' === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                                                  ? Ll(t, e)
                                                  : void 0
                                        )
                                    }
                                })(t)) ||
                                (e && t && 'number' == typeof t.length)
                            ) {
                                n && (t = n)
                                var r = 0,
                                    i = function () {}
                                return {
                                    s: i,
                                    n: function () {
                                        return r >= t.length ? { done: !0 } : { done: !1, value: t[r++] }
                                    },
                                    e: function (t) {
                                        throw t
                                    },
                                    f: i,
                                }
                            }
                            throw new TypeError(
                                'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                            )
                        }
                        var a,
                            o = !0,
                            s = !1
                        return {
                            s: function () {
                                n = n.call(t)
                            },
                            n: function () {
                                var t = n.next()
                                return (o = t.done), t
                            },
                            e: function (t) {
                                ;(s = !0), (a = t)
                            },
                            f: function () {
                                try {
                                    o || null == n.return || n.return()
                                } finally {
                                    if (s) throw a
                                }
                            },
                        }
                    }
                    function Ll(t, e) {
                        ;(null == e || e > t.length) && (e = t.length)
                        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n]
                        return r
                    }
                    Array.prototype.slice,
                        (ml.prototype = {
                            areaStart: function () {
                                this._line = 0
                            },
                            areaEnd: function () {
                                this._line = NaN
                            },
                            lineStart: function () {
                                this._point = 0
                            },
                            lineEnd: function () {
                                ;(this._line || (0 !== this._line && 1 === this._point)) && this._context.closePath(), (this._line = 1 - this._line)
                            },
                            point: function (t, e) {
                                switch (((t = +t), (e = +e), this._point)) {
                                    case 0:
                                        ;(this._point = 1), this._line ? this._context.lineTo(t, e) : this._context.moveTo(t, e)
                                        break
                                    case 1:
                                        this._point = 2
                                    default:
                                        this._context.lineTo(t, e)
                                }
                            },
                        })
                    var Ml = function (t, e) {
                        var n = is(0, e)
                        if (
                            ((n.stat_ = { default: void 0 }),
                            (n.stat = function (t, e) {
                                return arguments.length
                                    ? 2 == arguments.length
                                        ? ((n.stat_[t] = e), n)
                                        : 'string' == typeof t || t instanceof String
                                          ? n.stat_[t]
                                          : ((n.stat_ = t.default ? t : { default: t }), n)
                                    : n.stat_.default
                            }),
                            (n.statData_ = { default: zs(), color: zs(), size: zs(), v1: zs(), v2: zs() }),
                            (n.statData = function (t, e) {
                                return arguments.length ? (1 == arguments.length ? n.statData_[t] : ((n.statData_[t] = e), n)) : n.statData_.default
                            }),
                            (n.noDataText_ = 'No data available'),
                            (n.lg_ = 'en'),
                            (n.transitionDuration_ = 500),
                            (n.tooltip_.textFunction = El),
                            (n.filtersDefinitionFunction_ = void 0),
                            (n.callback_ = void 0),
                            (n.legend_ = void 0),
                            (n.legendObj_ = void 0),
                            [
                                'legend_',
                                'legendObj_',
                                'noDataText_',
                                'lg_',
                                'transitionDuration_',
                                'tooltipText_',
                                'filtersDefinitionFunction_',
                                'callback_',
                            ].forEach(function (t) {
                                n[t.substring(0, t.length - 1)] = function (e) {
                                    return arguments.length ? ((n[t] = e), n) : n[t]
                                }
                            }),
                            t)
                        )
                            for (var r in t) n[r] && null != t[r] && n[r](t[r])
                        ;(n.legend = function (t) {
                            return arguments.length ? ((n.legend_ = t), n.legendObj_ && n.legendObj().update(), n) : n.legend_
                        }),
                            (n.build = function () {
                                if (
                                    (n.projectionFunction_ && n.proj('4326'),
                                    n.buildMapTemplateBase(),
                                    n.filtersDefinitionFunction_ && n.filtersDefinitionFunction_(n.svg(), n.clnb_),
                                    n.legend())
                                ) {
                                    n.legendObj(n.getLegendConstructor()(n, n.legend()))
                                    var t = n.legendObj()
                                    if (0 == yt('#' + t.svgId).size()) {
                                        var e = null == t.x ? n.width() - 100 - t.boxPadding : t.x,
                                            r = null == t.y ? t.boxPadding : t.y
                                        n.svg()
                                            .append('g')
                                            .attr('class', 'legend')
                                            .attr('transform', 'translate(' + e + ',' + r + ')')
                                            .append('svg')
                                            .attr('id', t.svgId)
                                    }
                                    t.build()
                                }
                                return n.updateGeoData(), n.updateStatData(), n
                            })
                        var i = function () {
                            for (var t in n.stat_) if (!n.statData_[t].isReady()) return !1
                            return !0
                        }
                        return (
                            (n.updateGeoData = function () {
                                return (
                                    n.updateGeoMapTemplate(function () {
                                        i() && (n.updateStatValues(), n.callback() && n.callback()(n))
                                    }),
                                    n
                                )
                            }),
                            (n.updateStatData = function () {
                                for (var t in n.stat_) {
                                    if (!n.stat(t) && n.statData(t).get()) return
                                    'default' != t || n.stat(t) || n.stat(t, { eurostatDatasetCode: 'demo_r_d3dens', unitText: 'inhab./km²' })
                                    var e = zs(n.stat(t))
                                    n.statData(t, e)
                                    var r = n.nutsLevel_
                                    'mixed' == n.nutsLevel_ && (r = 0),
                                        e.retrieveFromRemote(r, n.lg(), function () {
                                            n.isGeoReady() && i() && (n.updateStatValues(), n.callback() && n.callback()())
                                        })
                                }
                                return n
                            }),
                            (n.updateStatValues = function () {
                                return n.updateClassification(), n.updateStyle(), n.legendObj() && n.legendObj().update(), n
                            }),
                            (n.updateClassification = function () {
                                return n
                            }),
                            (n.updateStyle = function () {
                                return n
                            }),
                            (n.getLegendConstructor = function () {
                                return ks
                            }),
                            (n.getTime = function () {
                                return n.statData('default').getTime()
                            }),
                            (n.setFromURL = function () {
                                var t = Dl()
                                return (
                                    t.w && n.width(t.w),
                                    t.h && n.height(t.h),
                                    t.x && t.y && n.geoCenter([t.x, t.y]),
                                    t.z && n.pixSize(t.z),
                                    t.s && n.scale(t.s),
                                    t.lvl && n.nutsLevel(t.lvl),
                                    t.time && ((n.filters_.time = t.time), delete n.filters_.lastTimePeriod),
                                    t.proj && n.proj(t.proj),
                                    t.geo && n.geo(t.geo),
                                    t.ny && n.nutsYear(t.ny),
                                    t.lg && n.lg(t.lg),
                                    t.clnb && n.clnb(+t.clnb),
                                    n
                                )
                            }),
                            (n.exportMapToSVG = function () {
                                var t = Cl(n.svg_.node()),
                                    e = URL.createObjectURL(t),
                                    r = document.createElement('a')
                                return (
                                    (r.href = e),
                                    (r.download = 'eurostatmap.svg'),
                                    document.body.appendChild(r),
                                    r.click(),
                                    document.body.removeChild(r),
                                    n
                                )
                            }),
                            (n.exportMapToPNG = function () {
                                var t, e, r, i, a
                                return (
                                    ((t = n.svg_.node()),
                                    (i = new Promise(function (t, n) {
                                        return (e = t), (r = n)
                                    })),
                                    ((a = new Image()).onerror = r),
                                    (a.onload = function () {
                                        var n = t.getBoundingClientRect(),
                                            r = document.createElement('canvas')
                                        ;(r.width = n.width), (r.height = n.height)
                                        var i = r.getContext('2d')
                                        i.drawImage(a, 0, 0, n.width, n.height), i.canvas.toBlob(e)
                                    }),
                                    (a.src = URL.createObjectURL(Cl(t))),
                                    i).then(function (t) {
                                        var e = URL.createObjectURL(t),
                                            n = document.createElement('a')
                                        ;(n.href = e),
                                            (n.download = 'eurostatmap.png'),
                                            document.body.appendChild(n),
                                            n.click(),
                                            document.body.removeChild(n)
                                    }),
                                    n
                                )
                            }),
                            n
                        )
                    }
                    function Cl(t) {
                        var e = 'http://www.w3.org/2000/xmlns/'
                        t = t.cloneNode(!0)
                        for (
                            var n = window.location.href + '#', r = document.createTreeWalker(t, NodeFilter.SHOW_ELEMENT, null, !1);
                            r.nextNode();

                        ) {
                            var i,
                                a = Al(r.currentNode.attributes)
                            try {
                                for (a.s(); !(i = a.n()).done; ) {
                                    var o = i.value
                                    o.value.includes(n) && (o.value = o.value.replace(n, '#'))
                                }
                            } catch (t) {
                                a.e(t)
                            } finally {
                                a.f()
                            }
                        }
                        t.setAttributeNS(e, 'xmlns', 'http://www.w3.org/2000/svg'), t.setAttributeNS(e, 'xmlns:xlink', 'http://www.w3.org/1999/xlink')
                        var s = new window.XMLSerializer().serializeToString(t)
                        return new Blob([s], { type: 'image/svg+xml' })
                    }
                    var El = function (t, e) {
                            var n = []
                            t.properties.id
                                ? n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;"><b>' +
                                          t.properties.na +
                                          '</b> (' +
                                          t.properties.id +
                                          ') </div>'
                                  )
                                : n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;"><b>' +
                                          t.properties.na +
                                          '</b></div>'
                                  )
                            var r = e.statData().get(t.properties.id),
                                i = e.statData('default').unitText()
                            if (!r || (0 !== r.value && !r.value) || ':' == r.value)
                                return (
                                    n.push(
                                        '\n            <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n            <table class="em-tooltip-table">\n            <tbody>\n            <tr>\n            <td>\n            '.concat(
                                            e.noDataText_,
                                            ' \n            </td>\n            </tr>\n            </tbody>\n            </table>\n            </div>\n        '
                                        )
                                    ),
                                    n.join('')
                                )
                            n.push(
                                '\n        <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n        <table class="em-tooltip-table">\n        <tbody>\n        <tr>\n        <td>\n        '
                                    .concat(Zo(r.value), ' ')
                                    .concat(i || '', '\n        </td>\n        </tr>\n        </tbody>\n        </table>\n        </div>\n    ')
                            )
                            var a = r.status
                            if (a && e.tooltip_.showFlags)
                                if ('short' === e.tooltip_.showFlags) n.push(' ' + a)
                                else {
                                    var o = gn[a]
                                    n.push(o ? ' (' + o + ')' : ' ' + a)
                                }
                            return n.join('')
                        },
                        Dl = function () {
                            for (
                                var t = {}, e = ['w', 'h', 'x', 'y', 'z', 's', 'lvl', 'time', 'proj', 'geo', 'ny', 'lg', 'sl', 'clnb'], n = 0;
                                n < e.length;
                                n++
                            )
                                t[e[n]] = getURLParameterByName(e[n])
                            return t
                        },
                        Ol = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.ascending = !0),
                                (n.shapeWidth = 20),
                                (n.shapeHeight = 20),
                                (n.sepLineLength = 22),
                                (n.sepLineStroke = 'black'),
                                (n.sepLineStrokeWidth = 1),
                                (n.labelFontSize = 12),
                                (n.labelDecNb = 2),
                                (n.labelOffset = 3),
                                (n.labelFormatter = null),
                                (n.labels = null),
                                (n.noData = !0),
                                (n.noDataText = 'No data'),
                                e)
                            )
                                for (var r in e) n[r] = e[r]
                            function i(t, e) {
                                var r = 'WORLD' == n.map.geo_ ? '#g_worldrg' : '#g_nutsrg',
                                    i = t.selectAll(r).selectAll("[ecl='" + e + "']")
                                i.style('fill', n.map.nutsrgSelFillSty()),
                                    i.attr('fill___', function () {
                                        yt(this).attr('fill')
                                    })
                            }
                            function a(t, e) {
                                var r = 'WORLD' == n.map.geo_ ? '#g_worldrg' : '#g_nutsrg'
                                t.selectAll(r)
                                    .selectAll("[ecl='" + e + "']")
                                    .style('fill', function () {
                                        yt(this).attr('fill___')
                                    })
                            }
                            return (
                                (n.update = function () {
                                    var t = n.map,
                                        e = t.svg(),
                                        r = n.lgg
                                    if (t.legend_) for (var o in t.legend_) n[o] = t.legend_[o]
                                    r.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        n.title &&
                                            r
                                                .append('text')
                                                .attr('class', 'eurostatmap-legend-title')
                                                .attr('x', n.boxPadding)
                                                .attr('y', n.boxPadding + n.titleFontSize)
                                                .text(n.title)
                                                .style('font-size', n.titleFontSize + 'px')
                                                .style('font-weight', n.titleFontWeight)
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill),
                                        r.style('font-family', t.fontFamily_)
                                    for (
                                        var s = n.labelFormatter ? n.labelFormatter : nn('.' + n.labelDecNb + 'f'),
                                            l = function () {
                                                var o = n.boxPadding + (n.title ? n.titleFontSize + n.boxPadding : 0) + u * n.shapeHeight,
                                                    l = n.ascending ? t.clnb() - u - 1 : u
                                                r
                                                    .append('rect')
                                                    .attr('x', n.boxPadding)
                                                    .attr('y', o)
                                                    .attr('width', n.shapeWidth)
                                                    .attr('height', n.shapeHeight)
                                                    .attr('fill', t.classToFillStyle()(l, t.clnb()))
                                                    .on('mouseover', function () {
                                                        if ((yt(this).style('fill', t.nutsrgSelFillSty()), i(e, l), n.map.insetTemplates_)) {
                                                            var r = n.map.insetTemplates_
                                                            for (var a in r)
                                                                if (Array.isArray(r[a]))
                                                                    for (var o = 0; o < r[a].length; o++)
                                                                        if (Array.isArray(r[a][o]))
                                                                            for (var s = 0; s < r[a][o].length; s++)
                                                                                r[a][o][s].svgId_ !== n.svgId_ && i(r[a][o][s].svg(), l)
                                                                        else r[a][o].svgId_ !== n.svgId_ && i(r[a][o].svg(), l)
                                                                else r[a].svgId_ !== n.svgId_ && i(r[a].svg(), l)
                                                        }
                                                    })
                                                    .on('mouseout', function () {
                                                        if (
                                                            (yt(this).style('fill', t.classToFillStyle()(l, t.clnb())),
                                                            a(e, l),
                                                            n.map.insetTemplates_)
                                                        ) {
                                                            var r = n.map.insetTemplates_
                                                            for (var i in r)
                                                                if (Array.isArray(r[i]))
                                                                    for (var o = 0; o < r[i].length; o++)
                                                                        if (Array.isArray(r[i][o]))
                                                                            for (var s = 0; s < r[i][o].length; s++)
                                                                                r[i][o][s].svgId_ !== n.svgId_ && a(r[i][o][s].svg(), l)
                                                                        else r[i][o].svgId_ !== n.svgId_ && a(r[i][o].svg(), l)
                                                                else r[i].svgId_ !== n.svgId_ && a(r[i].svg(), l)
                                                        }
                                                    }),
                                                    u > 0 &&
                                                        r
                                                            .append('line')
                                                            .attr('class', 'eurostatmap-legend-line')
                                                            .attr('x1', n.boxPadding)
                                                            .attr('y1', o)
                                                            .attr('x2', n.boxPadding + n.sepLineLength)
                                                            .attr('y2', o)
                                                            .attr('stroke', n.sepLineStroke)
                                                            .attr('stroke-width', n.sepLineStrokeWidth),
                                                    u < t.clnb() - 1 &&
                                                        r
                                                            .append('text')
                                                            .attr('class', 'eurostatmap-legend-label')
                                                            .attr('x', n.boxPadding + Math.max(n.shapeWidth, n.sepLineLength) + n.labelOffset)
                                                            .attr('y', o + n.shapeHeight)
                                                            .attr('dominant-baseline', 'middle')
                                                            .text(n.labels ? n.labels[u] : s(t.classifier().invertExtent(l)[n.ascending ? 0 : 1]))
                                                            .style('font-size', n.labelFontSize + 'px')
                                                            .style('font-family', t.fontFamily_)
                                                            .style('fill', n.fontFill)
                                            },
                                            u = 0;
                                        u < t.clnb();
                                        u++
                                    )
                                        l()
                                    if (n.noData) {
                                        var c =
                                            n.boxPadding + (n.title ? n.titleFontSize + n.boxPadding : 0) + t.clnb() * n.shapeHeight + n.boxPadding
                                        r
                                            .append('rect')
                                            .attr('x', n.boxPadding)
                                            .attr('y', c)
                                            .attr('width', n.shapeWidth)
                                            .attr('height', n.shapeHeight)
                                            .attr('fill', t.noDataFillStyle())
                                            .attr('stroke', 'black')
                                            .attr('stroke-width', 0.5)
                                            .on('mouseover', function () {
                                                if ((yt(this).style('fill', t.nutsrgSelFillSty()), i(e, 'nd'), n.map.insetTemplates_)) {
                                                    var r = n.map.insetTemplates_
                                                    for (var a in r)
                                                        if (Array.isArray(r[a]))
                                                            for (var o = 0; o < r[a].length; o++)
                                                                if (Array.isArray(r[a][o]))
                                                                    for (var s = 0; s < r[a][o].length; s++)
                                                                        r[a][o][s].svgId_ !== n.svgId_ && i(r[a][o][s].svg(), 'nd')
                                                                else r[a][o].svgId_ !== n.svgId_ && i(r[a][o].svg(), 'nd')
                                                        else r[a].svgId_ !== n.svgId_ && i(r[a].svg(), 'nd')
                                                }
                                            })
                                            .on('mouseout', function () {
                                                if ((yt(this).style('fill', t.noDataFillStyle()), a(e, 'nd'), n.map.insetTemplates_)) {
                                                    var r = n.map.insetTemplates_
                                                    for (var i in r)
                                                        if (Array.isArray(r[i]))
                                                            for (var o = 0; o < r[i].length; o++)
                                                                if (Array.isArray(r[i][o]))
                                                                    for (var s = 0; s < r[i][o].length; s++)
                                                                        r[i][o][s].svgId_ !== n.svgId_ && a(r[i][o][s].svg(), 'nd')
                                                                else r[i][o].svgId_ !== n.svgId_ && a(r[i][o].svg(), 'nd')
                                                        else r[i].svgId_ !== n.svgId_ && a(r[i].svg(), 'nd')
                                                }
                                            }),
                                            r
                                                .append('text')
                                                .attr('class', 'eurostatmap-legend-label')
                                                .attr('x', n.boxPadding + n.shapeWidth + n.labelOffset)
                                                .attr('y', c + 0.5 * n.shapeHeight)
                                                .attr('dominant-baseline', 'middle')
                                                .text(n.noDataText)
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill)
                                    }
                                    n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        Nl = function (t, e) {
                            return (
                                (t = t || interpolateOrRd),
                                e
                                    ? function (t, n) {
                                          return e[t]
                                      }
                                    : function (e, n) {
                                          return t(e / (n - 1))
                                      }
                            )
                        },
                        Il = hn(
                            new Array(3)
                                .concat(
                                    'fee8c8fdbb84e34a33',
                                    'fef0d9fdcc8afc8d59d7301f',
                                    'fef0d9fdcc8afc8d59e34a33b30000',
                                    'fef0d9fdd49efdbb84fc8d59e34a33b30000',
                                    'fef0d9fdd49efdbb84fc8d59ef6548d7301f990000',
                                    'fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000',
                                    'fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000'
                                )
                                .map(pn)
                        )
                    Zs(3)
                    var Rl = {
                            draw(t, e) {
                                const n = Zs(e / tl)
                                t.moveTo(n, 0), t.arc(0, 0, n, 0, nl)
                            },
                        },
                        Pl = {
                            draw(t, e) {
                                const n = Zs(e / 5) / 2
                                t.moveTo(-3 * n, -n),
                                    t.lineTo(-n, -n),
                                    t.lineTo(-n, -3 * n),
                                    t.lineTo(n, -3 * n),
                                    t.lineTo(n, -n),
                                    t.lineTo(3 * n, -n),
                                    t.lineTo(3 * n, n),
                                    t.lineTo(n, n),
                                    t.lineTo(n, 3 * n),
                                    t.lineTo(-n, 3 * n),
                                    t.lineTo(-n, n),
                                    t.lineTo(-3 * n, n),
                                    t.closePath()
                            },
                        }
                    const Wl = Zs(1 / 3),
                        jl = 2 * Wl
                    var Hl = {
                            draw(t, e) {
                                const n = Zs(e / jl),
                                    r = n * Wl
                                t.moveTo(0, -n), t.lineTo(r, 0), t.lineTo(0, n), t.lineTo(-r, 0), t.closePath()
                            },
                        },
                        Bl = {
                            draw(t, e) {
                                const n = Zs(e),
                                    r = -n / 2
                                t.rect(r, r, n, n)
                            },
                        }
                    const Ul = Js(tl / 10) / Js((7 * tl) / 10),
                        $l = Js(nl / 10) * Ul,
                        Gl = -Ys(nl / 10) * Ul
                    var Vl = {
                        draw(t, e) {
                            const n = Zs(0.8908130915292852 * e),
                                r = $l * n,
                                i = Gl * n
                            t.moveTo(0, -n), t.lineTo(r, i)
                            for (let e = 1; e < 5; ++e) {
                                const a = (nl * e) / 5,
                                    o = Ys(a),
                                    s = Js(a)
                                t.lineTo(s * n, -o * n), t.lineTo(o * r - s * i, s * r + o * i)
                            }
                            t.closePath()
                        },
                    }
                    const ql = Zs(3)
                    var Yl = {
                        draw(t, e) {
                            const n = -Zs(e / (3 * ql))
                            t.moveTo(0, 2 * n), t.lineTo(-ql * n, -n), t.lineTo(ql * n, -n), t.closePath()
                        },
                    }
                    Zs(3)
                    const Xl = -0.5,
                        Kl = Zs(3) / 2,
                        Jl = 1 / Zs(12),
                        Zl = 3 * (Jl / 2 + 1)
                    var Ql = {
                        draw(t, e) {
                            const n = Zs(e / Zl),
                                r = n / 2,
                                i = n * Jl,
                                a = r,
                                o = n * Jl + n,
                                s = -a,
                                l = o
                            t.moveTo(r, i),
                                t.lineTo(a, o),
                                t.lineTo(s, l),
                                t.lineTo(Xl * r - Kl * i, Kl * r + Xl * i),
                                t.lineTo(Xl * a - Kl * o, Kl * a + Xl * o),
                                t.lineTo(Xl * s - Kl * l, Kl * s + Xl * l),
                                t.lineTo(Xl * r + Kl * i, Xl * i - Kl * r),
                                t.lineTo(Xl * a + Kl * o, Xl * o - Kl * a),
                                t.lineTo(Xl * s + Kl * l, Xl * l - Kl * s),
                                t.closePath()
                        },
                    }
                    function tu(t, e) {
                        let n = null,
                            r = cl(i)
                        function i() {
                            let i
                            if ((n || (n = i = r()), t.apply(this, arguments).draw(n, +e.apply(this, arguments)), i))
                                return (n = null), i + '' || null
                        }
                        return (
                            (t = 'function' == typeof t ? t : Gs(t || Rl)),
                            (e = 'function' == typeof e ? e : Gs(void 0 === e ? 64 : +e)),
                            (i.type = function (e) {
                                return arguments.length ? ((t = 'function' == typeof e ? e : Gs(e)), i) : t
                            }),
                            (i.size = function (t) {
                                return arguments.length ? ((e = 'function' == typeof t ? t : Gs(+t)), i) : e
                            }),
                            (i.context = function (t) {
                                return arguments.length ? ((n = null == t ? null : t), i) : n
                            }),
                            i
                        )
                    }
                    sn({ decimal: '.', thousands: ' ', grouping: [3], currency: ['', '€'] })
                    var eu = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.ascending = !1),
                                (n.legendSpacing = 35),
                                (n.labelFontSize = 12),
                                (n.noDataShapeWidth = 20),
                                (n.noDataShapeHeight = 20),
                                (n.sizeLegend = {
                                    title: null,
                                    titleFontSize: 12,
                                    titlePadding: 5,
                                    values: void 0,
                                    cellNb: 3,
                                    shapePadding: 5,
                                    shapeOffset: { x: 0, y: 0 },
                                    shapeFill: 'white',
                                    labelOffset: { x: 5, y: 0 },
                                    labelDecNb: 0,
                                    labelFormatter: void 0,
                                    _totalBarsHeight: 0,
                                    _totalD3SymbolsHeight: 0,
                                    noData: !1,
                                    noDataText: 'No data',
                                }),
                                (n.colorLegend = {
                                    title: null,
                                    titleFontSize: 12,
                                    titlePadding: 10,
                                    marginTop: 30,
                                    shapeWidth: 20,
                                    shapeHeight: 20,
                                    shapePadding: 1,
                                    labelOffset: { x: 25, y: 0 },
                                    labelDecNb: 0,
                                    labelFormatter: void 0,
                                    noData: !0,
                                    noDataText: 'No data',
                                    sepLineLength: 24,
                                    sepLineStroke: 'black',
                                    sepLineStrokeWidth: 1,
                                }),
                                e)
                            )
                                for (var r in e)
                                    if ('colorLegend' == r || 'sizeLegend' == r) {
                                        for (var i in n[r]) e[r][i] && (n[r][i] = e[r][i])
                                        0 == e.colorLegend && (n.colorLegend = !1)
                                    } else n[r] = e[r]
                            function a(t, e, r, i) {
                                var a = n.map
                                r
                                    .append('g')
                                    .attr('fill', a.noDataFillStyle())
                                    .style('fill-opacity', a.psFillOpacity())
                                    .style('stroke', '#000')
                                    .attr('stroke-width', 0.4)
                                    .append('rect')
                                    .attr('width', n.colorLegend ? n.colorLegend.shapeWidth : n.noDataShapeWidth)
                                    .attr('height', n.colorLegend ? n.colorLegend.shapeHeight : n.noDataShapeHeight)
                                    .on('mouseover', function () {
                                        var t = a.svg_.select('#g_ps').selectAll("[ecl='nd']"),
                                            e = yt(this.parentNode).attr('fill')
                                        yt(this).attr('fill___', e),
                                            t.each(function (t, e) {
                                                yt(this.childNodes[0]).attr('fill', a.noDataFillStyle())
                                            }),
                                            yt(this).style('fill', a.nutsrgSelFillSty())
                                        var r = 'nd'
                                        if ((o(a.svg_, r), n.map.insetTemplates_)) {
                                            var i = n.map.insetTemplates_
                                            for (var s in i)
                                                if (Array.isArray(i[s]))
                                                    for (var l = 0; l < i[s].length; l++)
                                                        if (Array.isArray(i[s][l]))
                                                            for (var u = 0; u < i[s][l].length; u++)
                                                                i[s][l][u].svgId_ !== n.svgId_ && o(i[s][l][u].svg(), r)
                                                        else i[s][l].svgId_ !== n.svgId_ && o(i[s][l].svg(), r)
                                                else i[s].svgId_ !== n.svgId_ && o(i[s].svg(), r)
                                        }
                                    })
                                    .on('mouseout', function () {
                                        var t = a.svg_.select('#g_ps').selectAll("[ecl='nd']"),
                                            e = yt(this).attr('fill___')
                                        t.each(function (t, n) {
                                            yt(this.childNodes[0]).attr('fill', e)
                                        }),
                                            yt(this).style('fill', a.noDataFillStyle())
                                        var r = 'nd'
                                        if ((s(a.svg_, r), n.map.insetTemplates_)) {
                                            var i = n.map.insetTemplates_
                                            for (var o in i)
                                                if (Array.isArray(i[o]))
                                                    for (var l = 0; l < i[o].length; l++)
                                                        if (Array.isArray(i[o][l]))
                                                            for (var u = 0; u < i[o][l].length; u++)
                                                                i[o][l][u].svgId_ !== n.svgId_ && s(i[o][l][u].svg(), r)
                                                        else i[o][l].svgId_ !== n.svgId_ && s(i[o][l].svg(), r)
                                                else i[o].svgId_ !== n.svgId_ && s(i[o].svg(), r)
                                        }
                                    }),
                                    r
                                        .append('text')
                                        .attr('x', n.colorLegend ? n.colorLegend.labelOffset.x : n.noDataShapeWidth + 5)
                                        .attr('y', n.colorLegend ? n.colorLegend.shapeHeight / 2 + 1 : n.noDataShapeHeight / 2 + 1)
                                        .attr('dominant-baseline', 'middle')
                                        .attr('class', 'eurostatmap-legend-label')
                                        .text(i)
                                        .style('font-size', n.labelFontSize + 'px')
                                        .style('font-family', a.fontFamily_)
                                        .style('fill', n.fontFill)
                            }
                            function o(t, e) {
                                var r = 'WORLD' == n.map.geo_ ? '#g_worldrg' : '#g_nutsrg',
                                    i = t.selectAll(r).selectAll("[ecl='" + e + "']")
                                i.style('fill', n.map.nutsrgSelFillSty()),
                                    i.attr('fill___', function () {
                                        yt(this).attr('fill')
                                    })
                            }
                            function s(t, e) {
                                var r = 'WORLD' == n.map.geo_ ? '#g_worldrg' : '#g_nutsrg'
                                t.selectAll(r)
                                    .selectAll("[ecl='" + e + "']")
                                    .style('fill', function () {
                                        yt(this).attr('fill___')
                                    })
                            }
                            function l(t, e, r, i, a) {
                                var o = 'triangle' == n.map.psShape_ || 'diamond' == n.map.psShape_ ? r : r / 2
                                0 == n.sizeLegend._totalD3SymbolsHeight && (n.sizeLegend._totalD3SymbolsHeight += o + n.boxPadding)
                                var s = t.classifierSize_(t.classifierSize_.domain()[1]),
                                    l = s,
                                    u =
                                        (n.sizeLegend.title ? n.titleFontSize + n.sizeLegend.titlePadding : 0) +
                                        n.sizeLegend._totalD3SymbolsHeight +
                                        (n.sizeLegend.shapePadding * i - 1)
                                n.sizeLegend._totalD3SymbolsHeight += r
                                var c = n._sizeLegendNode
                                        .append('g')
                                        .attr('transform', 'translate('.concat(l, ',').concat(u, ')'))
                                        .attr('class', 'size-legend-item'),
                                    p = f().size(r * r)()
                                c.append('g')
                                    .style('fill', function (e) {
                                        return t.classifierColor_ ? n.sizeLegend.shapeFill : t.psFill_
                                    })
                                    .style('fill-opacity', t.psFillOpacity())
                                    .style('stroke', t.psStroke())
                                    .style('stroke-width', t.psStrokeWidth())
                                    .append('path')
                                    .attr('d', p)
                                    .attr('transform', function () {
                                        return 'translate('.concat(n.sizeLegend.shapeOffset.x, ',').concat(n.sizeLegend.shapeOffset.y, ')')
                                    })
                                var h = s / 2 + n.sizeLegend.labelOffset.x
                                c.append('text')
                                    .attr('x', h)
                                    .attr('y', 0)
                                    .attr('dominant-baseline', 'middle')
                                    .attr('text-anchor', 'start')
                                    .attr('class', 'eurostatmap-legend-label')
                                    .text(a(e))
                                    .style('font-size', n.labelFontSize + 'px')
                                    .style('font-family', t.fontFamily_)
                                    .style('fill', n.fontFill)
                            }
                            function u(t, e, r, i, a) {
                                var o,
                                    s = n.boxPadding
                                if (
                                    (t.customSymbols.prevSymb ||
                                        ((o = n.boxPadding + (n.sizeLegend.title ? n.titleFontSize + n.sizeLegend.titlePadding : 0) + 20),
                                        (t.customSymbols.initialTranslateY = o),
                                        (t.customSymbols.prevScale = r)),
                                    t.customSymbols.prevSymb)
                                ) {
                                    var l = t.customSymbols.prevSymb.node().getBBox()
                                    ;(t.customSymbols.nodeHeights = t.customSymbols.nodeHeights + l.height * t.customSymbols.prevScale),
                                        (o = t.customSymbols.initialTranslateY + t.customSymbols.nodeHeights + n.sizeLegend.shapePadding * (i - 1)),
                                        (t.customSymbols.prevScale = r)
                                }
                                var u = n._sizeLegendNode
                                    .append('g')
                                    .attr('transform', 'translate('.concat(s, ',').concat(o, ')'))
                                    .attr('class', 'size-legend-item')
                                t.customSymbols.prevSymb = u
                                    .append('g')
                                    .attr('class', 'size-legend-symbol')
                                    .attr('fill', function (e) {
                                        return t.classifierColor_ ? n.sizeLegend.shapeFill : t.psFill_
                                    })
                                    .style('fill-opacity', t.psFillOpacity())
                                    .style('stroke', t.psStroke())
                                    .style('stroke-width', t.psStrokeWidth())
                                    .attr('stroke', 'black')
                                    .attr('stroke-width', 0.5)
                                    .append('g')
                                    .html(n.map.psCustomSVG_)
                                    .attr('transform', function () {
                                        return n.map.psCustomSVG_
                                            ? 'translate('
                                                  .concat(n.sizeLegend.shapeOffset.x, ',')
                                                  .concat(n.sizeLegend.shapeOffset.y, ') scale(')
                                                  .concat(r, ')')
                                            : 'translate('.concat(n.sizeLegend.shapeOffset.x, ',').concat(n.sizeLegend.shapeOffset.y, ')')
                                    })
                                var c = s + t.classifierSize_(t.classifierSize_.domain()[0]) + n.sizeLegend.labelOffset.x,
                                    f = n.sizeLegend.shapeOffset.y / 2 + 1
                                u.append('text')
                                    .attr('x', c)
                                    .attr('y', f)
                                    .attr('dominant-baseline', 'middle')
                                    .attr('text-anchor', 'start')
                                    .attr('class', 'eurostatmap-legend-label')
                                    .text(a(e))
                                    .style('font-size', n.labelFontSize + 'px')
                                    .style('font-family', t.fontFamily_)
                                    .style('fill', n.fontFill)
                            }
                            function c(t, e, r, i, a) {
                                var o = n.boxPadding,
                                    s =
                                        n.boxPadding +
                                        (n.sizeLegend.title ? n.titleFontSize + n.sizeLegend.titlePadding : 0) +
                                        n.sizeLegend._totalBarsHeight +
                                        10
                                n.sizeLegend._totalBarsHeight += r + 10
                                var l = f().size(r * r)(),
                                    u = n._sizeLegendNode
                                        .append('g')
                                        .attr('transform', 'translate('.concat(o, ',').concat(s, ')'))
                                        .attr('class', 'size-legend-item')
                                u.append('g')
                                    .style('fill', function (e) {
                                        return t.classifierColor_ ? n.sizeLegend.shapeFill : t.psFill_
                                    })
                                    .style('fill-opacity', t.psFillOpacity())
                                    .style('stroke', t.psStroke())
                                    .style('stroke-width', t.psStrokeWidth())
                                    .attr('stroke', 'black')
                                    .attr('stroke-width', 0.5)
                                    .append('path')
                                    .attr('d', l)
                                    .attr('transform', function () {
                                        return n.map.psCustomSVG_
                                            ? 'translate('
                                                  .concat(n.sizeLegend.shapeOffset.x, ',')
                                                  .concat(n.sizeLegend.shapeOffset.y, ') scale(')
                                                  .concat(r, ')')
                                            : 'translate('.concat(n.sizeLegend.shapeOffset.x, ',').concat(n.sizeLegend.shapeOffset.y, ')')
                                    })
                                var c = o + n.map.psBarWidth_ + n.sizeLegend.labelOffset.x,
                                    p = r / 2 + n.sizeLegend.labelOffset.y
                                u.append('text')
                                    .attr('x', c)
                                    .attr('y', p)
                                    .attr('dominant-baseline', 'middle')
                                    .attr('text-anchor', 'start')
                                    .attr('class', 'eurostatmap-legend-label')
                                    .text(a(e))
                                    .style('font-size', n.labelFontSize + 'px')
                                    .style('font-family', t.fontFamily_)
                                    .style('fill', n.fontFill)
                            }
                            function f() {
                                var t
                                if (n.map.psCustomSVG_) t = n.map.psCustomSVG_
                                else if (n.map.psCustomShape_) t = n.map.psCustomShape_
                                else if ('bar' == n.map.psShape_)
                                    t = tu().type({
                                        draw: function (t, e) {
                                            var r = Math.sqrt(e)
                                            t.moveTo(0, 0),
                                                t.lineTo(0, r),
                                                t.lineTo(n.map.psBarWidth_, r),
                                                t.lineTo(n.map.psBarWidth_, 0),
                                                t.lineTo(0, 0),
                                                t.closePath()
                                        },
                                    })
                                else {
                                    var e = ru[n.map.psShape_] || ru.circle
                                    t = tu().type(e)
                                }
                                return t
                            }
                            return (
                                (n.update = function () {
                                    var e = n.map,
                                        r = n.lgg
                                    if (e.legend_)
                                        for (var i in e.legend_)
                                            if ('colorLegend' == i || 'sizeLegend' == i)
                                                for (var o in n[i]) void 0 !== e.legend_[i][o] && (n[i][o] = e.legend_[i][o])
                                            else n[i] = e.legend_[i]
                                    r.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        r.style('font-family', e.fontFamily_),
                                        (n.sizeLegend._totalBarsHeight = 0),
                                        (n.sizeLegend._totalD3SymbolsHeight = 0),
                                        (n._sizeLegendNode = r.append('g').attr('class', 'size-legend-container')),
                                        e.classifierSize_ &&
                                            (function (e) {
                                                if (e.psCustomSVG_ || 'circle' != e.psShape_) {
                                                    var r = n.sizeLegend.labelFormatter || Zo
                                                    n.sizeLegend.title &&
                                                        n._sizeLegendNode
                                                            .append('text')
                                                            .attr('class', 'eurostatmap-legend-title')
                                                            .attr('x', n.boxPadding)
                                                            .attr('y', n.boxPadding)
                                                            .text(n.sizeLegend.title)
                                                            .style('font-size', n.titleFontSize + 'px')
                                                            .style('font-weight', n.titleFontWeight)
                                                            .style('font-family', e.fontFamily_)
                                                            .style('fill', n.fontFill)
                                                            .style('dominant-baseline', 'hanging')
                                                    var i = e.classifierSize_.domain()[1]
                                                    n.sizeLegend.values && (n.sizeLegend.cellNb = n.sizeLegend.values.length),
                                                        (e.customSymbols = { nodeHeights: 0 })
                                                    for (var o = 1; o < n.sizeLegend.cellNb + 1; o++) {
                                                        var s = n.ascending ? n.sizeLegend.cellNb - o + 1 : o,
                                                            f = n.sizeLegend.values ? n.sizeLegend.values[s - 1] : i / s,
                                                            p = e.classifierSize_(f)
                                                        'bar' == e.psShape_
                                                            ? c(t, f, p, 0, r)
                                                            : 'custom' == e.psShape_ || e.psCustomSVG_
                                                              ? u(t, f, p, o, r)
                                                              : l(t, f, p, o, r)
                                                    }
                                                    if (n.sizeLegend.noData) {
                                                        var h = n._sizeLegendNode.node().getBBox().height
                                                        n.colorLegend && (h += n.colorLegend.shapeHeight + 5)
                                                        var d = n.boxPadding
                                                        a(
                                                            0,
                                                            0,
                                                            n._sizeLegendNode
                                                                .append('g')
                                                                .attr('transform', 'translate('.concat(d, ',').concat(h, ')'))
                                                                .attr('class', 'color-legend-item'),
                                                            n.sizeLegend.noDataText
                                                        )
                                                    }
                                                } else if (
                                                    ((function (t) {
                                                        var e = t.classifierSize_.domain()
                                                        n.sizeLegend.values
                                                            ? (n._sizeLegendValues = n.sizeLegend.values)
                                                            : (n._sizeLegendValues = [Math.floor(e[1]), Math.floor(e[1] / 2), Math.floor(e[0])]),
                                                            !n.sizeLegend.title && n.title && (n.sizeLegend.title = n.title),
                                                            n.sizeLegend.title &&
                                                                n._sizeLegendNode
                                                                    .append('text')
                                                                    .attr('x', n.boxPadding)
                                                                    .attr('y', n.boxPadding + n.titleFontSize)
                                                                    .attr('class', 'eurostatmap-legend-title')
                                                                    .text(n.sizeLegend.title)
                                                                    .style('font-size', n.titleFontSize + 'px')
                                                                    .style('font-weight', n.titleFontWeight)
                                                                    .style('font-family', t.fontFamily_)
                                                                    .style('fill', n.fontFill)
                                                        var r = t.classifierSize_(St(n._sizeLegendValues)),
                                                            i = n.boxPadding + r,
                                                            a =
                                                                n.boxPadding +
                                                                2 * r +
                                                                (n.sizeLegend.title ? n.titleFontSize + n.sizeLegend.titlePadding : 0) +
                                                                20,
                                                            o = n._sizeLegendNode
                                                                .append('g')
                                                                .attr('transform', 'translate('.concat(i, ',').concat(a, ')'))
                                                                .attr('class', 'circle-legend')
                                                                .attr('text-anchor', 'right')
                                                                .attr('fill', 'black')
                                                                .selectAll('g')
                                                                .data(n._sizeLegendValues)
                                                                .join('g')
                                                                .attr('class', 'eurostatmap-legend-item')
                                                        o
                                                            .append('circle')
                                                            .attr('class', 'eurostatmap-legend-circle')
                                                            .attr('fill', 'none')
                                                            .attr('stroke', 'black')
                                                            .attr('cy', function (e) {
                                                                return -t.classifierSize_(e)
                                                            })
                                                            .attr('r', t.classifierSize_),
                                                            o
                                                                .append('text')
                                                                .style('font-size', n.labelFontSize + 'px')
                                                                .style('font-family', t.fontFamily_)
                                                                .style('fill', n.fontFill)
                                                                .attr('class', 'eurostatmap-legend-label')
                                                                .attr('y', function (e, r) {
                                                                    return -1 - 2 * t.classifierSize_(e) - n.labelFontSize
                                                                })
                                                                .attr('x', r + 5)
                                                                .attr('dy', '1.2em')
                                                                .attr('xml:space', 'preserve')
                                                                .text(function (t) {
                                                                    return t.toLocaleString('en').replace(/,/gi, ' ')
                                                                }),
                                                            o
                                                                .append('line')
                                                                .style('stroke-dasharray', 2)
                                                                .style('stroke', 'grey')
                                                                .attr('x1', 2)
                                                                .attr('y1', function (e, n) {
                                                                    return -1 - 2 * t.classifierSize_(e)
                                                                })
                                                                .attr('xml:space', 'preserve')
                                                                .attr('x2', r + 5)
                                                                .attr('y2', function (e, n) {
                                                                    return -1 - 2 * t.classifierSize_(e)
                                                                })
                                                    })(e, n.sizeLegend),
                                                    n.sizeLegend.noData)
                                                ) {
                                                    var g = n._sizeLegendNode.node().getBBox().height + 25,
                                                        _ = n.boxPadding
                                                    a(
                                                        0,
                                                        0,
                                                        n._sizeLegendNode
                                                            .append('g')
                                                            .attr('transform', 'translate('.concat(_, ',').concat(g, ')'))
                                                            .attr('class', 'color-legend-item'),
                                                        n.sizeLegend.noDataText
                                                    )
                                                }
                                            })(e, n.sizeLegend),
                                        (n._colorLegendNode = r.append('g').attr('class', 'color-legend-container')),
                                        n._colorLegendNode.attr('transform', 'translate(0,'.concat(n._sizeLegendNode.node().getBBox().height, ')')),
                                        e.classifierColor_ &&
                                            n.colorLegend &&
                                            (function (t) {
                                                var e = n.colorLegend.labelFormatter || Zo,
                                                    r = t.svg()
                                                n.colorLegend.title &&
                                                    n._colorLegendNode
                                                        .append('text')
                                                        .attr('class', 'eurostatmap-legend-title')
                                                        .attr('x', n.boxPadding)
                                                        .attr('y', n.titleFontSize + n.colorLegend.marginTop)
                                                        .text(n.colorLegend.title)
                                                        .style('font-size', n.titleFontSize + 'px')
                                                        .style('font-weight', n.titleFontWeight)
                                                        .style('font-family', t.fontFamily_)
                                                        .style('fill', n.fontFill)
                                                for (
                                                    var i = n.boxPadding,
                                                        o = t.psClasses_,
                                                        s = function () {
                                                            var a =
                                                                    n.titleFontSize +
                                                                    n.colorLegend.titlePadding +
                                                                    n.colorLegend.marginTop +
                                                                    l * n.colorLegend.shapeHeight,
                                                                s = n.ascending ? l : o - l - 1,
                                                                u = n._colorLegendNode
                                                                    .append('g')
                                                                    .attr('transform', 'translate('.concat(i, ',').concat(a, ')'))
                                                                    .attr('class', 'color-legend-item')
                                                            u
                                                                .append('g')
                                                                .attr('fill', t.psClassToFillStyle()(s, o))
                                                                .style('fill-opacity', t.psFillOpacity())
                                                                .style('stroke', t.psStroke())
                                                                .style('stroke-width', 1)
                                                                .attr('stroke', 'black')
                                                                .attr('stroke-width', 0.5)
                                                                .append('rect')
                                                                .attr('width', n.colorLegend.shapeWidth)
                                                                .attr('height', n.colorLegend.shapeHeight)
                                                                .on('mouseover', function () {
                                                                    var e = r.select('#g_ps').selectAll("[ecl='" + s + "']"),
                                                                        n = yt(this.parentNode).attr('fill')
                                                                    yt(this).attr('fill___', n),
                                                                        e.each(function (e, n) {
                                                                            yt(this.childNodes[0]).attr('fill', t.nutsrgSelFillSty())
                                                                        }),
                                                                        yt(this).style('fill', t.nutsrgSelFillSty())
                                                                })
                                                                .on('mouseout', function () {
                                                                    var e = r.select('#g_ps').selectAll("[ecl='" + s + "']"),
                                                                        n = yt(this).attr('fill___')
                                                                    e.each(function (t, e) {
                                                                        yt(this.childNodes[0]).attr('fill', n)
                                                                    }),
                                                                        yt(this).style('fill', t.psClassToFillStyle()(s, o))
                                                                }),
                                                                l > 0 &&
                                                                    u
                                                                        .append('line')
                                                                        .attr('x1', 0)
                                                                        .attr('y1', 0)
                                                                        .attr('x2', 0 + n.colorLegend.sepLineLength)
                                                                        .attr('y2', 0)
                                                                        .attr('stroke', n.colorLegend.sepLineStroke)
                                                                        .attr('stroke-width', n.colorLegend.sepLineStrokeWidth)
                                                                        .attr('class', 'eurostatmap-legend-line'),
                                                                l < o - 1 &&
                                                                    u
                                                                        .append('text')
                                                                        .attr('class', 'eurostatmap-legend-label')
                                                                        .attr('x', n.colorLegend.labelOffset.x)
                                                                        .attr('y', n.colorLegend.shapeHeight)
                                                                        .attr('dominant-baseline', 'middle')
                                                                        .text(function (r) {
                                                                            return e(
                                                                                t.classifierColor_.invertExtent(n.ascending ? s + 1 : s - 1)[
                                                                                    n.ascending ? 0 : 1
                                                                                ]
                                                                            )
                                                                        })
                                                                        .style('font-size', n.labelFontSize + 'px')
                                                                        .style('font-family', t.fontFamily_)
                                                                        .style('fill', n.fontFill)
                                                        },
                                                        l = 0;
                                                    l < o;
                                                    l++
                                                )
                                                    s()
                                                if (n.colorLegend.noData) {
                                                    var u = n.titleFontSize + n.colorLegend.marginTop + o * n.colorLegend.shapeHeight + 20
                                                    a(
                                                        0,
                                                        0,
                                                        n._colorLegendNode
                                                            .append('g')
                                                            .attr('transform', 'translate('.concat(i, ',').concat(u, ')'))
                                                            .attr('class', 'color-legend-item'),
                                                        n.colorLegend.noDataText
                                                    )
                                                }
                                            })(e, n.colorLegend),
                                        n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        nu = function (t, e) {
                            return (
                                (t = t || Il),
                                e
                                    ? function (t, n) {
                                          return e[t]
                                      }
                                    : function (e, n) {
                                          return t(e / (n - 1))
                                      }
                            )
                        },
                        ru = { cross: Pl, square: Bl, diamond: Hl, triangle: Yl, star: Vl, wye: Ql, circle: Rl },
                        iu = function (t, e) {
                            var n = []
                            t.properties.id
                                ? n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          ' (' +
                                          t.properties.id +
                                          ') </div>'
                                  )
                                : n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          '</div>'
                                  )
                            var r = e.statData('size').getArray() ? e.statData('size') : e.statData(),
                                i = r.get(t.properties.id)
                            if (!i || (0 != i.value && !i.value)) n.push(e.noDataText_)
                            else {
                                var a = r.unitText()
                                n.push(
                                    '<div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">'
                                        .concat(Zo(i.value), ' ')
                                        .concat(a || ' ', '</div>')
                                )
                            }
                            if (e.statData('color').getArray()) {
                                var o = e.statData('color').get(t.properties.id)
                                if (!o || (0 != o.value && !o.value)) n.push(e.noDataText_)
                                else {
                                    var s = e.statData('color').unitText()
                                    n.push(
                                        '<div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;padding-top:0px">'
                                            .concat(Zo(o.value), ' ')
                                            .concat(s || ' ', '</div>')
                                    )
                                }
                            }
                            return n.join('')
                        }
                    class au extends Map {
                        constructor(t, e = su) {
                            if ((super(), Object.defineProperties(this, { _intern: { value: new Map() }, _key: { value: e } }), null != t))
                                for (const [e, n] of t) this.set(e, n)
                        }
                        get(t) {
                            return super.get(ou(this, t))
                        }
                        has(t) {
                            return super.has(ou(this, t))
                        }
                        set(t, e) {
                            return super.set(
                                (function ({ _intern: t, _key: e }, n) {
                                    const r = e(n)
                                    return t.has(r) ? t.get(r) : (t.set(r, n), n)
                                })(this, t),
                                e
                            )
                        }
                        delete(t) {
                            return super.delete(
                                (function ({ _intern: t, _key: e }, n) {
                                    const r = e(n)
                                    return t.has(r) && ((n = t.get(r)), t.delete(r)), n
                                })(this, t)
                            )
                        }
                    }
                    function ou({ _intern: t, _key: e }, n) {
                        const r = e(n)
                        return t.has(r) ? t.get(r) : n
                    }
                    function su(t) {
                        return null !== t && 'object' == typeof t ? t.valueOf() : t
                    }
                    const lu = Symbol('implicit')
                    function uu() {
                        var t = new au(),
                            e = [],
                            n = [],
                            r = lu
                        function i(i) {
                            let a = t.get(i)
                            if (void 0 === a) {
                                if (r !== lu) return r
                                t.set(i, (a = e.push(i) - 1))
                            }
                            return n[a % n.length]
                        }
                        return (
                            (i.domain = function (n) {
                                if (!arguments.length) return e.slice()
                                ;(e = []), (t = new au())
                                for (const r of n) t.has(r) || t.set(r, e.push(r) - 1)
                                return i
                            }),
                            (i.range = function (t) {
                                return arguments.length ? ((n = Array.from(t)), i) : n.slice()
                            }),
                            (i.unknown = function (t) {
                                return arguments.length ? ((r = t), i) : r
                            }),
                            (i.copy = function () {
                                return uu(e, n).unknown(r)
                            }),
                            Nt.apply(i, arguments),
                            i
                        )
                    }
                    var cu = pn('8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f'),
                        fu = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.shapeWidth = 13),
                                (n.shapeHeight = 15),
                                (n.shapePadding = 5),
                                (n.labelFontSize = 12),
                                (n.labelOffset = 5),
                                (n.noData = !0),
                                (n.noDataText = 'No data'),
                                (n.order = void 0),
                                e)
                            )
                                for (var r in e) n[r] = e[r]
                            return (
                                (n.update = function () {
                                    var t = n.map,
                                        e = n.lgg,
                                        r = t.svg()
                                    e.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        n.title &&
                                            e
                                                .append('text')
                                                .attr('class', 'eurostat-map-legend-title')
                                                .attr('x', n.boxPadding)
                                                .attr('y', n.boxPadding + n.titleFontSize)
                                                .text(n.title)
                                                .style('font-size', n.titleFontSize + 'px')
                                                .style('font-weight', n.titleFontWeight)
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill),
                                        e.style('font-family', t.fontFamily_)
                                    for (
                                        var i = n.order ? n.order : t.classifier().domain(),
                                            a = function () {
                                                var a = i[o],
                                                    s = t.classifier()(a),
                                                    l =
                                                        n.boxPadding +
                                                        (n.title ? n.titleFontSize + n.boxPadding : 0) +
                                                        o * (n.shapeHeight + n.shapePadding)
                                                e
                                                    .append('rect')
                                                    .attr('x', n.boxPadding)
                                                    .attr('y', l)
                                                    .attr('width', n.shapeWidth)
                                                    .attr('height', n.shapeHeight)
                                                    .attr('fill', t.classToFillStyle()[a])
                                                    .attr('stroke', 'black')
                                                    .attr('stroke-width', 0.5)
                                                    .on('mouseover', function () {
                                                        var e = r.select('#g_nutsrg').selectAll("[ecl='" + s + "']")
                                                        e.style('fill', t.nutsrgSelFillSty())
                                                        var n = yt(this)
                                                        e.attr('fill___', function (t) {
                                                            n.attr('fill')
                                                        }),
                                                            n.style('fill', t.nutsrgSelFillSty())
                                                    })
                                                    .on('mouseout', function () {
                                                        var e = r.select('#g_nutsrg').selectAll("[ecl='" + s + "']"),
                                                            n = yt(this)
                                                        e.style('fill', function (t) {
                                                            n.attr('fill___')
                                                        }),
                                                            n.style('fill', t.classToFillStyle()[s])
                                                    }),
                                                    e
                                                        .append('text')
                                                        .attr('class', 'eurostat-map-legend-label')
                                                        .attr('x', n.boxPadding + n.shapeWidth + n.labelOffset)
                                                        .attr('y', l + 0.5 * n.shapeHeight)
                                                        .attr('dominant-baseline', 'middle')
                                                        .text(t.classToText() ? t.classToText()[a] : a)
                                                        .style('font-size', n.labelFontSize + 'px')
                                                        .style('font-family', t.fontFamily_)
                                                        .style('fill', n.fontFill)
                                                        .on('mouseover', function () {
                                                            var e = r.select('#g_nutsrg').selectAll("[ecl='" + s + "']")
                                                            e.style('fill', t.nutsrgSelFillSty())
                                                            var n = yt(this)
                                                            e.attr('fill___', function (t) {
                                                                n.attr('fill')
                                                            })
                                                        })
                                                        .on('mouseout', function () {
                                                            var t = r.select('#g_nutsrg').selectAll("[ecl='" + s + "']"),
                                                                e = yt(this)
                                                            t.style('fill', function (t) {
                                                                e.attr('fill___')
                                                            })
                                                        })
                                            },
                                            o = 0;
                                        o < i.length;
                                        o++
                                    )
                                        a()
                                    if (n.noData) {
                                        var s =
                                            n.boxPadding +
                                            (n.title ? n.titleFontSize + n.boxPadding : 0) +
                                            i.length * (n.shapeHeight + n.shapePadding)
                                        e
                                            .append('rect')
                                            .attr('x', n.boxPadding)
                                            .attr('y', s)
                                            .attr('width', n.shapeWidth)
                                            .attr('height', n.shapeHeight)
                                            .attr('fill', t.noDataFillStyle())
                                            .attr('stroke', 'black')
                                            .attr('stroke-width', 0.5)
                                            .on('mouseover', function () {
                                                var e = r.select('#g_nutsrg').selectAll("[ecl='nd']")
                                                e.style('fill', t.nutsrgSelFillSty()),
                                                    e.attr('fill___', function (t) {
                                                        yt(this).attr('fill')
                                                    }),
                                                    yt(this).style('fill', t.nutsrgSelFillSty())
                                            })
                                            .on('mouseout', function () {
                                                r
                                                    .select('#g_nutsrg')
                                                    .selectAll("[ecl='nd']")
                                                    .style('fill', function (t) {
                                                        yt(this).attr('fill___')
                                                    }),
                                                    yt(this).style('fill', t.noDataFillStyle())
                                            }),
                                            e
                                                .append('text')
                                                .attr('class', 'eurostat-map-legend-label')
                                                .attr('x', n.boxPadding + n.shapeWidth + n.labelOffset)
                                                .attr('y', s + 0.5 * n.shapeHeight)
                                                .attr('dominant-baseline', 'middle')
                                                .text(n.noDataText)
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill)
                                    }
                                    n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        pu = function (t) {
                            var e = Ml(t)
                            return (
                                (e.classToFillStyle_ = void 0),
                                (e.classToText_ = void 0),
                                (e.tooltip_.textFunction = hu),
                                (e.classifier_ = void 0),
                                ['classToFillStyle_', 'classToText_', 'noDataFillStyle_', 'tooltipText_', 'classifier_'].forEach(function (t) {
                                    e[t.substring(0, t.length - 1)] = function (n) {
                                        return arguments.length ? ((e[t] = n), e) : e[t]
                                    }
                                }),
                                t &&
                                    ['classToFillStyle', 'classToText', 'noDataFillStyle', 'tooltipText', 'classifier'].forEach(function (n) {
                                        null != t[n] && e[n](t[n])
                                    }),
                                (e.updateClassification = function () {
                                    var t = e.statData().getUniqueValues(),
                                        n = r(Array(t.length).keys())
                                    return (
                                        e.classifier(uu().domain(t).range(n)),
                                        e
                                            .svg()
                                            .selectAll('path.nutsrg')
                                            .attr('ecl', function (t) {
                                                var n = e.statData().get(t.properties.id)
                                                if (!n) return 'nd'
                                                var r = n.value
                                                return 0 == r || r ? +e.classifier()(isNaN(r) ? r : +r) : 'nd'
                                            }),
                                        e
                                    )
                                }),
                                (e.updateStyle = function () {
                                    if (!e.classToFillStyle()) {
                                        for (var t = {}, n = e.classifier().domain(), r = 0; r < n.length; r++) t[n[r]] = cu[r % 12]
                                        e.classToFillStyle(t)
                                    }
                                    var i = 'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg',
                                        a = e.svg().selectAll(i)
                                    return (
                                        a
                                            .transition()
                                            .duration(e.transitionDuration())
                                            .attr('fill', function () {
                                                var t = yt(this).attr('ecl')
                                                return t && 'nd' !== t
                                                    ? e.classToFillStyle_[e.classifier().domain()[t]] || e.noDataFillStyle_ || 'gray'
                                                    : e.noDataFillStyle_ || 'gray'
                                            })
                                            .end()
                                            .then(
                                                function () {
                                                    a.on('mouseover', function (t, n) {
                                                        if (e.countriesToShow_ && 'WORLD' !== e.geo_) {
                                                            if (e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1])) {
                                                                var r = yt(this)
                                                                r.attr('fill___', r.attr('fill')),
                                                                    r.attr('fill', e.nutsrgSelFillSty_),
                                                                    e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                            }
                                                        } else {
                                                            var i = yt(this)
                                                            i.attr('fill___', i.attr('fill')),
                                                                i.attr('fill', e.nutsrgSelFillSty_),
                                                                e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                        }
                                                    })
                                                        .on('mousemove', function (t, n) {
                                                            e.countriesToShow_ && 'WORLD' !== e.geo_
                                                                ? e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1]) &&
                                                                  e._tooltip &&
                                                                  e._tooltip.mousemove(t)
                                                                : e._tooltip && e._tooltip.mousemove(t)
                                                        })
                                                        .on('mouseout', function () {
                                                            var t = yt(this)
                                                            t.attr('fill'),
                                                                t.attr('fill___') &&
                                                                    (t.attr('fill', t.attr('fill___')), e._tooltip && e._tooltip.mouseout())
                                                        })
                                                },
                                                function (t) {}
                                            ),
                                        e
                                    )
                                }),
                                (e.getLegendConstructor = function () {
                                    return fu
                                }),
                                e
                            )
                        },
                        hu = function (t, e) {
                            var n = []
                            t.properties.id
                                ? n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          ' (' +
                                          t.properties.id +
                                          ') </div>'
                                  )
                                : n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          '</div>'
                                  )
                            var r = e.statData().get(t.properties.id)
                            if (!r || (0 != r.value && !r.value)) return n.push(e.noDataText_), n.join('')
                            var i = r.value
                            if (e.classToText_) {
                                var a = e.classToText_[i]
                                return (
                                    n.push(
                                        '\n    <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n    <table class="em-tooltip-table">\n    <tbody>\n    <tr>\n    <td>\n    '.concat(
                                            a || i,
                                            '\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </div>\n'
                                        )
                                    ),
                                    n.join('')
                                )
                            }
                            return (
                                n.push(
                                    '\n    <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n    <table class="em-tooltip-table">\n    <tbody>\n    <tr>\n    <td>\n    '.concat(
                                        i,
                                        '\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </div>\n'
                                    )
                                ),
                                n.join('')
                            )
                        },
                        du = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.squareSize = 100),
                                (n.rotation = 0),
                                (n.label1 = 'Variable 1'),
                                (n.label2 = 'Variable 2'),
                                (n.labelFontSize = 12),
                                (n.breaks1 = void 0),
                                (n.breaks2 = void 0),
                                (n.yAxisLabelsOffset = { x: 5, y: 0 }),
                                (n.xAxisLabelsOffset = { x: 0, y: 5 }),
                                (n.noData = !0),
                                (n.noDataShapeHeight = 15),
                                (n.noDataShapeWidth = 15),
                                (n.noDataText = 'No data'),
                                (n.boxPadding = n.labelFontSize),
                                (n.noDataYOffset = 20),
                                (n.arrowHeight = 15),
                                (n.arrowWidth = 14),
                                (n.arrowPadding = { x: 5, y: 5 }),
                                (n.axisPadding = { x: 10, y: 0 }),
                                e)
                            )
                                for (var i in e) n[i] = e[i]
                            return (
                                (n.update = function () {
                                    var t = n.map,
                                        e = t.svg(),
                                        i = n.lgg,
                                        a = t.clnb(),
                                        o = n.squareSize / a,
                                        s = 0 === n.rotation ? 0 : 0.7071 * n.squareSize + n.boxPadding
                                    i.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        n.title &&
                                            i
                                                .append('text')
                                                .attr('class', 'eurostat-map-legend-title')
                                                .attr('x', s)
                                                .attr('y', n.boxPadding + n.titleFontSize)
                                                .text(n.title)
                                                .style('text-anchor', 'middle')
                                                .style('font-size', n.titleFontSize + 'px')
                                                .style('font-weight', n.titleFontWeight)
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill),
                                        i.style('font-family', t.fontFamily_)
                                    for (
                                        var l = n.boxPadding + (n.title ? n.titleFontSize + n.boxPadding : 0),
                                            u = i
                                                .append('g')
                                                .attr('class', 'bivariate-squares-chart')
                                                .attr(
                                                    'transform',
                                                    'translate(' +
                                                        n.boxPadding +
                                                        ',' +
                                                        (s + l) +
                                                        ') rotate(' +
                                                        n.rotation +
                                                        ') translate(' +
                                                        n.boxPadding +
                                                        ',0)'
                                                ),
                                            c = n.arrowPadding.y + n.yAxisLabelsOffset.x + n.axisPadding.x,
                                            f = 0;
                                        f < a;
                                        f++
                                    )
                                        for (
                                            var p = function () {
                                                    var r = a - f - 1,
                                                        i = a - h - 1,
                                                        s = t.classToFillStyle()(r, i)
                                                    u.append('rect')
                                                        .attr('class', 'bivariate-square')
                                                        .attr('x', c + (a - 1 - f) * o)
                                                        .attr('y', h * o)
                                                        .attr('width', o)
                                                        .attr('height', o)
                                                        .attr('fill', s)
                                                        .on('mouseover', function () {
                                                            var a = ('mixed' == n.map.nutsLevel_ ? e.selectAll('#g_nutsrg') : e.select('#g_nutsrg'))
                                                                .selectAll("[ecl1='" + r + "']")
                                                                .filter("[ecl2='" + i + "']")
                                                            a.style('fill', t.nutsrgSelFillSty()),
                                                                a.attr('fill___', function () {
                                                                    yt(this).attr('fill')
                                                                }),
                                                                yt(this).style('fill', t.nutsrgSelFillSty())
                                                        })
                                                        .on('mouseout', function () {
                                                            ;('mixed' == n.map.nutsLevel_ ? e.selectAll('#g_nutsrg') : e.select('#g_nutsrg'))
                                                                .selectAll("[ecl1='" + r + "']")
                                                                .filter("[ecl2='" + i + "']")
                                                                .style('fill', function () {
                                                                    yt(this).attr('fill___')
                                                                }),
                                                                yt(this).style('fill', s)
                                                        })
                                                },
                                                h = 0;
                                            h < a;
                                            h++
                                        )
                                            p()
                                    if (n.breaks1)
                                        for (var d = 0; d < n.breaks1.length; d++) {
                                            var g = c + o * (d + 1),
                                                _ = n.squareSize + n.labelFontSize
                                            u
                                                .append('text')
                                                .attr('class', 'bivariate-break1-label')
                                                .attr('x', g + n.xAxisLabelsOffset.x)
                                                .attr('y', _ + n.xAxisLabelsOffset.y)
                                                .text(n.breaks1[d])
                                                .attr('text-anchor', 'middle')
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill),
                                                u
                                                    .append('line')
                                                    .attr('class', 'bivariate-break1-tick')
                                                    .attr('x1', g + n.xAxisLabelsOffset.x)
                                                    .attr('x2', g + n.xAxisLabelsOffset.x)
                                                    .attr('y1', n.squareSize)
                                                    .attr('y2', n.squareSize + 5)
                                                    .attr('stroke', n.fontFill)
                                                    .attr('stroke-width', 1)
                                        }
                                    if (n.breaks2)
                                        for (var y = 0; y < n.breaks2.length; y++) {
                                            var v = c,
                                                m = o * (y + 2) - o
                                            u
                                                .append('text')
                                                .attr('class', 'bivariate-break2-label')
                                                .attr('x', v + n.yAxisLabelsOffset.y)
                                                .attr('y', m - n.yAxisLabelsOffset.x - 2)
                                                .text(r(n.breaks2).reverse()[y])
                                                .attr('text-anchor', 'middle')
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill)
                                                .attr('transform', 'rotate(-90, '.concat(v, ', ').concat(m, ')')),
                                                u
                                                    .append('line')
                                                    .attr('class', 'bivariate-break2-tick')
                                                    .attr('x1', v)
                                                    .attr('x2', v - 5)
                                                    .attr('y1', m)
                                                    .attr('y2', m)
                                                    .attr('stroke', n.fontFill)
                                                    .attr('stroke-width', 1)
                                        }
                                    var x = n.squareSize + n.arrowHeight + n.arrowPadding.x + n.xAxisLabelsOffset.y + n.axisPadding.y
                                    u
                                        .append('path')
                                        .attr('class', 'bivariate-axis-arrow')
                                        .attr(
                                            'd',
                                            wl()([
                                                [c, x],
                                                [c + n.squareSize, x],
                                            ])
                                        )
                                        .attr('stroke', 'black')
                                        .attr('marker-end', 'url(#arrowhead)'),
                                        u
                                            .append('text')
                                            .attr('class', 'bivariate-axis-title')
                                            .attr('x', c + n.xAxisLabelsOffset.x)
                                            .attr('y', x + 4)
                                            .text(n.label1)
                                            .attr('dominant-baseline', 'hanging')
                                            .attr('alignment-baseline', 'hanging')
                                            .style('font-size', n.labelFontSize + 'px')
                                            .style('font-family', t.fontFamily_)
                                            .style('fill', n.fontFill)
                                    var b = 5 - n.labelFontSize
                                    if (
                                        (u
                                            .append('path')
                                            .attr('class', 'bivariate-axis-arrow')
                                            .attr(
                                                'd',
                                                wl()([
                                                    [b, n.squareSize],
                                                    [b, 0],
                                                ])
                                            )
                                            .attr('stroke', 'black')
                                            .attr('marker-end', 'url(#arrowhead)'),
                                        u
                                            .append('text')
                                            .attr('class', 'bivariate-axis-title')
                                            .attr('x', -n.squareSize)
                                            .attr('y', -n.labelFontSize)
                                            .attr('x', 0 == n.rotation ? -n.squareSize : -n.labelFontSize + n.arrowWidth / 2)
                                            .attr('y', 0 == n.rotation ? -n.labelFontSize : n.labelFontSize + n.arrowHeight / 2)
                                            .attr(
                                                'transform',
                                                0 == n.rotation ? 'rotate(-90) translate(0,0)' : 'rotate(90) translate(' + n.labelFontSize / 2 + ',0)'
                                            )
                                            .text(n.label2)
                                            .style('font-size', n.labelFontSize + 'px')
                                            .style('font-family', t.fontFamily_)
                                            .style('fill', n.fontFill),
                                        u
                                            .append('rect')
                                            .attr('class', 'bivariate-frame')
                                            .attr('x', c)
                                            .attr('y', 0)
                                            .attr('width', n.squareSize)
                                            .attr('height', n.squareSize)
                                            .attr('fill', 'none')
                                            .style('stroke', 'black')
                                            .attr('stroke-width', 0.7),
                                        u
                                            .append('defs')
                                            .append('marker')
                                            .attr('viewBox', '0 0 '.concat(n.arrowWidth, ' ').concat(n.arrowHeight))
                                            .attr('id', 'arrowhead')
                                            .attr('refX', 0)
                                            .attr('refY', 5)
                                            .attr('markerWidth', n.arrowWidth)
                                            .attr('markerHeight', n.arrowHeight)
                                            .attr('orient', 'auto')
                                            .append('path')
                                            .attr('d', 'M 0 0 L 5 5 L 0 10')
                                            .attr('marker-units', 'strokeWidth'),
                                        n.noData)
                                    ) {
                                        var S = 0 == n.rotation ? n.noDataYOffset + n.squareSize / n.map.clnb_ + n.arrowHeight / 2 : n.noDataYOffset
                                        ;(l = 0 == n.rotation ? l + n.squareSize + S : l + 1.4142 * n.squareSize + 2 * n.boxPadding + S),
                                            i
                                                .append('rect')
                                                .attr('x', n.boxPadding)
                                                .attr('y', l)
                                                .attr('width', n.noDataShapeWidth)
                                                .attr('height', n.noDataShapeHeight)
                                                .attr('fill', t.noDataFillStyle())
                                                .attr('stroke', 'black')
                                                .attr('stroke-width', 0.7)
                                                .on('mouseover', function () {
                                                    var r = (
                                                        'mixed' == n.map.nutsLevel_ ? e.selectAll('#g_nutsrg') : e.select('#g_nutsrg')
                                                    ).selectAll("[nd='nd']")
                                                    r.style('fill', t.nutsrgSelFillSty()),
                                                        r.attr('fill___', function (t) {
                                                            yt(this).attr('fill')
                                                        }),
                                                        yt(this).style('fill', t.nutsrgSelFillSty())
                                                })
                                                .on('mouseout', function () {
                                                    ;('mixed' == n.map.nutsLevel_ ? e.selectAll('#g_nutsrg') : e.select('#g_nutsrg'))
                                                        .selectAll("[nd='nd']")
                                                        .style('fill', function (t) {
                                                            yt(this).attr('fill___')
                                                        }),
                                                        yt(this).style('fill', t.noDataFillStyle())
                                                }),
                                            i
                                                .append('text')
                                                .attr('x', n.boxPadding + n.noDataShapeWidth + 5)
                                                .attr('y', l + 0.5 * n.noDataShapeHeight + 1)
                                                .text(n.noDataText)
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill)
                                                .style('dominant-baseline', 'middle')
                                    }
                                    n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        gu = function (t, e) {
                            var n = []
                            t.properties.id
                                ? n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          ' (' +
                                          t.properties.id +
                                          ') </div>'
                                  )
                                : n.push(
                                      '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                          t.properties.na +
                                          '</div>'
                                  )
                            var r = e.statData('v1').get(t.properties.id) || e.statData().get(t.properties.id),
                                i = e.statData('v1').unitText() || e.statData().unitText(),
                                a = e.statData('v2').get(t.properties.id),
                                o = e.statData('v2').unitText()
                            return (
                                n.push(
                                    '\n        <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n        <table class="em-tooltip-table">\n        <tbody>\n        <tr>\n        <td>\n        '
                                        .concat(r && r.value ? Zo(r.value) : '', ' ')
                                        .concat(i && r && r.value ? i : '', '\n        ')
                                        .concat(
                                            !r || (0 != r.value && !r.value) ? e.noDataText_ : '',
                                            '\n        </td>\n        </tr>\n        <tr>\n        <td>\n        '
                                        )
                                        .concat(a && a.value ? Zo(a.value) : '', ' ')
                                        .concat(o && a && a.value ? o : '', '\n        ')
                                        .concat(
                                            !a || (0 != a.value && !a.value) ? e.noDataText_ : '',
                                            '\n        </td>\n        </tr>\n        </tbody>\n        </table>\n        </div>\n    '
                                        )
                                ),
                                n.join('')
                            )
                        },
                        _u = pn('1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf'),
                        yu = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.shapeWidth = 13),
                                (n.shapeHeight = 15),
                                (n.shapePadding = 5),
                                (n.labelFontSize = 12),
                                (n.labelOffset = 5),
                                (n.noData = !0),
                                (n.noDataText = 'No data'),
                                e)
                            )
                                for (var r in e) n[r] = e[r]
                            return (
                                (n.update = function () {
                                    var t = n.map,
                                        e = t.svg(),
                                        r = n.lgg
                                    r.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        n.title &&
                                            r
                                                .append('text')
                                                .attr('x', n.boxPadding)
                                                .attr('y', n.boxPadding + n.titleFontSize)
                                                .text(n.title)
                                                .style('font-size', n.titleFontSize + 'px')
                                                .style('font-weight', n.titleFontWeight)
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill),
                                        r.style('font-family', t.fontFamily_)
                                    var i = 0,
                                        a = t.catColors(),
                                        o = function (o) {
                                            var s =
                                                    n.boxPadding +
                                                    (n.title ? n.titleFontSize + n.boxPadding : 0) +
                                                    i * (n.shapeHeight + n.shapePadding),
                                                l = t.catColors()[o] || 'lightgray'
                                            r
                                                .append('rect')
                                                .attr('x', n.boxPadding)
                                                .attr('y', s)
                                                .attr('width', n.shapeWidth)
                                                .attr('height', n.shapeHeight)
                                                .attr('fill', a[o])
                                                .attr('stroke', 'black')
                                                .attr('stroke-width', 0.5)
                                                .on('mouseover', function () {
                                                    e
                                                        .selectAll('pattern')
                                                        .selectAll("rect[code='" + o + "']")
                                                        .style('fill', t.nutsrgSelFillSty()),
                                                        yt(this).style('fill', t.nutsrgSelFillSty())
                                                })
                                                .on('mouseout', function () {
                                                    e
                                                        .selectAll('pattern')
                                                        .selectAll("rect[code='" + o + "']")
                                                        .style('fill', l),
                                                        yt(this).style('fill', l)
                                                }),
                                                r
                                                    .append('text')
                                                    .attr('x', n.boxPadding + n.shapeWidth + n.labelOffset)
                                                    .attr('y', s + 0.5 * n.shapeHeight)
                                                    .attr('dominant-baseline', 'middle')
                                                    .text(t.catLabels()[o] || o)
                                                    .style('font-size', n.labelFontSize + 'px')
                                                    .style('font-family', t.fontFamily_)
                                                    .style('fill', n.fontFill)
                                                    .on('mouseover', function () {
                                                        e.selectAll('pattern')
                                                            .selectAll("rect[code='" + o + "']")
                                                            .style('fill', t.nutsrgSelFillSty())
                                                    })
                                                    .on('mouseout', function () {
                                                        var n = t.catColors()[o] || 'lightgray'
                                                        e.selectAll('pattern')
                                                            .selectAll("rect[code='" + o + "']")
                                                            .style('fill', n)
                                                    }),
                                                i++
                                        }
                                    for (var s in a) o(s)
                                    if (n.noData) {
                                        var l = n.boxPadding + (n.title ? n.titleFontSize + n.boxPadding : 0) + i * (n.shapeHeight + n.shapePadding)
                                        r
                                            .append('rect')
                                            .attr('x', n.boxPadding)
                                            .attr('y', l)
                                            .attr('width', n.shapeWidth)
                                            .attr('height', n.shapeHeight)
                                            .attr('fill', t.noDataFillStyle())
                                            .attr('stroke', 'black')
                                            .attr('stroke-width', 0.5)
                                            .on('mouseover', function () {
                                                e.select('#g_nutsrg').selectAll("[nd='nd']").style('fill', t.nutsrgSelFillSty()),
                                                    yt(this).style('fill', t.nutsrgSelFillSty())
                                            })
                                            .on('mouseout', function () {
                                                e
                                                    .select('#g_nutsrg')
                                                    .selectAll("[nd='nd']")
                                                    .style('fill', function (e) {
                                                        t.noDataFillStyle()
                                                    }),
                                                    yt(this).style('fill', t.noDataFillStyle())
                                            }),
                                            r
                                                .append('text')
                                                .attr('x', n.boxPadding + n.shapeWidth + n.labelOffset)
                                                .attr('y', l + 0.5 * n.shapeHeight)
                                                .attr('dominant-baseline', 'middle')
                                                .text(n.noDataText)
                                                .style('font-size', n.labelFontSize + 'px')
                                                .style('font-family', t.fontFamily_)
                                                .style('fill', n.fontFill)
                                                .on('mouseover', function () {
                                                    e.select('#g_nutsrg').selectAll("[nd='nd']").style('fill', t.nutsrgSelFillSty())
                                                })
                                                .on('mouseout', function () {
                                                    e.select('#g_nutsrg')
                                                        .selectAll("[nd='nd']")
                                                        .style('fill', function (e) {
                                                            t.noDataFillStyle()
                                                        })
                                                })
                                    }
                                    n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        vu = function (t, e) {
                            var n = ks(t)
                            if (
                                ((n.legendSpacing = 15),
                                (n.labelFontSize = 12),
                                (n.titleFontSize = 12),
                                (n.sizeLegend = { title: null, titlePadding: 15, values: null }),
                                (n.colorLegend = {
                                    title: null,
                                    labelOffset: 5,
                                    shapeWidth: 13,
                                    shapeHeight: 15,
                                    shapePadding: 5,
                                    noData: !0,
                                    noDataText: 'No data',
                                }),
                                (n._sizeLegendHeight = 0),
                                e)
                            )
                                for (var r in e)
                                    if ('colorLegend' == r || 'sizeLegend' == r) for (var i in n[r]) e[r][i] && (n[r][i] = e[r][i])
                                    else n[r] = e[r]
                            return (
                                (n.update = function () {
                                    var t = n.map,
                                        e = n.lgg
                                    e.selectAll('*').remove(),
                                        n.makeBackgroundBox(),
                                        e.style('font-family', t.fontFamily_),
                                        t.classifierSize_ &&
                                            (function (t, e, r) {
                                                var i = t.classifierSize_.domain()
                                                r.values || (r.values = [Math.floor(i[1]), Math.floor(i[0])]),
                                                    !r.title && n.title && (r.title = n.title),
                                                    r.title &&
                                                        e
                                                            .append('text')
                                                            .attr('x', n.boxPadding)
                                                            .attr('y', n.boxPadding + n.titleFontSize)
                                                            .text(r.title)
                                                            .style('font-size', n.titleFontSize + 'px')
                                                            .style('font-weight', n.titleFontWeight)
                                                            .style('font-family', t.fontFamily_)
                                                            .style('fill', n.fontFill)
                                                var a = t.classifierSize_(St(r.values)),
                                                    o = n.boxPadding + (r.title ? n.titleFontSize + n.boxPadding + r.titlePadding : 0) + 2 * a,
                                                    s = e
                                                        .append('g')
                                                        .attr('fill', 'black')
                                                        .attr('transform', 'translate('.concat(a + n.boxPadding, ',').concat(o, ')'))
                                                        .attr('text-anchor', 'right')
                                                        .selectAll('g')
                                                        .data(r.values)
                                                        .join('g')
                                                s
                                                    .append('circle')
                                                    .attr('fill', 'none')
                                                    .attr('stroke', 'black')
                                                    .attr('cy', function (e) {
                                                        return -t.classifierSize_(e)
                                                    })
                                                    .attr('r', t.classifierSize_),
                                                    s
                                                        .append('text')
                                                        .style('font-size', n.labelFontSize + 'px')
                                                        .attr('y', function (e, r) {
                                                            return -1 - 2 * t.classifierSize_(e) - n.labelFontSize
                                                        })
                                                        .attr('x', 30)
                                                        .attr('dy', '1.2em')
                                                        .attr('xml:space', 'preserve')
                                                        .text(function (t) {
                                                            return t.toLocaleString('en').replace(/,/gi, ' ')
                                                        }),
                                                    s
                                                        .append('line')
                                                        .style('stroke-dasharray', 2)
                                                        .style('stroke', 'grey')
                                                        .attr('x1', 2)
                                                        .attr('y1', function (e, n) {
                                                            return -1 - 2 * t.classifierSize_(e)
                                                        })
                                                        .attr('xml:space', 'preserve')
                                                        .attr('x2', 30)
                                                        .attr('y2', function (e, n) {
                                                            return -1 - 2 * t.classifierSize_(e)
                                                        }),
                                                    (n._sizeLegendHeight = o)
                                            })(t, e, n.sizeLegend),
                                        (function (t, e, r) {
                                            var i = t.svg()
                                            r.title &&
                                                e
                                                    .append('text')
                                                    .attr('x', n.boxPadding)
                                                    .attr('y', n._sizeLegendHeight + n.legendSpacing + n.boxPadding + n.titleFontSize)
                                                    .text(r.title)
                                                    .style('font-size', n.titleFontSize + 'px')
                                                    .style('font-weight', n.titleFontWeight)
                                                    .style('font-family', t.fontFamily_)
                                                    .style('fill', n.fontFill),
                                                e.style('font-family', t.fontFamily_)
                                            var a = 0,
                                                o = t.catColors(),
                                                s = function (s) {
                                                    var l =
                                                            n._sizeLegendHeight +
                                                            n.legendSpacing +
                                                            n.boxPadding +
                                                            (r.title ? n.titleFontSize + n.boxPadding : 0) +
                                                            a * (r.shapeHeight + r.shapePadding),
                                                        u = t.catColors()[s] || 'lightgray'
                                                    e
                                                        .append('rect')
                                                        .attr('x', n.boxPadding)
                                                        .attr('y', l)
                                                        .attr('width', r.shapeWidth)
                                                        .attr('height', r.shapeHeight)
                                                        .attr('fill', o[s])
                                                        .attr('stroke', 'black')
                                                        .attr('stroke-width', 0.5)
                                                        .on('mouseover', function () {
                                                            i
                                                                .selectAll('.piechart')
                                                                .selectAll("path[code='" + s + "']")
                                                                .style('fill', t.nutsrgSelFillSty()),
                                                                yt(this).style('fill', t.nutsrgSelFillSty())
                                                        })
                                                        .on('mouseout', function () {
                                                            i
                                                                .selectAll('.piechart')
                                                                .selectAll("path[code='" + s + "']")
                                                                .style('fill', u),
                                                                yt(this).style('fill', u)
                                                        }),
                                                        e
                                                            .append('text')
                                                            .attr('x', n.boxPadding + r.shapeWidth + r.labelOffset)
                                                            .attr('y', l + 0.5 * r.shapeHeight)
                                                            .attr('dominant-baseline', 'middle')
                                                            .text(t.catLabels()[s] || s)
                                                            .style('font-size', n.labelFontSize + 'px')
                                                            .style('font-family', t.fontFamily_)
                                                            .style('fill', n.fontFill)
                                                            .on('mouseover', function () {
                                                                i.selectAll('pattern')
                                                                    .selectAll("rect[code='" + s + "']")
                                                                    .style('fill', t.nutsrgSelFillSty())
                                                            })
                                                            .on('mouseout', function () {
                                                                var e = t.catColors()[s] || 'lightgray'
                                                                i.selectAll('pattern')
                                                                    .selectAll("rect[code='" + s + "']")
                                                                    .style('fill', e)
                                                            }),
                                                        a++
                                                }
                                            for (var l in o) s(l)
                                            if (r.noData) {
                                                var u =
                                                    n._sizeLegendHeight +
                                                    n.legendSpacing +
                                                    n.boxPadding +
                                                    (r.title ? n.titleFontSize + n.boxPadding : 0) +
                                                    a * (r.shapeHeight + r.shapePadding)
                                                e
                                                    .append('rect')
                                                    .attr('x', n.boxPadding)
                                                    .attr('y', u)
                                                    .attr('width', r.shapeWidth)
                                                    .attr('height', r.shapeHeight)
                                                    .attr('fill', t.noDataFillStyle())
                                                    .attr('stroke', 'black')
                                                    .attr('stroke-width', 0.5)
                                                    .on('mouseover', function () {
                                                        i.select('#g_nutsrg').selectAll("[nd='nd']").style('fill', t.nutsrgSelFillSty()),
                                                            yt(this).style('fill', t.nutsrgSelFillSty())
                                                    })
                                                    .on('mouseout', function () {
                                                        i
                                                            .select('#g_nutsrg')
                                                            .selectAll("[nd='nd']")
                                                            .style('fill', function (e) {
                                                                t.noDataFillStyle()
                                                            }),
                                                            yt(this).style('fill', t.noDataFillStyle())
                                                    }),
                                                    e
                                                        .append('text')
                                                        .attr('x', n.boxPadding + r.shapeWidth + r.labelOffset)
                                                        .attr('y', u + 0.5 * r.shapeHeight)
                                                        .attr('dominant-baseline', 'middle')
                                                        .text(r.noDataText)
                                                        .style('font-size', n.labelFontSize + 'px')
                                                        .style('font-family', t.fontFamily_)
                                                        .style('fill', n.fontFill)
                                                        .on('mouseover', function () {
                                                            i.select('#g_nutsrg').selectAll("[nd='nd']").style('fill', t.nutsrgSelFillSty())
                                                        })
                                                        .on('mouseout', function () {
                                                            i.select('#g_nutsrg')
                                                                .selectAll("[nd='nd']")
                                                                .style('fill', function (e) {
                                                                    t.noDataFillStyle()
                                                                })
                                                        })
                                            }
                                        })(t, e, n.colorLegend),
                                        n.setBoxDimension()
                                }),
                                n
                            )
                        },
                        mu = function (t, e) {
                            return 'ch' == t
                                ? (function (t) {
                                      var e = Ml(t)
                                      function n(t) {
                                          var n = function (t) {
                                              return r(Array(t).keys())
                                          }
                                          if ('quantile' === e.classifMethod_) {
                                              var i = e.statData().getArray(),
                                                  a = n(e.clnb())
                                              e.classifier(It().domain(i).range(a))
                                          } else if ('equinter' === e.classifMethod_) {
                                              var o = e.statData().getArray(),
                                                  s = n(e.clnb())
                                              e.classifier(
                                                  cn()
                                                      .domain([Tt(o), St(o)])
                                                      .range(s)
                                              ),
                                                  e.makeClassifNice_ && e.classifier().nice()
                                          } else if ('threshold' === e.classifMethod_) {
                                              e.clnb(e.threshold().length + 1)
                                              var l = n(e.clnb())
                                              e.classifier(fn().domain(e.threshold()).range(l))
                                          }
                                          var u = 'WORLD' == t.geo_ ? 'path.worldrg' : 'path.nutsrg'
                                          t.svg_ &&
                                              (t
                                                  .svg()
                                                  .selectAll(u)
                                                  .attr('ecl', function (t, n, r, i, a) {
                                                      var o = e.statData().get(t.properties.id)
                                                      if (o) {
                                                          var s = o.value
                                                          if (0 == s || s) return ':' == s ? 'nd' : +e.classifier()(+s)
                                                      }
                                                  }),
                                              'mixed' == t.nutsLevel_ &&
                                                  t
                                                      .svg()
                                                      .selectAll('path.nutsrg0')
                                                      .attr('ecl', function (t) {
                                                          var n = e.statData().get(t.properties.id)
                                                          if (n) {
                                                              var r = n.value
                                                              if (0 == r || r) return ':' == r ? 'nd' : +e.classifier()(+r)
                                                          }
                                                      }))
                                      }
                                      function i(t) {
                                          if (
                                              (e.filtersDefinitionFunction_
                                                  ? e.classToFillStyle(function (t) {
                                                        return 'url(#pattern_' + t + ')'
                                                    })
                                                  : e.classToFillStyle(Nl(e.colorFun(), e.colors_)),
                                              t.svg_)
                                          ) {
                                              var n = 'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg',
                                                  r = t.svg().selectAll(n)
                                              r
                                                  .transition()
                                                  .duration(e.transitionDuration())
                                                  .attr('fill', function (n) {
                                                      if ('WORLD' == t.geo_) {
                                                          var r = yt(this).attr('ecl')
                                                          return r
                                                              ? 'nd' === r
                                                                  ? e.noDataFillStyle() || 'gray'
                                                                  : (0, e.classToFillStyle_)(r, e.clnb_) || e.cntrgFillStyle_
                                                              : e.cntrgFillStyle_
                                                      }
                                                      if (e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1])) {
                                                          var i = yt(this).attr('ecl')
                                                          return i
                                                              ? 'nd' === i
                                                                  ? e.noDataFillStyle() || 'gray'
                                                                  : e.classToFillStyle()(i, e.clnb_)
                                                              : e.nutsrgFillStyle_
                                                      }
                                                      return e.nutsrgFillStyle_
                                                  })
                                                  .end()
                                                  .then(
                                                      function () {
                                                          r.on('mouseover', function (n, r) {
                                                              if (e.countriesToShow_ && 'WORLD' !== e.geo_) {
                                                                  if (e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1])) {
                                                                      var i = yt(this)
                                                                      i.attr('fill___', i.attr('fill')),
                                                                          i.attr('fill', t.nutsrgSelFillSty_),
                                                                          e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(r, e))
                                                                  }
                                                              } else {
                                                                  var a = yt(this)
                                                                  a.attr('fill___', a.attr('fill')),
                                                                      a.attr('fill', t.nutsrgSelFillSty_),
                                                                      e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(r, e))
                                                              }
                                                          })
                                                              .on('mousemove', function (t, n) {
                                                                  e.countriesToShow_ && 'WORLD' !== e.geo_
                                                                      ? e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1]) &&
                                                                        e._tooltip &&
                                                                        e._tooltip.mousemove(t)
                                                                      : e._tooltip && e._tooltip.mousemove(t)
                                                              })
                                                              .on('mouseout', function () {
                                                                  var e = yt(this)
                                                                  e.attr('fill___') &&
                                                                      (e.attr('fill', e.attr('fill___')), t._tooltip && t._tooltip.mouseout())
                                                              })
                                                      },
                                                      function (t) {}
                                                  ),
                                                  'mixed' == e.nutsLevel_ &&
                                                      t
                                                          .svg()
                                                          .selectAll('path.nutsrg')
                                                          .style('display', function (t) {
                                                              var n = yt(this).attr('ecl'),
                                                                  r = yt(this).attr('lvl')
                                                              return (n && e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) ||
                                                                  '0' == r
                                                                  ? 'block'
                                                                  : 'none'
                                                          })
                                                          .style('stroke', function (e) {
                                                              var n = yt(this).attr('lvl')
                                                              if (yt(this).attr('ecl') && '0' !== n) return t.nutsbnStroke_[parseInt(n)] || '#777'
                                                          })
                                                          .style('stroke-width', function (e) {
                                                              var n = yt(this).attr('lvl')
                                                              if (yt(this).attr('ecl') && '0' !== n) return t.nutsbnStrokeWidth_[parseInt(n)] || 0.2
                                                          }),
                                                  e.labelsToShow_.includes('values') && e.updateValuesLabels(t)
                                          }
                                      }
                                      return (
                                          (e.clnb_ = 7),
                                          (e.classifMethod_ = 'quantile'),
                                          (e.threshold_ = [0]),
                                          (e.colors_ = null),
                                          (e.makeClassifNice_ = !0),
                                          (e.colorFun_ = dn),
                                          (e.classToFillStyle_ = void 0),
                                          (e.classifier_ = void 0),
                                          [
                                              'clnb_',
                                              'classifMethod_',
                                              'threshold_',
                                              'makeClassifNice_',
                                              'colorFun_',
                                              'classToFillStyle_',
                                              'noDataFillStyle_',
                                              'classifier_',
                                              'colors_',
                                          ].forEach(function (t) {
                                              e[t.substring(0, t.length - 1)] = function (n) {
                                                  return arguments.length ? ((e[t] = n), e) : e[t]
                                              }
                                          }),
                                          (e.colorFun = function (t) {
                                              return arguments.length
                                                  ? ((e.colorFun_ = t),
                                                    e.filtersDefinitionFunction_
                                                        ? e.classToFillStyle(function (t) {
                                                              return 'url(#pattern_' + t + ')'
                                                          })
                                                        : e.classToFillStyle(Nl(e.colorFun(), e.colors_)),
                                                    e)
                                                  : e.colorFun_
                                          }),
                                          (e.threshold = function (t) {
                                              return arguments.length ? ((e.threshold_ = t), e.clnb(t.length + 1), e) : e.threshold_
                                          }),
                                          (e.filtersDefinitionFunction = function (t) {
                                              return arguments.length
                                                  ? ((e.filtersDefinitionFunction_ = t), e.svg() && e.filtersDefinitionFunction_(e.svg(), e.clnb_), e)
                                                  : e.filtersDefinitionFunction_
                                          }),
                                          t &&
                                              [
                                                  'clnb',
                                                  'classifMethod',
                                                  'threshold',
                                                  'makeClassifNice',
                                                  'colorFun',
                                                  'classToFillStyle',
                                                  'noDataFillStyle',
                                                  'colors_',
                                              ].forEach(function (n) {
                                                  null != t[n] && e[n](t[n])
                                              }),
                                          (e.updateClassification = function () {
                                              if (e.insetTemplates_)
                                                  for (var t in e.insetTemplates_)
                                                      if (Array.isArray(e.insetTemplates_[t]))
                                                          for (var r = 0; r < e.insetTemplates_[t].length; r++)
                                                              if (Array.isArray(e.insetTemplates_[t][r]))
                                                                  for (var i = 0; i < e.insetTemplates_[t][r].length; i++)
                                                                      e.insetTemplates_[t][r][i].svgId_ !== e.svgId_ && n(e.insetTemplates_[t][r][i])
                                                              else e.insetTemplates_[t][r].svgId_ !== e.svgId_ && n(e.insetTemplates_[t][r])
                                                      else e.insetTemplates_[t].svgId_ !== e.svgId_ && n(e.insetTemplates_[t])
                                              return n(e), e
                                          }),
                                          (e.updateStyle = function () {
                                              if (e.insetTemplates_)
                                                  for (var t in e.insetTemplates_)
                                                      if (Array.isArray(e.insetTemplates_[t]))
                                                          for (var n = 0; n < e.insetTemplates_[t].length; n++)
                                                              if (Array.isArray(e.insetTemplates_[t][n]))
                                                                  for (var r = 0; r < e.insetTemplates_[t][n].length; r++)
                                                                      e.insetTemplates_[t][n][r].svgId_ !== e.svgId_ && i(e.insetTemplates_[t][n][r])
                                                              else e.insetTemplates_[t][n].svgId_ !== e.svgId_ && i(e.insetTemplates_[t][n])
                                                      else e.insetTemplates_[t].svgId_ !== e.svgId_ && i(e.insetTemplates_[t])
                                              return i(e), e
                                          }),
                                          (e.getLegendConstructor = function () {
                                              return Ol
                                          }),
                                          e
                                      )
                                  })(e)
                                : 'ct' == t
                                  ? pu(e)
                                  : 'ps' == t
                                    ? (function (t) {
                                          var e = Ml(t, !0)
                                          function n(t) {
                                              if (t.svg_ && e.classifierColor_) {
                                                  var n = t.statData('color')
                                                  t.svg_.selectAll('.symbol').attr('ecl', function (t) {
                                                      var r = n.get(t.properties.id)
                                                      if (!r) return 'nd'
                                                      var i = r.value
                                                      return 0 === i || i ? +e.classifierColor_(+i) : 'nd'
                                                  })
                                              }
                                          }
                                          function i(t) {
                                              e.psClassToFillStyle() || e.psClassToFillStyle(nu(e.psColorFun_, e.psColors_))
                                              var i = t.statData('size').getArray() ? t.statData('size') : t.statData()
                                              if (t.svg_) {
                                                  var o
                                                  t.svg_.selectAll(':not(#insetsgroup) g.symbol > *').remove(),
                                                      t._centroidFeatures &&
                                                          ((function (t) {
                                                              var e = (t.svg_ ? t.svg_.select('#zoomgroup' + t.svgId_) : null).select('#g_ps'),
                                                                  n = t.statData('size').getArray() ? t.statData('size') : t.statData(),
                                                                  i = r(t._centroidFeatures).sort(function (t, e) {
                                                                      var r = n.get(t.properties.id),
                                                                          i = n.get(e.properties.id)
                                                                      return r ||
                                                                          0 == (null == r ? void 0 : r.value) ||
                                                                          i ||
                                                                          0 == (null == i ? void 0 : i.value)
                                                                          ? (!r && 0 != (null == r ? void 0 : r.value)) ||
                                                                            (!i && 0 != (null == i ? void 0 : i.value))
                                                                              ? (!r && 0 != (null == r ? void 0 : r.value)) ||
                                                                                (i && 0 != !(null != i && i.value))
                                                                                  ? (!i && 0 != (null == i ? void 0 : i.value)) ||
                                                                                    (r && 0 != !(null != r && r.value))
                                                                                      ? void 0
                                                                                      : 1
                                                                                  : -1
                                                                              : i.value - r.value
                                                                          : 0
                                                                  })
                                                              a(
                                                                  e
                                                                      .selectAll('g.symbol')
                                                                      .data(i)
                                                                      .join('g')
                                                                      .attr('transform', function (e) {
                                                                          return 'translate(' + t._projection(e.geometry.coordinates) + ')'
                                                                      })
                                                              )
                                                          })(t),
                                                          n(t)),
                                                      (o = e.psCustomSVG_
                                                          ? (function (t, n) {
                                                                return t
                                                                    .svg()
                                                                    .select('#g_ps')
                                                                    .selectAll('g.symbol')
                                                                    .append('g')
                                                                    .filter(function (t) {
                                                                        var e = n.get(t.properties.id)
                                                                        if (e && ':' !== e.value) return t
                                                                    })
                                                                    .attr('class', 'ps')
                                                                    .html(e.psCustomSVG_)
                                                                    .attr('transform', function (t) {
                                                                        var r = n.get(t.properties.id),
                                                                            i = e.classifierSize_(+r.value)
                                                                        if (i)
                                                                            return 'translate('
                                                                                .concat(e.psOffset_.x * i, ',')
                                                                                .concat(e.psOffset_.y * i, ') scale(')
                                                                                .concat(i, ')')
                                                                    })
                                                            })(t, i)
                                                          : 'bar' == e.psShape_
                                                            ? (function (t, n) {
                                                                  return t
                                                                      .svg()
                                                                      .select('#g_ps')
                                                                      .selectAll('g.symbol')
                                                                      .append('rect')
                                                                      .filter(function (t) {
                                                                          var e = n.get(t.properties.id)
                                                                          if (e && ':' !== e.value) return t
                                                                      })
                                                                      .attr('width', e.psBarWidth_)
                                                                      .attr('height', function (t) {
                                                                          var r = n.get(t.properties.id)
                                                                          return r && r.value ? e.classifierSize_(+r.value) : 0
                                                                      })
                                                                      .attr('transform', function () {
                                                                          return (
                                                                              this.getBoundingClientRect(),
                                                                              'translate('.concat(-this.getAttribute('width') / 2) +
                                                                                  ', -'.concat(this.getAttribute('height'), ')')
                                                                          )
                                                                      })
                                                                      .transition()
                                                                      .duration(e.transitionDuration())
                                                              })(t, i)
                                                            : 'circle' == e.psShape_
                                                              ? (function (t, n) {
                                                                    return t
                                                                        .svg()
                                                                        .selectAll('g.symbol')
                                                                        .append('circle')
                                                                        .attr('r', function (t) {
                                                                            if (n.get(t.properties.id)) {
                                                                                var r = n.get(t.properties.id)
                                                                                if (0 == r.value) return 0
                                                                                var i = e.classifierSize_(r.value)
                                                                                return (null == i ? void 0 : i.toFixed(3)) || 0
                                                                            }
                                                                            return 0
                                                                        })
                                                                })(t, i)
                                                              : (function (t, n) {
                                                                    return t
                                                                        .svg()
                                                                        .selectAll('g.symbol')
                                                                        .append('path')
                                                                        .filter(function (t) {
                                                                            var e = n.get(t.properties.id)
                                                                            if (e && ':' !== e.value) return t
                                                                        })
                                                                        .attr('class', 'ps')
                                                                        .attr('d', function (t) {
                                                                            if (n) {
                                                                                var r = n.get(t.properties.id)
                                                                                if (0 == r || r) {
                                                                                    var i = e.classifierSize_(+r.value) || 0
                                                                                    if (e.psCustomShape_) return e.psCustomShape_.size(i * i)()
                                                                                    var a = ru[e.psShape_] || ru.circle
                                                                                    return tu()
                                                                                        .type(a)
                                                                                        .size(i * i)()
                                                                                }
                                                                            }
                                                                        })
                                                                })(t, i))
                                                  var s = 'WORLD' == t.geo_ ? 'path.worldrg' : 'path.nutsrg',
                                                      l = t.svg().selectAll(s)
                                                  'WORLD' !== t.geo_
                                                      ? ('mixed' == t.nutsLevel_ &&
                                                            (function (t, n, r) {
                                                                t
                                                                    .svg()
                                                                    .selectAll('g.symbol')
                                                                    .style('display', function (r) {
                                                                        var i = n.get(r.properties.id)
                                                                        return i &&
                                                                            (i.value || 0 === i || 0 === i.value) &&
                                                                            e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1])
                                                                            ? e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1]) ||
                                                                              'WORLD' == t.geo_
                                                                                ? 'block'
                                                                                : void 0
                                                                            : 'none'
                                                                    }),
                                                                    r.style('display', function (r) {
                                                                        var i = n.get(r.properties.id)
                                                                        return i &&
                                                                            (i.value || 0 === i || 0 === i.value) &&
                                                                            e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1])
                                                                            ? e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1]) ||
                                                                              'WORLD' == t.geo_
                                                                                ? 'block'
                                                                                : void 0
                                                                            : 'none'
                                                                    }),
                                                                    r
                                                                        .style('stroke', function (t) {
                                                                            var r = yt(this).attr('lvl'),
                                                                                i = n.get(t.properties.id)
                                                                            if (
                                                                                i &&
                                                                                i.value &&
                                                                                e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])
                                                                            )
                                                                                return e.countriesToShow_.includes(
                                                                                    t.properties.id[0] + t.properties.id[1]
                                                                                ) && '0' !== r
                                                                                    ? e.nutsbnStroke_[parseInt(r)] || '#777'
                                                                                    : void 0
                                                                        })
                                                                        .style('stroke-width', function (t) {
                                                                            var r = yt(this).attr('lvl'),
                                                                                i = n.get(t.properties.id)
                                                                            if (
                                                                                i &&
                                                                                i.value &&
                                                                                e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])
                                                                            )
                                                                                return (!e.countriesToShow_.includes(
                                                                                    t.properties.id[0] + t.properties.id[1]
                                                                                ) &&
                                                                                    'WORLD' != e.geo_) ||
                                                                                    '0' === r
                                                                                    ? void 0
                                                                                    : e.nutsbnStrokeWidth_[parseInt(r)] || '#777'
                                                                        })
                                                            })(t, i, l),
                                                        l.attr('fill', function (t) {
                                                            var n = i.get(t.properties.id)
                                                            return !n || (!n.value && 0 !== n && 0 !== n.value)
                                                                ? e.noDataFillStyle_
                                                                : (n && n.value) || (n && 0 == n.value)
                                                                  ? ':' == n.value
                                                                      ? e.noDataFillStyle_
                                                                      : e.nutsrgFillStyle_
                                                                  : void 0
                                                        }),
                                                        l.attr('ecl', function (t) {
                                                            var e = i.get(t.properties.id)
                                                            return !e ||
                                                                (!e.value && 0 !== e && 0 !== e.value) ||
                                                                (((e && e.value) || (e && 0 == e.value)) && ':' == e.value)
                                                                ? 'nd'
                                                                : void 0
                                                        }))
                                                      : l.attr('fill', function (t) {
                                                            var n = i.get(t.properties.id)
                                                            return !n || (!n.value && 0 !== n && 0 !== n.value) || ':' == n.value
                                                                ? e.worldFillStyle_
                                                                : e.nutsrgFillStyle_
                                                        }),
                                                      a(o),
                                                      e.labelsToShow_.includes('values') && e.updateValuesLabels(t)
                                              }
                                              return t
                                          }
                                          function a(t) {
                                              t.style('fill-opacity', e.psFillOpacity())
                                                  .style('stroke', e.psStroke())
                                                  .style('stroke-width', e.psStrokeWidth())
                                                  .attr('fill', function () {
                                                      if (e.classifierColor_) {
                                                          var t = yt(this.parentNode).attr('ecl')
                                                          return t && 'nd' !== t
                                                              ? e.psClassToFillStyle_(t, e.psClasses_)
                                                              : e.noDataFillStyle_ || 'gray'
                                                      }
                                                      return e.psFill_
                                                  })
                                          }
                                          return (
                                              (e.psShape_ = 'circle'),
                                              e.psCustomShape_,
                                              e.psCustomSVG_,
                                              (e.psOffset_ = { x: 0, y: 0 }),
                                              (e.psMaxSize_ = 30),
                                              (e.psMinSize_ = 5),
                                              (e.psBarWidth_ = 10),
                                              (e.psMaxValue_ = void 0),
                                              (e.psMinValue_ = void 0),
                                              (e.psSizeFun_ = $s),
                                              (e.psFill_ = '#2d50a0'),
                                              (e.psFillOpacity_ = 1),
                                              (e.psStroke_ = '#ffffff'),
                                              (e.psStrokeWidth_ = 0.2),
                                              (e.psClasses_ = 5),
                                              (e.psColors_ = null),
                                              (e.psColorFun_ = Il),
                                              (e.psClassToFillStyle_ = void 0),
                                              (e.psThresholds_ = [0]),
                                              (e.psClassificationMethod_ = 'quantile'),
                                              (e.makeClassifNice_ = !0),
                                              (e.classifierSize_ = void 0),
                                              (e.classifierColor_ = void 0),
                                              (e.tooltip_.textFunction = iu),
                                              [
                                                  'psMaxSize_',
                                                  'psMinSize_',
                                                  'psMaxValue_',
                                                  'psMinValue_',
                                                  'psFill_',
                                                  'psFillOpacity_',
                                                  'psStroke_',
                                                  'psStrokeWidth_',
                                                  'classifierSize_',
                                                  'classifierColor_',
                                                  'psShape_',
                                                  'psCustomShape_',
                                                  'psBarWidth_',
                                                  'psClassToFillStyle_',
                                                  'psColorFun_',
                                                  'noDataFillStyle_',
                                                  'psThresholds_',
                                                  'psColors_',
                                                  'psCustomSVG_',
                                                  'psOffset_',
                                                  'psClassificationMethod_',
                                                  'psClasses_',
                                              ].forEach(function (t) {
                                                  e[t.substring(0, t.length - 1)] = function (n) {
                                                      return arguments.length ? ((e[t] = n), e) : e[t]
                                                  }
                                              }),
                                              t &&
                                                  [
                                                      'psMaxSize',
                                                      'psMinSize',
                                                      'psFill',
                                                      'psFillOpacity',
                                                      'psStroke',
                                                      'psStrokeWidth',
                                                      'classifierSize',
                                                      'classifierColor',
                                                      'psShape',
                                                      'psCustomShape',
                                                      'psBarWidth',
                                                      'psClassToFillStyle',
                                                      'psColorFun',
                                                      'noDataFillStyle',
                                                      'psThreshold',
                                                      'psColors',
                                                      'psCustomSVG',
                                                      'psOffset',
                                                      'psClassificationMethod',
                                                      'psClasses',
                                                  ].forEach(function (n) {
                                                      null != t[n] && e[n](t[n])
                                                  }),
                                              (e.psColorFun = function (t) {
                                                  return arguments.length
                                                      ? ((e.psColorFun_ = t), (e.psClassToFillStyle_ = nu(e.psColorFun_, e.psColors_)), e)
                                                      : e.psColorFun_
                                              }),
                                              (e.psThreshold = function (t) {
                                                  return arguments.length ? ((e.psThresholds_ = t), e.psClasses(t.length + 1), e) : e.psThresholds_
                                              }),
                                              (e.updateClassification = function () {
                                                  if (
                                                      ((function () {
                                                          var t,
                                                              n = function (t) {
                                                                  return r(Array(t).keys())
                                                              },
                                                              i = e.statData('size').getArray(),
                                                              a = e.psMinValue_ ? e.psMinValue_ : e.statData('size').getMin(),
                                                              o = e.psMaxValue_ ? e.psMaxValue_ : e.statData('size').getMax()
                                                          if (
                                                              ((t = i ? [a, o] : [e.statData().getMin(), e.statData().getMax()]),
                                                              e.classifierSize(e.psSizeFun_().domain(t).range([e.psMinSize_, e.psMaxSize_])),
                                                              e.statData('color').getArray())
                                                          )
                                                              if ('quantile' === e.psClassificationMethod_) {
                                                                  var s = e.statData('color').getArray(),
                                                                      l = n(e.psClasses_)
                                                                  e.classifierColor(It().domain(s).range(l))
                                                              } else if ('equinter' === e.psClassificationMethod_) {
                                                                  var u = e.statData('color').getArray(),
                                                                      c = n(e.psClasses_)
                                                                  e.classifierColor(
                                                                      cn()
                                                                          .domain([a(u), o(u)])
                                                                          .range(c)
                                                                  ),
                                                                      e.makeClassifNice_ && e.classifierColor().nice()
                                                              } else if ('threshold' === e.psClassificationMethod_) {
                                                                  e.psClasses(e.psThreshold().length + 1)
                                                                  var f = n(e.psClasses_)
                                                                  e.classifierColor(fn().domain(e.psThreshold()).range(f))
                                                              }
                                                      })(),
                                                      e.insetTemplates_)
                                                  )
                                                      for (var t in e.insetTemplates_)
                                                          if (Array.isArray(e.insetTemplates_[t]))
                                                              for (var i = 0; i < e.insetTemplates_[t].length; i++)
                                                                  if (Array.isArray(e.insetTemplates_[t][i]))
                                                                      for (var a = 0; a < e.insetTemplates_[t][i].length; a++)
                                                                          e.insetTemplates_[t][i][a].svgId_ !== e.svgId_ &&
                                                                              n(e.insetTemplates_[t][i][a])
                                                                  else e.insetTemplates_[t][i].svgId_ !== e.svgId_ && n(e.insetTemplates_[t][i])
                                                          else e.insetTemplates_[t].svgId_ !== e.svgId_ && n(e.insetTemplates_[t])
                                                  return n(e), e
                                              }),
                                              (e.updateValuesLabels = function (t) {
                                                  t.svg_.selectAll('g.stat-label > *').remove(), t.svg_.selectAll('g.stat-label-shadow > *').remove()
                                                  var n = t.svg_.selectAll('g.stat-label'),
                                                      r = t.statData('size').getArray() ? t.statData('size') : t.statData()
                                                  return (
                                                      n
                                                          .filter(function (t) {
                                                              if (
                                                                  e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) ||
                                                                  'WORLD' == e.geo_
                                                              ) {
                                                                  var n = r.get(t.properties.id)
                                                                  return !(!n || (!n.value && 0 !== n && 0 !== n.value))
                                                              }
                                                              return !1
                                                          })
                                                          .append('text')
                                                          .text(function (t) {
                                                              if (
                                                                  e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) ||
                                                                  'WORLD' == e.geo_
                                                              ) {
                                                                  var n = r.get(t.properties.id)
                                                                  if (!n || (!n.value && 0 !== n && 0 !== n.value)) return ''
                                                                  if (':' !== n.value) return Zo(n.value)
                                                              }
                                                          }),
                                                      e.labelShadow_ &&
                                                          t.svg_
                                                              .selectAll('g.stat-label-shadow')
                                                              .filter(function (t) {
                                                                  if (
                                                                      e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) ||
                                                                      'WORLD' == e.geo_
                                                                  ) {
                                                                      var n = r.get(t.properties.id)
                                                                      return !(!n || (!n.value && 0 !== n && 0 !== n.value))
                                                                  }
                                                                  return !1
                                                              })
                                                              .append('text')
                                                              .text(function (t) {
                                                                  if (
                                                                      e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1]) ||
                                                                      'WORLD' == e.geo_
                                                                  ) {
                                                                      var n = r.get(t.properties.id)
                                                                      if (!n || (!n.value && 0 !== n && 0 !== n.value)) return ''
                                                                      if (':' !== n.value) return Zo(n.value)
                                                                  }
                                                              }),
                                                      e
                                                  )
                                              }),
                                              (e.updateStyle = function () {
                                                  if ((i(e), e.insetTemplates_))
                                                      for (var t in e.insetTemplates_)
                                                          if (Array.isArray(e.insetTemplates_[t]))
                                                              for (var n = 0; n < e.insetTemplates_[t].length; n++)
                                                                  if (Array.isArray(e.insetTemplates_[t][n]))
                                                                      for (var r = 0; r < e.insetTemplates_[t][n].length; r++)
                                                                          e.insetTemplates_[t][n][r].svgId_ !== e.svgId_ &&
                                                                              i(e.insetTemplates_[t][n][r])
                                                                  else e.insetTemplates_[t][n].svgId_ !== e.svgId_ && i(e.insetTemplates_[t][n])
                                                          else e.insetTemplates_[t].svgId_ !== e.svgId_ && i(e.insetTemplates_[t])
                                                  return e
                                              }),
                                              (e.getLegendConstructor = function () {
                                                  return eu
                                              }),
                                              e
                                          )
                                      })(e)
                                    : 'chbi' == t
                                      ? (function (t) {
                                            var e = Ml(t)
                                            function n(t) {
                                                var n = e.statData('v1').getArray() || e.statData().getArray(),
                                                    i = e.statData('v2').getArray(),
                                                    a = r(Array(e.clnb()).keys())
                                                e.classifier1_ || e.classifier1(It().domain(n).range(a)),
                                                    e.classifier2_ || e.classifier2(It().domain(i).range(a))
                                                var o = 'WORLD' == t.geo_ ? 'path.worldrg' : 'path.nutsrg'
                                                if (t.svg_) {
                                                    if (
                                                        (t
                                                            .svg()
                                                            .selectAll(o)
                                                            .attr('ecl1', function (t) {
                                                                if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                    var n = e.statData('v1').get(t.properties.id) || e.statData().get(t.properties.id)
                                                                    if (n) {
                                                                        var r = n.value
                                                                        return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier1_(+r)
                                                                    }
                                                                }
                                                            })
                                                            .attr('ecl2', function (t) {
                                                                if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                    var n = e.statData('v2').get(t.properties.id)
                                                                    if (n) {
                                                                        var r = n.value
                                                                        return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier2_(+r)
                                                                    }
                                                                }
                                                            })
                                                            .attr('nd', function (t) {
                                                                if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                    var n =
                                                                            e.statData('v1').get(t.properties.id) ||
                                                                            e.statData().get(t.properties.id),
                                                                        r = e.statData('v2').get(t.properties.id)
                                                                    if (n && r) {
                                                                        var i = n.value
                                                                        return (0 != i && !i) || ':' == i || (0 != (i = r.value) && !i) || ':' == i
                                                                            ? 'nd'
                                                                            : ''
                                                                    }
                                                                }
                                                            }),
                                                        'mixed' == t.nutsLevel_ &&
                                                            t
                                                                .svg()
                                                                .selectAll('path.nutsrg0')
                                                                .attr('ecl1', function (t) {
                                                                    if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                        var n =
                                                                            e.statData('v1').get(t.properties.id) || e.statData().get(t.properties.id)
                                                                        if (n) {
                                                                            var r = n.value
                                                                            return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier1_(+r)
                                                                        }
                                                                    }
                                                                })
                                                                .attr('ecl2', function (t) {
                                                                    if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                        var n = e.statData('v2').get(t.properties.id)
                                                                        if (n) {
                                                                            var r = n.value
                                                                            return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier2_(+r)
                                                                        }
                                                                    }
                                                                }),
                                                        !e.classToFillStyle())
                                                    ) {
                                                        var s = (function (t, e, n, r, i) {
                                                            for (var a = [], o = ze(e, n), s = ze(r, i), l = 0; l < t; l++) {
                                                                for (var u = l / (t - 1), c = ze(o(u), s(u)), f = [], p = 0; p < t; p++)
                                                                    f.push(c(p / (t - 1)))
                                                                a.push(f)
                                                            }
                                                            return function (t, e) {
                                                                return a[t][e]
                                                            }
                                                        })(e.clnb(), e.startColor(), e.color1(), e.color2(), e.endColor())
                                                        e.classToFillStyle(s)
                                                    }
                                                    'mixed' == e.nutsLevel_ &&
                                                        t.svg_
                                                            .selectAll('path.nutsrg0')
                                                            .attr('ecl1', function (t) {
                                                                var n = e.statData('v2').get(t.properties.id)
                                                                if (n) {
                                                                    var r = n.value
                                                                    return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier1_(+r)
                                                                }
                                                            })
                                                            .attr('ecl2', function (t) {
                                                                var n = e.statData('v2').get(t.properties.id)
                                                                if (n) {
                                                                    var r = n.value
                                                                    return (0 != r && !r) || ':' == r ? 'nd' : +e.classifier2_(+r)
                                                                }
                                                            })
                                                }
                                            }
                                            function i(t) {
                                                if (t.svg()) {
                                                    var n = 'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg',
                                                        r = t.svg().selectAll(n)
                                                    r
                                                        .transition()
                                                        .duration(e.transitionDuration())
                                                        .attr('fill', function (t) {
                                                            if (e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) {
                                                                var n = yt(this).attr('ecl1')
                                                                if ('nd' === n) return e.noDataFillStyle() || 'gray'
                                                                var r = yt(this).attr('ecl2')
                                                                return n || r
                                                                    ? 'nd' === r
                                                                        ? e.noDataFillStyle() || 'gray'
                                                                        : e.classToFillStyle()(+n, +r)
                                                                    : e.nutsrgFillStyle_
                                                            }
                                                            return e.nutsrgFillStyle_
                                                        })
                                                        .end()
                                                        .then(
                                                            function () {
                                                                r.on('mouseover', function (n, r) {
                                                                    if (e.countriesToShow_ && 'WORLD' !== e.geo_) {
                                                                        if (e.countriesToShow_.includes(r.properties.id[0] + r.properties.id[1])) {
                                                                            var i = yt(this)
                                                                            i.attr('fill___', i.attr('fill')),
                                                                                i.attr('fill', t.nutsrgSelFillSty_),
                                                                                e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(r, e))
                                                                        }
                                                                    } else {
                                                                        var a = yt(this)
                                                                        a.attr('fill___', a.attr('fill')),
                                                                            a.attr('fill', t.nutsrgSelFillSty_),
                                                                            e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(r, e))
                                                                    }
                                                                })
                                                                    .on('mousemove', function (t, n) {
                                                                        e.countriesToShow_ && 'WORLD' !== e.geo_
                                                                            ? e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1]) &&
                                                                              e._tooltip &&
                                                                              e._tooltip.mousemove(t)
                                                                            : e._tooltip && e._tooltip.mousemove(t)
                                                                    })
                                                                    .on('mouseout', function () {
                                                                        var e = yt(this)
                                                                        e.attr('fill___') &&
                                                                            (e.attr('fill', e.attr('fill___')), t._tooltip && t._tooltip.mouseout())
                                                                    })
                                                            },
                                                            function (t) {}
                                                        ),
                                                        'mixed' == e.nutsLevel_ &&
                                                            t
                                                                .svg()
                                                                .selectAll('path.nutsrg')
                                                                .style('display', function (t) {
                                                                    var n = yt(this).attr('ecl1'),
                                                                        r = yt(this).attr('ecl2'),
                                                                        i = yt(this).attr('lvl')
                                                                    return (n &&
                                                                        r &&
                                                                        e.countriesToShow_.includes(t.properties.id[0] + t.properties.id[1])) ||
                                                                        '0' == i
                                                                        ? 'block'
                                                                        : 'none'
                                                                })
                                                                .style('stroke', function (t) {
                                                                    var n = yt(this).attr('lvl'),
                                                                        r = yt(this).attr('ecl1'),
                                                                        i = yt(this).attr('ecl2')
                                                                    if (r && i && '0' !== n) return e.nutsbnStroke_[parseInt(n)] || '#777'
                                                                })
                                                                .style('stroke-width', function (t) {
                                                                    var n = yt(this).attr('lvl'),
                                                                        r = yt(this).attr('ecl1'),
                                                                        i = yt(this).attr('ecl2')
                                                                    if (r && i && '0' !== n) return e.nutsbnStrokeWidth_[parseInt(n)] || 0.2
                                                                })
                                                }
                                            }
                                            return (
                                                (e.clnb_ = 3),
                                                (e.startColor_ = '#e8e8e8'),
                                                (e.color1_ = '#73ae80'),
                                                (e.color2_ = '#6c83b5'),
                                                (e.endColor_ = '#2a5a5b'),
                                                (e.classToFillStyle_ = void 0),
                                                (e.classifier1_ = void 0),
                                                (e.classifier2_ = void 0),
                                                (e.tooltip_.textFunction = gu),
                                                [
                                                    'clnb_',
                                                    'startColor_',
                                                    'color1_',
                                                    'color2_',
                                                    'endColor_',
                                                    'classToFillStyle_',
                                                    'noDataFillStyle_',
                                                    'classifier1_',
                                                    'classifier2_',
                                                ].forEach(function (t) {
                                                    e[t.substring(0, t.length - 1)] = function (n) {
                                                        return arguments.length ? ((e[t] = n), e) : e[t]
                                                    }
                                                }),
                                                t &&
                                                    [
                                                        'clnb',
                                                        'startColor',
                                                        'color1',
                                                        'color2',
                                                        'endColor',
                                                        'classToFillStyle',
                                                        'noDataFillStyle',
                                                    ].forEach(function (n) {
                                                        null != t[n] && e[n](t[n])
                                                    }),
                                                (e.updateClassification = function () {
                                                    if (e.insetTemplates_)
                                                        for (var t in e.insetTemplates_)
                                                            if (Array.isArray(e.insetTemplates_[t]))
                                                                for (var r = 0; r < e.insetTemplates_[t].length; r++)
                                                                    if (Array.isArray(e.insetTemplates_[t][r]))
                                                                        for (var i = 0; i < e.insetTemplates_[t][r].length; i++)
                                                                            e.insetTemplates_[t][r][i].svgId_ !== e.svgId_ &&
                                                                                n(e.insetTemplates_[t][r][i])
                                                                    else e.insetTemplates_[t][r].svgId_ !== e.svgId_ && n(e.insetTemplates_[t][r])
                                                            else e.insetTemplates_[t].svgId_ !== e.svgId_ && n(e.insetTemplates_[t])
                                                    return n(e), e
                                                }),
                                                (e.updateStyle = function () {
                                                    if (e.insetTemplates_)
                                                        for (var t in e.insetTemplates_)
                                                            if (Array.isArray(e.insetTemplates_[t]))
                                                                for (var n = 0; n < e.insetTemplates_[t].length; n++)
                                                                    if (Array.isArray(e.insetTemplates_[t][n]))
                                                                        for (var r = 0; r < e.insetTemplates_[t][n].length; r++)
                                                                            e.insetTemplates_[t][n][r].svgId_ !== e.svgId_ &&
                                                                                i(e.insetTemplates_[t][n][r])
                                                                    else e.insetTemplates_[t][n].svgId_ !== e.svgId_ && i(e.insetTemplates_[t][n])
                                                            else e.insetTemplates_[t].svgId_ !== e.svgId_ && i(e.insetTemplates_[t])
                                                    return i(e), e
                                                }),
                                                (e.getLegendConstructor = function () {
                                                    return du
                                                }),
                                                e
                                            )
                                        })(e)
                                      : 'scomp' == t
                                        ? (function (t) {
                                              var e = Ml(t)
                                              ;(e.stripeWidth_ = 50),
                                                  (e.stripeOrientation_ = 0),
                                                  (e.catColors_ = void 0),
                                                  (e.catLabels_ = void 0),
                                                  (e.showOnlyWhenComplete_ = !1),
                                                  (e.pieChartRadius_ = 40),
                                                  (e.pieChartInnerRadius_ = 15),
                                                  [
                                                      'stripeWidth_',
                                                      'stripeOrientation_',
                                                      'catColors_',
                                                      'catLabels_',
                                                      'showOnlyWhenComplete_',
                                                      'noDataFillStyle_',
                                                      'pieChartRadius_',
                                                      'pieChartInnerRadius_',
                                                  ].forEach(function (t) {
                                                      e[t.substring(0, t.length - 1)] = function (n) {
                                                          return arguments.length ? ((e[t] = n), e) : e[t]
                                                      }
                                                  }),
                                                  t &&
                                                      [
                                                          'stripeWidth',
                                                          'stripeOrientation',
                                                          'catColors',
                                                          'catLabels',
                                                          'showOnlyWhenComplete',
                                                          'noDataFillStyle',
                                                          'pieChartRadius',
                                                          'pieChartInnerRadius',
                                                      ].forEach(function (n) {
                                                          null != t[n] && e[n](t[n])
                                                      }),
                                                  (e.statComp = function (t, r, i, a, o) {
                                                      t.filters = t.filters || {}
                                                      for (var s = 0; s < i.length; s++) {
                                                          var l = i[s]
                                                          t.filters[r] = l
                                                          var u = {}
                                                          for (var c in t) u[c] = t[c]
                                                          for (var f in ((u.filters = {}), t.filters)) u.filters[f] = t.filters[f]
                                                          e.stat(l, u),
                                                              o && ((e.catColors_ = e.catColors_ || {}), (e.catColors_[l] = o[s])),
                                                              a && ((e.catLabels_ = e.catLabels_ || {}), (e.catLabels_[l] = a[s]))
                                                      }
                                                      return (n = i), e
                                                  })
                                              var n = void 0,
                                                  r = function (t) {
                                                      for (var r = {}, i = 0, a = 0; a < n.length; a++) {
                                                          var o = n[a],
                                                              s = e.statData(o).get(t)
                                                          if (!s || (0 != s.value && !s.value) || isNaN(s.value)) {
                                                              if (e.showOnlyWhenComplete()) return
                                                          } else (r[o] = s.value), (i += s.value)
                                                      }
                                                      if (0 != i) {
                                                          for (var l = 0; l < n.length; l++) r[n[l]] /= i
                                                          return r
                                                      }
                                                  }
                                              return (
                                                  (e.updateClassification = function () {
                                                      if (!n) {
                                                          var t = (n = Object.keys(e.statData_)).indexOf('default')
                                                          t > -1 && n.splice(t, 1)
                                                      }
                                                      return e
                                                  }),
                                                  (e.updateStyle = function () {
                                                      if (!e.catColors()) {
                                                          e.catColors({})
                                                          for (var t = 0; t < n.length; t++) e.catColors()[n[t]] = _u[t % 10]
                                                      }
                                                      ;(e.catLabels_ = e.catLabels_ || {}),
                                                          e
                                                              .svg()
                                                              .selectAll('path.nutsrg')
                                                              .attr('fill', function (t) {
                                                                  var n = t.properties.id
                                                                  if (!e.countriesToShow_.includes(n[0] + n[1])) return e.nutsrgFillStyle_
                                                                  var i = r(n)
                                                                  if (!i) return e.noDataFillStyle() || 'gray'
                                                                  var a = e
                                                                      .svg()
                                                                      .append('pattern')
                                                                      .attr('id', 'pattern_' + n)
                                                                      .attr('x', '0')
                                                                      .attr('y', '0')
                                                                      .attr('width', e.stripeWidth())
                                                                      .attr('height', 1)
                                                                      .attr('patternUnits', 'userSpaceOnUse')
                                                                  e.stripeOrientation() &&
                                                                      a.attr('patternTransform', 'rotate(' + e.stripeOrientation() + ')'),
                                                                      a
                                                                          .append('rect')
                                                                          .attr('x', 0)
                                                                          .attr('y', 0)
                                                                          .attr('width', e.stripeWidth())
                                                                          .attr('height', 1)
                                                                          .style('stroke', 'none')
                                                                          .style('fill', 'lightgray')
                                                                  var o = 0
                                                                  for (var s in i) {
                                                                      var l = i[s]
                                                                      if (l) {
                                                                          l *= e.stripeWidth()
                                                                          var u = e.catColors()[s] || 'lightgray'
                                                                          a
                                                                              .append('rect')
                                                                              .attr('x', o)
                                                                              .attr('y', 0)
                                                                              .attr('height', 1)
                                                                              .style('stroke', 'none')
                                                                              .attr('code', s)
                                                                              .style('fill', u)
                                                                              .transition()
                                                                              .duration(e.transitionDuration())
                                                                              .attr('width', l),
                                                                              (o += l)
                                                                      }
                                                                  }
                                                                  return 'url(#pattern_' + n + ')'
                                                              })
                                                              .attr('nd', function (t) {
                                                                  return r(t.properties.id) ? '' : 'nd'
                                                              })
                                                      var i = 'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg'
                                                      return (
                                                          e
                                                              .svg()
                                                              .selectAll(i)
                                                              .on('mouseover', function (t, n) {
                                                                  if (e.countriesToShow_ && 'WORLD' !== e.geo_) {
                                                                      if (e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1])) {
                                                                          var r = yt(this)
                                                                          r.attr('fill___', r.attr('fill')),
                                                                              r.attr('fill', e.nutsrgSelFillSty_),
                                                                              e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                                      }
                                                                  } else e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                              })
                                                              .on('mousemove', function (t, n) {
                                                                  e.countriesToShow_ && 'WORLD' !== e.geo_
                                                                      ? e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1]) &&
                                                                        e._tooltip &&
                                                                        e._tooltip.mousemove(t)
                                                                      : e._tooltip && e._tooltip.mousemove(t)
                                                              })
                                                              .on('mouseout', function () {
                                                                  var t = yt(this)
                                                                  t.attr('fill'),
                                                                      t.attr('fill___') &&
                                                                          (t.attr('fill', t.attr('fill___')), e._tooltip && e._tooltip.mouseout())
                                                              }),
                                                          e
                                                      )
                                                  }),
                                                  (e.getLegendConstructor = function () {
                                                      return yu
                                                  }),
                                                  (e.tooltip_.textFunction = function (t, n) {
                                                      var i = yt('#tooltip_eurostat')
                                                      i.html(''),
                                                          i.selectAll('*').remove(),
                                                          t.properties.id
                                                              ? i.append('div').html('<b>' + t.properties.na + '</b> (' + t.properties.id + ') <br>')
                                                              : i.append('div').html('<b>' + t.properties.na + '</b><br>')
                                                      var a = [],
                                                          o = r(t.properties.id)
                                                      for (var s in o) a.push({ code: s, value: o[s] })
                                                      if (a && 0 != a.length) {
                                                          var l = e.pieChartRadius(),
                                                              u = e.pieChartInnerRadius(),
                                                              c = i
                                                                  .append('svg')
                                                                  .attr('viewBox', [-l, -l, 2 * l, 2 * l])
                                                                  .attr('width', 2 * l),
                                                              f = Fl()
                                                                  .sort(null)
                                                                  .value(function (t) {
                                                                      return t.value
                                                                  })
                                                          c.append('g')
                                                              .attr('stroke', 'darkgray')
                                                              .selectAll('path')
                                                              .data(f(a))
                                                              .join('path')
                                                              .attr('fill', function (t) {
                                                                  return e.catColors()[t.data.code] || 'lightgray'
                                                              })
                                                              .attr('d', yl().innerRadius(u).outerRadius(l))
                                                      } else i.append('div').html(e.noDataText())
                                                  }),
                                                  e
                                              )
                                          })(e)
                                        : 'pie' == t
                                          ? (function (t) {
                                                var e = Ml(t, !0)
                                                ;(e.pieMinRadius_ = 5),
                                                    (e.pieMaxRadius_ = 15),
                                                    (e.pieChartInnerRadius_ = 0),
                                                    (e.pieStrokeFill_ = 'white'),
                                                    (e.pieStrokeWidth_ = 0.3),
                                                    (e.tooltipPieRadius_ = 40),
                                                    (e.tooltipPieInnerRadius_ = 0),
                                                    (e.catColors_ = void 0),
                                                    (e.catLabels_ = void 0),
                                                    (e.pieOtherColor_ = '#FFCC80'),
                                                    (e.pieOtherText_ = 'Other'),
                                                    (e.showOnlyWhenComplete_ = !1),
                                                    (e.classifierSize_ = null),
                                                    (e.statPie_ = null),
                                                    [
                                                        'catColors_',
                                                        'catLabels_',
                                                        'showOnlyWhenComplete_',
                                                        'noDataFillStyle_',
                                                        'pieMaxRadius_',
                                                        'pieMinRadius_',
                                                        'pieChartInnerRadius_',
                                                        'pieOtherColor_',
                                                        'pieOtherText_',
                                                        'pieStrokeFill_',
                                                        'pieStrokeWidth_',
                                                    ].forEach(function (t) {
                                                        e[t.substring(0, t.length - 1)] = function (n) {
                                                            return arguments.length ? ((e[t] = n), e) : e[t]
                                                        }
                                                    }),
                                                    t &&
                                                        [
                                                            'catColors',
                                                            'catLabels',
                                                            'showOnlyWhenComplete',
                                                            'noDataFillStyle',
                                                            'pieMaxRadius',
                                                            'pieMinRadius',
                                                            'pieChartInnerRadius',
                                                            'pieOtherColor',
                                                            'pieOtherText',
                                                            'pieStrokeFill',
                                                            'pieStrokeWidth',
                                                        ].forEach(function (n) {
                                                            null != t[n] && e[n](t[n])
                                                        })
                                                var n = void 0,
                                                    r = void 0
                                                ;(e.statPie = function (t, i, a, o, s, l) {
                                                    t.filters = t.filters || {}
                                                    for (var u = 0; u < a.length; u++) {
                                                        var c = a[u]
                                                        t.filters[i] = c
                                                        var f = {}
                                                        for (var p in t) f[p] = t[p]
                                                        for (var h in ((f.filters = {}), t.filters)) f.filters[h] = t.filters[h]
                                                        e.stat(c, f),
                                                            s && ((e.catColors_ = e.catColors_ || {}), (e.catColors_[c] = s[u])),
                                                            o && ((e.catLabels_ = e.catLabels_ || {}), (e.catLabels_[c] = o[u]))
                                                    }
                                                    if (((n = a), l)) {
                                                        ;(r = l), (t.filters[i] = l)
                                                        var d = {}
                                                        for (var g in t) d[g] = t[g]
                                                        for (var _ in ((d.filters = {}), t.filters)) d.filters[_] = t.filters[_]
                                                        e.stat(l, d), (e.catColors_.other = e.pieOtherColor_), (e.catLabels_.other = e.pieOtherText_)
                                                    }
                                                    return e
                                                }),
                                                    (e.updateClassification = function () {
                                                        if (e.insetTemplates_)
                                                            for (var t in e.insetTemplates_)
                                                                if (Array.isArray(e.insetTemplates_[t]))
                                                                    for (var n = 0; n < e.insetTemplates_[t].length; n++)
                                                                        if (Array.isArray(e.insetTemplates_[t][n]))
                                                                            for (var r = 0; r < e.insetTemplates_[t][n].length; r++)
                                                                                e.insetTemplates_[t][n][r].svgId_ !== e.svgId_ &&
                                                                                    i(e.insetTemplates_[t][n][r])
                                                                        else e.insetTemplates_[t][n].svgId_ !== e.svgId_ && i(e.insetTemplates_[t][n])
                                                                else e.insetTemplates_[t].svgId_ !== e.svgId_ && i(e.insetTemplates_[t])
                                                        return i(e), e
                                                    })
                                                var i = function (t) {
                                                    if (!n) {
                                                        var r = (n = Object.keys(e.statData_)).indexOf('default')
                                                        r > -1 && n.splice(r, 1)
                                                    }
                                                    var i,
                                                        a =
                                                            ((i = []),
                                                            e
                                                                .svg()
                                                                .selectAll('#g_ps')
                                                                .selectAll('g.symbol')
                                                                .data()
                                                                .forEach(function (t) {
                                                                    var e = t.properties.id,
                                                                        n = o(e)
                                                                    n && i.push(n)
                                                                }),
                                                            Fs(i))
                                                    return (
                                                        isNaN(a[0]) || (e.classifierSize_ = $s().domain(a).range([e.pieMinRadius_, e.pieMaxRadius_])),
                                                        e
                                                    )
                                                }
                                                e.updateStyle = function () {
                                                    if (!e.catColors_) {
                                                        e.catColors({})
                                                        for (var t = 0; t < n.length; t++) e.catColors_[n[t]] = schemeCategory10[t % 10]
                                                    }
                                                    e.catLabels_ = e.catLabels_ || {}
                                                    var r = []
                                                    if (e.svg_) {
                                                        var i = e.svg_.selectAll('#g_ps')
                                                        if (i) {
                                                            i.selectAll('g.symbol')
                                                                .append('g')
                                                                .attr('id', function (t) {
                                                                    return r.push(t.properties.id), 'pie_' + t.properties.id
                                                                })
                                                            var s = 'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg'
                                                            e
                                                                .svg()
                                                                .selectAll(s)
                                                                .on('mouseover', function (t, n) {
                                                                    if (e.countriesToShow_ && 'WORLD' !== e.geo_) {
                                                                        if (e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1])) {
                                                                            var r = yt(this)
                                                                            r.attr('fill___', r.attr('fill')),
                                                                                r.attr('fill', e.nutsrgSelFillSty_),
                                                                                e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                                        }
                                                                    } else {
                                                                        var i = yt(this)
                                                                        i.attr('fill___', i.attr('fill')),
                                                                            i.attr('fill', e.nutsrgSelFillSty_),
                                                                            e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                                    }
                                                                })
                                                                .on('mousemove', function (t, n) {
                                                                    e.countriesToShow_ && 'WORLD' !== e.geo_
                                                                        ? e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1]) &&
                                                                          e._tooltip &&
                                                                          e._tooltip.mousemove(t)
                                                                        : e._tooltip && e._tooltip.mousemove(t)
                                                                })
                                                                .on('mouseout', function () {
                                                                    var t = yt(this)
                                                                    t.attr('fill'),
                                                                        t.attr('fill___') &&
                                                                            (t.attr('fill', t.attr('fill___')), e._tooltip && e._tooltip.mouseout())
                                                                }),
                                                                r.forEach(function (t) {
                                                                    var n = [],
                                                                        r = a(t)
                                                                    for (var i in r) n.push({ code: i, value: r[i] })
                                                                    if (n && 0 != n.length) {
                                                                        var s = e.svg().selectAll('#pie_' + t),
                                                                            l = e.classifierSize_(o(t)),
                                                                            u = e.pieChartInnerRadius_,
                                                                            c = Fl()
                                                                                .sort(null)
                                                                                .value(function (t) {
                                                                                    return t.value
                                                                                })
                                                                        s.append('g')
                                                                            .attr('stroke', e.pieStrokeFill_)
                                                                            .attr('stroke-width', e.pieStrokeWidth_ + 'px')
                                                                            .attr('class', 'piechart')
                                                                            .selectAll('path')
                                                                            .data(c(n))
                                                                            .join('path')
                                                                            .attr('fill', function (t) {
                                                                                return e.catColors_[t.data.code] || 'lightgray'
                                                                            })
                                                                            .attr('code', function (t) {
                                                                                return t.data.code
                                                                            })
                                                                            .attr('d', yl().innerRadius(u).outerRadius(l))
                                                                    }
                                                                })
                                                        }
                                                    }
                                                    return e
                                                }
                                                var a = function (t) {
                                                        for (var i = {}, a = 0, o = 0; o < n.length; o++) {
                                                            var s = n[o],
                                                                l = e.statData(s).get(t)
                                                            if (!l || (0 != l.value && !l.value) || isNaN(l.value)) {
                                                                if (e.showOnlyWhenComplete()) return
                                                            } else (i[s] = l.value), (a += l.value)
                                                        }
                                                        if (r) {
                                                            var u = e.statData(r).get(t)
                                                            u && (a = u.value)
                                                        }
                                                        if (0 != a) {
                                                            for (var c = 0; c < n.length; c++) i[n[c]] /= a
                                                            if (r) {
                                                                var f = 0
                                                                for (var p in i) f += i[p]
                                                                i.other = 1 - f
                                                            }
                                                            return i
                                                        }
                                                    },
                                                    o = function (t) {
                                                        var i,
                                                            a = 0
                                                        if (r)
                                                            !(i = e.statData(r).get(t)) || (0 != i.value && !i.value) || isNaN(i.value)
                                                                ? e.showOnlyWhenComplete() && (a = void 0)
                                                                : (a = i.value)
                                                        else
                                                            for (var o = 0; o < n.length; o++) {
                                                                var s = n[o]
                                                                if (!(i = e.statData(s).get(t)) || (0 != i.value && !i.value) || isNaN(i.value)) {
                                                                    if (e.showOnlyWhenComplete()) return
                                                                } else a += i.value
                                                            }
                                                        if (0 != a) return a
                                                    }
                                                return (
                                                    (e.getLegendConstructor = function () {
                                                        return vu
                                                    }),
                                                    (e.tooltip_.textFunction = function (t, r) {
                                                        var i = yt('#tooltip_eurostat')
                                                        i.html(''),
                                                            i.selectAll('*').remove(),
                                                            t.properties.id
                                                                ? i
                                                                      .append('div')
                                                                      .html(
                                                                          '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                                                              t.properties.na +
                                                                              ' (' +
                                                                              t.properties.id +
                                                                              ') </div>'
                                                                      )
                                                                : i
                                                                      .append('div')
                                                                      .html(
                                                                          '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                                                              t.properties.na +
                                                                              '</div>'
                                                                      )
                                                        var s = [],
                                                            l = a(t.properties.id)
                                                        for (var u in l) s.push({ code: u, value: l[u] })
                                                        if (s && 0 != s.length) {
                                                            var c = Math.min(150, 150) / 2 - 25,
                                                                f = i
                                                                    .append('svg')
                                                                    .attr('viewbox', '0, 0, '.concat(150, ', ').concat(150))
                                                                    .attr('width', 150)
                                                                    .attr('height', 137.5)
                                                                    .append('g')
                                                                    .attr('transform', 'translate(75,75)'),
                                                                p = Fl()
                                                                    .sort(null)
                                                                    .value(function (t) {
                                                                        return t.value
                                                                    }),
                                                                h = yl()
                                                                    .innerRadius(0)
                                                                    .outerRadius(0.8 * c),
                                                                d = yl()
                                                                    .innerRadius(0.9 * c)
                                                                    .outerRadius(0.9 * c),
                                                                g = p(s)
                                                            f
                                                                .selectAll('allSlices')
                                                                .data(g)
                                                                .enter()
                                                                .append('path')
                                                                .attr('d', h)
                                                                .attr('fill', function (t) {
                                                                    return e.catColors()[t.data.code] || 'lightgray'
                                                                })
                                                                .attr('stroke', 'white')
                                                                .style('stroke-width', '1px')
                                                                .style('opacity', 0.7),
                                                                f
                                                                    .selectAll('allPolylines')
                                                                    .data(g)
                                                                    .enter()
                                                                    .append('polyline')
                                                                    .attr('stroke', 'black')
                                                                    .style('fill', 'none')
                                                                    .attr('stroke-width', 1)
                                                                    .attr('points', function (t) {
                                                                        if (t.data.value > 0.02) {
                                                                            var e = h.centroid(t),
                                                                                n = d.centroid(t),
                                                                                r = d.centroid(t),
                                                                                i = t.startAngle + (t.endAngle - t.startAngle) / 2
                                                                            return (r[0] = 0.95 * c * (i < Math.PI ? 1 : -1)), [e, n, r]
                                                                        }
                                                                    }),
                                                                f
                                                                    .selectAll('allLabels')
                                                                    .data(g)
                                                                    .enter()
                                                                    .append('text')
                                                                    .text(function (t) {
                                                                        if (t.data.value > 0.02) {
                                                                            var e = (100 * t.data.value).toFixed()
                                                                            if (!isNaN(e)) return e + '%'
                                                                        }
                                                                    })
                                                                    .attr('transform', function (t) {
                                                                        var e = d.centroid(t),
                                                                            n = t.startAngle + (t.endAngle - t.startAngle) / 2
                                                                        return (e[0] = 0.99 * c * (n < Math.PI ? 1 : -1)), 'translate(' + e + ')'
                                                                    })
                                                                    .style('text-anchor', function (t) {
                                                                        return t.startAngle + (t.endAngle - t.startAngle) / 2 < Math.PI
                                                                            ? 'start'
                                                                            : 'end'
                                                                    })
                                                                    .style('font-size', '12px')
                                                            var _ = document.createElement('div')
                                                            ;(_.style.padding = '10px'), (_.style.paddingTop = '0px'), (_.style.fontSize = '13px')
                                                            for (var y = 0; y < n.length; y++) {
                                                                var v = n[y],
                                                                    m = e.statData(v).get(t.properties.id)
                                                                if (m && m.value) {
                                                                    var x = '<strong>' + e.catLabels_[v] + '</strong>: ' + m.value.toFixed() + '<br>'
                                                                    _.innerHTML = _.innerHTML + x
                                                                }
                                                            }
                                                            var b = o(t.properties.id)
                                                            ;(_.innerHTML = _.innerHTML + '<strong>Total</strong>: '.concat(b.toFixed(), ' <br>')),
                                                                i.node().appendChild(_)
                                                        } else i.append('div').html(e.noDataText())
                                                    }),
                                                    e
                                                )
                                            })(e)
                                          : 'spark' == t
                                            ? (function (t) {
                                                  var e = Ml(t, !0)
                                                  ;(e.sparkLineColor_ = 'black'),
                                                      (e.sparkAreaColor_ = '#41afaa'),
                                                      (e.sparkLineWidth_ = 30),
                                                      (e.sparkLineHeight_ = 20),
                                                      (e.sparkLineStrokeWidth_ = 0.4),
                                                      (e.sparkLineOpacity_ = 0.6),
                                                      (e.sparkType_ = 'line'),
                                                      (e.sparkLineCircleRadius_ = 0),
                                                      (e.sparkTooltipChart_ = {
                                                          width: 100,
                                                          height: 50,
                                                          margin: { left: 60, right: 40, top: 40, bottom: 40 },
                                                          circleRadius: 1.5,
                                                      }),
                                                      (e.showOnlyWhenComplete_ = !1),
                                                      (e.statSpark_ = null),
                                                      (e.sparkHeightClassifier_ = null),
                                                      [
                                                          'sparkLineColor_',
                                                          'showOnlyWhenComplete_',
                                                          'sparkType_',
                                                          'sparkLineWidth_',
                                                          'sparkLineHeight_',
                                                          'sparkLineStrokeWidth_',
                                                          'sparkLineOpacity_',
                                                          'sparkLineCircleRadius_',
                                                          'sparkLineAreaColor_',
                                                          'sparkTooltipChart_',
                                                      ].forEach(function (t) {
                                                          e[t.substring(0, t.length - 1)] = function (n) {
                                                              return arguments.length ? ((e[t] = n), e) : e[t]
                                                          }
                                                      }),
                                                      t &&
                                                          [
                                                              'sparkLineColor',
                                                              'showOnlyWhenComplete',
                                                              'sparkType',
                                                              'sparkLineWidth',
                                                              'sparkLineHeight',
                                                              'sparkLineStrokeWidth',
                                                              'sparkLineOpacity',
                                                              'sparkLineCircleRadius_',
                                                              'sparkLineAreaColor',
                                                              'sparkTooltipChart_',
                                                          ].forEach(function (n) {
                                                              null != t[n] && e[n](t[n])
                                                          }),
                                                      (e.statSpark = function (t, r, i) {
                                                          t.filters = t.filters || {}
                                                          for (var a = 0; a < r.length; a++) {
                                                              var o = r[a]
                                                              t.filters.time = o
                                                              var s = {}
                                                              for (var l in t) s[l] = t[l]
                                                              for (var u in ((s.filters = {}), t.filters)) s.filters[u] = t.filters[u]
                                                              e.stat(o, s), i && ((e.catLabels_ = e.catLabels_ || {}), (e.catLabels_[o] = i[a]))
                                                          }
                                                          return (n = r), e
                                                      })
                                                  var n = void 0,
                                                      r = function (t) {
                                                          for (var r = [], i = 0, a = 0; a < n.length; a++) {
                                                              var o = n[a],
                                                                  s = e.statData(o).get(t)
                                                              if (!s || (0 != s.value && !s.value) || isNaN(s.value)) {
                                                                  if (e.showOnlyWhenComplete()) return
                                                              } else r.push({ date: o, value: s.value }), (i += s.value)
                                                          }
                                                          if (0 != i) return r
                                                      }
                                                  ;(e.updateClassification = function () {
                                                      if (!n) {
                                                          var t = (n = Object.keys(e.statData_)).indexOf('default')
                                                          t > -1 && n.splice(t, 1)
                                                      }
                                                      var r,
                                                          a =
                                                              ((r = []),
                                                              e
                                                                  .svg()
                                                                  .selectAll('#g_ps')
                                                                  .selectAll('g.symbol')
                                                                  .data()
                                                                  .forEach(function (t) {
                                                                      var e = t.properties.id,
                                                                          n = i(e)
                                                                      n && r.push(n)
                                                                  }),
                                                              Fs(r))
                                                      return (
                                                          (e.widthClassifier_ = $s().domain(a).range([0, e.sparkLineWidth_])),
                                                          (e.heightClassifier_ = $s().domain(a).range([0, e.sparkLineHeight_])),
                                                          e
                                                      )
                                                  }),
                                                      (e.updateStyle = function () {
                                                          var t = [],
                                                              i =
                                                                  (e
                                                                      .svg()
                                                                      .selectAll('#g_ps')
                                                                      .selectAll('g.symbol')
                                                                      .attr('id', function (e) {
                                                                          return t.push(e.properties.id), 'spark_' + e.properties.id
                                                                      }),
                                                                  'WORLD' == e.geo_ ? 'path.worldrg' : 'path.nutsrg')
                                                          return (
                                                              e
                                                                  .svg()
                                                                  .selectAll(i)
                                                                  .on('mouseover', function (t, n) {
                                                                      if (r(n.properties.id))
                                                                          if (e.countriesToShow_) {
                                                                              if (
                                                                                  e.countriesToShow_.includes(n.properties.id[0] + n.properties.id[1])
                                                                              ) {
                                                                                  var i = yt(this)
                                                                                  i.attr('fill___', i.attr('fill')),
                                                                                      i.attr('fill', e.nutsrgSelFillSty_),
                                                                                      e._tooltip &&
                                                                                          e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                                              }
                                                                          } else e._tooltip && e._tooltip.mouseover(e.tooltip_.textFunction(n, e))
                                                                  })
                                                                  .on('mousemove', function (t, n) {
                                                                      r(n.properties.id) &&
                                                                          (e.countriesToShow_
                                                                              ? e.countriesToShow_.includes(
                                                                                    n.properties.id[0] + n.properties.id[1]
                                                                                ) &&
                                                                                e._tooltip &&
                                                                                e._tooltip.mousemove(t)
                                                                              : e._tooltip && e._tooltip.mousemove(t))
                                                                  })
                                                                  .on('mouseout', function () {
                                                                      var t = yt(this)
                                                                      t.attr('fill'),
                                                                          t.attr('fill___') &&
                                                                              (t.attr('fill', t.attr('fill___')), e._tooltip && e._tooltip.mouseout())
                                                                  }),
                                                              t.forEach(function (t) {
                                                                  var i = e.svg().select('#spark_' + t),
                                                                      a = r(t)
                                                                  a &&
                                                                      (function (t, r) {
                                                                          var i,
                                                                              a,
                                                                              o,
                                                                              s,
                                                                              l = Fs(
                                                                                  r.map(function (t) {
                                                                                      return t.value
                                                                                  })
                                                                              )
                                                                          'area' == e.sparkType_
                                                                              ? ((s = e.widthClassifier_(l[1])),
                                                                                (o = e.heightClassifier_(l[1])),
                                                                                (a = un()
                                                                                    .domain(l)
                                                                                    .range([o - 0.5, 0])),
                                                                                (i = un()
                                                                                    .domain([0, n.length - 1])
                                                                                    .range([0.5, s - 0.5])))
                                                                              : ((s = e.sparkLineWidth_),
                                                                                (o = e.sparkLineHeight_),
                                                                                (a = un()
                                                                                    .domain(l)
                                                                                    .range([e.sparkLineHeight_ - 0.5, 0])),
                                                                                (i = un()
                                                                                    .domain([0, n.length - 1])
                                                                                    .range([0.5, e.sparkLineWidth_ - 0.5]))),
                                                                              'area' == e.sparkType_ &&
                                                                                  t
                                                                                      .append('path')
                                                                                      .datum(r)
                                                                                      .attr(
                                                                                          'fill',
                                                                                          yn(e.sparkAreaColor_) == Function
                                                                                              ? function (t, n) {
                                                                                                    return e.sparkAreaColor_(t, n)
                                                                                                }
                                                                                              : e.sparkAreaColor_
                                                                                      )
                                                                                      .attr(
                                                                                          'stroke',
                                                                                          yn(e.sparkLineColor_) == Function
                                                                                              ? function (t, n) {
                                                                                                    return e.sparkLineColor_(t, n)
                                                                                                }
                                                                                              : e.sparkLineColor_
                                                                                      )
                                                                                      .attr('stroke-width', e.sparkLineStrokeWidth_ + 'px')
                                                                                      .attr('opacity', e.sparkLineOpacity_)
                                                                                      .attr('fill-opacity', 0.3)
                                                                                      .attr('stroke', 'none')
                                                                                      .attr(
                                                                                          'd',
                                                                                          Tl()
                                                                                              .x(function (t, e) {
                                                                                                  return i(e)
                                                                                              })
                                                                                              .y0(o)
                                                                                              .y1(function (t) {
                                                                                                  return a(t.value)
                                                                                              })
                                                                                      )
                                                                                      .attr('transform', function (t) {
                                                                                          return 'translate(0,-'.concat(o / 2, ')')
                                                                                      }),
                                                                              t
                                                                                  .append('path')
                                                                                  .datum(r)
                                                                                  .attr('fill', 'none')
                                                                                  .attr('opacity', e.sparkLineOpacity_)
                                                                                  .attr(
                                                                                      'stroke',
                                                                                      yn(e.sparkLineColor_) == Function
                                                                                          ? function (t, n) {
                                                                                                return e.sparkLineColor_(t, n)
                                                                                            }
                                                                                          : e.sparkLineColor_
                                                                                  )
                                                                                  .attr('stroke-width', e.sparkLineStrokeWidth_ + 'px')
                                                                                  .attr(
                                                                                      'd',
                                                                                      wl()
                                                                                          .x(function (t, e) {
                                                                                              return i(e)
                                                                                          })
                                                                                          .y(function (t) {
                                                                                              return a(t.value)
                                                                                          })
                                                                                  )
                                                                                  .attr('transform', function (t) {
                                                                                      return 'translate(0,-'.concat(o / 2, ')')
                                                                                  }),
                                                                              t
                                                                                  .selectAll('myCircles')
                                                                                  .data(r)
                                                                                  .enter()
                                                                                  .append('circle')
                                                                                  .attr('fill', 'red')
                                                                                  .attr('stroke', 'none')
                                                                                  .attr('cx', function (t, e) {
                                                                                      return i(e)
                                                                                  })
                                                                                  .attr('cy', function (t) {
                                                                                      return a(t.value)
                                                                                  })
                                                                                  .attr('r', e.sparkLineCircleRadius_)
                                                                                  .attr('transform', function (t) {
                                                                                      return 'translate(0,-'.concat(o / 2, ')')
                                                                                  })
                                                                      })(i, a)
                                                              }),
                                                              e
                                                          )
                                                      })
                                                  var i = function (t) {
                                                      for (var r, i = 0, a = 0; a < n.length; a++) {
                                                          var o = n[a]
                                                          if (!(r = e.statData(o).get(t)) || (0 != r.value && !r.value) || isNaN(r.value)) {
                                                              if (e.showOnlyWhenComplete()) return
                                                          } else r.value > i && (i = r.value)
                                                      }
                                                      if (0 != i) return i
                                                  }
                                                  return (
                                                      (e.getLegendConstructor = function () {
                                                          return Ol
                                                      }),
                                                      (e.tooltip_.textFunction = function (t, i) {
                                                          var a = yt('#tooltip_eurostat')
                                                          a.html(''),
                                                              a.selectAll('*').remove(),
                                                              t.properties.id
                                                                  ? a
                                                                        .append('div')
                                                                        .html('<b>' + t.properties.na + '</b> (' + t.properties.id + ') <br>')
                                                                  : a.append('div').html('<b>' + t.properties.na + '</b><br>')
                                                          var o = e.sparkTooltipChart_.height,
                                                              s = e.sparkTooltipChart_.width,
                                                              l = e.sparkTooltipChart_.margin,
                                                              u = r(t.properties.id)
                                                          u &&
                                                              (function (t, r, i, a) {
                                                                  var o,
                                                                      s = Fs(
                                                                          r.map(function (t) {
                                                                              return t.value
                                                                          })
                                                                      ),
                                                                      l = un()
                                                                          .domain(s)
                                                                          .range([a - 0.5, 0]),
                                                                      u = un()
                                                                          .domain([n[0], n[n.length - 1]])
                                                                          .range([0.5, i - 0.5])
                                                                  t.append('g')
                                                                      .attr('class', 'axis')
                                                                      .attr('transform', 'translate(0,' + a + ')')
                                                                      .call(((o = u), Ns(3, o)).ticks(n.length).tickFormat(nn('.0f')))
                                                                      .selectAll('text')
                                                                      .style('text-anchor', 'end')
                                                                      .attr('dx', '-.8em')
                                                                      .attr('dy', '.15em')
                                                                      .attr('transform', 'rotate(-65)')
                                                                  var c = l.domain(),
                                                                      f = [c[0], ((c[0] + c[1]) / 2).toFixed(1), c[1]]
                                                                  t
                                                                      .append('g')
                                                                      .attr('class', 'axis')
                                                                      .call(
                                                                          (function (t) {
                                                                              return Ns(4, t)
                                                                          })(l)
                                                                              .tickValues(f)
                                                                              .tickFormat(nn(',.2r'))
                                                                      ),
                                                                      'area' == e.sparkType_ &&
                                                                          t
                                                                              .append('path')
                                                                              .datum(r)
                                                                              .attr(
                                                                                  'fill',
                                                                                  yn(e.sparkAreaColor_) == Function
                                                                                      ? function (t, n) {
                                                                                            return e.sparkAreaColor_(t, n)
                                                                                        }
                                                                                      : e.sparkAreaColor_
                                                                              )
                                                                              .attr(
                                                                                  'stroke',
                                                                                  yn(e.sparkLineColor_) == Function
                                                                                      ? function (t, n) {
                                                                                            return e.sparkLineColor_(t, n)
                                                                                        }
                                                                                      : e.sparkLineColor_
                                                                              )
                                                                              .attr('stroke-width', 1)
                                                                              .attr('opacity', e.sparkLineOpacity_)
                                                                              .attr('fill-opacity', 0.3)
                                                                              .attr('stroke', 'none')
                                                                              .attr('stroke', 'none')
                                                                              .attr(
                                                                                  'd',
                                                                                  Tl()
                                                                                      .x(function (t, e) {
                                                                                          return u(t.date)
                                                                                      })
                                                                                      .y0(a)
                                                                                      .y1(function (t) {
                                                                                          return l(t.value)
                                                                                      })
                                                                              ),
                                                                      t
                                                                          .append('path')
                                                                          .datum(r)
                                                                          .attr('fill', 'none')
                                                                          .attr(
                                                                              'stroke',
                                                                              yn(e.sparkLineColor_) == Function
                                                                                  ? function (t, n) {
                                                                                        return e.sparkLineColor_(t, n)
                                                                                    }
                                                                                  : e.sparkLineColor_
                                                                          )
                                                                          .attr('stroke-width', 1)
                                                                          .attr(
                                                                              'd',
                                                                              wl()
                                                                                  .x(function (t, e) {
                                                                                      return u(t.date)
                                                                                  })
                                                                                  .y(function (t) {
                                                                                      return l(t.value)
                                                                                  })
                                                                          ),
                                                                      t
                                                                          .selectAll('myCircles')
                                                                          .data(r)
                                                                          .enter()
                                                                          .append('circle')
                                                                          .attr('fill', 'red')
                                                                          .attr('stroke', 'none')
                                                                          .attr('cx', function (t, e) {
                                                                              return u(t.date)
                                                                          })
                                                                          .attr('cy', function (t) {
                                                                              return l(t.value)
                                                                          })
                                                                          .attr('r', e.sparkTooltipChart_.circleRadius)
                                                              })(
                                                                  a
                                                                      .append('svg')
                                                                      .attr('width', s + l.left + l.right)
                                                                      .attr('height', o + l.top + l.bottom)
                                                                      .append('g')
                                                                      .attr('transform', 'translate(' + l.left + ',' + l.top + ')'),
                                                                  u,
                                                                  s,
                                                                  o
                                                              )
                                                      }),
                                                      e
                                                  )
                                              })(e)
                                            : Ml(e, !0)
                        },
                        xu = function (t) {
                            ;(t = t || {}).shape = t.shape || 'circle'
                            var e = t.patternSize || 5,
                                n = t.minSize || 1,
                                r = t.maxSize || 5.5
                            return (
                                (t.bckColor = t.bckColor || 'white'),
                                (t.symbColor = t.symbColor || 'black'),
                                function (i, a) {
                                    i.selectAll('.estatmapPattern').remove()
                                    for (var o = 0; o < a; o++) {
                                        var s = n + ((r - n) * o) / (a - 1),
                                            l = i
                                                .append('pattern')
                                                .attr('class', 'estatmapPattern')
                                                .attr('id', 'pattern_' + o)
                                                .attr('x', '0')
                                                .attr('y', '0')
                                                .attr('width', e)
                                                .attr('height', e)
                                                .attr('patternUnits', 'userSpaceOnUse')
                                        l
                                            .append('rect')
                                            .attr('x', 0)
                                            .attr('y', 0)
                                            .attr('width', e)
                                            .attr('height', e)
                                            .style('stroke', 'none')
                                            .style('fill', t.bckColor),
                                            'square' == t.shape
                                                ? l
                                                      .append('rect')
                                                      .attr('x', 0)
                                                      .attr('y', 0)
                                                      .attr('width', s)
                                                      .attr('height', s)
                                                      .style('stroke', 'none')
                                                      .style('fill', t.symbColor)
                                                : l
                                                      .append('circle')
                                                      .attr('cx', 0.5 * e)
                                                      .attr('cy', 0.5 * e)
                                                      .attr('r', 0.5 * s)
                                                      .style('stroke', 'none')
                                                      .style('fill', t.symbColor)
                                    }
                                }
                            )
                        }
                    return e
                })()
            })
        </script>
        <script>
            let insetWidth = 80
            let insetHeight = 80
            let insetPadding = 5
            let startingThresholds = [-20, -25, -30, -35, -45]
            let sequential = ['#C6E5C6', '#A0D4A0', '#7CC27B', '#5AB259', '#309C30', '#177217']
            let diverging = ['#856B0D', '#C7B05F', '#ECE5CA', '#CEE9CE', '#6FBC6F', '#177217']
            const naceOptions = {
                TOTAL: {
                    title: 'All NACE activities',
                    source: 'TOTAL.csv',
                    class_breaks: [-20, -25, -30, -35, -45],
                    colour_scheme: {
                        type: 'sequential',
                        reversed: true,
                        scheme: 'estatC1 (Eurostat)',
                        colors: sequential,
                    },
                },
                A: {
                    title: 'Agriculture, forestry and fishing',
                    source: 'A.csv',
                    class_breaks: [20, 10, 0, -10, -20],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: diverging,
                    },
                },
                B: {
                    title: 'Mining and quarrying',
                    source: 'B.csv',
                    class_breaks: [60, 30, 0, -20, -40],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: diverging,
                    },
                },
                C: {
                    title: 'Manufacturing',
                    source: 'C.csv',
                    class_breaks: [-15, -20, -25, -30, -40],
                    colour_scheme: {
                        type: 'sequential',
                        reversed: true,
                        scheme: 'estatC1 (Eurostat)',
                        colors: sequential,
                    },
                },
                D: {
                    title: 'Electricity, gas, steam and air conditioning supply',
                    source: 'D.csv',
                    class_breaks: [35, 20, 0, -20, -40],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: diverging,
                    },
                },
                E: {
                    title: 'Water supply, sewerage, waste management and remediation activities',
                    source: 'E.csv',
                    class_breaks: [50, 25, 0, -25, -50],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: diverging,
                    },
                },
                F: {
                    title: 'Construction',
                    source: 'F.csv',
                    class_breaks: [50, 20, 0, -20, -40],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: diverging,
                    },
                },
                'G-U_X_H': {
                    title: 'Services (except transportation and storage)',
                    source: 'G-U_X_H.csv',
                    class_breaks: [0, -15, -25, -35, -45],
                    colour_scheme: {
                        type: 'diverging',
                        reversed: true,
                        scheme: 'estatAC (Eurostat)',
                        colors: ['#856B0D', '#DAE7CC', '#BCE0BB', '#83C582', '#4F9E4C', '#177217'],
                    },
                },
                H: {
                    title: 'Transportation and storage',
                    source: 'H.csv',
                    class_breaks: [50, 25, 0, -15, -30],
                    colour_scheme: { type: 'diverging', reversed: true, scheme: 'estatAC (Eurostat)', colors: diverging },
                },
            }
            let startingColors = sequential

            let mapConfig = {
                    width: 795,
                    height: 625,
                    frameStroke: '#FFFFFF',
                    frameStrokeWidth: 0,
                    pixSize: 6400,
                    nutsYear: 2021,
                    geoCenter: [479e4, 342e4],
                    nutsbnStrokeWidth: { 0: 0, 1: 0.2, 2: 0.2, 3: 0.2, oth: 0, co: 0 },
                    cntbnStrokeWidth: { eu: 0.5, efta: 0.5, cc: 0.5, oth: 0.5, co: 0.5 },
                    cntbnStroke: { eu: '#000', efta: '#000', cc: '#000', oth: '#000', co: '#7f7f7f' },
                    bordersToShow: ['efta', 'eu', 'oth', 'cc', 'co'],
                    insetBoxPosition: [545, 81],
                    nuts2jsonBaseURL: 'https://ec.europa.eu/eurostat/cache/GISCO/IMAGE/topojson/',
                    nutsbnStroke: { 0: '#000', 1: '#696969', 2: '#696969', 3: '#696969', co: 'none' },
                    insetScale: '01M',
                    noDataFillStyle: '#b2b2b2',
                    bottomText: null,
                    showSourceLink: !1,
                    legend: !1,
                    nutsrgSelFillSty: '#ffcc00',
                    classifMethod: 'threshold',
                    thresholds: [...startingThresholds.sort((a, b) => a - b)],
                    colors: [...startingColors].reverse(),
                    data: {
                        EU27_2020: -27.3,
                        BE: -24.4,
                        BG: -24.4,
                        CZ: -31,
                        DK: -31.1,
                        DE: -29.7,
                        EE: -49.9,
                        IE: -51.6,
                        EL: -28.6,
                        ES: -28.3,
                        FR: -22.4,
                        HR: -32.3,
                        IT: -22.4,
                        CY: -24.5,
                        LV: -28.1,
                        LT: -25.4,
                        LU: -20.5,
                        HU: -30.9,
                        MT: -67.4,
                        NL: -32.8,
                        AT: -18.4,
                        PL: -29.4,
                        PT: -25.9,
                        RO: -42.9,
                        SI: -34,
                        SK: -31.4,
                        FI: -33.8,
                        SE: -33.5,
                        IS: -16.1,
                        NO: -17.4,
                        CH: -30.2,
                    },
                    nutsLevel: 'mixed',
                    drawGraticule: !1,
                    graticuleStroke: '#cccccc',
                    graticuleStrokeWidth: 1,
                    seaFillStyle: '#FFFFFF',
                    cntrgFillStyle: '#E6E6E6',
                    nutsrgFillStyle: '#E6E6E6',
                    coastalMarginWidth: 0.5,
                    coastalMarginColor: '#c2daed',
                },
                map = eurostatmap
                    .map('choropleth')
                    .classifMethod(mapConfig.classifMethod)
                    .colors(mapConfig.colors)
                    .threshold(mapConfig.thresholds)
                    .tooltip({
                        textFunction: function (e, t) {
                            let a = []
                            a.push(
                                '<div class="em-tooltip-bar" style="background: #515560;color: #ffffff;padding: 6px;font-size:15px;">' +
                                    e.properties.na +
                                    ' (' +
                                    e.properties.id +
                                    ') </div>'
                            )
                            let i = t.statData().get(e.properties.id)
                            if (!i || (0 !== i.value && !i.value))
                                return (
                                    a.push(
                                        '\n            <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n            <table class="em-tooltip-table">\n            <tbody>\n            <tr>\n            <td>\n            No input added\n            </td>\n            </tr>\n            </tbody>\n            </table>\n            </div>\n        '
                                    ),
                                    a.join('')
                                )
                            if (':' === i.value)
                                return (
                                    a.push(
                                        `\n            <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n            <table class="em-tooltip-table">\n            <tbody>\n            <tr>\n            <td>\n            ${t.noDataText_}\n            </td>\n            </tr>\n            </tbody>\n            </table>\n            </div>\n        `
                                    ),
                                    a.join('')
                                )
                            let o = t.statData('default').unitText()
                            return (
                                a.push(
                                    `\n        <div class="em-tooltip-text" style="background: #ffffff;color: #171a22;padding: 4px;font-size:15px;">\n        <table class="em-tooltip-table">\n        <tbody>\n        <tr>\n        <td>\n        ${
                                        ((l = i.value), l.toLocaleString('en').replace(/,/gi, ' '))
                                    } ${o || ''}\n        </td>\n        </tr>\n        </tbody>\n        </table>\n        </div>\n        `
                                ),
                                a.join('')
                            )
                            var l
                        },
                    })
                    .svgId('digital-template-map')
                    .containerId('digital-template')
                    .width(mapConfig.width)
                    .height(mapConfig.height)
                    .fontFamily('Arial')
                    .frameStroke(mapConfig.frameStroke)
                    .frameStrokeWidth(mapConfig.frameStrokeWidth)
                    .drawGraticule(mapConfig.drawGraticule)
                    .graticuleStroke(mapConfig.graticuleStroke)
                    .graticuleStrokeWidth(mapConfig.graticuleStrokeWidth)
                    .seaFillStyle(mapConfig.seaFillStyle)
                    .cntrgFillStyle(mapConfig.cntrgFillStyle)
                    .nutsbnStroke(mapConfig.nutsbnStroke)
                    .nutsbnStrokeWidth(mapConfig.nutsbnStrokeWidth)
                    .cntbnStroke(mapConfig.cntbnStroke)
                    .cntbnStrokeWidth(mapConfig.cntbnStrokeWidth)
                    .insetScale(mapConfig.insetScale)
                    .noDataFillStyle(mapConfig.noDataFillStyle)
                    .bottomText(mapConfig.bottomText)
                    .showSourceLink(mapConfig.showSourceLink)
                    .nutsrgFillStyle(mapConfig.nutsrgFillStyle)
                    .nutsrgSelFillSty(mapConfig.nutsrgSelFillSty)
                    .legend(mapConfig.legend)
                    .nutsLevel(0)
                    .geoCenter([479e4, 342e4])
                    .nutsYear('2021')
                    .pixSize(6400)
                    .insetBoxPosition([530, 130])
                    .insets([
                        {
                            geo: 'LI',
                            x: insetWidth + insetPadding,
                            y: 0,
                            width: insetWidth,
                            height: insetHeight,
                            title: 'Liechtenstein',
                            titleFill: 'white',
                            titleStroke: 'white',
                            titleStrokeWidth: '2px',
                            titleFontSize: 13,
                            titleFontWeight: 'normal',
                            subtitle: 'Liechtenstein',
                            subtitlePosition: [2, 13],
                            subtitleFill: 'black',
                            subtitleFontWeight: 'normal',
                            subtitleFontSize: 13,
                            geoCenter: [4285060, 2674000],
                            scale: '01M',
                            scalebarPosition: [1, 75],
                            frameStroke: 'grey',
                            frameStrokeWidth: 1,
                            titlePosition: [2, 13],
                        },
                        {
                            geo: 'MT',
                            x: 0,
                            y: 0,
                            width: insetWidth,
                            height: insetHeight,
                            title: 'Malta',
                            titleFill: 'black',
                            titleFontSize: 13,
                            titleFontWeight: 'normal',
                            scalebarPosition: [1, 75],
                            frameStroke: 'grey',
                            frameStrokeWidth: 1,

                            titlePosition: [2, 13],
                        },
                    ])
                    .bordersToShow(['efta', 'eu', 'oth', 'cc', 'co'])
                    .countriesToShow([
                        'AL',
                        'AT',
                        'BE',
                        'BG',
                        'CH',
                        'CY',
                        'CZ',
                        'DE',
                        'DK',
                        'EE',
                        'EL',
                        'ES',
                        'FI',
                        'FR',
                        'HR',
                        'HU',
                        'IE',
                        'IS',
                        'IT',
                        'LI',
                        'LT',
                        'LU',
                        'LV',
                        'ME',
                        'MK',
                        'MT',
                        'NL',
                        'NO',
                        'PL',
                        'PT',
                        'RO',
                        'RS',
                        'SE',
                        'SI',
                        'SK',
                        'TR',
                        'UK',
                        'AD',
                        'JE',
                        'VA',
                        'SM',
                        'UA',
                        'RU',
                        'KZ',
                        'GE',
                        'AZ',
                        'SY',
                        'LB',
                        'IL',
                        'BA',
                        'JO',
                        'BY',
                        'XK',
                        'MD',
                        'FO',
                        'IM',
                    ])
                    .scale('10M')
                    .nuts2jsonBaseURL('https://ec.europa.eu/eurostat/cache/GISCO/IMAGE/topojson/')
                    .transitionDuration(0)
            map.statData().setData(mapConfig.data), map.build()

            //START EXTRA CODE

            // Get the custom select trigger and options wrapper
            const customSelectTrigger = document.querySelector('.select-trigger')
            const customOptionsWrapper = document.querySelector('.custom-options')
            const naceSelectWrapper = document.getElementById('naceSelectWrapper')
            let currentIndex = 0

            // Populate the custom select dropdown dynamically
            Object.keys(naceOptions).forEach((key, index) => {
                const option = document.createElement('li')
                option.classList.add('custom-option')
                option.setAttribute('data-value', key)
                option.textContent = naceOptions[key].title
                option.setAttribute('data-index', index) // Store index in the option
                customOptionsWrapper.appendChild(option)
            })

            // Track if dropdown navigation is active
            let dropdownActive = false
            let options = Array.from(customOptionsWrapper.querySelectorAll('.custom-option'))
            let activeOptionIndex = options.findIndex((option) => option.classList.contains('selected'))

            // Function to highlight the option
            function highlightOption(index) {
                options.forEach((option) => option.classList.remove('selected'))
                options[index].classList.add('selected')
                customSelectTrigger.textContent = options[index].textContent
                activeOptionIndex = index
            }

            // Select the first item by default
            highlightOption(0)

            // Event listener for arrow keys and enter
            document.addEventListener('keydown', function (event) {
                if (dropdownActive || event.key === 'ArrowDown' || event.key === 'ArrowUp') {
                    if (event.key === 'ArrowDown' && activeOptionIndex < options.length - 1) {
                        highlightOption(activeOptionIndex + 1)
                        options[activeOptionIndex].click() // Simulate click on the selected option
                    } else if (event.key === 'ArrowUp' && activeOptionIndex > 0) {
                        highlightOption(activeOptionIndex - 1)
                        options[activeOptionIndex].click() // Simulate click on the selected option
                    } else if (event.key === 'Enter') {
                        options[activeOptionIndex].click() // Simulate click on the selected option
                        dropdownActive = false // After selection, stop active arrow navigation
                    }
                    event.preventDefault() // Prevent default behavior
                }
            })

            // Add event listener to open the dropdown when clicking
            naceSelectWrapper.addEventListener('click', function () {
                customOptionsWrapper.classList.toggle('open')
                dropdownActive = true // Activate arrow key navigation when dropdown is open
            })

            // Add event listener to set dropdownActive to true after selecting an option
            customOptionsWrapper.addEventListener('click', function () {
                dropdownActive = true // Keep arrow key navigation active after selection
            })

            // Close the dropdown and disable arrow key navigation when clicking outside
            document.addEventListener('click', function (event) {
                const isClickInside = naceSelectWrapper.contains(event.target) || customOptionsWrapper.contains(event.target)
                if (!isClickInside) {
                    dropdownActive = false // Disable arrow key navigation
                    customOptionsWrapper.classList.remove('open') // Close dropdown
                }
            })

            // Add event listener to handle selection and fetch data
            customOptionsWrapper.addEventListener('click', function (event) {
                const clickedOption = event.target

                // Update the activeOptionIndex to the clicked option's index
                activeOptionIndex = options.indexOf(clickedOption)

                // Remove 'selected' class from all options
                options.forEach((option) => option.classList.remove('selected'))

                // Add 'selected' class to the clicked option (for blue background and white text)
                clickedOption.classList.add('selected')

                // Update the select trigger text and title with the selected option title
                const selectedValue = clickedOption.getAttribute('data-value')
                customSelectTrigger.textContent = naceOptions[selectedValue].title
                naceSelectWrapper.title = naceOptions[selectedValue].title

                // Close the dropdown
                customOptionsWrapper.classList.remove('open')

                // Fetch the corresponding CSV, convert to JSON, and update the map (placeholder)
                fetchCSVandConvertToJSON(selectedValue) // Replace with actual implementation

                event.stopPropagation()
            })

            // Close the dropdown when clicking outside
            document.addEventListener('click', function (event) {
                const isClickInside = naceSelectWrapper.contains(event.target) || customOptionsWrapper.contains(event.target)
                if (!isClickInside) {
                    customOptionsWrapper.classList.remove('open')
                }
            })
            // Function to fetch the CSV, convert it to JSON, and apply to the map with additional properties
            async function fetchCSVandConvertToJSON(selectedOption) {
                try {
                    const response = await fetch(`./csv/map1/${naceOptions[selectedOption].source}`)
                    if (!response.ok) throw new Error(`Failed to fetch ${naceOptions[selectedOption].source}`)

                    const csvText = await response.text()
                    const jsonData = csvToJson(csvText)

                    let selected = naceOptions[selectedOption]
                    let colors = selected.colour_scheme.colors
                    let thresholds = [...selected.class_breaks.sort((a, b) => a - b)]

                    // update the map data and refresh
                    console.log(jsonData, colors, thresholds)
                    map.statData().setData(jsonData)
                    map.colors([...colors].reverse()).threshold(thresholds)
                    //update legend
                    updateLegend(colors, selected.class_breaks)
                    // update map classification
                    map.updateStatValues()
                    // Re-enable mouse events
                    setTimeout(() => {
                        // in case the user has the cursor over a region when they select an option
                        document.body.style.pointerEvents = 'auto'
                    }, 300)

                    // add legend hover functionality
                    addLegendHover()
                } catch (error) {
                    document.body.style.pointerEvents = 'auto'
                    console.error('Error:', error)
                }
            }

            // CSV to JSON conversion function
            function csvToJson(csv) {
                const lines = csv.trim().split('\n')
                const jsonResult = {}
                lines.forEach((line) => {
                    const [key, value] = line.split(';')
                    if (value == ':' || value == ':\r') {
                        jsonResult[key] = ':'
                    } else {
                        jsonResult[key] = Number(value)
                    }
                })
                return jsonResult
            }

            //update legend
            updateLegend(startingColors, startingThresholds)
            function updateLegend(colour_scheme, class_breaks) {
                let cb = [...class_breaks.reverse()]
                // Select all <rect> elements and update their fill colors
                const rects = document.querySelectorAll('#legend rect')
                rects.forEach((rect, index) => {
                    if (colour_scheme[index]) {
                        rect.setAttribute('fill', colour_scheme[index])
                    }
                })

                // Select all <text> elements and update their content based on class_breaks
                const texts = document.querySelectorAll('#legend text')
                texts.forEach((text, index) => {
                    if (index === 0) {
                        // For the first element, use ≥ condition
                        text.textContent = `≥ ${cb[index]}`
                    } else if (index === cb.length) {
                        // For the last element, use < condition
                        text.textContent = `< ${cb[index - 1]}`
                    } else {
                        // For the others, create the range
                        text.textContent = `${cb[index]} – < ${cb[index - 1]}`
                    }
                })
            }

            // FIN EXTRA CODE
            addLegendHover()
            function addLegendHover() {
                let legend = document.getElementById('legend')
                if (legend.childNodes) {
                    let e = 0,
                        t = 0

                    legend.childNodes.forEach((a, i) => {
                        if (a.tagName === 'rect' || a.tagName === 'text') {
                            // Remove existing event listeners before adding new ones
                            a.removeEventListener('mouseover', onMouseoverLegendItem)
                            a.removeEventListener('mouseout', onMouseoutLegendItem)
                        }

                        if (a.tagName === 'rect') {
                            a.classNumber = e
                            a.addEventListener('mouseover', onMouseoverLegendItem)
                            a.addEventListener('mouseout', onMouseoutLegendItem)
                            e++
                        } else if (a.tagName === 'text') {
                            a.classNumber = t
                            a.addEventListener('mouseover', onMouseoverLegendItem)
                            a.addEventListener('mouseout', onMouseoutLegendItem)
                            t++
                        }
                    })
                }
            }

            function onMouseoverLegendItem(e) {
                let t = e.currentTarget.classNumber
                'rect' === e.currentTarget.tagName.toLowerCase() && (e.currentTarget.style.strokeWidth = 2)
                let a = 'nd' !== t ? mapConfig.colors.length - 1 - t : t
                highlightRegions(document.querySelector('#digital-template-map'), a)
            }
            function onMouseoutLegendItem(e) {
                let t = e.currentTarget.classNumber
                'rect' === e.currentTarget.tagName.toLowerCase() && (e.currentTarget.style.strokeWidth = 0.4)
                let a = 'nd' !== t ? mapConfig.colors.length - 1 - t : t
                unhighlightRegions(document.querySelector('#digital-template-map'), a)
            }
            function highlightRegions(mapElement, targetClass) {
                const regionsGroup = mapElement.querySelectorAll('#g_nutsrg')
                for (const regionGroup of Object.keys(regionsGroup)) {
                    const regions = regionsGroup[regionGroup].querySelectorAll('[ecl]')
                    for (const regionIndex of Object.keys(regions)) {
                        let region = regions[regionIndex]
                        let regionClass = region.getAttribute('ecl')
                        regionClass && (regionClass = parseInt(regionClass))

                        // If the region's class doesn't match the target class, set its color to a neutral one
                        if (regionClass !== targetClass) {
                            region.setAttribute('fill', '#E6E6E6') // Neutral color when not highlighted
                        }
                    }
                }
            }

            function unhighlightRegions(mapElement, targetClass) {
                const regionsGroup = mapElement.querySelectorAll('#g_nutsrg')
                for (const regionGroup of Object.keys(regionsGroup)) {
                    const regions = regionsGroup[regionGroup].querySelectorAll('[ecl]')
                    for (const regionIndex of Object.keys(regions)) {
                        let region = regions[regionIndex]
                        let regionClass = region.getAttribute('ecl')
                        regionClass && (regionClass = parseInt(regionClass))

                        // Restore the region's color from the map.colors_ array using the ecl attribute
                        if (regionClass !== targetClass && map.colors_[regionClass] !== undefined) {
                            region.setAttribute('fill', map.colors_[regionClass]) // Restore original color from map.colors_
                        }
                    }
                }
            }
        </script>
    </body>
</html>
