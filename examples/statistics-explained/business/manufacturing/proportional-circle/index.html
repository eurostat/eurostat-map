<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manufacturing proportional circle map</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div id="container">
        <div class="map-title">Manufacturing sector by region, 2023</div>
        <div id="dropdown-container">
            <div id="dropdown-label">Select a variable:</div>
            <ewc-singleselect id="mySelect" options='[
    [
    { "name": "Local units", "code": "LOC_NR", "status": "active" },
    { "name": "Persons employed in local units", "code": "EMP_LOC_NR", "status": "active" },
    { "name": "Wages and salaries in local units", "code":"WAGE_LOC_MEUR", "status": "active"}
    ]
  ]' defaultOption="LOC_NR" activeOption="LOC_NR" dropdownHeight="200px" selectedLabel="Select below"
                invertColors="false" searchMode=""></ewc-singleselect>
        </div>
        <div id="map-container">
            <svg id="map" viewBox="0 0 700 560" ></svg>
        </div>

    </div>

    <script src="../../../eurostatmap.min.js"></script>
    <script type="module" src="./dropdown/dropdown.js"></script>
    <script type="module" src="./ps-map.js"></script>

    <script type="module">
        import { showSpinner, hideSpinner } from '../spinner.js'
        // Keep original fetch
        const originalFetch = window.fetch

        // Override globally
        let isLoading = false
        window.fetch = async (...args) => {
            isLoading = true
            showSpinner()

            try {
                const res = await originalFetch(...args)
                return res
            } finally {
                isLoading = false
                hideSpinner()
            }
        }
    </script>
</body>

</html>