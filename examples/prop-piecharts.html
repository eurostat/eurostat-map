<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>eurostat-map.js</title>
    </head>

    <body>
        <svg id="map"></svg>
        <script src="https://unpkg.com/eurostat-map"></script>

        <script>
            // CAUSES OF DEATH

            const stats = {
                cancer: {
                    HU2: 321.07,
                    PT2: 313.49,
                    HU3: 311.17,
                    RS1: 308.11,
                    HR0: 308.1,
                    HU1: 295.67,
                    LV0: 283.6,
                    SI0: 276.74,
                    SK0: 273.86,
                    DE8: 272.56,
                    PL6: 272.47,
                    DK0: 270.49,
                    PL4: 270.46,
                    DEE: 269.47,
                    PL2: 268.83,
                    PT3: 267.42,
                    EE0: 265.76,
                    NL1: 263.51,
                    PL5: 262.54,
                    DEC: 260.7,
                    LT0: 259.29,
                    DEF: 258.55,
                    NL2: 257.92,
                    NL4: 257.22,
                    CZ0: 256.8,
                    PL7: 254.98,
                    RO2: 254.55,
                    NL3: 251.94,
                    DE6: 250.82,
                    FRE: 250.8,
                    EL3: 248.39,
                    IE0: 247.88,
                    FRD: 247.85,
                    DEA: 247.35,
                    PL9: 247.1,
                    DE4: 246.39,
                    RS2: 245.64,
                    RO1: 245.53,
                    DE5: 242.29,
                    BE3: 242.22,
                    DE9: 242.2,
                    RO3: 239.62,
                    DEB: 239.58,
                    EL5: 239.51,
                    DE3: 238.43,
                    FRB: 236.12,
                    AT1: 235.41,
                    BG3: 234.72,
                    PL8: 234.68,
                    FRH: 234.39,
                    FRF: 234.25,
                    DEG: 232.91,
                    EL6: 231.28,
                    FRG: 228.92,
                    DED: 228.77,
                    FRI: 228.15,
                    ITG: 227.27,
                    DE7: 227.14,
                    ITC: 226.79,
                    RO4: 225.94,
                    ES1: 225.58,
                    EL4: 224.21,
                    PT1: 223.28,
                    BG4: 222.68,
                    ITI: 222.63,
                    ES6: 222.35,
                    FRC: 221.53,
                    ES2: 221.38,
                    AT2: 220.32,
                    FRJ: 220.11,
                    NO0: 219.44,
                    FI2: 218.86,
                    ITF: 218.14,
                    DE2: 217.41,
                    IS0: 217.02,
                    ES4: 215.32,
                    FRL: 215.29,
                    FRM: 214.48,
                    AT3: 213.46,
                    CY0: 213.15,
                    ITH: 211.64,
                    FRK: 211.58,
                    ES5: 211.55,
                    DE1: 209.82,
                    FI1: 209.76,
                    BE2: 209.6,
                    BE1: 208.61,
                    ES7: 208.14,
                    SE1: 207.49,
                    SE3: 207.03,
                    SE2: 205.18,
                    LU0: 203.42,
                    MT0: 198.27,
                    FR1: 194.74,
                    FRY: 193.54,
                    TRA: 193.01,
                    CH0: 191.52,
                    TR1: 186.68,
                    ES3: 185.25,
                    TR4: 184.28,
                    TR2: 182.32,
                    LI0: 181.34,
                    TR5: 172.53,
                    TRB: 166.67,
                    TR7: 157.67,
                    TR3: 157.47,
                    TR9: 151.06,
                    TR8: 151.02,
                    TR6: 139.77,
                    TRC: 122.21,
                },
                circulatory: {
                    BG3: 1247.56,
                    BG4: 1171.21,
                    RO4: 1041.7,
                    RO3: 1025.91,
                    RO2: 1006.77,
                    RO1: 942.27,
                    RS2: 922.76,
                    LV0: 859.46,
                    RS1: 843.17,
                    LT0: 802.43,
                    HU3: 781.85,
                    HU2: 726.36,
                    HU1: 644.12,
                    SK0: 638.65,
                    PL5: 626.22,
                    HR0: 600.53,
                    EE0: 599.43,
                    TR2: 582.75,
                    PL8: 581.66,
                    PL2: 553.96,
                    PL6: 535.35,
                    PL4: 531.3,
                    CZ0: 524.99,
                    TRC: 523.5,
                    TR4: 520.36,
                    TR3: 513.02,
                    PL7: 509.45,
                    TR8: 500.24,
                    TR6: 496.87,
                    TR7: 473.38,
                    TRB: 468.88,
                    TRA: 467.32,
                    PL9: 453.81,
                    TR5: 443.68,
                    DEG: 440.92,
                    DEE: 439.56,
                    TR9: 421.92,
                    DE8: 402.1,
                    DED: 400.96,
                    TR1: 393.5,
                    DE4: 375.92,
                    DE9: 367.47,
                    EL5: 365.39,
                    AT1: 362.59,
                    DEB: 360.54,
                    SI0: 357.22,
                    DEC: 352.17,
                    DE7: 348.84,
                    DE5: 348.2,
                    DE2: 345.64,
                    DEF: 343.67,
                    EL3: 337.28,
                    AT2: 336.14,
                    PT3: 335.77,
                    PT2: 335.28,
                    EL6: 330.75,
                    ITF: 323.24,
                    DE1: 321.15,
                    AT3: 320.26,
                    DE3: 307.69,
                    FI1: 303.85,
                    ITG: 301.54,
                    DEA: 300.01,
                    EL4: 290.23,
                    SE3: 286.95,
                    CY0: 280.83,
                    ES6: 273.02,
                    MT0: 271.79,
                    LI0: 266.61,
                    DE6: 266.58,
                    SE2: 259.15,
                    ITI: 258.9,
                    FI2: 252.99,
                    IS0: 252.44,
                    IE0: 247.86,
                    PT1: 244.26,
                    BE3: 242.41,
                    ITC: 241.58,
                    SE1: 236.5,
                    NL1: 236.39,
                    ITH: 235.2,
                    ES7: 232.94,
                    NL2: 232.33,
                    NL4: 219.67,
                    CH0: 219.37,
                    ES1: 214.27,
                    LU0: 213.17,
                    DK0: 211.29,
                    ES5: 209.49,
                    NL3: 207.69,
                    NO0: 207.44,
                    BE2: 204.48,
                    ES4: 204.01,
                    BE1: 202.9,
                    FRY: 197.22,
                    FRE: 193.36,
                    ES2: 192.89,
                    FRD: 191.1,
                    FRH: 184.39,
                    FRF: 179.5,
                    FRB: 177.63,
                    FRC: 175.64,
                    FRI: 173.33,
                    FRG: 171.5,
                    FRM: 167.2,
                    FRJ: 166.4,
                    FRK: 158.71,
                    ES3: 157.73,
                    FRL: 153.67,
                    FR1: 140.85,
                },
                respiratory: {
                    TR7: 231.81,
                    TR3: 205.75,
                    TR4: 201.73,
                    TRA: 200.62,
                    TRB: 199.76,
                    TR1: 193.99,
                    TRC: 192.31,
                    TR8: 189.52,
                    TR6: 188.49,
                    TR2: 187.42,
                    PT3: 179.58,
                    RO4: 179.45,
                    TR9: 167.13,
                    SK0: 157.51,
                    TR5: 155.73,
                    RO1: 129.98,
                    RO2: 125.08,
                    RS2: 120.09,
                    PT2: 119.54,
                    BG3: 113.88,
                    EL3: 104.15,
                    DK0: 104.11,
                    MT0: 101.37,
                    RO3: 99.37,
                    EL6: 96.62,
                    PL9: 94.97,
                    PL6: 94.63,
                    EL4: 93.56,
                    BE3: 92.72,
                    ES7: 92.25,
                    RS1: 91.79,
                    PL7: 91.63,
                    PL5: 87.3,
                    IE0: 86.65,
                    CY0: 80.71,
                    CZ0: 78.97,
                    EL5: 78.66,
                    PL4: 78.56,
                    HU3: 78.18,
                    PT1: 78.02,
                    PL8: 77.75,
                    BG4: 76.38,
                    BE1: 74.94,
                    NO0: 74.7,
                    DEG: 71.77,
                    ES6: 71.25,
                    ES3: 70.89,
                    DE9: 70.04,
                    DE6: 69.28,
                    IS0: 68.75,
                    DEC: 67.62,
                    BE2: 67.37,
                    HU2: 66.65,
                    NL4: 65.08,
                    HU1: 64.18,
                    DE3: 63.97,
                    PL2: 63.62,
                    NL2: 63.49,
                    ITF: 63.07,
                    ES4: 62.48,
                    DEA: 62.44,
                    DEF: 62.38,
                    DEB: 61.48,
                    HR0: 61.4,
                    ES1: 60.87,
                    LU0: 60.8,
                    ITG: 59.93,
                    DE5: 59.66,
                    ES5: 58.96,
                    DE7: 58.86,
                    NL1: 58.06,
                    ITI: 57.94,
                    DE4: 57.15,
                    NL3: 56.33,
                    FRE: 55.82,
                    DE2: 52.19,
                    FRF: 51.64,
                    DE8: 51.37,
                    ITC: 51.3,
                    SE3: 49.63,
                    ITH: 49.49,
                    ES2: 49.06,
                    DE1: 49.03,
                    FRH: 48.93,
                    DEE: 48.76,
                    FRY: 48.34,
                    FRD: 47.8,
                    AT1: 46.79,
                    FRL: 46.4,
                    SE2: 46.37,
                    SE1: 45.45,
                    FRJ: 45.08,
                    DED: 44.43,
                    FRB: 44.29,
                    FRI: 44.27,
                    EE0: 44.15,
                    AT3: 42.83,
                    FRC: 41.93,
                    FRG: 41.42,
                    FR1: 41.02,
                    CH0: 40.75,
                    AT2: 40.48,
                    FRK: 39.86,
                    LV0: 39.03,
                    FRM: 38.69,
                    LT0: 36.25,
                    FI2: 31.2,
                    SI0: 31.12,
                    FI1: 27.68,
                    LI0: 23.57,
                },
            }
            const ourMap = eurostatmap
                .map('pie')
                .nutsLevel(1)
                .width(800)
                .catLabels({
                    cancer: 'cancer',
                    circulatory: 'circulatory',
                    respiratory: 'respiratory',
                })
                .pieOtherColor('#FFCC80')
                .pieOtherText('Other')
                .pieMinRadius(6)
                //.title('Most common causes of death')
                //.subtitle('Death rate (pie size) and cause of death (color), 2016')
                .legend({
                    x: 530,
                    y: 100,
                    boxOpacity: 0,
                    boxFill: 'white',
                    titleFontWeight: 'bold',
                    sizeLegend: {
                        title: 'Death rate per 100 000 inh.',
                        values: [700, 1600],
                    },
                    colorLegend: {
                        title: 'Cause of death',
                    },
                })

            //add our own stat data objects
            for (let k in stats) {
                let statObject = {
                    code: k,
                    unitText: 'death rate per 100 000',
                }

                ourMap.stat(k, statObject) // adds 'stat' object to map.statData_ during build
            }
            ourMap.statCodes_ = ['cancer', 'circulatory', 'respiratory'] //set stat codes to show on map
            ourMap.build()

            // update our stat data after build
            for (let key in ourMap.statData_) {
                if (stats[key]) {
                    // fix this
                    ourMap.statData_[key].setData({ ...stats[key] })
                }
            }

            ourMap.updateStatValues()
        </script>
    </body>
</html>
